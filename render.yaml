# ConfiguraÃ§Ã£o Recomendada para Cred30 no Render
# Caso vocÃª use "Render Blueprints", este arquivo garante a atualizaÃ§Ã£o do PWA.

services:
  - type: web
    name: cred30-frontend
    runtime: static
    buildCommand: npm install && npm run build
    publishPath: packages/frontend-v2/dist
    routes:
      # ğŸ›¡ï¸ REGRA CRÃTICA: Nunca cachear o Service Worker
      - type: rewrite
        source: /sw.js
        destination: /sw.js
        headers:
          - key: Cache-Control
            value: no-cache, no-store, must-revalidate
            
      # ğŸ›¡ï¸ REGRA CRÃTICA: Nunca cachear o manifest
      - type: rewrite
        source: /manifest.webmanifest
        destination: /manifest.webmanifest
        headers:
          - key: Cache-Control
            value: no-cache, no-store, must-revalidate

      # SPA Routing: Redireciona tudo para o index.html
      - type: rewrite
        source: /*
        destination: /index.html
