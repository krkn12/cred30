[{"filePath":"C:\\Users\\josia\\Desktop\\projetos\\cred30\\packages\\frontend-v2\\src\\application\\services\\api.service.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","message":"Definition for rule '@typescript-eslint/no-unused-vars' was not found.","line":1,"column":1,"endLine":1,"endColumn":2,"severity":2,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// URL base da API - detecta se est├í acessando via ngrok\r\nconst getApiBaseUrl = () => {\r\n  const currentUrl = window.location.origin;\r\n  if (currentUrl.includes('ngrok-free.app')) {\r\n    // Se estiver acessando via ngrok, usa a mesma URL base para a API\r\n    return currentUrl + '/api';\r\n  }\r\n  return (import.meta as any).env.VITE_API_URL || '/api';\r\n};\r\n\r\nconst API_BASE_URL = getApiBaseUrl();\r\n\r\n// Tipos para respostas da API\r\ninterface ApiResponse<T> {\r\n  success: boolean;\r\n  message: string;\r\n  data?: T;\r\n  errors?: any[];\r\n}\r\n\r\ninterface AuthResponse {\r\n  user: {\r\n    id: string;\r\n    name: string;\r\n    email: string;\r\n    pixKey: string;\r\n    balance: number;\r\n    joinedAt: number;\r\n    referralCode: string;\r\n    isAdmin?: boolean;\r\n  };\r\n  token: string;\r\n}\r\n\r\n// Classe para gerenciar requisi├º├Áes ├á API\r\nclass ApiService {\r\n  private token: string | null = null;\r\n\r\n  constructor() {\r\n    // Recuperar token do localStorage ao inicializar\r\n    this.token = localStorage.getItem('authToken');\r\n  }\r\n\r\n  // Verificar se o usu├írio est├í autenticado\r\n  isAuthenticated(): boolean {\r\n    return !!this.token;\r\n  }\r\n\r\n  // M├®todo privado para obter headers comuns\r\n  private getHeaders() {\r\n    const headers: Record<string, string> = {\r\n      'Content-Type': 'application/json',\r\n    };\r\n\r\n    if (this.token) {\r\n      headers['Authorization'] = `Bearer ${this.token}`;\r\n    }\r\n\r\n    return headers;\r\n  }\r\n\r\n  // M├®todo privado para fazer requisi├º├Áes\r\n  private async request<T>(\r\n    endpoint: string,\r\n    options: RequestInit = {}\r\n  ): Promise<ApiResponse<T>> {\r\n    const url = `${API_BASE_URL}${endpoint}`;\r\n    const config: RequestInit = {\r\n      headers: this.getHeaders(),\r\n      ...options,\r\n    };\r\n\r\n    try {\r\n      console.log('[API] Making request to:', url, 'Method:', config.method || 'GET');\r\n      const response = await fetch(url, config);\r\n\r\n      // Tentar fazer parse do JSON apenas se o content-type for application/json\r\n      let data;\r\n      const contentType = response.headers.get('content-type');\r\n      if (contentType && contentType.includes('application/json')) {\r\n        data = await response.json();\r\n      } else {\r\n        // Se n├úo for JSON, tentar obter como texto\r\n        const text = await response.text();\r\n        try {\r\n          // Tentar fazer parse do texto como JSON (fallback)\r\n          data = JSON.parse(text);\r\n        } catch {\r\n          // Se n├úo for JSON, criar um objeto de erro padr├úo\r\n          data = { message: text || 'Erro na requisi├º├úo' };\r\n        }\r\n      }\r\n\r\n      if (!response.ok) {\r\n        // Se for erro 401 (N├úo autorizado), limpar token e redirecionar para login\r\n        // Se for erro 404 (N├úo encontrado) NA ROTA DE PERFIL ou BALANCE, significa que o usu├írio do token foi deletado\r\n        if (response.status === 401 || (response.status === 404 && (endpoint === '/users/profile' || endpoint === '/users/balance'))) {\r\n          console.log(`Erro ${response.status} detectado em ${endpoint}. For├ºando logout.`);\r\n          this.token = null;\r\n          localStorage.removeItem('authToken');\r\n          // Disparar evento para notificar o app sobre o logout\r\n          window.dispatchEvent(new CustomEvent('auth-expired'));\r\n        }\r\n        // Lan├ºar um erro que contenha as informa├º├Áes extras da resposta (ex: requiresVerification)\r\n        const error: any = new Error(data.message || 'Erro na requisi├º├úo');\r\n        Object.assign(error, data);\r\n        throw error;\r\n      }\r\n\r\n      return data;\r\n    } catch (error: any) {\r\n      if (error.name === 'TypeError' && !navigator.onLine) {\r\n        error.message = 'Sua conex├úo com a internet caiu. O App exibir├í dados salvos quando poss├¡vel.';\r\n      }\r\n      console.error('Erro na requisi├º├úo:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  // M├®todo gen├®rico para POST\r\n  async post<T>(endpoint: string, body: any): Promise<ApiResponse<T>> {\r\n    return this.request<T>(endpoint, {\r\n      method: 'POST',\r\n      body: JSON.stringify(body),\r\n    });\r\n  }\r\n\r\n  // M├®todo gen├®rico para GET\r\n  async get<T>(endpoint: string): Promise<ApiResponse<T>> {\r\n    return this.request<T>(endpoint, {\r\n      method: 'GET',\r\n    });\r\n  }\r\n\r\n  // M├®todo gen├®rico para PUT\r\n  async put<T>(endpoint: string, body: any): Promise<ApiResponse<T>> {\r\n    return this.request<T>(endpoint, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(body),\r\n    });\r\n  }\r\n\r\n  // M├®todo gen├®rico para DELETE\r\n  async delete<T>(endpoint: string): Promise<ApiResponse<T>> {\r\n    return this.request<T>(endpoint, {\r\n      method: 'DELETE',\r\n    });\r\n  }\r\n\r\n  // M├®todo gen├®rico para PATCH\r\n  async patch<T>(endpoint: string, body: any): Promise<ApiResponse<T>> {\r\n    return this.request<T>(endpoint, {\r\n      method: 'PATCH',\r\n      body: JSON.stringify(body),\r\n    });\r\n  }\r\n\r\n  // M├®todo para login\r\n  async login(email: string, password: string, secretPhrase?: string, twoFactorCode?: string): Promise<AuthResponse & { requires2FA?: boolean }> {\r\n    const response = await this.request<AuthResponse & { requires2FA?: boolean }>('/auth/login', {\r\n      method: 'POST',\r\n      body: JSON.stringify({ email, password, secretPhrase, twoFactorCode }),\r\n    });\r\n\r\n    if (response.data?.requires2FA) {\r\n      return response.data;\r\n    }\r\n\r\n    // Armazenar token\r\n    this.token = response.data?.token || null;\r\n    if (this.token) {\r\n      localStorage.setItem('authToken', this.token);\r\n    }\r\n\r\n    return response.data!;\r\n  }\r\n\r\n  // M├®todo para registro\r\n  async register(\r\n    name: string,\r\n    email: string,\r\n    password: string,\r\n    secretPhrase: string,\r\n    pixKey: string,\r\n    referralCode?: string,\r\n    cpf?: string\r\n  ): Promise<AuthResponse & { twoFactor?: { secret: string, qrCode: string, otpUri: string } }> {\r\n    const requestBody: any = { name, email, password, secretPhrase, pixKey };\r\n    if (referralCode && referralCode.trim() !== '') {\r\n      requestBody.referralCode = referralCode;\r\n    }\r\n    if (cpf && cpf.trim() !== '') {\r\n      requestBody.cpf = cpf.replace(/\\D/g, ''); // Apenas n├║meros\r\n    }\r\n\r\n    const response = await this.request<AuthResponse & { twoFactor?: { secret: string, qrCode: string, otpUri: string } }>('/auth/register', {\r\n      method: 'POST',\r\n      body: JSON.stringify(requestBody),\r\n    });\r\n\r\n    // Armazenar token\r\n    this.token = response.data?.token || null;\r\n    if (this.token) {\r\n      localStorage.setItem('authToken', this.token);\r\n    }\r\n\r\n    return response.data!;\r\n  }\r\n\r\n  // Obter dados de configura├º├úo 2FA\r\n  async get2FASetup(): Promise<any> {\r\n    const response = await this.request<any>('/auth/2fa/setup');\r\n    return response.data;\r\n  }\r\n\r\n  // M├®todo para reset de senha\r\n  async resetPassword(email: string, secretPhrase: string, newPassword: string): Promise<void> {\r\n    await this.request<void>('/auth/reset-password', {\r\n      method: 'POST',\r\n      body: JSON.stringify({ email, secretPhrase, newPassword }),\r\n    });\r\n  }\r\n\r\n  // M├®todo para recuperar 2FA (quando perdeu o autenticador)\r\n  async recover2FA(email: string, password: string, secretPhrase: string): Promise<{\r\n    success: boolean;\r\n    message: string;\r\n    data?: {\r\n      twoFactor: {\r\n        secret: string;\r\n        qrCode: string;\r\n        otpUri: string;\r\n      }\r\n    }\r\n  }> {\r\n    return this.request<any>('/auth/recover-2fa', {\r\n      method: 'POST',\r\n      body: JSON.stringify({ email, password, secretPhrase }),\r\n    });\r\n  }\r\n\r\n  // M├®todo para logout\r\n  async logout(): Promise<void> {\r\n    await this.request<void>('/auth/logout', {\r\n      method: 'POST',\r\n    });\r\n\r\n    // Remover token\r\n    this.token = null;\r\n    localStorage.removeItem('authToken');\r\n  }\r\n\r\n  // Atualizar CPF do usu├írio\r\n  async updateCpf(cpf: string): Promise<{ success: boolean; message: string }> {\r\n    const response = await this.request<{ success: boolean; message: string }>('/users/update-cpf', {\r\n      method: 'POST',\r\n      body: JSON.stringify({ cpf }),\r\n    });\r\n\r\n    if (!response.success && response.message) {\r\n      throw new Error(response.message);\r\n    }\r\n\r\n    return response.data || { success: true, message: 'CPF atualizado com sucesso!' };\r\n  }\r\n\r\n  // M├®todo para obter perfil do usu├írio\r\n  async getUserProfile(): Promise<any> {\r\n    const response = await this.request<any>('/users/profile');\r\n    return response.data;\r\n  }\r\n\r\n  // M├®todo para atualizar perfil do usu├írio\r\n  async updateUserProfile(data: {\r\n    name?: string;\r\n    pixKey?: string;\r\n    secretPhrase?: string;\r\n  }): Promise<any> {\r\n    const response = await this.request<any>('/users/profile', {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n    return response.data;\r\n  }\r\n\r\n  // M├®todo para obter saldo do usu├írio\r\n  async getUserBalance(): Promise<{ balance: number }> {\r\n    const response = await this.request<{ balance: number }>('/users/balance');\r\n    return response.data!;\r\n  }\r\n\r\n  // M├®todo para obter transa├º├Áes do usu├írio\r\n  async getUserTransactions(): Promise<{ transactions: any[] }> {\r\n    const response = await this.request<{ transactions: any[] }>('/users/transactions');\r\n    return response.data!;\r\n  }\r\n\r\n  // M├®todo para obter cotas do usu├írio\r\n  async getUserQuotas(): Promise<{ quotas: any[] }> {\r\n    const response = await this.request<{ quotas: any[] }>('/quotas');\r\n    return response.data!;\r\n  }\r\n\r\n  // M├®todo para reivindicar recompensa por an├║ncio\r\n  async claimAdReward(): Promise<any> {\r\n    const response = await this.request<any>('/users/reward-ad', { method: 'POST' });\r\n    return response.data!;\r\n  }\r\n\r\n  // M├®todo para comprar cotas\r\n  async buyQuotas(quantity: number, useBalance: boolean, paymentMethod?: 'pix' | 'card', cardData?: any): Promise<any> {\r\n    console.log('[FRONTEND] buyQuotas called with:', { quantity, useBalance, paymentMethod, cardData: cardData ? 'PRESENT' : 'ABSENT' });\r\n    const response = await this.request<any>('/quotas/buy', {\r\n      method: 'POST',\r\n      body: JSON.stringify({\r\n        quantity,\r\n        useBalance,\r\n        paymentMethod,\r\n        ...cardData\r\n      }),\r\n    });\r\n    return response.data;\r\n  }\r\n\r\n  // M├®todo para vender uma cota\r\n  async sellQuota(quotaId: string): Promise<any> {\r\n    const response = await this.request<any>('/quotas/sell', {\r\n      method: 'POST',\r\n      body: JSON.stringify({ quotaId }),\r\n    });\r\n    return response.data;\r\n  }\r\n\r\n  // M├®todo para vender todas as cotas\r\n  async sellAllQuotas(): Promise<any> {\r\n    const response = await this.request<any>('/quotas/sell-all', {\r\n      method: 'POST',\r\n      body: JSON.stringify({}),\r\n    });\r\n    return response.data;\r\n  }\r\n\r\n  // M├®todo para obter empr├®stimos do usu├írio\r\n  async getUserLoans(): Promise<{ loans: any[] }> {\r\n    const response = await this.request<{ loans: any[] }>('/loans');\r\n    return response.data!;\r\n  }\r\n\r\n  // M├®todo para solicitar empr├®stimo\r\n  async requestLoan(amount: number, installments: number): Promise<any> {\r\n    const response = await this.request<any>('/loans/request', {\r\n      method: 'POST',\r\n      body: JSON.stringify({\r\n        amount,\r\n        installments,\r\n      }),\r\n    });\r\n    return response.data;\r\n  }\r\n\r\n  // M├®todo para pagar empr├®stimo\r\n  async repayLoan(loanId: string, useBalance: boolean, paymentMethod?: 'pix' | 'card', cardData?: any): Promise<any> {\r\n    const response = await this.request<any>('/loans/repay', {\r\n      method: 'POST',\r\n      body: JSON.stringify({ loanId, useBalance, paymentMethod, ...cardData }),\r\n    });\r\n    return response.data;\r\n  }\r\n\r\n  // M├®todo para pagar parcela de empr├®stimo\r\n  async repayInstallment(loanId: string, amount: number, useBalance: boolean, paymentMethod?: 'pix' | 'card', cardData?: any): Promise<any> {\r\n    const response = await this.request<any>('/loans/repay-installment', {\r\n      method: 'POST',\r\n      body: JSON.stringify({\r\n        loanId,\r\n        installmentAmount: amount,\r\n        useBalance,\r\n        paymentMethod,\r\n        ...cardData\r\n      }),\r\n    });\r\n    return response.data;\r\n  }\r\n\r\n  // M├®todo para solicitar saque\r\n  async requestWithdrawal(amount: number, pixKey: string): Promise<any> {\r\n    const response = await this.request<any>('/withdrawals/request', {\r\n      method: 'POST',\r\n      body: JSON.stringify({\r\n        amount,\r\n        pixKey\r\n      }),\r\n    });\r\n    return response; // Return full response to check requiresConfirmation\r\n  }\r\n\r\n  // M├®todo para jogar Ca├ºa-N├¡quel\r\n  async spinSlot(): Promise<any> {\r\n    // Retorna a resposta completa, pois o componente espera verificar result.success\r\n    return this.request<any>('/games/slot/spin', {\r\n      method: 'POST',\r\n      body: JSON.stringify({}),\r\n    });\r\n  }\r\n\r\n  // M├®todo para excluir conta\r\n  async deleteAccount(twoFactorCode?: string): Promise<any> {\r\n    const response = await this.request<any>('/users/me', {\r\n      method: 'DELETE',\r\n      body: JSON.stringify({ twoFactorCode }),\r\n    });\r\n    return response;\r\n  }\r\n\r\n  // M├®todos administrativos\r\n  async getAdminDashboard(): Promise<any> {\r\n    const response = await this.request<any>('/admin/dashboard');\r\n    return response.data;\r\n  }\r\n\r\n  async getHealthMetrics(): Promise<any> {\r\n    const response = await this.request<any>('/admin/metrics/health');\r\n    return response.data;\r\n  }\r\n\r\n  async addProfitToPool(amountToAdd: number): Promise<ApiResponse<void>> {\r\n    return await this.request<void>('/admin/profit-pool', {\r\n      method: 'POST',\r\n      body: JSON.stringify({ amountToAdd }),\r\n    });\r\n  }\r\n\r\n\r\n\r\n  async distributeDividends(): Promise<any> {\r\n    const response = await this.request<any>('/admin/distribute-dividends', {\r\n      method: 'POST',\r\n    });\r\n    return response.data;\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n  // --- GOVERNAN├çA (VOTA├ç├âO) ---\r\n  async getProposals(): Promise<any> {\r\n    return await this.request<any>('/voting/proposals');\r\n  }\r\n\r\n  async createProposal(title: string, description: string): Promise<any> {\r\n    return await this.request<any>('/voting/proposal', {\r\n      method: 'POST',\r\n      body: JSON.stringify({ title, description }),\r\n    });\r\n  }\r\n\r\n  async closeProposal(proposalId: number): Promise<any> {\r\n    return await this.request<any>(`/voting/proposal/${proposalId}/close`, {\r\n      method: 'POST',\r\n    });\r\n  }\r\n\r\n  // Fila de Pagamentos (Payout Queue)\r\n  async getPayoutQueue(): Promise<any> {\r\n    const response = await this.request<any>('/admin/payout-queue');\r\n    return response.data;\r\n  }\r\n\r\n  async confirmPayout(id: string, type: 'TRANSACTION' | 'LOAN'): Promise<void> {\r\n    await this.request<void>('/admin/confirm-payout', {\r\n      method: 'POST',\r\n      body: JSON.stringify({ id, type }),\r\n    });\r\n  }\r\n\r\n  // --- AVALIA├ç├òES DE TRANSA├ç├òES ---\r\n  async submitReview(transactionId: number, rating: number, comment: string, isPublic: boolean): Promise<any> {\r\n    return await this.request<any>('/transactions/review', {\r\n      method: 'POST',\r\n      body: JSON.stringify({ transactionId, rating, comment, isPublic }),\r\n    });\r\n  }\r\n\r\n  async getPendingReviews(): Promise<any> {\r\n    return await this.request<any>('/transactions/pending-reviews');\r\n  }\r\n\r\n  async getPublicTestimonials(): Promise<any> {\r\n    return await this.request<any>('/transactions/reviews/public');\r\n  }\r\n\r\n  // --- ADMIN: Gerenciamento de Avalia├º├Áes ---\r\n  async getAdminReviews(): Promise<any> {\r\n    return await this.request<any>('/admin/reviews');\r\n  }\r\n\r\n  async approveReview(reviewId: number): Promise<any> {\r\n    return await this.request<any>(`/admin/reviews/${reviewId}/approve`, {\r\n      method: 'POST',\r\n    });\r\n  }\r\n\r\n  async rejectReview(reviewId: number): Promise<any> {\r\n    return await this.request<any>(`/admin/reviews/${reviewId}/reject`, {\r\n      method: 'POST',\r\n    });\r\n  }\r\n\r\n  // Obter limite de cr├®dito dispon├¡vel (Estilo Nubank)\r\n\r\n\r\n\r\n  // Obter limite de cr├®dito dispon├¡vel (Estilo Nubank)\r\n  async getAvailableLimit(): Promise<{ totalLimit: number; activeDebt: number; remainingLimit: number }> {\r\n    const response = await this.request<any>('/loans/available-limit', {\r\n      method: 'GET',\r\n    });\r\n    return response.data;\r\n  }\r\n\r\n  // Obter carteira de cr├®dito do cliente\r\n  async getCreditPortfolio(userId: string): Promise<any> {\r\n    const response = await this.request<any>(`/admin/credit-portfolio/${userId}`);\r\n    return response.data;\r\n  }\r\n\r\n  // --- Loja de Produtos (Afiliados) ---\r\n\r\n  async getProducts(category?: string): Promise<any[]> {\r\n    const params = category ? `?category=${category}` : '';\r\n    const response = await this.request<any[]>('/products' + params);\r\n    return response.data || [];\r\n  }\r\n\r\n  async getAllProductsAdmin(): Promise<any[]> {\r\n    const response = await this.request<any[]>('/products/admin/all');\r\n    return response.data || [];\r\n  }\r\n\r\n  // M├®todo para verificar 2FA (Ativa├º├úo)\r\n  async verify2FA(email: string, code: string): Promise<any> {\r\n    return this.request<any>('/auth/verify-2fa', {\r\n      method: 'POST',\r\n      body: JSON.stringify({ email, code })\r\n    });\r\n  }\r\n\r\n  // M├®todo para confirmar saque via 2FA\r\n  async confirmWithdrawal(transactionId: number, code: string): Promise<any> {\r\n    return this.request<any>('/withdrawals/confirm', {\r\n      method: 'POST',\r\n      body: JSON.stringify({ transactionId, code })\r\n    });\r\n  }\r\n\r\n  async createProduct(data: any): Promise<any> {\r\n    const response = await this.request<any>('/products', {\r\n      method: 'POST',\r\n      body: JSON.stringify(data)\r\n    });\r\n    return response.data!;\r\n  }\r\n\r\n  async updateProduct(id: string, data: any): Promise<any> {\r\n    const response = await this.request<any>(`/products/${id}`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data)\r\n    });\r\n    return response.data!;\r\n  }\r\n\r\n  async deleteProduct(id: string): Promise<void> {\r\n    await this.request<void>(`/products/${id}`, {\r\n      method: 'DELETE'\r\n    });\r\n  }\r\n\r\n  async fetchProductMetadata(url: string): Promise<{ title: string; description: string; imageUrl: string; price?: number }> {\r\n    const response = await this.request<any>('/products/fetch-metadata', {\r\n      method: 'POST',\r\n      body: JSON.stringify({ url })\r\n    });\r\n    return response.data;\r\n  }\r\n\r\n  // Alterar senha\r\n  async changePassword(oldPassword: string, newPassword: string): Promise<any> {\r\n    return this.request<any>('/users/change-password', {\r\n      method: 'POST',\r\n      body: JSON.stringify({ oldPassword, newPassword })\r\n    });\r\n  }\r\n\r\n  // --- Suporte via Chat ---\r\n  async getChatHistory(): Promise<any> {\r\n    const response = await this.request<any>('/support/history');\r\n    return response.data;\r\n  }\r\n\r\n  async sendChatMessage(content: string): Promise<any> {\r\n    const response = await this.request<any>('/support/message', {\r\n      method: 'POST',\r\n      body: JSON.stringify({ content })\r\n    });\r\n    return response.data;\r\n  }\r\n\r\n  async escalateChat(): Promise<any> {\r\n    const response = await this.request<any>('/support/escalate', {\r\n      method: 'POST'\r\n    });\r\n    return response;\r\n  }\r\n\r\n  // --- Admin Support ---\r\n  async getPendingSupportChats(): Promise<any> {\r\n    const response = await this.request<any>('/support/admin/pending');\r\n    return response.data;\r\n  }\r\n\r\n  async getAdminChatHistory(chatId: string | number): Promise<any> {\r\n    const response = await this.request<any>(`/support/admin/chat/${chatId}`);\r\n    return response.data;\r\n  }\r\n\r\n  async respondSupportChat(chatId: string | number, content: string): Promise<any> {\r\n    const response = await this.request<any>('/support/admin/respond', {\r\n      method: 'POST',\r\n      body: JSON.stringify({ chatId, content })\r\n    });\r\n    return response.data;\r\n  }\r\n\r\n  // Notifica├º├Áes em tempo real (SSE) - DESATIVADO TEMPORARIAMENTE PARA ESTABILIDADE\r\n  listenToNotifications(_onNotification: (data: any) => void): () => void {\r\n    /* \r\n    if (!this.token) return () => { };\r\n\r\n    const url = `${API_BASE_URL}/notifications/stream?token=${this.token}`;\r\n    const eventSource = new EventSource(url);\r\n\r\n    ...\r\n    */\r\n    return () => { };\r\n  }\r\n  async closeSupportChat(chatId: string | number): Promise<any> {\r\n    const response = await this.request<any>('/support/admin/close', {\r\n      method: 'POST',\r\n      body: JSON.stringify({ chatId })\r\n    });\r\n    return response.data;\r\n  }\r\n\r\n  async sendSupportFeedback(chatId: string | number, rating: number, comment?: string): Promise<any> {\r\n    const response = await this.request<any>('/support/feedback', {\r\n      method: 'POST',\r\n      body: JSON.stringify({ chatId, rating, comment })\r\n    });\r\n    return response.data;\r\n  }\r\n\r\n  async getSupportFeedbacks(): Promise<any> {\r\n    const response = await this.request<any>('/support/admin/feedback');\r\n    return response.data;\r\n  }\r\n\r\n  // --- T├¡tulo de S├│cio Majorit├írio ---\r\n  async checkTitleEligibility(): Promise<{ eligible: boolean, message?: string, reason?: string, currentCount?: number, neededCount?: number, daysRemaining?: number }> {\r\n    const response = await this.request<any>('/users/title-eligibility');\r\n    return response.data;\r\n  }\r\n\r\n  async downloadTitle(): Promise<any> {\r\n    const response = await this.request<any>('/users/title-download', { method: 'POST' });\r\n    return response.data;\r\n  }\r\n\r\n  // --- Benef├¡cio de Boas-Vindas (Indica├º├úo) ---\r\n  async getWelcomeBenefit(): Promise<{\r\n    hasDiscount: boolean;\r\n    usesRemaining: number;\r\n    maxUses: number;\r\n    description: string;\r\n    discountedRates: {\r\n      loanInterestRate: string;\r\n      loanOriginationFeeRate: string;\r\n      withdrawalFee: string;\r\n      marketplaceEscrowFeeRate: string;\r\n    } | null;\r\n    normalRates: {\r\n      loanInterestRate: string;\r\n      loanOriginationFeeRate: string;\r\n      withdrawalFee: string;\r\n      marketplaceEscrowFeeRate: string;\r\n    };\r\n  }> {\r\n    const response = await this.request<any>('/users/welcome-benefit');\r\n    return response.data;\r\n  }\r\n\r\n  // --- Gest├úo de Equipe e Usu├írios (Admin) ---\r\n  async adminGetUsers(options?: { search?: string, role?: string, status?: string }): Promise<any> {\r\n    const query = new URLSearchParams();\r\n    if (options?.search) query.append('search', options.search);\r\n    if (options?.role) query.append('role', options.role);\r\n    if (options?.status) query.append('status', options.status);\r\n\r\n    const response = await this.request<any>(`/admin/users?${query.toString()}`);\r\n    return response;\r\n  }\r\n\r\n  async adminUpdateUserAccess(data: { userId: number, role?: string, status?: string }): Promise<any> {\r\n    const response = await this.request<any>('/admin/users/update-access', {\r\n      method: 'POST',\r\n      body: JSON.stringify(data)\r\n    });\r\n    return response;\r\n  }\r\n\r\n  async adminCreateAttendant(data: any): Promise<any> {\r\n    const response = await this.request<any>('/admin/users/create-attendant', {\r\n      method: 'POST',\r\n      body: JSON.stringify(data)\r\n    });\r\n    return response;\r\n  }\r\n\r\n  // Limpeza de an├║ncios antigos do marketplace\r\n  async getMarketplaceCleanupStats(): Promise<{\r\n    stale7Days: number;\r\n    stale14Days: number;\r\n    stale30Days: number;\r\n    boostedActive: number;\r\n    totalActive: number;\r\n    totalAll: number;\r\n  }> {\r\n    const response = await this.request<any>('/admin/marketplace/cleanup-stats');\r\n    return response.data;\r\n  }\r\n\r\n  async cleanupOldListings(daysOld: number = 7): Promise<{\r\n    deletedCount: number;\r\n    skipped: number;\r\n    daysOld: number;\r\n    message: string;\r\n  }> {\r\n    const response = await this.request<any>('/admin/marketplace/cleanup-old-listings', {\r\n      method: 'POST',\r\n      body: JSON.stringify({ daysOld })\r\n    });\r\n    return { ...response.data, message: response.message };\r\n  }\r\n\r\n  // ==================== BUG REPORTS ====================\r\n\r\n  // Criar um bug report\r\n  async createBugReport(data: {\r\n    title: string;\r\n    description: string;\r\n    category?: 'general' | 'payment' | 'ui' | 'performance' | 'other';\r\n    severity?: 'low' | 'medium' | 'high' | 'critical';\r\n    deviceInfo?: string;\r\n  }): Promise<any> {\r\n    const response = await this.request<any>('/bugs', {\r\n      method: 'POST',\r\n      body: JSON.stringify(data)\r\n    });\r\n    return response;\r\n  }\r\n\r\n  // Listar meus bug reports\r\n  async getMyBugReports(): Promise<any> {\r\n    const response = await this.request<any>('/bugs/my');\r\n    return response.data;\r\n  }\r\n\r\n  // Admin: listar todos os bugs\r\n  async getAdminBugReports(status?: string): Promise<any> {\r\n    const query = status ? `?status=${status}` : '';\r\n    const response = await this.request<any>(`/bugs/admin${query}`);\r\n    return response;\r\n  }\r\n\r\n  // Admin: atualizar status de um bug\r\n  async updateBugStatus(bugId: number, status: string, adminNotes?: string): Promise<any> {\r\n    const response = await this.request<any>(`/bugs/admin/${bugId}`, {\r\n      method: 'PATCH',\r\n      body: JSON.stringify({ status, adminNotes })\r\n    });\r\n    return response;\r\n  }\r\n\r\n  // Admin: deletar um bug\r\n  async deleteBugReport(bugId: number): Promise<any> {\r\n    const response = await this.request<any>(`/bugs/admin/${bugId}`, {\r\n      method: 'DELETE'\r\n    });\r\n    return response;\r\n  }\r\n\r\n  // ==================== MONETIZA├ç├âO PREMIUM ====================\r\n\r\n  // Comprar selo de verificado\r\n  async buyVerifiedBadge(): Promise<any> {\r\n    const response = await this.request<any>('/monetization/buy-verified-badge', {\r\n      method: 'POST'\r\n    });\r\n    return response;\r\n  }\r\n\r\n  // Comprar pacote de score boost\r\n  async buyScoreBoost(): Promise<any> {\r\n    const response = await this.request<any>('/monetization/buy-score-boost', {\r\n      method: 'POST'\r\n    });\r\n    return response;\r\n  }\r\n\r\n  // Check-in di├írio\r\n  async dailyCheckin(): Promise<any> {\r\n    const response = await this.request<any>('/monetization/daily-checkin', {\r\n      method: 'POST'\r\n    });\r\n    return response;\r\n  }\r\n\r\n  // Consulta de reputa├º├úo\r\n  async checkReputation(email: string): Promise<any> {\r\n    const response = await this.request<any>(`/monetization/reputation-check/${encodeURIComponent(email)}`);\r\n    return response;\r\n  }\r\n\r\n  // ==================== EARN - Ba├║ Di├írio ====================\r\n\r\n  // Abrir ba├║ de fidelidade\r\n  async openChestReward(amount: number): Promise<any> {\r\n    const response = await this.request<any>('/earn/chest-reward', {\r\n      method: 'POST',\r\n      body: JSON.stringify({ amount })\r\n    });\r\n    return response;\r\n  }\r\n\r\n  // Status do ba├║\r\n  async getChestStatus(): Promise<{ chestsRemaining: number; countdown: number; canOpen: boolean }> {\r\n    const response = await this.request<any>('/earn/chest-status');\r\n    return response.data;\r\n  }\r\n\r\n  // Recompensa por v├¡deo (rota earn)\r\n  async earnVideoReward(videoId: string): Promise<any> {\r\n    const response = await this.request<any>('/earn/video-reward', {\r\n      method: 'POST',\r\n      body: JSON.stringify({ videoId })\r\n    });\r\n    return response;\r\n  }\r\n\r\n  // ==================== SELLER (Vendedor) ====================\r\n\r\n  // Verificar status de vendedor\r\n  async getSellerStatus(): Promise<any> {\r\n    const response = await this.request<any>('/seller/status');\r\n    return response.data || response;\r\n  }\r\n\r\n  // Registrar como vendedor\r\n  async registerSeller(data: {\r\n    companyName: string;\r\n    cpfCnpj: string;\r\n    mobilePhone: string;\r\n    address: string;\r\n    addressNumber?: string;\r\n    neighborhood?: string;\r\n    city: string;\r\n    state: string;\r\n    postalCode: string;\r\n    companyType?: string;\r\n  }): Promise<any> {\r\n    const response = await this.request<any>('/seller/register', {\r\n      method: 'POST',\r\n      body: JSON.stringify(data)\r\n    });\r\n    return response;\r\n  }\r\n\r\n  // Obter wallet do vendedor\r\n  async getSellerWallet(): Promise<any> {\r\n    const response = await this.request<any>('/seller/wallet');\r\n    return response.data || response;\r\n  }\r\n\r\n  // ========== PONTOS FARM ==========\r\n\r\n  // Obter informa├º├Áes de pontos do usu├írio\r\n  async getPointsInfo(): Promise<{\r\n    currentPoints: number;\r\n    canConvert: boolean;\r\n    possibleConversion: number;\r\n    pointsToNextConversion: number;\r\n    rate: string;\r\n  }> {\r\n    const response = await this.request<any>('/earn/points-info');\r\n    return response.data;\r\n  }\r\n\r\n  // Converter pontos para saldo\r\n  async convertPoints(): Promise<{\r\n    pointsConverted: number;\r\n    moneyCredited: number;\r\n    remainingPoints: number;\r\n  }> {\r\n    const response = await this.request<any>('/earn/convert-points', {\r\n      method: 'POST'\r\n    });\r\n    return response.data;\r\n  }\r\n}\r\n\r\n// Exportar inst├óncia ├║nica do servi├ºo\r\nexport const apiService = new ApiService();","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josia\\Desktop\\projetos\\cred30\\packages\\frontend-v2\\src\\application\\services\\contract.service.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","message":"Definition for rule '@typescript-eslint/no-unused-vars' was not found.","line":1,"column":1,"endLine":1,"endColumn":2,"severity":2,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { MUTUAL_AID_CONTRACT_CLAUSES, DISCLAIMERS } from '../../shared/constants/legal.constants';\r\n\r\ninterface LoanContractData {\r\n    loanId: string;\r\n    userName: string;\r\n    userEmail: string;\r\n    userPixKey: string;\r\n    loanAmount: number;\r\n    interestRate: number;\r\n    totalRepayment: number;\r\n    installments: number;\r\n    installmentValue: number;\r\n    dueDate: string;\r\n    contractDate: string;\r\n    contractNumber: string;\r\n}\r\n\r\n/**\r\n * Gera o PDF do Contrato de M├║tuo Civil (Apoio M├║tuo)\r\n * BLINDAGEM JUR├ìDICA: Documento segue padr├Áes de SCP e M├║tuo Civil\r\n */\r\nconst generateLoanContractPDF = async (data: LoanContractData): Promise<any> => {\r\n    const { default: jsPDF } = await import('jspdf');\r\n    const doc = new jsPDF();\r\n    const pageWidth = doc.internal.pageSize.getWidth();\r\n    const margin = 15;\r\n    let y = 20;\r\n\r\n    // Helpers\r\n    const centerText = (text: string, yPos: number, size = 12) => {\r\n        doc.setFontSize(size);\r\n        const textWidth = doc.getStringUnitWidth(text) * size / (doc.internal as any).scaleFactor;\r\n        doc.text(text, (pageWidth - textWidth) / 2, yPos);\r\n    };\r\n\r\n    const addLine = (text: string, yPos: number, bold = false) => {\r\n        doc.setFont('helvetica', bold ? 'bold' : 'normal');\r\n        doc.text(text, margin, yPos);\r\n        return yPos + 6;\r\n    };\r\n\r\n    const addParagraph = (text: string, yPos: number, maxWidth = pageWidth - 2 * margin) => {\r\n        doc.setFont('helvetica', 'normal');\r\n        doc.setFontSize(9);\r\n        const lines = doc.splitTextToSize(text, maxWidth);\r\n        doc.text(lines, margin, yPos);\r\n        return yPos + lines.length * 4 + 3;\r\n    };\r\n\r\n    const formatCurrency = (val: number) =>\r\n        val.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });\r\n\r\n    // --- CABE├çALHO ---\r\n    doc.setFillColor(15, 23, 42); // Slate-900\r\n    doc.rect(0, 0, pageWidth, 35, 'F');\r\n\r\n    doc.setTextColor(255, 255, 255);\r\n    doc.setFont('helvetica', 'bold');\r\n    centerText('CRED30 - CLUBE DE BENEF├ìCIOS E APOIO M├ÜTUO', 12, 14);\r\n    doc.setFontSize(11);\r\n    centerText('INSTRUMENTO PARTICULAR DE M├ÜTUO CIVIL FENERAT├ìCIO', 22, 11);\r\n    doc.setFont('helvetica', 'normal');\r\n    doc.setFontSize(8);\r\n    centerText('Sociedade em Conta de Participa├º├úo - Art. 991 a 996 do C├│digo Civil', 30, 8);\r\n\r\n    // --- N├ÜMERO DO CONTRATO ---\r\n    doc.setTextColor(0, 0, 0);\r\n    y = 42;\r\n    doc.setFontSize(9);\r\n    doc.setFont('helvetica', 'bold');\r\n    doc.text(`Contrato N┬║: ${data.contractNumber}`, margin, y);\r\n    doc.text(`Data: ${data.contractDate}`, pageWidth - margin - 35, y);\r\n\r\n    // --- AVISO IMPORTANTE ---\r\n    y = 52;\r\n    doc.setFillColor(254, 243, 199); // Amber-100\r\n    doc.rect(margin, y, pageWidth - 2 * margin, 18, 'F');\r\n    doc.setDrawColor(245, 158, 11); // Amber-500\r\n    doc.rect(margin, y, pageWidth - 2 * margin, 18, 'S');\r\n\r\n    doc.setFont('helvetica', 'bold');\r\n    doc.setFontSize(7);\r\n    doc.setTextColor(146, 64, 14); // Amber-800\r\n    doc.text('AVISO LEGAL OBRIGAT├ôRIO:', margin + 3, y + 5);\r\n    doc.setFont('helvetica', 'normal');\r\n    doc.setFontSize(6);\r\n    const avisoText = 'Este N├âO ├® um empr├®stimo banc├írio. Trata-se de opera├º├úo de M├ÜTUO CIVIL PRIVADO (Art. 586 CC) entre membros de clube fechado, operando sob regime de SCP (Art. 991 CC). A Cred30 N├âO ├® banco, N├âO ├® fintech regulada e N├âO ├® institui├º├úo financeira.';\r\n    const avisoLines = doc.splitTextToSize(avisoText, pageWidth - 2 * margin - 6);\r\n    doc.text(avisoLines, margin + 3, y + 10);\r\n\r\n    y = 75;\r\n    doc.setTextColor(0, 0, 0);\r\n\r\n    // --- PARTES ---\r\n    doc.setFont('helvetica', 'bold');\r\n    doc.setFontSize(10);\r\n    y = addLine('1. DAS PARTES CONTRATANTES', y, true);\r\n\r\n    doc.setFont('helvetica', 'normal');\r\n    doc.setFontSize(9);\r\n    y = addLine('S├ôCIO OSTENSIVO (Facilitador): CRED30 - Clube de Benef├¡cios e Apoio M├║tuo', y);\r\n    y = addLine(`S├ôCIO PARTICIPANTE (Mutu├írio): ${data.userName}`, y);\r\n    y = addLine(`Identifica├º├úo Digital: ${data.userEmail}`, y);\r\n    y = addLine(`Chave PIX para Reposi├º├úo: ${data.userPixKey}`, y);\r\n    y += 3;\r\n\r\n    // --- CL├üUSULA 2: OBJETO ---\r\n    doc.setFont('helvetica', 'bold');\r\n    doc.setFontSize(10);\r\n    y = addLine('2. DO OBJETO DO CONTRATO', y, true);\r\n    y = addParagraph(MUTUAL_AID_CONTRACT_CLAUSES.OBJECT, y);\r\n\r\n    // --- CL├üUSULA 3: NATUREZA JUR├ìDICA ---\r\n    doc.setFont('helvetica', 'bold');\r\n    doc.setFontSize(10);\r\n    y = addLine('3. DA NATUREZA JUR├ìDICA', y, true);\r\n    y = addParagraph(MUTUAL_AID_CONTRACT_CLAUSES.NATURE, y);\r\n\r\n    // --- CL├üUSULA 4: CONDI├ç├òES FINANCEIRAS ---\r\n    doc.setFont('helvetica', 'bold');\r\n    doc.setFontSize(10);\r\n    y = addLine('4. DAS CONDI├ç├òES DO APOIO M├ÜTUO', y, true);\r\n    y += 2;\r\n\r\n    // Tabela de valores\r\n    doc.setFillColor(248, 250, 252); // Slate-50\r\n    doc.rect(margin, y, pageWidth - 2 * margin, 35, 'F');\r\n    doc.setDrawColor(203, 213, 225); // Slate-300\r\n    doc.rect(margin, y, pageWidth - 2 * margin, 35, 'S');\r\n\r\n    doc.setFont('helvetica', 'normal');\r\n    doc.setFontSize(9);\r\n    const tableY = y + 7;\r\n    const col1 = margin + 3;\r\n    const col2 = pageWidth / 2 + 10;\r\n\r\n    doc.text('Valor do Apoio M├║tuo:', col1, tableY);\r\n    doc.setFont('helvetica', 'bold');\r\n    doc.text(formatCurrency(data.loanAmount), col2, tableY);\r\n\r\n    doc.setFont('helvetica', 'normal');\r\n    doc.text('Taxa de Manuten├º├úo (20%):', col1, tableY + 8);\r\n    doc.setFont('helvetica', 'bold');\r\n    doc.text(formatCurrency(data.totalRepayment - data.loanAmount), col2, tableY + 8);\r\n\r\n    doc.setFont('helvetica', 'normal');\r\n    doc.text('Valor Total a Repor:', col1, tableY + 16);\r\n    doc.setFont('helvetica', 'bold');\r\n    doc.text(formatCurrency(data.totalRepayment), col2, tableY + 16);\r\n\r\n    doc.setFont('helvetica', 'normal');\r\n    doc.text('Reposi├º├Áes:', col1, tableY + 24);\r\n    doc.setFont('helvetica', 'bold');\r\n    doc.text(`${data.installments}x de ${formatCurrency(data.installmentValue)}`, col2, tableY + 24);\r\n\r\n    y += 42;\r\n\r\n    // --- CL├üUSULA 5: TAXA DE MANUTEN├ç├âO ---\r\n    doc.setFont('helvetica', 'bold');\r\n    doc.setFontSize(10);\r\n    y = addLine('5. DA TAXA DE MANUTEN├ç├âO', y, true);\r\n    y = addParagraph(MUTUAL_AID_CONTRACT_CLAUSES.MAINTENANCE_FEE, y);\r\n\r\n    // --- CL├üUSULA 6: LASTRO E EXECU├ç├âO ---\r\n    doc.setFont('helvetica', 'bold');\r\n    doc.setFontSize(10);\r\n    y = addLine('6. DO LASTRO E EXECU├ç├âO AUTOM├üTICA', y, true);\r\n    y = addParagraph(MUTUAL_AID_CONTRACT_CLAUSES.GUARANTEE, y);\r\n\r\n    // --- NOVA P├üGINA ---\r\n    doc.addPage();\r\n    y = 20;\r\n\r\n    // --- CL├üUSULA 7: ISEN├ç├âO DE RESPONSABILIDADE ---\r\n    doc.setFont('helvetica', 'bold');\r\n    doc.setFontSize(10);\r\n    y = addLine('7. DA ISEN├ç├âO DE RESPONSABILIDADE', y, true);\r\n    y = addParagraph(MUTUAL_AID_CONTRACT_CLAUSES.WAIVER, y);\r\n\r\n    // --- CL├üUSULA 8: DECLARA├ç├âO DE VOLUNTARIEDADE ---\r\n    doc.setFont('helvetica', 'bold');\r\n    doc.setFontSize(10);\r\n    y = addLine('8. DA VOLUNTARIEDADE E CI├èNCIA', y, true);\r\n    y = addParagraph(MUTUAL_AID_CONTRACT_CLAUSES.VOLUNTARY, y);\r\n\r\n    // --- CL├üUSULA 9: VENCIMENTO ---\r\n    doc.setFont('helvetica', 'bold');\r\n    doc.setFontSize(10);\r\n    y = addLine('9. DO VENCIMENTO E MORA', y, true);\r\n    doc.setFont('helvetica', 'normal');\r\n    doc.setFontSize(9);\r\n    y = addLine(`Data de Vencimento Final: ${data.dueDate}`, y);\r\n    y = addParagraph('O atraso na reposi├º├úo superior a 5 (cinco) dias autoriza a execu├º├úo autom├ítica do lastro em participa├º├Áes, sem necessidade de notifica├º├úo adicional.', y);\r\n\r\n    // --- CL├üUSULA 10: FORO ---\r\n    doc.setFont('helvetica', 'bold');\r\n    doc.setFontSize(10);\r\n    y = addLine('10. DO FORO', y, true);\r\n    y = addParagraph(MUTUAL_AID_CONTRACT_CLAUSES.JURISDICTION, y);\r\n\r\n    // --- ASSINATURA DIGITAL ---\r\n    y += 5;\r\n    doc.setFillColor(240, 253, 244); // Emerald-50\r\n    doc.rect(margin, y, pageWidth - 2 * margin, 35, 'F');\r\n    doc.setDrawColor(16, 185, 129); // Emerald-500\r\n    doc.setLineWidth(0.5);\r\n    doc.rect(margin, y, pageWidth - 2 * margin, 35, 'S');\r\n\r\n    doc.setFont('helvetica', 'bold');\r\n    doc.setFontSize(10);\r\n    doc.setTextColor(6, 95, 70); // Emerald-800\r\n    doc.text('ASSINATURA ELETR├öNICA', margin + 3, y + 8);\r\n\r\n    doc.setFont('helvetica', 'normal');\r\n    doc.setFontSize(8);\r\n    doc.setTextColor(60, 60, 60);\r\n    doc.text(`Assinado digitalmente por: ${data.userName}`, margin + 3, y + 16);\r\n    doc.text(`E-mail vinculado: ${data.userEmail}`, margin + 3, y + 22);\r\n    doc.text(`ID do Contrato: ${data.contractNumber}`, margin + 3, y + 28);\r\n    doc.text(`Data/Hora: ${new Date().toLocaleString('pt-BR')}`, margin + 3, y + 34);\r\n\r\n    y += 45;\r\n\r\n    // --- DISCLAIMER FINAL ---\r\n    doc.setFillColor(254, 226, 226); // Red-100\r\n    doc.rect(margin, y, pageWidth - 2 * margin, 25, 'F');\r\n    doc.setFont('helvetica', 'bold');\r\n    doc.setFontSize(6);\r\n    doc.setTextColor(127, 29, 29); // Red-900\r\n    doc.text('DISCLAIMER LEGAL:', margin + 3, y + 5);\r\n    doc.setFont('helvetica', 'normal');\r\n    doc.setFontSize(5.5);\r\n    const disclaimerLines = doc.splitTextToSize(DISCLAIMERS.RISK_DISCLOSURE, pageWidth - 2 * margin - 6);\r\n    doc.text(disclaimerLines, margin + 3, y + 10);\r\n\r\n    // --- RODAP├ë ---\r\n    doc.setFontSize(7);\r\n    doc.setTextColor(150, 150, 150);\r\n    doc.text('Documento gerado eletronicamente pelo sistema Cred30 - Validade jur├¡dica conforme MP 2.200-2/2001', margin, 285);\r\n    doc.text(`${data.contractNumber} | SCP Art. 991 CC | M├║tuo Civil Art. 586 CC | ${data.contractDate}`, margin, 290);\r\n\r\n    return doc;\r\n};\r\n\r\n\r\n/**\r\n * Baixa o PDF do contrato\r\n */\r\nexport const downloadLoanContract = async (data: LoanContractData) => {\r\n    const doc = await generateLoanContractPDF(data);\r\n    doc.save(`contrato_mutuo_${data.contractNumber}.pdf`);\r\n};\r\n\r\n/**\r\n * Gera os dados do contrato a partir de um empr├®stimo\r\n */\r\nexport const createContractData = (\r\n    loan: {\r\n        id: string;\r\n        amount: number;\r\n        totalRepayment: number;\r\n        installments: number;\r\n        interestRate: number;\r\n        dueDate?: number | string;\r\n        requestDate?: number;\r\n        createdAt?: string;\r\n        created_at?: string;\r\n    },\r\n    user: {\r\n        name: string;\r\n        email: string;\r\n        pixKey: string;\r\n    }\r\n): LoanContractData => {\r\n    const contractNumber = `CRD30-${loan.id.toString().padStart(6, '0')}`;\r\n\r\n    // Tentar obter a data do empr├®stimo de v├írias fontes poss├¡veis\r\n    let loanDate: Date;\r\n    if (loan.requestDate) {\r\n        loanDate = new Date(loan.requestDate);\r\n    } else if (loan.createdAt) {\r\n        loanDate = new Date(loan.createdAt);\r\n    } else if (loan.created_at) {\r\n        loanDate = new Date(loan.created_at);\r\n    } else {\r\n        loanDate = new Date(); // fallback para data atual\r\n    }\r\n\r\n    const contractDate = loanDate.toLocaleDateString('pt-BR', {\r\n        day: '2-digit',\r\n        month: '2-digit',\r\n        year: 'numeric'\r\n    });\r\n\r\n    // Data de vencimento\r\n    let dueDateFormatted = 'N├úo definida';\r\n    if (loan.dueDate) {\r\n        const dueDateTime = typeof loan.dueDate === 'string' ? new Date(loan.dueDate) : new Date(loan.dueDate);\r\n        dueDateFormatted = dueDateTime.toLocaleDateString('pt-BR', {\r\n            day: '2-digit',\r\n            month: '2-digit',\r\n            year: 'numeric'\r\n        });\r\n    }\r\n\r\n    const installmentValue = loan.totalRepayment / loan.installments;\r\n\r\n    return {\r\n        loanId: loan.id,\r\n        userName: user.name,\r\n        userEmail: user.email,\r\n        userPixKey: user.pixKey || 'N├úo informado',\r\n        loanAmount: loan.amount,\r\n        interestRate: loan.interestRate,\r\n        totalRepayment: loan.totalRepayment,\r\n        installments: loan.installments,\r\n        installmentValue,\r\n        dueDate: dueDateFormatted,\r\n        contractDate,\r\n        contractNumber,\r\n    };\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josia\\Desktop\\projetos\\cred30\\packages\\frontend-v2\\src\\application\\services\\storage.service.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","message":"Definition for rule '@typescript-eslint/no-unused-vars' was not found.","line":1,"column":1,"endLine":1,"endColumn":2,"severity":2,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { User, Quota, Loan, Transaction, AppState } from '../../domain/types/common.types';\r\nimport { apiService } from './api.service';\r\nexport { apiService };\r\nimport { syncService } from './sync.service';\r\nimport { QUOTA_PRICE, LOAN_INTEREST_RATE, PENALTY_RATE, VESTING_PERIOD_MS } from '../../shared/constants/app.constants';\r\n\r\n// Fun├º├úo para converter dados da API para o formato esperado pelo frontend\r\nconst convertApiUserToUser = (apiUser: any): User => {\r\n  if (!apiUser) {\r\n    return {\r\n      id: '',\r\n      name: 'Usu├írio',\r\n      email: '',\r\n      pixKey: '',\r\n      balance: 0,\r\n      joinedAt: new Date().toISOString(),\r\n      referralCode: '',\r\n      isAdmin: false,\r\n    };\r\n  }\r\n\r\n  return {\r\n    id: String(apiUser.id || apiUser.userId || ''),\r\n    name: apiUser.name || 'Usu├írio',\r\n    email: apiUser.email || '',\r\n    secretPhrase: '', // N├úo ├® retornado pela API\r\n    pixKey: apiUser.pixKey || apiUser.pix_key || '',\r\n    balance: typeof apiUser.balance === 'string' ? parseFloat(apiUser.balance) : (apiUser.balance || 0),\r\n    joinedAt: apiUser.joinedAt || apiUser.created_at || new Date().toISOString(),\r\n    referralCode: apiUser.referralCode || apiUser.referral_code || '',\r\n    isAdmin: apiUser.isAdmin || apiUser.is_admin || apiUser.role === 'ADMIN' || false,\r\n    score: apiUser.score ?? 0,\r\n    twoFactorEnabled: apiUser.twoFactorEnabled || apiUser.two_factor_enabled || false,\r\n    cpf: apiUser.cpf || null, // CPF do usu├írio (obrigat├│rio para saque)\r\n  };\r\n};\r\n\r\nconst convertApiQuotaToQuota = (apiQuota: any): Quota => {\r\n  return {\r\n    id: apiQuota.id,\r\n    userId: apiQuota.userId,\r\n    purchasePrice: apiQuota.purchasePrice,\r\n    purchaseDate: apiQuota.purchaseDate,\r\n    currentValue: apiQuota.currentValue,\r\n    yieldRate: apiQuota.yieldRate,\r\n    status: apiQuota.status || 'ACTIVE', // Default status if missing\r\n  };\r\n};\r\n\r\nconst convertApiLoanToLoan = (apiLoan: any): Loan => {\r\n  // Garantir que os valores monet├írios sejam n├║meros v├ílidos\r\n  const amount = typeof apiLoan.amount === 'string'\r\n    ? parseFloat(apiLoan.amount)\r\n    : apiLoan.amount;\r\n  const totalRepayment = typeof apiLoan.totalRepayment === 'string'\r\n    ? parseFloat(apiLoan.totalRepayment)\r\n    : apiLoan.totalRepayment;\r\n  const interestRate = typeof apiLoan.interestRate === 'string'\r\n    ? parseFloat(apiLoan.interestRate)\r\n    : apiLoan.interestRate;\r\n\r\n  return {\r\n    id: apiLoan.id,\r\n    userId: apiLoan.userId,\r\n    amount: amount || 0,\r\n    totalRepayment: totalRepayment || 0,\r\n    installments: apiLoan.installments || 1,\r\n    interestRate: interestRate || 0,\r\n    requestDate: apiLoan.requestDate,\r\n    status: apiLoan.status,\r\n    dueDate: apiLoan.dueDate,\r\n    createdAt: apiLoan.createdAt || apiLoan.created_at || new Date().toISOString(), // Map createdAt\r\n  };\r\n};\r\n\r\nconst convertApiTransactionToTransaction = (apiTransaction: any): Transaction => {\r\n  // Garantir que o amount seja um n├║mero v├ílido\r\n  const amount = typeof apiTransaction.amount === 'string'\r\n    ? parseFloat(apiTransaction.amount)\r\n    : apiTransaction.amount;\r\n\r\n  return {\r\n    id: apiTransaction.id,\r\n    userId: apiTransaction.userId,\r\n    type: apiTransaction.type,\r\n    amount: amount || 0,\r\n    date: apiTransaction.date,\r\n    description: apiTransaction.description,\r\n    status: apiTransaction.status,\r\n    metadata: apiTransaction.metadata,\r\n  };\r\n};\r\n\r\n// Carregar estado da aplica├º├úo da API\r\nexport const loadState = async (): Promise<AppState> => {\r\n  try {\r\n    // Verificar se o usu├írio est├í autenticado\r\n    if (!apiService.isAuthenticated()) {\r\n      return {\r\n        currentUser: null,\r\n        users: [],\r\n        quotas: [],\r\n        loans: [],\r\n        transactions: [],\r\n        systemBalance: 0,\r\n        profitPool: 0,\r\n      };\r\n    }\r\n\r\n    // Obter dados consolidados (Otimiza├º├úo M├íxima)\r\n    const syncResponse = await apiService.get<any>('/users/sync');\r\n    const syncData = syncResponse.data;\r\n\r\n    const currentUser = convertApiUserToUser(syncData.user);\r\n    const transactions = syncData.transactions.map(convertApiTransactionToTransaction);\r\n    const quotas = syncData.quotas.map(convertApiQuotaToQuota);\r\n    const loans = syncData.loans.map(convertApiLoanToLoan);\r\n    const welcomeBenefit = syncData.welcomeBenefit;\r\n    let stats = syncData.stats;\r\n\r\n    // Se for administrador, obter dados do dashboard\r\n    let systemBalance = 0;\r\n    let profitPool = 0;\r\n    // Removida declara├º├úo redundante de stats aqui\r\n\r\n    if (currentUser.isAdmin) {\r\n      try {\r\n        const now = Date.now();\r\n\r\n        // For├ºar sempre busca nova para garantir dados atualizados\r\n        if (cachedDashboard && (now - lastDashboardCacheTime) < DASHBOARD_CACHE_DURATION) {\r\n          console.log('Usando cache do dashboard administrativo');\r\n          systemBalance = cachedDashboard.systemBalance || 0;\r\n          profitPool = cachedDashboard.profitPool || 0;\r\n          stats = cachedDashboard.stats || null;\r\n        } else {\r\n          console.log('Buscando dashboard administrativo...');\r\n          const dashboard = await apiService.getAdminDashboard();\r\n\r\n          // DEBUG: Log completo da resposta\r\n          console.log('DEBUG - Resposta completa do dashboard:', JSON.stringify(dashboard, null, 2));\r\n\r\n          // Acessar dados aninhados corretamente\r\n          systemBalance = dashboard.data?.systemConfig?.system_balance || dashboard.systemConfig?.system_balance || 0;\r\n          profitPool = dashboard.data?.systemConfig?.profit_pool || dashboard.systemConfig?.profit_pool || 0;\r\n          stats = dashboard.data?.stats || dashboard.stats || null;\r\n\r\n          if (stats) {\r\n            stats.totalGatewayCosts = dashboard.data?.systemConfig?.total_gateway_costs || dashboard.systemConfig?.total_gateway_costs || 0;\r\n            stats.totalManualCosts = dashboard.data?.systemConfig?.total_manual_costs || dashboard.systemConfig?.total_manual_costs || 0;\r\n            stats.totalTaxReserve = dashboard.data?.systemConfig?.total_tax_reserve || dashboard.systemConfig?.total_tax_reserve || 0;\r\n            stats.totalOperationalReserve = dashboard.data?.systemConfig?.total_operational_reserve || dashboard.systemConfig?.total_operational_reserve || 0;\r\n            stats.totalOwnerProfit = dashboard.data?.systemConfig?.total_owner_profit || dashboard.systemConfig?.total_owner_profit || 0;\r\n            stats.realLiquidity = dashboard.data?.systemConfig?.real_liquidity || dashboard.systemConfig?.real_liquidity || 0;\r\n            stats.totalReserves = dashboard.data?.systemConfig?.total_reserves || dashboard.systemConfig?.total_reserves || 0;\r\n            stats.theoreticalCash = dashboard.data?.systemConfig?.theoretical_cash || dashboard.systemConfig?.theoretical_cash || 0;\r\n            stats.monthlyFixedCosts = dashboard.data?.systemConfig?.monthly_fixed_costs || dashboard.systemConfig?.monthly_fixed_costs || 0;\r\n            stats.systemConfig = dashboard.data?.systemConfig || dashboard.systemConfig || null;\r\n          }\r\n\r\n          // DEBUG: Verificar valores extra├¡dos\r\n          console.log('DEBUG - Valores extra├¡dos:', {\r\n            systemBalance,\r\n            profitPool,\r\n            stats,\r\n            'dashboard.systemConfig?.system_balance': dashboard.systemConfig?.system_balance,\r\n            'dashboard.systemConfig?.profit_pool': dashboard.systemConfig?.profit_pool\r\n          });\r\n\r\n          // Atualizar cache do dashboard\r\n          cachedDashboard = { systemBalance, profitPool, stats };\r\n          lastDashboardCacheTime = now;\r\n\r\n          console.log('Dashboard completo recebido e cache atualizado:', dashboard);\r\n        }\r\n      } catch (error) {\r\n        console.error('Erro ao carregar dashboard administrativo:', error);\r\n        // Limpar cache em caso de erro para for├ºar nova busca\r\n        cachedDashboard = null;\r\n        lastDashboardCacheTime = 0;\r\n      }\r\n    }\r\n\r\n    // Carregar todos os usu├írios se for Admin (para estat├¡sticas do dashboard admin)\r\n    let allUsers: User[] = [currentUser].filter(Boolean) as User[];\r\n    if (currentUser?.isAdmin) {\r\n      try {\r\n        const usersResponse = await apiService.adminGetUsers();\r\n        if (usersResponse.success && Array.isArray(usersResponse.data)) {\r\n          allUsers = usersResponse.data.map(convertApiUserToUser);\r\n\r\n          // Garantir que o usu├írio atual est├í na lista (para evitar problemas de refer├¬ncia)\r\n          if (currentUser && !allUsers.some(u => u.id === currentUser.id)) {\r\n            allUsers.push(currentUser);\r\n          }\r\n        }\r\n      } catch (e) {\r\n        console.error('Erro ao carregar lista de usu├írios:', e);\r\n      }\r\n    }\r\n\r\n    return {\r\n      currentUser,\r\n      users: allUsers,\r\n      quotas,\r\n      loans,\r\n      transactions,\r\n      systemBalance,\r\n      profitPool,\r\n      stats,\r\n      welcomeBenefit,\r\n    };\r\n  } catch (error) {\r\n    console.error('Erro ao carregar estado da aplica├º├úo:', error);\r\n\r\n    // Em caso de erro, retornar estado padr├úo\r\n    return {\r\n      currentUser: null,\r\n      users: [],\r\n      quotas: [],\r\n      loans: [],\r\n      transactions: [],\r\n      systemBalance: 0,\r\n      profitPool: 0,\r\n    };\r\n  }\r\n};\r\n\r\n// Salvar estado da aplica├º├úo (n├úo necess├írio com API, mas mantido para compatibilidade)\r\nexport const saveState = (state: AppState): void => {\r\n  // Com a API, n├úo precisamos salvar o estado no localStorage\r\n  // Esta fun├º├úo ├® mantida apenas para compatibilidade com o c├│digo existente\r\n  console.log('saveState chamado, mas n├úo ├® necess├írio com API');\r\n};\r\n\r\n// --- Admin Logic ---\r\n\r\n\r\n\r\nexport const updateProfitPool = async (amountToAdd: number): Promise<{ success: boolean; message: string }> => {\r\n  try {\r\n    const response = await apiService.addProfitToPool(amountToAdd);\r\n    // Limpar cache ap├│s atualiza├º├úo\r\n    clearPendingItemsCache();\r\n    return { success: true, message: response.message || 'Excedente adicionado com sucesso!' };\r\n  } catch (error: any) {\r\n    return { success: false, message: error.message || 'Erro ao adicionar excedente.' };\r\n  }\r\n};\r\n\r\nconst CACHE_DURATION = 10000; // 10 segundos de cache (mantido para compatibilidade se necess├írio)\r\n\r\n// Cache para dashboard administrativo\r\nlet cachedDashboard: any = null;\r\nlet lastDashboardCacheTime = 0;\r\nconst DASHBOARD_CACHE_DURATION = 15000; // 15 segundos de cache para dashboard\r\n\r\n\r\n\r\n// Fun├º├úo para limpar o cache quando necess├írio (ex: ap├│s atualiza├º├úo de dividendos)\r\nexport const clearPendingItemsCache = (): void => {\r\n  cachedDashboard = null;\r\n  lastDashboardCacheTime = 0;\r\n  console.log('Cache do dashboard limpo');\r\n};\r\n\r\n// Fun├º├úo para limpar apenas o cache do dashboard\r\nexport const clearDashboardCache = (): void => {\r\n  cachedDashboard = null;\r\n  lastDashboardCacheTime = 0;\r\n  console.log('Cache do dashboard limpo');\r\n};\r\n\r\n// Fun├º├úo para limpar cache globalmente\r\nexport const clearAllCache = (): void => {\r\n  cachedDashboard = null;\r\n  lastDashboardCacheTime = 0;\r\n  console.log('Todo o cache foi limpo');\r\n};\r\n\r\n\r\n\r\nexport const distributeMonthlyDividends = async () => {\r\n  const result = await apiService.distributeDividends();\r\n  return result;\r\n};\r\n\r\n// --- User Logic ---\r\n\r\nexport const buyQuota = async (quantity: number, useBalance: boolean = false, paymentMethod?: 'pix' | 'card', cardData?: any): Promise<any> => {\r\n  if (!navigator.onLine) {\r\n    return await syncService.enqueue('BUY_QUOTA', { quantity, useBalance, paymentMethod, cardData });\r\n  }\r\n  return await apiService.buyQuotas(quantity, useBalance, paymentMethod, cardData);\r\n};\r\n\r\nexport const sellQuota = async (quotaId: string): Promise<void> => {\r\n  await apiService.sellQuota(quotaId);\r\n};\r\n\r\nexport const sellAllQuotas = async (): Promise<number> => {\r\n  const result = await apiService.sellAllQuotas();\r\n  return result.totalReceived || 0;\r\n};\r\n\r\nexport const requestLoan = async (\r\n  amount: number,\r\n  installments: number\r\n): Promise<any> => {\r\n  if (!navigator.onLine) {\r\n    return await syncService.enqueue('REQUEST_LOAN', { amount, installments });\r\n  }\r\n  return await apiService.requestLoan(amount, installments);\r\n};\r\n\r\nexport const repayLoan = async (loanId: string, useBalance: boolean, paymentMethod?: 'pix' | 'card', cardData?: any): Promise<any> => {\r\n  if (!navigator.onLine) {\r\n    return await syncService.enqueue('REPAY_LOAN', { loanId, useBalance, paymentMethod, cardData });\r\n  }\r\n  return await apiService.repayLoan(loanId, useBalance, paymentMethod, cardData);\r\n};\r\n\r\nexport const repayInstallment = async (loanId: string, amount: number, useBalance: boolean, paymentMethod?: 'pix' | 'card', cardData?: any): Promise<any> => {\r\n  if (!navigator.onLine) {\r\n    return await syncService.enqueue('REPAY_INSTALLMENT', { loanId, amount, useBalance, paymentMethod, cardData });\r\n  }\r\n  return await apiService.repayInstallment(loanId, amount, useBalance, paymentMethod, cardData);\r\n};\r\n\r\nexport const requestWithdrawal = async (amount: number, pixKey: string): Promise<void> => {\r\n  await apiService.requestWithdrawal(amount, pixKey);\r\n};\r\n\r\nexport const claimAdReward = async (): Promise<any> => {\r\n  if (!navigator.onLine) {\r\n    return await syncService.enqueue('CLAIM_AD_REWARD', {});\r\n  }\r\n  return await apiService.claimAdReward();\r\n};\r\n\r\nexport const upgradePro = async (method: 'pix' | 'card' | 'balance', cardData?: any): Promise<any> => {\r\n  return await apiService.post<any>('/monetization/upgrade-pro', { method, ...cardData });\r\n};\r\n\r\nexport const fastForwardTime = async (months: number): Promise<void> => {\r\n  console.log('Simula├º├úo de tempo desativada.');\r\n};\r\n\r\n// --- Auth ---\r\n\r\nexport const registerUser = async (\r\n  name: string,\r\n  email: string,\r\n  password: string,\r\n  pixKey: string,\r\n  secretPhrase: string,\r\n  referralCodeInput?: string,\r\n  cpf?: string\r\n): Promise<any> => {\r\n  const response = await apiService.register(\r\n    name,\r\n    email,\r\n    password,\r\n    secretPhrase,\r\n    pixKey,\r\n    referralCodeInput,\r\n    cpf\r\n  );\r\n  return {\r\n    user: convertApiUserToUser(response.user),\r\n    twoFactor: response.twoFactor\r\n  };\r\n};\r\n\r\nexport const changePassword = async (oldPass: string, newPass: string): Promise<void> => {\r\n  await apiService.changePassword(oldPass, newPass);\r\n};\r\n\r\nexport const loginUser = async (\r\n  email: string,\r\n  password: string,\r\n  secretPhrase?: string,\r\n  twoFactorCode?: string\r\n): Promise<any> => {\r\n  const response = await apiService.login(email, password, secretPhrase, twoFactorCode);\r\n  if (response.requires2FA) return response;\r\n  return convertApiUserToUser(response.user);\r\n};\r\n\r\nexport const resetPassword = async (\r\n  email: string,\r\n  secretPhrase: string,\r\n  newPassword: string\r\n): Promise<void> => {\r\n  await apiService.resetPassword(email, secretPhrase, newPassword);\r\n};\r\n\r\nexport const logoutUser = async (): Promise<void> => {\r\n  await apiService.logout();\r\n};\r\n\r\nexport const getCurrentUser = async (): Promise<User | null> => {\r\n  try {\r\n    if (!apiService.isAuthenticated()) {\r\n      return null;\r\n    }\r\n\r\n    const userProfile = await apiService.getUserProfile();\r\n    return convertApiUserToUser(userProfile.user);\r\n  } catch (error) {\r\n    console.error('Erro ao obter usu├írio atual:', error);\r\n    return null;\r\n  }\r\n};\r\n\r\n\r\n\r\nexport const get2FASetup = () => apiService.get2FASetup();\r\n\r\nexport const verify2FA = (email: string, code: string) => apiService.verify2FA(email, code);\r\n\r\nexport const confirmWithdrawal = (transactionId: number, code: string) => apiService.confirmWithdrawal(transactionId, code);\r\n\r\nexport const deleteUserAccount = async (twoFactorCode?: string): Promise<any> => {\r\n  const result = await apiService.deleteAccount(twoFactorCode);\r\n  if (result.success) {\r\n    await logoutUser();\r\n  }\r\n  return result;\r\n};","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josia\\Desktop\\projetos\\cred30\\packages\\frontend-v2\\src\\application\\services\\sync.service.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","message":"Definition for rule '@typescript-eslint/no-unused-vars' was not found.","line":1,"column":1,"endLine":1,"endColumn":2,"severity":2,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { apiService } from './api.service';\r\n\r\ninterface QueuedAction {\r\n    id: string;\r\n    type: string;\r\n    payload: any;\r\n    timestamp: number;\r\n}\r\n\r\nclass SyncService {\r\n    private queueKey = 'offline_actions_queue';\r\n\r\n    private getQueue(): QueuedAction[] {\r\n        const queue = localStorage.getItem(this.queueKey);\r\n        return queue ? JSON.parse(queue) : [];\r\n    }\r\n\r\n    private saveQueue(queue: QueuedAction[]) {\r\n        localStorage.setItem(this.queueKey, JSON.stringify(queue));\r\n    }\r\n\r\n    async enqueue(type: string, payload: any) {\r\n        const queue = this.getQueue();\r\n        const action: QueuedAction = {\r\n            id: Math.random().toString(36).substr(2, 9),\r\n            type,\r\n            payload,\r\n            timestamp: Date.now()\r\n        };\r\n        queue.push(action);\r\n        this.saveQueue(queue);\r\n\r\n        // Notify the UI that an action was queued\r\n        window.dispatchEvent(new CustomEvent('offline-action-queued', { detail: action }));\r\n\r\n        return { queued: true, actionId: action.id };\r\n    }\r\n\r\n    async processQueue() {\r\n        if (!navigator.onLine) return;\r\n\r\n        const queue = this.getQueue();\r\n        if (queue.length === 0) return;\r\n\r\n        console.log(`Sincronizando ${queue.length} a├º├Áes pendentes...`);\r\n\r\n        const remainingQueue: QueuedAction[] = [];\r\n        const results = [];\r\n\r\n        for (const action of queue) {\r\n            try {\r\n                let result;\r\n                switch (action.type) {\r\n                    case 'BUY_QUOTA':\r\n                        result = await apiService.buyQuotas(\r\n                            action.payload.quantity,\r\n                            action.payload.useBalance,\r\n                            action.payload.paymentMethod,\r\n                            action.payload.cardData\r\n                        );\r\n                        break;\r\n                    case 'REQUEST_LOAN':\r\n                        result = await apiService.requestLoan(\r\n                            action.payload.amount,\r\n                            action.payload.installments\r\n                        );\r\n                        break;\r\n                    case 'REPAY_LOAN':\r\n                        result = await apiService.repayLoan(\r\n                            action.payload.loanId,\r\n                            action.payload.useBalance,\r\n                            action.payload.paymentMethod,\r\n                            action.payload.cardData\r\n                        );\r\n                        break;\r\n                    case 'REPAY_INSTALLMENT':\r\n                        result = await apiService.repayInstallment(\r\n                            action.payload.loanId,\r\n                            action.payload.amount,\r\n                            action.payload.useBalance,\r\n                            action.payload.paymentMethod,\r\n                            action.payload.cardData\r\n                        );\r\n                        break;\r\n                    case 'CLAIM_AD_REWARD':\r\n                        result = await apiService.claimAdReward();\r\n                        break;\r\n                    case 'BUY_MARKETPLACE':\r\n                        result = await apiService.post('/marketplace/buy', {\r\n                            listingId: action.payload.listingId,\r\n                            offlineToken: action.payload.offlineToken\r\n                        });\r\n                        break;\r\n                    case 'RELEASE_ESCROW':\r\n                        result = await apiService.post(`/marketplace/order/${action.payload.orderId}/receive`, {\r\n                            verificationCode: action.payload.verificationCode\r\n                        });\r\n                        break;\r\n                    default:\r\n                        console.warn(`Tipo de a├º├úo desconhecido: ${action.type}`);\r\n                        continue;\r\n                }\r\n\r\n                results.push({ id: action.id, success: true, result });\r\n            } catch (error) {\r\n                console.error(`Erro ao sincronizar a├º├úo ${action.id}:`, error);\r\n                // Se o erro for de rede, mant├®m na fila. Se for erro de l├│gica/saldo, removemos mas avisamos.\r\n                if (navigator.onLine && (error as any).message?.includes('offline')) {\r\n                    remainingQueue.push(action);\r\n                } else {\r\n                    results.push({ id: action.id, success: false, error });\r\n                }\r\n            }\r\n        }\r\n\r\n        this.saveQueue(remainingQueue);\r\n\r\n        if (results.length > 0) {\r\n            window.dispatchEvent(new CustomEvent('offline-sync-completed', { detail: results }));\r\n        }\r\n    }\r\n\r\n    hasPendingActions(): boolean {\r\n        return this.getQueue().length > 0;\r\n    }\r\n}\r\n\r\nexport const syncService = new SyncService();\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josia\\Desktop\\projetos\\cred30\\packages\\frontend-v2\\src\\domain\\types\\common.types.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","message":"Definition for rule '@typescript-eslint/no-unused-vars' was not found.","line":1,"column":1,"endLine":1,"endColumn":2,"severity":2,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"export interface User {\r\n  id: string;\r\n  name: string;\r\n  email: string;\r\n  pixKey: string;\r\n  balance: number;\r\n  asaas_wallet_id?: string;\r\n  joinedAt: string;\r\n  referralCode: string;\r\n  isAdmin?: boolean;\r\n  score?: number;\r\n  secretPhrase?: string;\r\n  twoFactorEnabled?: boolean;\r\n  role?: 'MEMBER' | 'ATTENDANT' | 'ADMIN';\r\n  status?: 'ACTIVE' | 'BLOCKED';\r\n  membership_type?: 'FREE' | 'PRO';\r\n  cpf?: string | null; // CPF do usu├írio (obrigat├│rio para saque)\r\n  securityLockUntil?: number; // Timestamp em milissegundos\r\n  total_dividends_earned?: number;\r\n  last_login_at?: string;\r\n  video_points?: number;\r\n  ad_points?: number; // Pontos farm (1000 pts = R$ 0,03)\r\n  is_verified?: boolean; // Selo de verificado\r\n  is_seller?: boolean; // ├ë vendedor no marketplace\r\n}\r\n\r\nexport interface Quota {\r\n  id: string;\r\n  userId: string;\r\n  purchasePrice: number;\r\n  currentValue: number;\r\n  purchaseDate: string | number;\r\n  status: 'ACTIVE' | 'SOLD' | 'PENDING';\r\n  yieldRate?: number;\r\n}\r\n\r\nexport interface Loan {\r\n  id: string;\r\n  userId: string;\r\n  amount: number;\r\n  totalRepayment: number;\r\n  installments: number;\r\n  interestRate: number;\r\n  status: 'PENDING' | 'APPROVED' | 'REJECTED' | 'PAID' | 'PAYMENT_PENDING';\r\n  createdAt: string;\r\n  dueDate?: string;\r\n\r\n  totalPaid?: number;\r\n  remainingAmount?: number;\r\n  paidInstallmentsCount?: number;\r\n  isFullyPaid?: boolean;\r\n  userName?: string;\r\n  userEmail?: string;\r\n  user_id?: string;\r\n  user_name?: string;\r\n  user_email?: string;\r\n  created_at?: string;\r\n  requestDate?: number; // timestamp\r\n}\r\n\r\nexport interface Transaction {\r\n  id: string;\r\n  userId: string;\r\n  type: string;\r\n  amount: number;\r\n  description: string;\r\n  status: string;\r\n  date?: string;\r\n  created_at?: string;\r\n  metadata?: any;\r\n  user_name?: string;\r\n  user_email?: string;\r\n}\r\n\r\nexport interface AppState {\r\n  currentUser: User | null;\r\n  users: User[];\r\n  quotas: Quota[];\r\n  loans: Loan[];\r\n  transactions: Transaction[];\r\n  systemBalance: number;\r\n  profitPool: number;\r\n  isLoading?: boolean;\r\n\r\n  serverTime?: number;\r\n  lastDividendDistribution?: any;\r\n  stats?: {\r\n    quotasCount?: number;\r\n    totalLoaned?: number;\r\n    totalToReceive?: number;\r\n    totalGatewayCosts?: number;\r\n    totalManualCosts?: number;\r\n    totalTaxReserve?: number;\r\n    totalOperationalReserve?: number;\r\n    totalOwnerProfit?: number;\r\n    realLiquidity?: number;\r\n    totalReserves?: number;\r\n    theoreticalCash?: number;\r\n    monthlyFixedCosts?: number;\r\n    activeProposalsCount?: number;\r\n    systemConfig?: any; // To avoid lint errors when accessing raw config\r\n  };\r\n  welcomeBenefit?: {\r\n    hasDiscount: boolean;\r\n    usesRemaining: number;\r\n    maxUses: number;\r\n    description: string;\r\n    discountedRates: any;\r\n  };\r\n}\r\n\r\nexport interface Product {\r\n  id: string;\r\n  title: string;\r\n  description?: string;\r\n  imageUrl?: string;\r\n  affiliateUrl: string;\r\n  price?: number;\r\n  category: string;\r\n  active: boolean;\r\n  createdAt: string;\r\n}","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josia\\Desktop\\projetos\\cred30\\packages\\frontend-v2\\src\\main.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","message":"Definition for rule '@typescript-eslint/no-unused-vars' was not found.","line":1,"column":1,"endLine":1,"endColumn":2,"severity":2,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react'\r\nimport ReactDOM from 'react-dom/client'\r\nimport { BrowserRouter } from 'react-router-dom'\r\nimport App from './presentation/pages/app.page'\r\nimport './index.css'\r\n\r\nReactDOM.createRoot(document.getElementById('root')!).render(\r\n    <React.StrictMode>\r\n        <BrowserRouter>\r\n            <App />\r\n        </BrowserRouter>\r\n    </React.StrictMode>,\r\n)\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josia\\Desktop\\projetos\\cred30\\packages\\frontend-v2\\src\\presentation\\components\\AIAssistant.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","message":"Definition for rule '@typescript-eslint/no-unused-vars' was not found.","line":1,"column":1,"endLine":1,"endColumn":2,"severity":2,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useRef } from 'react';\r\nimport { User, MessageSquare, X, Send, Star } from 'lucide-react';\r\nimport { apiService } from '../../application/services/api.service';\r\n\r\ninterface AIAssistantProps {\r\n  appState: any;\r\n}\r\n\r\nexport const AIAssistant: React.FC<AIAssistantProps> = ({ appState }) => {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [message, setMessage] = useState('');\r\n  const [messages, setMessages] = useState<Array<{ role: string; content: string }>>([]);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [chatStatus, setChatStatus] = useState<'AI_ONLY' | 'PENDING_HUMAN' | 'ACTIVE_HUMAN' | 'CLOSED'>('AI_ONLY');\r\n  const [feedbackRating, setFeedbackRating] = useState(0);\r\n  const [feedbackComment, setFeedbackComment] = useState('');\r\n  const [feedbackSent, setFeedbackSent] = useState(false);\r\n  const messagesEndRef = useRef<HTMLDivElement>(null);\r\n\r\n  const scrollToBottom = () => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n  };\r\n\r\n  const loadHistory = async () => {\r\n    try {\r\n      const data = await apiService.getChatHistory();\r\n      if (data && data.messages) {\r\n        setMessages(data.messages);\r\n        setChatStatus(data.chat.status);\r\n      }\r\n    } catch (error) {\r\n      console.error('Erro ao carregar hist├│rico:', error);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      loadHistory();\r\n    }\r\n  }, [isOpen]);\r\n\r\n  useEffect(() => {\r\n    scrollToBottom();\r\n  }, [messages]);\r\n\r\n  // Polling para atualizar mensagens (A cada 5s se estiver aberto)\r\n  useEffect(() => {\r\n    let interval: NodeJS.Timeout;\r\n    if (isOpen && chatStatus !== 'CLOSED') {\r\n      loadHistory();\r\n      interval = setInterval(loadHistory, 5000);\r\n    }\r\n    return () => {\r\n      if (interval) clearInterval(interval);\r\n    };\r\n  }, [isOpen, chatStatus]);\r\n\r\n  const handleSend = async (manualContent?: string) => {\r\n    const contentToSend = manualContent || message;\r\n    if (!contentToSend.trim() || isLoading) return;\r\n\r\n    if (chatStatus === 'CLOSED') {\r\n      alert('Este atendimento foi encerrado.');\r\n      return;\r\n    }\r\n\r\n    const userContent = contentToSend;\r\n    setMessage('');\r\n    setIsLoading(true);\r\n\r\n    // Otimismo: adicionar mensagem do usu├írio na UI\r\n    setMessages(prev => [...prev, { role: 'user', content: userContent }]);\r\n\r\n    try {\r\n      const result = await apiService.sendChatMessage(userContent);\r\n      if (result.success) {\r\n        if (result.aiMessage) {\r\n          setMessages(prev => [...prev, result.aiMessage]);\r\n        }\r\n        setChatStatus(result.chatStatus);\r\n      }\r\n    } catch (error) {\r\n      console.error('Erro ao enviar mensagem:', error);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleEscalate = async () => {\r\n    try {\r\n      setIsLoading(true);\r\n      await apiService.escalateChat();\r\n      setChatStatus('PENDING_HUMAN');\r\n      setMessages(prev => [...prev, {\r\n        role: 'assistant',\r\n        content: 'Solicita├º├úo de atendimento humano enviada! Um atendente ir├í falar com voc├¬ em breve nesta mesma conversa.'\r\n      }]);\r\n    } catch (error) {\r\n      console.error('Erro ao escalonar:', error);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleSendFeedback = async () => {\r\n    if (feedbackRating === 0) return;\r\n    try {\r\n      // Como o endpoint espera o chat ID, e nesta view simplificada pegamos o chat atual implicitamente\r\n      // precisamos do ID do chat.\r\n      const chatData = await apiService.getChatHistory();\r\n      if (chatData?.chat?.id) {\r\n        await apiService.sendSupportFeedback(chatData.chat.id, feedbackRating, feedbackComment);\r\n        setFeedbackSent(true);\r\n        // Resetar ap├│s alguns segundos para permitir novo chat futuramente?\r\n        // Ou apenas dizer \"Obrigado\"\r\n      }\r\n    } catch (error) {\r\n      console.error('Erro ao enviar feedback', error);\r\n    }\r\n  };\r\n\r\n  const EDY_AVATAR = \"https://randomuser.me/api/portraits/men/62.jpg\";\r\n\r\n  return (\r\n    <div className=\"fixed bottom-[180px] right-4 md:bottom-6 md:right-6 z-[150] print:hidden\">\r\n      <button\r\n        onClick={() => setIsOpen(!isOpen)}\r\n        className={`bg-primary-500 hover:bg-primary-400 text-black p-0 rounded-full shadow-lg transition-all transform hover:scale-105 active:scale-95 flex items-center justify-center w-14 h-14 overflow-hidden border-2 border-primary-400`}\r\n        title=\"Falar com o Edy\"\r\n      >\r\n        {isOpen ? <X size={24} /> : (\r\n          <div className=\"relative w-full h-full\">\r\n            <img src={EDY_AVATAR} alt=\"Edy\" className=\"w-full h-full object-cover\" />\r\n            <span className=\"absolute bottom-1 right-1 flex h-3 w-3\">\r\n              <span className=\"animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75\"></span>\r\n              <span className=\"relative inline-flex rounded-full h-3 w-3 bg-emerald-500 border-2 border-primary-500\"></span>\r\n            </span>\r\n          </div>\r\n        )}\r\n      </button>\r\n\r\n      {isOpen && (\r\n        <div className=\"absolute bottom-16 right-0 w-[calc(100vw-2rem)] md:w-96 bg-surface border border-surfaceHighlight rounded-2xl shadow-2xl overflow-hidden flex flex-col max-h-[60vh] md:max-h-[500px] animate-in slide-in-from-bottom-5 duration-300\">\r\n          <div className=\"flex justify-between items-center p-4 border-b border-surfaceHighlight bg-surfaceAccent\">\r\n            <div className=\"flex items-center gap-3\">\r\n              <div className=\"w-10 h-10 bg-primary-500/20 rounded-full flex items-center justify-center border border-primary-500/30 overflow-hidden\">\r\n                <img src={EDY_AVATAR} alt=\"Edy\" className=\"w-full h-full object-cover\" />\r\n              </div>\r\n              <div>\r\n                <h3 className=\"text-white font-bold flex items-center gap-2\">\r\n                  Edy\r\n                  <span className={`text-[10px] px-1.5 py-0.5 rounded-full border ${chatStatus === 'CLOSED' ? 'bg-red-500/10 text-red-500 border-red-500/20' : 'bg-emerald-500/10 text-emerald-500 border-emerald-500/20'}`}>\r\n                    {chatStatus === 'CLOSED' ? 'Offline' : 'Online'}\r\n                  </span>\r\n                </h3>\r\n                <p className=\"text-[10px] text-zinc-400 uppercase tracking-widest\">\r\n                  {chatStatus === 'AI_ONLY' ? 'Assistente Virtual' : chatStatus === 'CLOSED' ? 'Atendimento Encerrado' : 'Atendimento Humano'}\r\n                </p>\r\n              </div>\r\n            </div>\r\n            {chatStatus === 'AI_ONLY' && (\r\n              <button\r\n                onClick={handleEscalate}\r\n                className=\"text-[10px] bg-zinc-800 hover:bg-zinc-700 text-zinc-300 px-2 py-1 rounded border border-zinc-700 transition\"\r\n              >\r\n                Falar com Humano\r\n              </button>\r\n            )}\r\n            {chatStatus === 'PENDING_HUMAN' && (\r\n              <button\r\n                onClick={() => handleSend('cancelar')}\r\n                className=\"text-[10px] bg-red-900/30 hover:bg-red-900/50 text-red-400 px-2 py-1 rounded border border-red-900/50 transition border-dashed\"\r\n              >\r\n                Cancelar\r\n              </button>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"flex-1 overflow-y-auto p-4 space-y-3 min-h-[300px]\">\r\n            {messages.length === 0 && !isLoading && (\r\n              <div className=\"text-center text-zinc-400 py-8 px-4\">\r\n                <div className=\"w-16 h-16 bg-zinc-800/50 rounded-full flex items-center justify-center mx-auto mb-4 border border-zinc-700 overflow-hidden shadow-lg shadow-black/50\">\r\n                  <img src={EDY_AVATAR} alt=\"Edy\" className=\"w-full h-full object-cover\" />\r\n                </div>\r\n                <p className=\"text-lg mb-2 font-bold text-white\">Ol├í! Sou o Edy. ­ƒæï</p>\r\n                <p className=\"text-sm\">Estou aqui para tirar suas d├║vidas sobre o Cred30 de forma r├ípida e segura.</p>\r\n                <p className=\"text-xs mt-4 text-zinc-500 bg-zinc-800/50 p-2 rounded-lg inline-block\">\r\n                  Pergunte sobre: Licen├ºas, Apoios ou Resgates.\r\n                </p>\r\n              </div>\r\n            )}\r\n\r\n            {messages.map((msg, index) => (\r\n              <div\r\n                key={index}\r\n                className={`flex ${msg.role === 'user' ? 'justify-end' : 'justify-start'}`}\r\n              >\r\n                <div\r\n                  className={`max-w-[85%] p-3 rounded-2xl text-sm ${msg.role === 'user'\r\n                    ? 'bg-primary-500 text-black rounded-tr-none shadow-sm'\r\n                    : 'bg-surfaceHighlight text-white rounded-tl-none border border-zinc-800 shadow-sm'\r\n                    }`}\r\n                >\r\n                  {msg.content}\r\n                </div>\r\n              </div>\r\n            ))}\r\n            {isLoading && (\r\n              <div className=\"flex justify-start\">\r\n                <div className=\"bg-surfaceHighlight p-3 rounded-2xl rounded-tl-none animate-pulse text-zinc-500 text-xs\">\r\n                  Digitando...\r\n                </div>\r\n              </div>\r\n            )}\r\n            <div ref={messagesEndRef} />\r\n          </div>\r\n\r\n          {chatStatus === 'CLOSED' ? (\r\n            <div className=\"p-4 border-t border-surfaceHighlight bg-surface\">\r\n              {feedbackSent ? (\r\n                <div className=\"text-center py-4 animate-in fade-in zoom-in\">\r\n                  <p className=\"text-emerald-400 font-bold mb-1\">Obrigado pela avalia├º├úo!</p>\r\n                  <p className=\"text-xs text-zinc-500 mb-4\">Sua opini├úo nos ajuda a melhorar.</p>\r\n                  <button\r\n                    onClick={() => {\r\n                      setFeedbackSent(false);\r\n                      setFeedbackRating(0);\r\n                      setFeedbackComment('');\r\n                      setMessages([]);\r\n                      setChatStatus('AI_ONLY');\r\n                    }}\r\n                    className=\"bg-zinc-800 hover:bg-zinc-700 text-white text-[10px] font-bold py-1.5 px-3 rounded-lg border border-zinc-700 transition\"\r\n                  >\r\n                    Iniciar Novo Atendimento\r\n                  </button>\r\n                </div>\r\n              ) : (\r\n                <div className=\"flex flex-col gap-3 animate-in fade-in slide-in-from-bottom-2\">\r\n                  <p className=\"text-xs text-zinc-400 text-center font-bold uppercase\">Como foi seu atendimento?</p>\r\n                  <div className=\"flex justify-center gap-2\">\r\n                    {[1, 2, 3, 4, 5].map((star) => (\r\n                      <button\r\n                        key={star}\r\n                        onClick={() => setFeedbackRating(star)}\r\n                        className={`p-1 transition ${star <= feedbackRating ? 'text-yellow-400 scale-110' : 'text-zinc-600 hover:text-yellow-400/50'}`}\r\n                      >\r\n                        <Star size={24} fill={star <= feedbackRating ? \"currentColor\" : \"none\"} />\r\n                      </button>\r\n                    ))}\r\n                  </div>\r\n                  <textarea\r\n                    placeholder=\"Deixe um coment├írio (opcional)...\"\r\n                    value={feedbackComment}\r\n                    onChange={(e) => setFeedbackComment(e.target.value)}\r\n                    className=\"w-full bg-black/20 border border-zinc-800 rounded-lg p-2 text-xs text-white resize-none\"\r\n                    rows={2}\r\n                  />\r\n                  <button\r\n                    onClick={handleSendFeedback}\r\n                    disabled={feedbackRating === 0}\r\n                    className=\"w-full bg-primary-500 hover:bg-primary-400 disabled:opacity-50 text-black font-bold text-xs py-2 rounded-lg transition\"\r\n                  >\r\n                    Enviar Avalia├º├úo\r\n                  </button>\r\n                </div>\r\n              )}\r\n            </div>\r\n          ) : (\r\n            <div className=\"p-4 border-t border-surfaceHighlight bg-surface\">\r\n              <div className=\"flex gap-2\">\r\n                <input\r\n                  type=\"text\"\r\n                  value={message}\r\n                  onChange={(e) => setMessage(e.target.value)}\r\n                  onKeyPress={(e) => {\r\n                    if (e.key === 'Enter') {\r\n                      handleSend();\r\n                    }\r\n                  }}\r\n                  placeholder=\"Como posso ajudar?\"\r\n                  className=\"flex-1 bg-background border border-surfaceHighlight rounded-xl px-4 py-2 text-white text-sm outline-none focus:border-primary-500 transition-all shadow-inner\"\r\n                  disabled={isLoading}\r\n                />\r\n                <button\r\n                  onClick={() => handleSend()}\r\n                  disabled={isLoading || !message.trim()}\r\n                  className=\"bg-primary-500 hover:bg-primary-400 disabled:opacity-50 disabled:cursor-not-allowed text-black p-2 rounded-xl font-medium transition shadow-lg\"\r\n                >\r\n                  <Send size={20} />\r\n                </button>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josia\\Desktop\\projetos\\cred30\\packages\\frontend-v2\\src\\presentation\\components\\Layout.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","message":"Definition for rule '@typescript-eslint/no-unused-vars' was not found.","line":1,"column":1,"endLine":1,"endColumn":2,"severity":2,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { ReactNode } from 'react';\r\n\r\ninterface LayoutProps {\r\n  user: any;\r\n  currentView: string;\r\n  onChangeView: (view: string) => void;\r\n  onLogout: () => void;\r\n  children: ReactNode;\r\n}\r\n\r\nexport const Layout: React.FC<LayoutProps> = ({ \r\n  user, \r\n  currentView, \r\n  onChangeView, \r\n  onLogout, \r\n  children \r\n}) => {\r\n  const menuItems = [\r\n    { id: 'dashboard', label: 'Dashboard', icon: '­ƒôè' },\r\n    { id: 'invest', label: 'Investir', icon: '­ƒÆ░' },\r\n    { id: 'portfolio', label: 'Carteira', icon: '­ƒÆ╝' },\r\n    { id: 'loans', label: 'Empr├®stimos', icon: '­ƒÆ©' },\r\n    { id: 'withdraw', label: 'Saques', icon: '­ƒÆ│' },\r\n    { id: 'settings', label: 'Configura├º├Áes', icon: 'ÔÜÖ´©Å' },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-background\">\r\n      {/* Header */}\r\n      <header className=\"bg-surface border-b border-surfaceHighlight\">\r\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n          <div className=\"flex justify-between items-center h-16\">\r\n            {/* Logo */}\r\n            <div className=\"flex items-center\">\r\n              <div className=\"w-8 h-8 bg-primary-500 rounded-lg flex items-center justify-center text-black font-bold\">\r\n                C30\r\n              </div>\r\n              <span className=\"ml-3 text-xl font-bold text-white\">Cred30</span>\r\n            </div>\r\n\r\n            {/* Navigation */}\r\n            <nav className=\"hidden md:flex space-x-8\">\r\n              {menuItems.map((item) => (\r\n                <button\r\n                  key={item.id}\r\n                  onClick={() => onChangeView(item.id)}\r\n                  className={`px-3 py-2 rounded-md text-sm font-medium transition-colors ${\r\n                    currentView === item.id\r\n                      ? 'bg-primary-500 text-black'\r\n                      : 'text-zinc-300 hover:text-white hover:bg-surfaceHighlight'\r\n                  }`}\r\n                >\r\n                  <span className=\"mr-2\">{item.icon}</span>\r\n                  {item.label}\r\n                </button>\r\n              ))}\r\n            </nav>\r\n\r\n            {/* User Menu */}\r\n            <div className=\"flex items-center space-x-4\">\r\n              <span className=\"text-sm text-zinc-300\">\r\n                {user?.name || 'Usu├írio'}\r\n              </span>\r\n              <button\r\n                onClick={onLogout}\r\n                className=\"bg-red-500 hover:bg-red-600 text-white px-3 py-2 rounded-md text-sm font-medium transition-colors\"\r\n              >\r\n                Sair\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </header>\r\n\r\n      {/* Mobile menu */}\r\n      <div className=\"md:hidden border-b border-surfaceHighlight\">\r\n        <div className=\"px-2 pt-2 pb-3 space-y-1\">\r\n          {menuItems.map((item) => (\r\n            <button\r\n              key={item.id}\r\n              onClick={() => onChangeView(item.id)}\r\n              className={`block w-full text-left px-3 py-2 rounded-md text-base font-medium transition-colors ${\r\n                currentView === item.id\r\n                  ? 'bg-primary-500 text-black'\r\n                  : 'text-zinc-300 hover:text-white hover:bg-surfaceHighlight'\r\n              }`}\r\n            >\r\n              <span className=\"mr-2\">{item.icon}</span>\r\n              {item.label}\r\n            </button>\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Main Content */}\r\n      <main className=\"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8\">\r\n        {children}\r\n      </main>\r\n    </div>\r\n  );\r\n};","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josia\\Desktop\\projetos\\cred30\\packages\\frontend-v2\\src\\presentation\\components\\features\\admin\\AdminUserManagement.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","message":"Definition for rule '@typescript-eslint/no-unused-vars' was not found.","line":1,"column":1,"endLine":1,"endColumn":2,"severity":2,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { Search, Shield, UserX, UserCheck, ShieldCheck, Mail, Calendar, DollarSign, Award, Plus, X as XIcon, UserPlus } from 'lucide-react';\r\nimport { apiService } from '../../../../application/services/api.service';\r\n\r\ninterface User {\r\n    id: number;\r\n    name: string;\r\n    email: string;\r\n    role: 'MEMBER' | 'ATTENDANT' | 'ADMIN';\r\n    status: 'ACTIVE' | 'BLOCKED';\r\n    balance: number;\r\n    score: number;\r\n    created_at: string;\r\n    pix_key: string;\r\n}\r\n\r\nexport const AdminUserManagement = ({ onSuccess, onError }: { onSuccess: any, onError: any }) => {\r\n    const [users, setUsers] = useState<User[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [search, setSearch] = useState('');\r\n    const [roleFilter, setRoleFilter] = useState('');\r\n    const [statusFilter, setStatusFilter] = useState('');\r\n    const [showCreateModal, setShowCreateModal] = useState(false);\r\n    const [newAttendant, setNewAttendant] = useState({\r\n        name: '',\r\n        email: '',\r\n        password: '',\r\n        secretPhrase: '',\r\n        pixKey: ''\r\n    });\r\n\r\n    useEffect(() => {\r\n        fetchUsers();\r\n    }, [roleFilter, statusFilter]);\r\n\r\n    const fetchUsers = async () => {\r\n        setLoading(true);\r\n        try {\r\n            const res = await apiService.adminGetUsers({ search, role: roleFilter, status: statusFilter });\r\n            if (res.success) {\r\n                setUsers(res.data);\r\n            }\r\n        } catch (error: any) {\r\n            onError('Erro', 'Falha ao buscar membros');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleUpdateAccess = async (userId: number, role?: string, status?: string) => {\r\n        try {\r\n            const res = await apiService.adminUpdateUserAccess({ userId, role, status });\r\n            if (res.success) {\r\n                onSuccess('Sucesso', 'Permiss├Áes atualizadas!');\r\n                fetchUsers();\r\n            }\r\n        } catch (error: any) {\r\n            onError('Erro', error.message);\r\n        }\r\n    };\r\n\r\n    const handleCreateAttendant = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        try {\r\n            const res = await apiService.adminCreateAttendant(newAttendant);\r\n            if (res.success) {\r\n                onSuccess('Sucesso', 'Atendente criado com sucesso!');\r\n                setShowCreateModal(false);\r\n                setNewAttendant({ name: '', email: '', password: '', secretPhrase: '', pixKey: '' });\r\n                fetchUsers();\r\n            }\r\n        } catch (error: any) {\r\n            onError('Erro', error.message);\r\n        }\r\n    };\r\n\r\n    const roleBadge = (role: string) => {\r\n        switch (role) {\r\n            case 'ADMIN': return <span className=\"flex items-center gap-1 text-[10px] font-black bg-red-500/10 text-red-400 px-2 py-1 rounded-full border border-red-500/20\"><Shield size={10} /> ADMIN</span>;\r\n            case 'ATTENDANT': return <span className=\"flex items-center gap-1 text-[10px] font-black bg-blue-500/10 text-blue-400 px-2 py-1 rounded-full border border-blue-500/20\"><ShieldCheck size={10} /> ATENDENTE</span>;\r\n            default: return <span className=\"text-[10px] font-black bg-zinc-800 text-zinc-400 px-2 py-1 rounded-full border border-zinc-700/50\">MEMBRO</span>;\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"space-y-6 animate-in fade-in duration-500\">\r\n            <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 bg-zinc-900/50 p-6 rounded-3xl border border-zinc-800 shadow-xl\">\r\n                <div className=\"flex-1 w-full md:max-w-md relative group\">\r\n                    <Search className=\"absolute left-4 top-1/2 -translate-y-1/2 text-zinc-500 group-focus-within:text-primary-400 transition-colors\" size={18} />\r\n                    <input\r\n                        type=\"text\"\r\n                        placeholder=\"Pesquisar por nome ou email...\"\r\n                        value={search}\r\n                        onChange={(e) => setSearch(e.target.value)}\r\n                        onKeyDown={(e) => e.key === 'Enter' && fetchUsers()}\r\n                        className=\"w-full bg-black/40 border border-zinc-800 rounded-2xl pl-12 pr-4 py-3.5 text-sm text-white focus:outline-none focus:border-primary-500/50 transition-all font-medium\"\r\n                    />\r\n                </div>\r\n\r\n                <div className=\"flex items-center gap-3 w-full md:w-auto\">\r\n                    <select\r\n                        value={roleFilter}\r\n                        onChange={(e) => setRoleFilter(e.target.value)}\r\n                        className=\"bg-zinc-800 border border-zinc-700 text-zinc-300 text-xs font-bold rounded-xl px-4 py-3.5 outline-none focus:border-primary-500/50 cursor-pointer\"\r\n                        aria-label=\"Filtrar por cargo\"\r\n                    >\r\n                        <option value=\"\">Todos Cargos</option>\r\n                        <option value=\"MEMBER\">Membros</option>\r\n                        <option value=\"ATTENDANT\">Atendentes</option>\r\n                        <option value=\"ADMIN\">Admins</option>\r\n                    </select>\r\n\r\n                    <button\r\n                        onClick={() => setShowCreateModal(true)}\r\n                        className=\"flex-1 md:flex-none bg-primary-500 hover:bg-primary-400 text-black font-black px-6 py-3.5 rounded-2xl transition-all shadow-lg flex items-center justify-center gap-2 whitespace-nowrap\"\r\n                    >\r\n                        <Plus size={20} /> ADICIONAR EQUIPE\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"bg-zinc-900/50 border border-zinc-800 rounded-3xl overflow-hidden shadow-2xl\">\r\n                <div className=\"overflow-x-auto\">\r\n                    <table className=\"w-full text-left\">\r\n                        <thead>\r\n                            <tr className=\"bg-black/40 border-b border-zinc-800\">\r\n                                <th className=\"px-6 py-5 text-[10px] font-black text-zinc-500 uppercase tracking-widest\">Membro</th>\r\n                                <th className=\"px-6 py-5 text-[10px] font-black text-zinc-500 uppercase tracking-widest\">Status/Cargo</th>\r\n                                <th className=\"px-6 py-5 text-[10px] font-black text-zinc-500 uppercase tracking-widest text-right\">Saldo/Score</th>\r\n                                <th className=\"px-6 py-5 text-[10px] font-black text-zinc-500 uppercase tracking-widest text-center\">A├º├Áes</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody className=\"divide-y divide-zinc-800/50\">\r\n                            {loading ? (\r\n                                <tr>\r\n                                    <td colSpan={4} className=\"py-20 text-center\">\r\n                                        <div className=\"w-10 h-10 border-2 border-primary-500/20 border-t-primary-500 rounded-full animate-spin mx-auto\"></div>\r\n                                    </td>\r\n                                </tr>\r\n                            ) : users.length === 0 ? (\r\n                                <tr>\r\n                                    <td colSpan={4} className=\"py-20 text-center text-zinc-500 font-bold uppercase text-xs tracking-widest\">Nenhum membro encontrado</td>\r\n                                </tr>\r\n                            ) : (\r\n                                users.map(user => (\r\n                                    <tr key={user.id} className=\"hover:bg-white/[0.02] transition-colors group\">\r\n                                        <td className=\"px-6 py-5\">\r\n                                            <div className=\"flex items-center gap-4\">\r\n                                                <div className=\"w-12 h-12 rounded-2xl bg-gradient-to-br from-zinc-800 to-zinc-900 border border-zinc-700 flex items-center justify-center text-zinc-400 font-black text-xs shadow-inner uppercase tracking-tighter\">\r\n                                                    {user.name.substring(0, 2)}\r\n                                                </div>\r\n                                                <div>\r\n                                                    <p className=\"text-sm font-black text-white group-hover:text-primary-400 transition-colors uppercase tracking-tight\">{user.name}</p>\r\n                                                    <p className=\"text-[11px] text-zinc-500 font-medium flex items-center gap-1\"><Mail size={10} /> {user.email}</p>\r\n                                                </div>\r\n                                            </div>\r\n                                        </td>\r\n                                        <td className=\"px-6 py-5\">\r\n                                            <div className=\"flex flex-col gap-2 scale-90 origin-left\">\r\n                                                <div className=\"flex gap-2\">\r\n                                                    {roleBadge(user.role)}\r\n                                                    <span className={`text-[10px] font-black px-2 py-1 rounded-full border ${user.status === 'ACTIVE'\r\n                                                        ? 'bg-emerald-500/10 text-emerald-400 border-emerald-500/20'\r\n                                                        : 'bg-red-500/10 text-red-400 border-red-500/20'\r\n                                                        }`}>\r\n                                                        {user.status === 'ACTIVE' ? 'ATIVO' : 'BLOQUEADO'}\r\n                                                    </span>\r\n                                                </div>\r\n                                                <p className=\"text-[10px] text-zinc-600 flex items-center gap-1 font-bold uppercase\"><Calendar size={10} /> Desde {new Date(user.created_at).toLocaleDateString('pt-BR')}</p>\r\n                                            </div>\r\n                                        </td>\r\n                                        <td className=\"px-6 py-5 text-right\">\r\n                                            <div className=\"space-y-1\">\r\n                                                <p className=\"text-sm font-bold text-white tracking-tight flex items-center justify-end gap-1\"><DollarSign size={14} className=\"text-emerald-400\" /> {user.balance.toLocaleString('pt-BR', { minimumFractionDigits: 2 })}</p>\r\n                                                <p className=\"text-[11px] text-primary-400 font-black flex items-center justify-end gap-1\"><Award size={12} /> {user.score} pts</p>\r\n                                            </div>\r\n                                        </td>\r\n                                        <td className=\"px-6 py-5\">\r\n                                            <div className=\"flex items-center justify-center gap-2\">\r\n                                                {user.status === 'ACTIVE' ? (\r\n                                                    <button\r\n                                                        title=\"Bloquear Conta\"\r\n                                                        onClick={() => handleUpdateAccess(user.id, undefined, 'BLOCKED')}\r\n                                                        className=\"w-10 h-10 rounded-xl bg-red-500/10 text-red-500 hover:bg-red-500 hover:text-white transition-all flex items-center justify-center border border-red-500/20\"\r\n                                                    >\r\n                                                        <UserX size={18} />\r\n                                                    </button>\r\n                                                ) : (\r\n                                                    <button\r\n                                                        title=\"Desbloquear Conta\"\r\n                                                        onClick={() => handleUpdateAccess(user.id, undefined, 'ACTIVE')}\r\n                                                        className=\"w-10 h-10 rounded-xl bg-emerald-500/10 text-emerald-500 hover:bg-emerald-500 hover:text-white transition-all flex items-center justify-center border border-emerald-500/20\"\r\n                                                    >\r\n                                                        <UserCheck size={18} />\r\n                                                    </button>\r\n                                                )}\r\n\r\n                                                {user.role === 'MEMBER' && (\r\n                                                    <button\r\n                                                        title=\"Promover a Atendente\"\r\n                                                        onClick={() => handleUpdateAccess(user.id, 'ATTENDANT', undefined)}\r\n                                                        className=\"w-10 h-10 rounded-xl bg-blue-500/10 text-blue-500 hover:bg-blue-500 hover:text-white transition-all flex items-center justify-center border border-blue-500/20\"\r\n                                                    >\r\n                                                        <UserPlus size={18} />\r\n                                                    </button>\r\n                                                )}\r\n\r\n                                                {user.role === 'ATTENDANT' && (\r\n                                                    <button\r\n                                                        title=\"Remover Permiss├Áes de Equipe\"\r\n                                                        onClick={() => handleUpdateAccess(user.id, 'MEMBER', undefined)}\r\n                                                        className=\"w-10 h-10 rounded-xl bg-amber-500/10 text-amber-500 hover:bg-amber-500 hover:text-white transition-all flex items-center justify-center border border-amber-500/20\"\r\n                                                    >\r\n                                                        <Shield size={18} className=\"rotate-180\" />\r\n                                                    </button>\r\n                                                )}\r\n                                            </div>\r\n                                        </td>\r\n                                    </tr>\r\n                                ))\r\n                            )}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </div>\r\n\r\n            {showCreateModal && (\r\n                <div className=\"fixed inset-0 bg-black/90 backdrop-blur-sm z-[150] flex items-center justify-center p-4\">\r\n                    <div className=\"bg-zinc-900 border border-zinc-800 rounded-3xl p-8 w-full max-w-md relative animate-in zoom-in-95 duration-300\">\r\n                        <button\r\n                            onClick={() => setShowCreateModal(false)}\r\n                            className=\"absolute top-6 right-6 text-zinc-500 hover:text-white\"\r\n                            aria-label=\"Fechar modal\"\r\n                            title=\"Fechar modal\"\r\n                        >\r\n                            <XIcon size={24} />\r\n                        </button>\r\n\r\n                        <div className=\"flex items-center gap-4 mb-8\">\r\n                            <div className=\"p-3 bg-primary-500/10 rounded-2xl border border-primary-500/20\">\r\n                                <ShieldCheck size={28} className=\"text-primary-400\" />\r\n                            </div>\r\n                            <div>\r\n                                <h4 className=\"text-xl font-black text-white uppercase tracking-tight\">Criar Atendente</h4>\r\n                                <p className=\"text-xs text-zinc-500 font-bold uppercase tracking-widest\">Equipe Operacional</p>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <form onSubmit={handleCreateAttendant} className=\"space-y-4\">\r\n                            <div className=\"space-y-1\">\r\n                                <label className=\"text-[10px] text-zinc-500 font-black uppercase tracking-widest ml-1\">Nome Completo</label>\r\n                                <input\r\n                                    required\r\n                                    type=\"text\"\r\n                                    placeholder=\"Ex: Jo├úo Ferreira\"\r\n                                    value={newAttendant.name}\r\n                                    onChange={(e) => setNewAttendant({ ...newAttendant, name: e.target.value })}\r\n                                    className=\"w-full bg-black/40 border border-zinc-800 rounded-2xl px-6 py-4 text-white outline-none focus:border-primary-500/50 font-medium\"\r\n                                />\r\n                            </div>\r\n                            <div className=\"space-y-1\">\r\n                                <label className=\"text-[10px] text-zinc-500 font-black uppercase tracking-widest ml-1\">Email de Acesso</label>\r\n                                <input\r\n                                    required\r\n                                    type=\"email\"\r\n                                    placeholder=\"joao@suporte.com\"\r\n                                    value={newAttendant.email}\r\n                                    onChange={(e) => setNewAttendant({ ...newAttendant, email: e.target.value })}\r\n                                    className=\"w-full bg-black/40 border border-zinc-800 rounded-2xl px-6 py-4 text-white outline-none focus:border-primary-500/50 font-medium\"\r\n                                />\r\n                            </div>\r\n                            <div className=\"grid grid-cols-2 gap-4\">\r\n                                <div className=\"space-y-1\">\r\n                                    <label className=\"text-[10px] text-zinc-500 font-black uppercase tracking-widest ml-1\">Senha</label>\r\n                                    <input\r\n                                        required\r\n                                        type=\"password\"\r\n                                        placeholder=\"******\"\r\n                                        value={newAttendant.password}\r\n                                        onChange={(e) => setNewAttendant({ ...newAttendant, password: e.target.value })}\r\n                                        className=\"w-full bg-black/40 border border-zinc-800 rounded-2xl px-6 py-4 text-white outline-none focus:border-primary-500/50 font-medium\"\r\n                                    />\r\n                                </div>\r\n                                <div className=\"space-y-1\">\r\n                                    <label className=\"text-[10px] text-zinc-500 font-black uppercase tracking-widest ml-1\">Pix (Aux├¡lio)</label>\r\n                                    <input\r\n                                        required\r\n                                        type=\"text\"\r\n                                        placeholder=\"Chave PIX\"\r\n                                        value={newAttendant.pixKey}\r\n                                        onChange={(e) => setNewAttendant({ ...newAttendant, pixKey: e.target.value })}\r\n                                        className=\"w-full bg-black/40 border border-zinc-800 rounded-2xl px-6 py-4 text-white outline-none focus:border-primary-500/50 font-medium\"\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"space-y-1\">\r\n                                <label className=\"text-[10px] text-zinc-500 font-black uppercase tracking-widest ml-1\">Frase Secreta (2FA)</label>\r\n                                <input\r\n                                    required\r\n                                    type=\"text\"\r\n                                    placeholder=\"Palavras de seguran├ºa\"\r\n                                    value={newAttendant.secretPhrase}\r\n                                    onChange={(e) => setNewAttendant({ ...newAttendant, secretPhrase: e.target.value })}\r\n                                    className=\"w-full bg-black/40 border border-zinc-800 rounded-2xl px-6 py-4 text-white outline-none focus:border-primary-500/50 font-medium\"\r\n                                />\r\n                            </div>\r\n\r\n                            <button\r\n                                type=\"submit\"\r\n                                className=\"w-full bg-primary-500 hover:bg-primary-400 text-black font-black py-5 rounded-2xl transition-all shadow-xl mt-4\"\r\n                            >\r\n                                CADASTRAR EQUIPE\r\n                            </button>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josia\\Desktop\\projetos\\cred30\\packages\\frontend-v2\\src\\presentation\\components\\features\\admin\\tabs\\AdminBugs.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","message":"Definition for rule '@typescript-eslint/no-unused-vars' was not found.","line":1,"column":1,"endLine":1,"endColumn":2,"severity":2,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { Bug, CheckCircle2, Clock, AlertTriangle, Trash2, MessageSquare, RefreshCw } from 'lucide-react';\r\nimport { apiService } from '../../../../../application/services/api.service';\r\n\r\ninterface AdminBugsProps {\r\n    onSuccess: (title: string, message: string) => void;\r\n    onError: (title: string, message: string) => void;\r\n}\r\n\r\ninterface BugReport {\r\n    id: number;\r\n    user_id: number;\r\n    user_email: string;\r\n    user_name: string;\r\n    title: string;\r\n    description: string;\r\n    category: string;\r\n    severity: string;\r\n    status: string;\r\n    device_info: string;\r\n    admin_notes: string;\r\n    created_at: string;\r\n    resolved_at: string | null;\r\n}\r\n\r\nexport const AdminBugs: React.FC<AdminBugsProps> = ({ onSuccess, onError }) => {\r\n    const [bugs, setBugs] = useState<BugReport[]>([]);\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const [statusFilter, setStatusFilter] = useState<string>('open');\r\n    const [selectedBug, setSelectedBug] = useState<BugReport | null>(null);\r\n    const [adminNotes, setAdminNotes] = useState('');\r\n    const [counts, setCounts] = useState({ open: 0, inProgress: 0 });\r\n\r\n    const fetchBugs = async () => {\r\n        setIsLoading(true);\r\n        try {\r\n            const res = await apiService.get<any>(`/bugs/admin?status=${statusFilter}`) as any;\r\n            if (res.success) {\r\n                setBugs(res.data || []);\r\n                setCounts(res.counts || { open: 0, inProgress: 0 });\r\n            }\r\n        } catch (error) {\r\n            console.error('Erro ao buscar bugs:', error);\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchBugs();\r\n    }, [statusFilter]);\r\n\r\n    const handleUpdateStatus = async (bugId: number, newStatus: string) => {\r\n        try {\r\n            const res = await apiService.patch<any>(`/bugs/admin/${bugId}`, {\r\n                status: newStatus,\r\n                adminNotes: adminNotes || undefined\r\n            });\r\n            if (res.success) {\r\n                onSuccess('Atualizado', 'Status do bug atualizado.');\r\n                setSelectedBug(null);\r\n                setAdminNotes('');\r\n                fetchBugs();\r\n            } else {\r\n                onError('Erro', res.message);\r\n            }\r\n        } catch (error: any) {\r\n            onError('Erro', error.message);\r\n        }\r\n    };\r\n\r\n    const handleDelete = async (bugId: number) => {\r\n        if (!window.confirm('Excluir este bug definitivamente?')) return;\r\n        try {\r\n            const res = await apiService.delete<any>(`/bugs/admin/${bugId}`);\r\n            if (res.success) {\r\n                onSuccess('Exclu├¡do', 'Bug removido com sucesso.');\r\n                fetchBugs();\r\n            }\r\n        } catch (error: any) {\r\n            onError('Erro', error.message);\r\n        }\r\n    };\r\n\r\n    const getSeverityColor = (severity: string) => {\r\n        switch (severity) {\r\n            case 'critical': return 'bg-red-500 text-white';\r\n            case 'high': return 'bg-orange-500 text-black';\r\n            case 'medium': return 'bg-yellow-500 text-black';\r\n            default: return 'bg-zinc-600 text-white';\r\n        }\r\n    };\r\n\r\n    const getStatusIcon = (status: string) => {\r\n        switch (status) {\r\n            case 'resolved': return <CheckCircle2 size={14} className=\"text-emerald-400\" />;\r\n            case 'in_progress': return <Clock size={14} className=\"text-yellow-400\" />;\r\n            case 'closed': return <CheckCircle2 size={14} className=\"text-zinc-500\" />;\r\n            default: return <AlertTriangle size={14} className=\"text-red-400\" />;\r\n        }\r\n    };\r\n\r\n    const translateCategory = (category: string) => {\r\n        const map: Record<string, string> = {\r\n            'general': 'Geral',\r\n            'payment': 'Pagamentos',\r\n            'ui': 'Interface',\r\n            'performance': 'Lentid├úo',\r\n            'other': 'Outro'\r\n        };\r\n        return map[category] || category;\r\n    };\r\n\r\n    return (\r\n        <div className=\"space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700\">\r\n            {/* Header */}\r\n            <div className=\"flex flex-col md:flex-row items-center justify-between gap-4\">\r\n                <div className=\"flex items-center gap-4\">\r\n                    <div className=\"p-3 bg-red-500/10 rounded-2xl\">\r\n                        <Bug className=\"text-red-400\" size={28} />\r\n                    </div>\r\n                    <div>\r\n                        <h2 className=\"text-2xl font-bold text-white\">Central de Bugs</h2>\r\n                        <p className=\"text-zinc-500 text-sm\">Gerencie os problemas reportados pelos membros</p>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"flex items-center gap-3\">\r\n                    <div className=\"flex items-center gap-2 bg-zinc-800/50 px-3 py-1.5 rounded-full\">\r\n                        <span className=\"text-red-400 font-bold text-sm\">{counts.open}</span>\r\n                        <span className=\"text-zinc-500 text-xs\">Abertos</span>\r\n                    </div>\r\n                    <div className=\"flex items-center gap-2 bg-zinc-800/50 px-3 py-1.5 rounded-full\">\r\n                        <span className=\"text-yellow-400 font-bold text-sm\">{counts.inProgress}</span>\r\n                        <span className=\"text-zinc-500 text-xs\">Em Progresso</span>\r\n                    </div>\r\n                    <button onClick={fetchBugs} className=\"p-2 bg-zinc-800 rounded-xl hover:bg-zinc-700 transition\">\r\n                        <RefreshCw size={18} className={isLoading ? 'animate-spin' : ''} />\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Filters */}\r\n            <div className=\"flex gap-2 flex-wrap\">\r\n                {['open', 'in_progress', 'resolved', 'closed', 'all'].map(status => (\r\n                    <button\r\n                        key={status}\r\n                        onClick={() => setStatusFilter(status)}\r\n                        className={`px-4 py-2 rounded-xl text-sm font-bold transition-all ${statusFilter === status\r\n                            ? 'bg-primary-500 text-black'\r\n                            : 'bg-zinc-800 text-zinc-400 hover:text-white'\r\n                            }`}\r\n                    >\r\n                        {status === 'open' ? 'Abertos' :\r\n                            status === 'in_progress' ? 'Em Progresso' :\r\n                                status === 'resolved' ? 'Resolvidos' :\r\n                                    status === 'closed' ? 'Fechados' : 'Todos'}\r\n                    </button>\r\n                ))}\r\n            </div>\r\n\r\n            {/* Bug List */}\r\n            <div className=\"space-y-4\">\r\n                {isLoading && (\r\n                    <div className=\"text-center py-12 text-zinc-500 animate-pulse\">Carregando bugs...</div>\r\n                )}\r\n\r\n                {!isLoading && bugs.length === 0 && (\r\n                    <div className=\"text-center py-20 opacity-50\">\r\n                        <Bug size={48} className=\"mx-auto mb-4\" />\r\n                        <p className=\"text-sm font-bold uppercase\">Nenhum bug encontrado</p>\r\n                    </div>\r\n                )}\r\n\r\n                {bugs.map(bug => (\r\n                    <div\r\n                        key={bug.id}\r\n                        className=\"bg-zinc-900/50 border border-zinc-800 rounded-2xl p-5 hover:border-zinc-700 transition cursor-pointer\"\r\n                        onClick={() => setSelectedBug(bug)}\r\n                    >\r\n                        <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\r\n                            <div className=\"flex-1\">\r\n                                <div className=\"flex items-center gap-2 mb-2\">\r\n                                    {getStatusIcon(bug.status)}\r\n                                    <span className={`text-[10px] font-black uppercase px-2 py-0.5 rounded-full ${getSeverityColor(bug.severity)}`}>\r\n                                        {bug.severity}\r\n                                    </span>\r\n                                    <span className=\"text-[10px] text-zinc-500 font-bold uppercase\">\r\n                                        {translateCategory(bug.category)}\r\n                                    </span>\r\n                                </div>\r\n                                <h4 className=\"text-white font-bold text-lg\">{bug.title}</h4>\r\n                                <p className=\"text-zinc-500 text-sm mt-1 line-clamp-2\">{bug.description}</p>\r\n                            </div>\r\n\r\n                            <div className=\"text-right shrink-0\">\r\n                                <p className=\"text-xs text-zinc-500\">{bug.user_name || bug.user_email}</p>\r\n                                <p className=\"text-[10px] text-zinc-600\">{new Date(bug.created_at).toLocaleString('pt-BR')}</p>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n\r\n            {/* Bug Detail Modal */}\r\n            {selectedBug && (\r\n                <div\r\n                    className=\"fixed inset-0 bg-black/90 backdrop-blur-md z-[200] flex items-center justify-center p-4\"\r\n                    onClick={(e) => { if (e.target === e.currentTarget) setSelectedBug(null); }}\r\n                >\r\n                    <div className=\"bg-zinc-950 border border-zinc-800 w-full max-w-2xl rounded-3xl shadow-2xl max-h-[90vh] overflow-y-auto\">\r\n                        <div className=\"p-6 border-b border-zinc-800 flex justify-between items-start\">\r\n                            <div>\r\n                                <div className=\"flex items-center gap-2 mb-2\">\r\n                                    <span className={`text-xs font-black uppercase px-2 py-0.5 rounded-full ${getSeverityColor(selectedBug.severity)}`}>\r\n                                        {selectedBug.severity}\r\n                                    </span>\r\n                                    <span className=\"text-xs text-zinc-500 font-bold\">#{selectedBug.id}</span>\r\n                                </div>\r\n                                <h3 className=\"text-xl font-bold text-white\">{selectedBug.title}</h3>\r\n                            </div>\r\n                            <button onClick={() => setSelectedBug(null)} className=\"text-zinc-500 hover:text-white\">Ô£ò</button>\r\n                        </div>\r\n\r\n                        <div className=\"p-6 space-y-5\">\r\n                            <div>\r\n                                <p className=\"text-xs text-zinc-500 font-bold uppercase mb-2\">Descri├º├úo</p>\r\n                                <p className=\"text-zinc-300 text-sm leading-relaxed whitespace-pre-wrap\">{selectedBug.description}</p>\r\n                            </div>\r\n\r\n                            <div className=\"grid grid-cols-2 gap-4 text-sm\">\r\n                                <div>\r\n                                    <p className=\"text-xs text-zinc-500 font-bold uppercase mb-1\">Reportado Por</p>\r\n                                    <p className=\"text-white\">{selectedBug.user_name || 'N/A'}</p>\r\n                                    <p className=\"text-zinc-500 text-xs\">{selectedBug.user_email}</p>\r\n                                </div>\r\n                                <div>\r\n                                    <p className=\"text-xs text-zinc-500 font-bold uppercase mb-1\">Data</p>\r\n                                    <p className=\"text-white\">{new Date(selectedBug.created_at).toLocaleString('pt-BR')}</p>\r\n                                </div>\r\n                            </div>\r\n\r\n                            {selectedBug.device_info && (\r\n                                <div>\r\n                                    <p className=\"text-xs text-zinc-500 font-bold uppercase mb-2\">Informa├º├Áes do Dispositivo</p>\r\n                                    <pre className=\"text-xs text-zinc-400 bg-black/30 p-3 rounded-xl overflow-x-auto\">\r\n                                        {JSON.stringify(JSON.parse(selectedBug.device_info), null, 2)}\r\n                                    </pre>\r\n                                </div>\r\n                            )}\r\n\r\n                            <div>\r\n                                <p className=\"text-xs text-zinc-500 font-bold uppercase mb-2\">Notas Administrativas</p>\r\n                                <textarea\r\n                                    value={adminNotes || selectedBug.admin_notes || ''}\r\n                                    onChange={(e) => setAdminNotes(e.target.value)}\r\n                                    placeholder=\"Adicione observa├º├Áes sobre este bug...\"\r\n                                    className=\"w-full bg-zinc-900 border border-zinc-800 rounded-xl px-4 py-3 text-white text-sm resize-none focus:border-primary-500 outline-none\"\r\n                                    rows={3}\r\n                                />\r\n                            </div>\r\n\r\n                            <div className=\"flex flex-wrap gap-2 pt-4 border-t border-zinc-800\">\r\n                                {selectedBug.status !== 'in_progress' && (\r\n                                    <button\r\n                                        onClick={() => handleUpdateStatus(selectedBug.id, 'in_progress')}\r\n                                        className=\"px-4 py-2 bg-yellow-500/10 text-yellow-400 rounded-xl text-sm font-bold hover:bg-yellow-500/20 transition\"\r\n                                    >\r\n                                        <Clock size={14} className=\"inline mr-2\" />\r\n                                        Em Progresso\r\n                                    </button>\r\n                                )}\r\n                                {selectedBug.status !== 'resolved' && (\r\n                                    <button\r\n                                        onClick={() => handleUpdateStatus(selectedBug.id, 'resolved')}\r\n                                        className=\"px-4 py-2 bg-emerald-500/10 text-emerald-400 rounded-xl text-sm font-bold hover:bg-emerald-500/20 transition\"\r\n                                    >\r\n                                        <CheckCircle2 size={14} className=\"inline mr-2\" />\r\n                                        Resolvido\r\n                                    </button>\r\n                                )}\r\n                                {selectedBug.status !== 'closed' && (\r\n                                    <button\r\n                                        onClick={() => handleUpdateStatus(selectedBug.id, 'closed')}\r\n                                        className=\"px-4 py-2 bg-zinc-700/50 text-zinc-300 rounded-xl text-sm font-bold hover:bg-zinc-700 transition\"\r\n                                    >\r\n                                        Fechar\r\n                                    </button>\r\n                                )}\r\n                                <button\r\n                                    onClick={() => handleDelete(selectedBug.id)}\r\n                                    className=\"px-4 py-2 bg-red-500/10 text-red-400 rounded-xl text-sm font-bold hover:bg-red-500/20 transition ml-auto\"\r\n                                >\r\n                                    <Trash2 size={14} className=\"inline mr-2\" />\r\n                                    Excluir\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josia\\Desktop\\projetos\\cred30\\packages\\frontend-v2\\src\\presentation\\components\\features\\admin\\tabs\\AdminGovernance.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","message":"Definition for rule '@typescript-eslint/no-unused-vars' was not found.","line":1,"column":1,"endLine":1,"endColumn":2,"severity":2,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { Vote, Send, BarChart3, Gavel, ShieldCheck, Trophy, Info } from 'lucide-react';\r\nimport { apiService } from '../../../../../application/services/api.service';\r\n\r\ninterface AdminGovernanceProps {\r\n    onSuccess: (title: string, message: string) => void;\r\n    onError: (title: string, message: string) => void;\r\n}\r\n\r\nexport const AdminGovernance: React.FC<AdminGovernanceProps> = ({ onSuccess, onError }) => {\r\n    const [proposals, setProposals] = useState<any[]>([]);\r\n    const [newPropTitle, setNewPropTitle] = useState('');\r\n    const [newPropDesc, setNewPropDesc] = useState('');\r\n    const [isLoading, setIsLoading] = useState(false);\r\n\r\n    useEffect(() => {\r\n        fetchProposals();\r\n    }, []);\r\n\r\n    const fetchProposals = async () => {\r\n        setIsLoading(true);\r\n        try {\r\n            const res = await apiService.getProposals();\r\n            if (res.success) {\r\n                setProposals(res.data || []);\r\n            }\r\n        } catch (e) {\r\n            console.error('Erro ao buscar propostas:', e);\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleCreateProposal = async () => {\r\n        if (!newPropTitle || !newPropDesc) return;\r\n        try {\r\n            const res = await apiService.createProposal(newPropTitle, newPropDesc);\r\n            if (res.success) {\r\n                onSuccess('Democracia Ativa', 'Sua proposta foi lan├ºada para a comunidade com sucesso!');\r\n                setNewPropTitle('');\r\n                setNewPropDesc('');\r\n                fetchProposals();\r\n            } else {\r\n                onError('Erro', res.message);\r\n            }\r\n        } catch (e: any) {\r\n            onError('Erro', e.message);\r\n        }\r\n    };\r\n\r\n    const handleCloseProposal = async (id: number) => {\r\n        if (!window.confirm('Deseja realmente encerrar esta vota├º├úo? O resultado ser├í final e imut├ível.')) return;\r\n        try {\r\n            const res = await apiService.closeProposal(id);\r\n            if (res.success) {\r\n                onSuccess('Vota├º├úo Encerrada', 'Os votos foram computados e a decis├úo foi selada.');\r\n                fetchProposals();\r\n            }\r\n        } catch (e: any) {\r\n            onError('Erro', e.message);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700\">\r\n            {/* Header Informativo */}\r\n            <div className=\"bg-primary-500/5 border border-primary-500/20 rounded-3xl p-6 flex items-center gap-6\">\r\n                <div className=\"w-16 h-16 bg-primary-500 rounded-2xl flex items-center justify-center text-black shadow-[0_0_20px_rgba(6,182,212,0.3)]\">\r\n                    <ShieldCheck size={32} />\r\n                </div>\r\n                <div>\r\n                    <h2 className=\"text-xl font-black text-white uppercase tracking-tight\">Conselho de Governan├ºa</h2>\r\n                    <p className=\"text-sm text-zinc-500 font-bold uppercase tracking-wider mt-1 italic\">Gest├úo Democr├ítica baseada em Voto Quadr├ítico + Reputa├º├úo</p>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\r\n                <div className=\"bg-zinc-900/50 border border-zinc-800 rounded-3xl p-8 shadow-2xl relative overflow-hidden group\">\r\n                    <div className=\"absolute top-0 right-0 p-8 opacity-5 pointer-events-none group-hover:rotate-12 transition-transform duration-700\">\r\n                        <Vote size={120} className=\"text-primary-400\" />\r\n                    </div>\r\n\r\n                    <h3 className=\"text-xl font-black text-white mb-8 flex items-center gap-3 relative z-10 uppercase tracking-tight\">\r\n                        <div className=\"p-2 bg-zinc-800 rounded-xl\"><Vote className=\"text-primary-400\" size={20} /></div>\r\n                        Nova Proposta do Clube\r\n                    </h3>\r\n\r\n                    <div className=\"space-y-6 relative z-10\">\r\n                        <div>\r\n                            <label className=\"text-[10px] text-zinc-500 font-black uppercase tracking-[0.2em] ml-1 mb-2 block\">T├¡tulo da Proposta</label>\r\n                            <input\r\n                                placeholder=\"Ex: Ajuste da taxa de cess├úo de cotas\"\r\n                                value={newPropTitle}\r\n                                onChange={(e) => setNewPropTitle(e.target.value)}\r\n                                className=\"w-full bg-black/40 border border-zinc-800 rounded-2xl px-6 py-4 text-white outline-none focus:border-primary-500/50 font-bold tracking-tight transition-all\"\r\n                            />\r\n                        </div>\r\n                        <div>\r\n                            <label className=\"text-[10px] text-zinc-500 font-black uppercase tracking-[0.2em] ml-1 mb-2 block\">Descri├º├úo Detalhada para Membros</label>\r\n                            <textarea\r\n                                rows={4}\r\n                                placeholder=\"Explique os benef├¡cios sist├¬micos para a comunidade Cred30...\"\r\n                                value={newPropDesc}\r\n                                onChange={(e) => setNewPropDesc(e.target.value)}\r\n                                className=\"w-full bg-black/40 border border-zinc-800 rounded-2xl px-6 py-4 text-white outline-none focus:border-primary-500/50 font-medium resize-none transition-all\"\r\n                            />\r\n                        </div>\r\n                        <button\r\n                            onClick={handleCreateProposal}\r\n                            disabled={!newPropTitle || !newPropDesc}\r\n                            className=\"w-full bg-primary-500 hover:bg-primary-400 disabled:opacity-30 text-black font-black py-5 rounded-2xl transition-all shadow-xl flex items-center justify-center gap-3 uppercase tracking-widest text-xs active:scale-95 translate-y-[-2px] hover:translate-y-[-4px]\"\r\n                        >\r\n                            <Send size={20} /> LAN├çAR PARA VOTA├ç├âO\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"bg-zinc-900/50 border border-zinc-800 rounded-3xl p-8 shadow-2xl\">\r\n                    <h3 className=\"text-xl font-black text-white mb-8 flex items-center gap-3 uppercase tracking-tight\">\r\n                        <div className=\"p-2 bg-zinc-800 rounded-xl\"><BarChart3 className=\"text-zinc-400\" size={20} /></div>\r\n                        Hist├│rico de Decis├Áes\r\n                    </h3>\r\n                    <div className=\"space-y-4 max-h-[600px] overflow-y-auto pr-2 custom-scrollbar\">\r\n                        {isLoading ? (\r\n                            <div className=\"py-20 text-center text-zinc-600 font-black uppercase tracking-[0.2em] animate-pulse\">Sincronizando...</div>\r\n                        ) : proposals.length === 0 ? (\r\n                            <div className=\"text-center py-24 opacity-30\">\r\n                                <Info size={60} className=\"mx-auto mb-6 text-zinc-700\" />\r\n                                <p className=\"text-xs font-black uppercase tracking-[0.3em]\">Nenhuma proposta no registro</p>\r\n                            </div>\r\n                        ) : (\r\n                            proposals.map((prop) => (\r\n                                <div key={prop.id} className=\"bg-black/40 border border-zinc-800 hover:border-zinc-700 p-6 rounded-3xl space-y-5 transition-all group\">\r\n                                    <div className=\"flex justify-between items-start\">\r\n                                        <div>\r\n                                            <h4 className=\"text-white font-black text-lg uppercase tracking-tight leading-none mb-2\">{prop.title}</h4>\r\n                                            <p className=\"text-[9px] text-zinc-600 font-black uppercase tracking-widest\">\r\n                                                ID: {prop.id} ÔÇó {new Date(prop.created_at).toLocaleDateString('pt-BR', { day: '2-digit', month: 'long', year: 'numeric' })}\r\n                                            </p>\r\n                                        </div>\r\n                                        <span className={`text-[9px] px-3 py-1 rounded-full font-black uppercase tracking-widest border ${prop.status === 'active' ? 'bg-emerald-500/10 text-emerald-500 border-emerald-500/20' : 'bg-red-500/10 text-red-500 border-red-500/20'}`}>\r\n                                            {prop.status === 'active' ? 'ATIVA' : 'FINALIZADA'}\r\n                                        </span>\r\n                                    </div>\r\n\r\n                                    <div className=\"grid grid-cols-2 gap-4\">\r\n                                        <div className=\"bg-zinc-900/60 p-4 rounded-2xl border border-white/5\">\r\n                                            <p className=\"text-[10px] text-zinc-600 font-black uppercase tracking-widest mb-1 flex items-center gap-2\">\r\n                                                <div className=\"w-1.5 h-1.5 rounded-full bg-emerald-500\" /> PODER SIM\r\n                                            </p>\r\n                                            <p className=\"text-2xl font-black text-white tabular-nums\">{parseFloat(prop.yes_votes_power || 0).toFixed(1)}</p>\r\n                                        </div>\r\n                                        <div className=\"bg-zinc-900/60 p-4 rounded-2xl border border-white/5\">\r\n                                            <p className=\"text-[10px] text-zinc-600 font-black uppercase tracking-widest mb-1 flex items-center gap-2\">\r\n                                                <div className=\"w-1.5 h-1.5 rounded-full bg-red-500\" /> PODER N├âO\r\n                                            </p>\r\n                                            <p className=\"text-2xl font-black text-zinc-500 tabular-nums\">{parseFloat(prop.no_votes_power || 0).toFixed(1)}</p>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    {prop.status === 'active' && (\r\n                                        <button\r\n                                            onClick={() => handleCloseProposal(prop.id)}\r\n                                            className=\"w-full bg-zinc-800 hover:bg-red-600 text-zinc-400 hover:text-white border border-zinc-700 py-3 rounded-2xl text-[10px] font-black uppercase tracking-widest transition-all flex items-center justify-center gap-2 active:scale-95 shadow-xl\"\r\n                                        >\r\n                                            <Gavel size={14} /> ENCERRAR E COMPUTAR\r\n                                        </button>\r\n                                    )}\r\n                                </div>\r\n                            ))\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josia\\Desktop\\projetos\\cred30\\packages\\frontend-v2\\src\\presentation\\components\\features\\admin\\tabs\\AdminInvestments.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","message":"Definition for rule '@typescript-eslint/no-unused-vars' was not found.","line":1,"column":1,"endLine":1,"endColumn":2,"severity":2,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { TrendingUp, Plus, DollarSign, RefreshCw, Briefcase, PiggyBank, ArrowUpRight, ArrowDownRight, Coins, AlertTriangle } from 'lucide-react';\r\nimport { apiService } from '../../../../../application/services/api.service';\r\n\r\ninterface Investment {\r\n    id: number;\r\n    assetName: string;\r\n    assetType: 'STOCK' | 'FII' | 'BOND' | 'ETF' | 'OTHER';\r\n    quantity: number;\r\n    unitPrice: number;\r\n    totalInvested: number;\r\n    currentValue: number;\r\n    dividendsReceived: number;\r\n    broker?: string;\r\n    notes?: string;\r\n    investedAt: string;\r\n    profitLoss: number;\r\n    profitLossPercent: number;\r\n}\r\n\r\ninterface InvestmentSummary {\r\n    availableReserve: number;\r\n    totalInvested: number;\r\n    totalCurrentValue: number;\r\n    totalDividends: number;\r\n    totalProfitLoss: number;\r\n    totalProfitLossPercent: number;\r\n}\r\n\r\ninterface AdminInvestmentsProps {\r\n    onSuccess: (title: string, message: string) => void;\r\n    onError: (title: string, message: string) => void;\r\n}\r\n\r\nconst assetTypeLabels: Record<string, string> = {\r\n    STOCK: 'A├º├úo',\r\n    FII: 'FII',\r\n    BOND: 'Renda Fixa',\r\n    ETF: 'ETF',\r\n    OTHER: 'Outro'\r\n};\r\n\r\nconst assetTypeColors: Record<string, string> = {\r\n    STOCK: 'bg-blue-500/10 text-blue-400 border-blue-500/20',\r\n    FII: 'bg-purple-500/10 text-purple-400 border-purple-500/20',\r\n    BOND: 'bg-emerald-500/10 text-emerald-400 border-emerald-500/20',\r\n    ETF: 'bg-amber-500/10 text-amber-400 border-amber-500/20',\r\n    OTHER: 'bg-zinc-500/10 text-zinc-400 border-zinc-500/20'\r\n};\r\n\r\nexport const AdminInvestments: React.FC<AdminInvestmentsProps> = ({ onSuccess, onError }) => {\r\n    const [investments, setInvestments] = useState<Investment[]>([]);\r\n    const [summary, setSummary] = useState<InvestmentSummary | null>(null);\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const [showAddModal, setShowAddModal] = useState(false);\r\n    const [newInvestment, setNewInvestment] = useState({\r\n        assetName: '',\r\n        assetType: 'STOCK' as Investment['assetType'],\r\n        quantity: '',\r\n        unitPrice: '',\r\n        totalInvested: '',\r\n        broker: '',\r\n        notes: ''\r\n    });\r\n\r\n    const fetchInvestments = async () => {\r\n        setIsLoading(true);\r\n        try {\r\n            const res = await apiService.get<any>('/admin/investments');\r\n            if (res.success) {\r\n                setInvestments(res.data.investments || []);\r\n                setSummary(res.data.summary || null);\r\n            }\r\n        } catch (error) {\r\n            console.error('Erro ao carregar investimentos:', error);\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchInvestments();\r\n    }, []);\r\n\r\n    const handleAddInvestment = async () => {\r\n        try {\r\n            const res = await apiService.post<any>('/admin/investments', {\r\n                assetName: newInvestment.assetName,\r\n                assetType: newInvestment.assetType,\r\n                quantity: parseFloat(newInvestment.quantity) || 0,\r\n                unitPrice: parseFloat(newInvestment.unitPrice) || 0,\r\n                totalInvested: parseFloat(newInvestment.totalInvested) || 0,\r\n                broker: newInvestment.broker || undefined,\r\n                notes: newInvestment.notes || undefined\r\n            });\r\n\r\n            if (res.success) {\r\n                onSuccess('Investimento Registrado', res.message);\r\n                setShowAddModal(false);\r\n                setNewInvestment({ assetName: '', assetType: 'STOCK', quantity: '', unitPrice: '', totalInvested: '', broker: '', notes: '' });\r\n                fetchInvestments();\r\n            } else {\r\n                onError('Erro', res.message);\r\n            }\r\n        } catch (error: any) {\r\n            onError('Erro ao Registrar', error.message);\r\n        }\r\n    };\r\n\r\n    const handleReceiveDividend = async (id: number, reinvest: boolean) => {\r\n        const amount = prompt('Valor do dividendo recebido (R$):');\r\n        if (!amount) return;\r\n\r\n        try {\r\n            const res = await apiService.post<any>(`/admin/investments/${id}/dividends`, {\r\n                amount: parseFloat(amount),\r\n                reinvest\r\n            });\r\n\r\n            if (res.success) {\r\n                onSuccess('Dividendo Registrado', res.message);\r\n                fetchInvestments();\r\n            } else {\r\n                onError('Erro', res.message);\r\n            }\r\n        } catch (error: any) {\r\n            onError('Erro', error.message);\r\n        }\r\n    };\r\n\r\n    const handleSellInvestment = async (id: number, assetName: string) => {\r\n        const saleValue = prompt(`Valor total de venda de ${assetName} (R$):`);\r\n        if (!saleValue) return;\r\n\r\n        try {\r\n            const res = await apiService.post<any>(`/admin/investments/${id}/sell`, {\r\n                saleValue: parseFloat(saleValue)\r\n            });\r\n\r\n            if (res.success) {\r\n                onSuccess('Venda Registrada', res.message);\r\n                fetchInvestments();\r\n            } else {\r\n                onError('Erro', res.message);\r\n            }\r\n        } catch (error: any) {\r\n            onError('Erro', error.message);\r\n        }\r\n    };\r\n\r\n    const handleUpdateValue = async (id: number, assetName: string) => {\r\n        const newValue = prompt(`Novo valor de mercado de ${assetName} (R$):`);\r\n        if (!newValue) return;\r\n\r\n        try {\r\n            const res = await apiService.patch<any>(`/admin/investments/${id}`, {\r\n                currentValue: parseFloat(newValue)\r\n            });\r\n\r\n            if (res.success) {\r\n                onSuccess('Atualizado', 'Valor de mercado atualizado!');\r\n                fetchInvestments();\r\n            } else {\r\n                onError('Erro', res.message);\r\n            }\r\n        } catch (error: any) {\r\n            onError('Erro', error.message);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"space-y-8\">\r\n            {/* Header com Resumo */}\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n                {/* Dispon├¡vel para Investir */}\r\n                <div className=\"bg-gradient-to-br from-primary-500/10 to-cyan-500/5 border border-primary-500/20 rounded-3xl p-6\">\r\n                    <div className=\"flex items-center gap-3 mb-3\">\r\n                        <div className=\"w-10 h-10 rounded-xl bg-primary-500/20 flex items-center justify-center\">\r\n                            <PiggyBank size={20} className=\"text-primary-400\" />\r\n                        </div>\r\n                        <span className=\"text-xs text-zinc-400 font-bold uppercase tracking-wider\">Dispon├¡vel</span>\r\n                    </div>\r\n                    <p className=\"text-2xl font-black text-white\">\r\n                        R$ {summary?.availableReserve.toLocaleString('pt-BR', { minimumFractionDigits: 2 }) || '0,00'}\r\n                    </p>\r\n                </div>\r\n\r\n                {/* Total Investido */}\r\n                <div className=\"bg-zinc-900/50 border border-zinc-800 rounded-3xl p-6\">\r\n                    <div className=\"flex items-center gap-3 mb-3\">\r\n                        <div className=\"w-10 h-10 rounded-xl bg-blue-500/20 flex items-center justify-center\">\r\n                            <Briefcase size={20} className=\"text-blue-400\" />\r\n                        </div>\r\n                        <span className=\"text-xs text-zinc-400 font-bold uppercase tracking-wider\">Investido</span>\r\n                    </div>\r\n                    <p className=\"text-2xl font-black text-white\">\r\n                        R$ {summary?.totalInvested.toLocaleString('pt-BR', { minimumFractionDigits: 2 }) || '0,00'}\r\n                    </p>\r\n                </div>\r\n\r\n                {/* Valor Atual */}\r\n                <div className=\"bg-zinc-900/50 border border-zinc-800 rounded-3xl p-6\">\r\n                    <div className=\"flex items-center gap-3 mb-3\">\r\n                        <div className=\"w-10 h-10 rounded-xl bg-emerald-500/20 flex items-center justify-center\">\r\n                            <TrendingUp size={20} className=\"text-emerald-400\" />\r\n                        </div>\r\n                        <span className=\"text-xs text-zinc-400 font-bold uppercase tracking-wider\">Valor Atual</span>\r\n                    </div>\r\n                    <p className=\"text-2xl font-black text-white\">\r\n                        R$ {summary?.totalCurrentValue.toLocaleString('pt-BR', { minimumFractionDigits: 2 }) || '0,00'}\r\n                    </p>\r\n                    {summary && summary.totalProfitLoss !== 0 && (\r\n                        <p className={`text-xs font-bold mt-1 flex items-center gap-1 ${summary.totalProfitLoss >= 0 ? 'text-emerald-400' : 'text-red-400'}`}>\r\n                            {summary.totalProfitLoss >= 0 ? <ArrowUpRight size={14} /> : <ArrowDownRight size={14} />}\r\n                            {summary.totalProfitLoss >= 0 ? '+' : ''}{summary.totalProfitLossPercent.toFixed(2)}%\r\n                        </p>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Dividendos */}\r\n                <div className=\"bg-zinc-900/50 border border-zinc-800 rounded-3xl p-6\">\r\n                    <div className=\"flex items-center gap-3 mb-3\">\r\n                        <div className=\"w-10 h-10 rounded-xl bg-amber-500/20 flex items-center justify-center\">\r\n                            <Coins size={20} className=\"text-amber-400\" />\r\n                        </div>\r\n                        <span className=\"text-xs text-zinc-400 font-bold uppercase tracking-wider\">Dividendos</span>\r\n                    </div>\r\n                    <p className=\"text-2xl font-black text-white\">\r\n                        R$ {summary?.totalDividends.toLocaleString('pt-BR', { minimumFractionDigits: 2 }) || '0,00'}\r\n                    </p>\r\n                </div>\r\n            </div>\r\n\r\n            {/* A├º├Áes */}\r\n            <div className=\"flex items-center justify-between\">\r\n                <h2 className=\"text-xl font-black text-white\">Meus Investimentos</h2>\r\n                <div className=\"flex gap-3\">\r\n                    <button\r\n                        onClick={fetchInvestments}\r\n                        className=\"bg-zinc-800 hover:bg-zinc-700 text-white px-4 py-2.5 rounded-xl flex items-center gap-2 text-sm font-bold transition-colors\"\r\n                    >\r\n                        <RefreshCw size={16} className={isLoading ? 'animate-spin' : ''} />\r\n                        Atualizar\r\n                    </button>\r\n                    <button\r\n                        onClick={() => setShowAddModal(true)}\r\n                        className=\"bg-primary-500 hover:bg-primary-400 text-black px-5 py-2.5 rounded-xl flex items-center gap-2 text-sm font-black transition-colors\"\r\n                    >\r\n                        <Plus size={18} />\r\n                        Novo Investimento\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Lista de Investimentos */}\r\n            {isLoading ? (\r\n                <div className=\"flex justify-center py-12\">\r\n                    <RefreshCw size={32} className=\"animate-spin text-primary-500\" />\r\n                </div>\r\n            ) : investments.length === 0 ? (\r\n                <div className=\"bg-zinc-900/50 border border-zinc-800 rounded-3xl p-12 text-center\">\r\n                    <Briefcase size={48} className=\"text-zinc-700 mx-auto mb-4\" />\r\n                    <p className=\"text-zinc-500 font-bold\">Nenhum investimento registrado</p>\r\n                    <p className=\"text-zinc-600 text-sm mt-2\">Clique em \"Novo Investimento\" para come├ºar</p>\r\n                </div>\r\n            ) : (\r\n                <div className=\"space-y-4\">\r\n                    {investments.map((inv) => (\r\n                        <div key={inv.id} className=\"bg-zinc-900/50 border border-zinc-800 rounded-2xl p-6 hover:border-zinc-700 transition-colors\">\r\n                            <div className=\"flex flex-col lg:flex-row lg:items-center justify-between gap-4\">\r\n                                <div className=\"flex items-center gap-4\">\r\n                                    <div className={`px-3 py-1.5 rounded-lg text-xs font-black uppercase border ${assetTypeColors[inv.assetType]}`}>\r\n                                        {assetTypeLabels[inv.assetType]}\r\n                                    </div>\r\n                                    <div>\r\n                                        <h3 className=\"text-lg font-bold text-white\">{inv.assetName}</h3>\r\n                                        <p className=\"text-xs text-zinc-500\">\r\n                                            {inv.quantity > 0 && `${inv.quantity} unid. ├ù R$ ${inv.unitPrice.toFixed(2)} ÔÇó `}\r\n                                            {inv.broker && `${inv.broker} ÔÇó `}\r\n                                            {new Date(inv.investedAt).toLocaleDateString('pt-BR')}\r\n                                        </p>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div className=\"flex items-center gap-6\">\r\n                                    <div className=\"text-right\">\r\n                                        <p className=\"text-xs text-zinc-500 uppercase font-bold\">Investido</p>\r\n                                        <p className=\"text-lg font-bold text-white\">R$ {inv.totalInvested.toLocaleString('pt-BR', { minimumFractionDigits: 2 })}</p>\r\n                                    </div>\r\n\r\n                                    <div className=\"text-right\">\r\n                                        <p className=\"text-xs text-zinc-500 uppercase font-bold\">Atual</p>\r\n                                        <p className=\"text-lg font-bold text-white\">R$ {inv.currentValue.toLocaleString('pt-BR', { minimumFractionDigits: 2 })}</p>\r\n                                        <p className={`text-xs font-bold flex items-center gap-1 justify-end ${inv.profitLoss >= 0 ? 'text-emerald-400' : 'text-red-400'}`}>\r\n                                            {inv.profitLoss >= 0 ? <ArrowUpRight size={12} /> : <ArrowDownRight size={12} />}\r\n                                            {inv.profitLoss >= 0 ? '+' : ''}{inv.profitLossPercent.toFixed(2)}%\r\n                                        </p>\r\n                                    </div>\r\n\r\n                                    {inv.dividendsReceived > 0 && (\r\n                                        <div className=\"text-right\">\r\n                                            <p className=\"text-xs text-zinc-500 uppercase font-bold\">Dividendos</p>\r\n                                            <p className=\"text-lg font-bold text-amber-400\">R$ {inv.dividendsReceived.toLocaleString('pt-BR', { minimumFractionDigits: 2 })}</p>\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n\r\n                                <div className=\"flex gap-2\">\r\n                                    <button\r\n                                        onClick={() => handleUpdateValue(inv.id, inv.assetName)}\r\n                                        className=\"bg-zinc-800 hover:bg-zinc-700 text-white px-3 py-2 rounded-lg text-xs font-bold transition-colors\"\r\n                                        title=\"Atualizar valor de mercado\"\r\n                                    >\r\n                                        Atualizar\r\n                                    </button>\r\n                                    <button\r\n                                        onClick={() => handleReceiveDividend(inv.id, false)}\r\n                                        className=\"bg-amber-500/10 hover:bg-amber-500/20 text-amber-400 px-3 py-2 rounded-lg text-xs font-bold transition-colors\"\r\n                                        title=\"Registrar dividendo\"\r\n                                    >\r\n                                        +Dividendo\r\n                                    </button>\r\n                                    <button\r\n                                        onClick={() => handleSellInvestment(inv.id, inv.assetName)}\r\n                                        className=\"bg-red-500/10 hover:bg-red-500/20 text-red-400 px-3 py-2 rounded-lg text-xs font-bold transition-colors\"\r\n                                        title=\"Vender investimento\"\r\n                                    >\r\n                                        Vender\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            )}\r\n\r\n            {/* Modal Adicionar Investimento */}\r\n            {showAddModal && (\r\n                <div className=\"fixed inset-0 bg-black/80 backdrop-blur-md flex items-center justify-center z-50 p-4\" onClick={() => setShowAddModal(false)}>\r\n                    <div className=\"bg-zinc-900 border border-zinc-800 rounded-3xl p-8 w-full max-w-lg\" onClick={e => e.stopPropagation()}>\r\n                        <h3 className=\"text-xl font-black text-white mb-6\">Registrar Novo Investimento</h3>\r\n\r\n                        <div className=\"space-y-4\">\r\n                            <div>\r\n                                <label className=\"text-xs text-zinc-400 font-bold uppercase block mb-2\">Nome do Ativo</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    placeholder=\"Ex: ITSA4, MXRF11, Tesouro IPCA+ 2029\"\r\n                                    value={newInvestment.assetName}\r\n                                    onChange={e => setNewInvestment({ ...newInvestment, assetName: e.target.value })}\r\n                                    className=\"w-full bg-zinc-800 border border-zinc-700 rounded-xl px-4 py-3 text-white placeholder:text-zinc-600 focus:border-primary-500 focus:outline-none\"\r\n                                />\r\n                            </div>\r\n\r\n                            <div>\r\n                                <label className=\"text-xs text-zinc-400 font-bold uppercase block mb-2\">Tipo</label>\r\n                                <select\r\n                                    value={newInvestment.assetType}\r\n                                    onChange={e => setNewInvestment({ ...newInvestment, assetType: e.target.value as Investment['assetType'] })}\r\n                                    className=\"w-full bg-zinc-800 border border-zinc-700 rounded-xl px-4 py-3 text-white focus:border-primary-500 focus:outline-none\"\r\n                                >\r\n                                    <option value=\"STOCK\">A├º├úo</option>\r\n                                    <option value=\"FII\">Fundo Imobili├írio (FII)</option>\r\n                                    <option value=\"BOND\">Renda Fixa (Tesouro, CDB, LCI, LCA)</option>\r\n                                    <option value=\"ETF\">ETF</option>\r\n                                    <option value=\"OTHER\">Outro</option>\r\n                                </select>\r\n                            </div>\r\n\r\n                            <div className=\"grid grid-cols-2 gap-4\">\r\n                                <div>\r\n                                    <label className=\"text-xs text-zinc-400 font-bold uppercase block mb-2\">Quantidade</label>\r\n                                    <input\r\n                                        type=\"number\"\r\n                                        placeholder=\"Ex: 100\"\r\n                                        value={newInvestment.quantity}\r\n                                        onChange={e => setNewInvestment({ ...newInvestment, quantity: e.target.value })}\r\n                                        className=\"w-full bg-zinc-800 border border-zinc-700 rounded-xl px-4 py-3 text-white placeholder:text-zinc-600 focus:border-primary-500 focus:outline-none\"\r\n                                    />\r\n                                </div>\r\n                                <div>\r\n                                    <label className=\"text-xs text-zinc-400 font-bold uppercase block mb-2\">Pre├ºo Unit├írio (R$)</label>\r\n                                    <input\r\n                                        type=\"number\"\r\n                                        step=\"0.01\"\r\n                                        placeholder=\"Ex: 10.50\"\r\n                                        value={newInvestment.unitPrice}\r\n                                        onChange={e => setNewInvestment({ ...newInvestment, unitPrice: e.target.value })}\r\n                                        className=\"w-full bg-zinc-800 border border-zinc-700 rounded-xl px-4 py-3 text-white placeholder:text-zinc-600 focus:border-primary-500 focus:outline-none\"\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div>\r\n                                <label className=\"text-xs text-zinc-400 font-bold uppercase block mb-2\">Valor Total Investido (R$)</label>\r\n                                <input\r\n                                    type=\"number\"\r\n                                    step=\"0.01\"\r\n                                    placeholder=\"Ex: 1050.00\"\r\n                                    value={newInvestment.totalInvested}\r\n                                    onChange={e => setNewInvestment({ ...newInvestment, totalInvested: e.target.value })}\r\n                                    className=\"w-full bg-zinc-800 border border-zinc-700 rounded-xl px-4 py-3 text-white placeholder:text-zinc-600 focus:border-primary-500 focus:outline-none\"\r\n                                />\r\n                                {summary && parseFloat(newInvestment.totalInvested) > summary.availableReserve && (\r\n                                    <p className=\"text-red-400 text-xs mt-2 flex items-center gap-1\">\r\n                                        <AlertTriangle size={12} />\r\n                                        Valor excede o dispon├¡vel (R$ {summary.availableReserve.toFixed(2)})\r\n                                    </p>\r\n                                )}\r\n                            </div>\r\n\r\n                            <div>\r\n                                <label className=\"text-xs text-zinc-400 font-bold uppercase block mb-2\">Corretora (opcional)</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    placeholder=\"Ex: Rico, XP, BTG\"\r\n                                    value={newInvestment.broker}\r\n                                    onChange={e => setNewInvestment({ ...newInvestment, broker: e.target.value })}\r\n                                    className=\"w-full bg-zinc-800 border border-zinc-700 rounded-xl px-4 py-3 text-white placeholder:text-zinc-600 focus:border-primary-500 focus:outline-none\"\r\n                                />\r\n                            </div>\r\n\r\n                            <div>\r\n                                <label className=\"text-xs text-zinc-400 font-bold uppercase block mb-2\">Observa├º├Áes (opcional)</label>\r\n                                <textarea\r\n                                    placeholder=\"Notas sobre o investimento...\"\r\n                                    value={newInvestment.notes}\r\n                                    onChange={e => setNewInvestment({ ...newInvestment, notes: e.target.value })}\r\n                                    className=\"w-full bg-zinc-800 border border-zinc-700 rounded-xl px-4 py-3 text-white placeholder:text-zinc-600 focus:border-primary-500 focus:outline-none resize-none\"\r\n                                    rows={2}\r\n                                />\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"flex gap-3 mt-6\">\r\n                            <button\r\n                                onClick={() => setShowAddModal(false)}\r\n                                className=\"flex-1 bg-zinc-800 hover:bg-zinc-700 text-white py-3 rounded-xl font-bold transition-colors\"\r\n                            >\r\n                                Cancelar\r\n                            </button>\r\n                            <button\r\n                                onClick={handleAddInvestment}\r\n                                disabled={!newInvestment.assetName || !newInvestment.totalInvested}\r\n                                className=\"flex-1 bg-primary-500 hover:bg-primary-400 disabled:opacity-50 disabled:cursor-not-allowed text-black py-3 rounded-xl font-black transition-colors\"\r\n                            >\r\n                                Registrar Investimento\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josia\\Desktop\\projetos\\cred30\\packages\\frontend-v2\\src\\presentation\\components\\features\\admin\\tabs\\AdminMetrics.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","message":"Definition for rule '@typescript-eslint/no-unused-vars' was not found.","line":1,"column":1,"endLine":1,"endColumn":2,"severity":2,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { Activity, Cpu, Database, Search, Clock, HardDrive } from 'lucide-react';\r\nimport { apiService } from '../../../../../application/services/api.service';\r\nimport { useDebounce } from '../../../../hooks/use-performance';\r\n\r\nexport const AdminMetrics: React.FC = () => {\r\n    const [healthMetrics, setHealthMetrics] = useState<any>(null);\r\n    const [isMetricsLoading, setIsMetricsLoading] = useState(false);\r\n    const [metricsSearch, setMetricsSearch] = useState('');\r\n    const debouncedMetricsSearch = useDebounce(metricsSearch, 300);\r\n\r\n    useEffect(() => {\r\n        fetchHealthMetrics();\r\n        const metricsInterval = setInterval(fetchHealthMetrics, 10000);\r\n        return () => clearInterval(metricsInterval);\r\n    }, []);\r\n\r\n    const fetchHealthMetrics = async () => {\r\n        if (!healthMetrics) setIsMetricsLoading(true);\r\n        try {\r\n            const data = await apiService.getHealthMetrics();\r\n            if (data) setHealthMetrics(data);\r\n        } catch (e) {\r\n            console.error('Erro ao buscar m├®tricas:', e);\r\n        } finally {\r\n            setIsMetricsLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"space-y-8 animate-in fade-in duration-500\">\r\n            {!healthMetrics && isMetricsLoading ? (\r\n                <div className=\"py-20 text-center\">\r\n                    <div className=\"w-16 h-16 border-4 border-primary-500/20 border-t-primary-500 rounded-full animate-spin mx-auto mb-4\"></div>\r\n                    <p className=\"text-zinc-500 font-bold uppercase tracking-widest text-xs\">Coletando dados do servidor...</p>\r\n                </div>\r\n            ) : healthMetrics && (\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8\">\r\n                    {/* Status do Servidor */}\r\n                    <div className=\"bg-zinc-900/50 border border-zinc-800 rounded-3xl p-8 shadow-2xl\">\r\n                        <h3 className=\"text-xl font-bold text-white mb-8 flex items-center gap-3\">\r\n                            <div className=\"p-2 bg-primary-500/10 rounded-lg\"><Cpu className=\"text-primary-400\" size={20} /></div>\r\n                            Recursos do Sistema\r\n                        </h3>\r\n                        <div className=\"space-y-4 mb-6\">\r\n                            <div className=\"relative group\">\r\n                                <Search className=\"absolute left-4 top-1/2 -translate-y-1/2 text-zinc-500 group-focus-within:text-primary-400 transition-colors\" size={16} />\r\n                                <input\r\n                                    type=\"text\"\r\n                                    placeholder=\"Filtrar m├®tricas...\"\r\n                                    value={metricsSearch}\r\n                                    onChange={(e) => setMetricsSearch(e.target.value)}\r\n                                    className=\"w-full bg-black/40 border border-zinc-800 rounded-2xl pl-10 pr-4 py-3 text-xs text-white focus:outline-none focus:border-primary-500/50 transition-all\"\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"space-y-6\">\r\n                            <div className=\"flex justify-between items-center p-4 bg-black/20 rounded-2xl border border-zinc-800\">\r\n                                <div className=\"flex items-center gap-3\">\r\n                                    <Activity size={18} className=\"text-emerald-400\" />\r\n                                    <span className=\"text-sm font-bold text-zinc-300\">Lat├¬ncia do Banco</span>\r\n                                </div>\r\n                                <span className=\"text-xl font-black text-white\">{healthMetrics?.health?.dbLatency ?? 'N/A'}</span>\r\n                            </div>\r\n                            <div className=\"flex justify-between items-center p-4 bg-black/20 rounded-2xl border border-zinc-800\">\r\n                                <div className=\"flex items-center gap-3\">\r\n                                    <Clock size={18} className=\"text-primary-400\" />\r\n                                    <span className=\"text-sm font-bold text-zinc-300\">Uptime do Servidor</span>\r\n                                </div>\r\n                                <span className=\"text-xl font-black text-white\">{healthMetrics?.health?.uptime ?? 'N/A'}</span>\r\n                            </div>\r\n                            <div className=\"p-6 bg-black/20 rounded-2xl border border-zinc-800\">\r\n                                <div className=\"flex items-center gap-3 mb-4\">\r\n                                    <HardDrive size={18} className=\"text-orange-400\" />\r\n                                    <span className=\"text-sm font-bold text-zinc-300\">Uso de Mem├│ria RAM</span>\r\n                                </div>\r\n                                <div className=\"grid grid-cols-2 gap-4\">\r\n                                    <div>\r\n                                        <p className=\"text-[10px] text-zinc-500 font-black uppercase mb-1\">Heap Usado</p>\r\n                                        <p className=\"text-lg font-bold text-white\">{healthMetrics?.health?.memory?.heapUsed ?? 'N/A'}</p>\r\n                                    </div>\r\n                                    <div>\r\n                                        <p className=\"text-[10px] text-zinc-500 font-black uppercase mb-1\">Total RSS</p>\r\n                                        <p className=\"text-lg font-bold text-white\">{healthMetrics?.health?.memory?.rss ?? 'N/A'}</p>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Carga de Dados */}\r\n                    <div className=\"bg-zinc-900/50 border border-zinc-800 rounded-3xl p-8 shadow-2xl\">\r\n                        <h3 className=\"text-xl font-bold text-white mb-8 flex items-center gap-3\">\r\n                            <div className=\"p-2 bg-emerald-500/10 rounded-lg\"><Database className=\"text-emerald-400\" size={20} /></div>\r\n                            Volume de Dados\r\n                        </h3>\r\n                        <div className=\"grid grid-cols-2 gap-4\">\r\n                            <div className=\"p-4 bg-black/20 rounded-2xl border border-zinc-800\">\r\n                                <p className=\"text-[10px] text-zinc-500 font-black uppercase mb-1\">Membros</p>\r\n                                <p className=\"text-xl font-bold text-white\">{healthMetrics?.database?.total_users ?? 0}</p>\r\n                            </div>\r\n                            <div className=\"p-4 bg-black/20 rounded-2xl border border-zinc-800\">\r\n                                <p className=\"text-[10px] text-zinc-500 font-black uppercase mb-1\">Transa├º├Áes</p>\r\n                                <p className=\"text-xl font-bold text-white\">{healthMetrics?.database?.total_transactions ?? 0}</p>\r\n                            </div>\r\n                            <div className=\"p-4 bg-black/20 rounded-2xl border border-zinc-800\">\r\n                                <p className=\"text-[10px] text-zinc-500 font-black uppercase mb-1\">Licen├ºas (Cotas)</p>\r\n                                <p className=\"text-xl font-bold text-white\">{healthMetrics?.database?.total_quotas ?? 0}</p>\r\n                            </div>\r\n                            <div className=\"p-4 bg-black/20 rounded-2xl border border-zinc-800\">\r\n                                <p className=\"text-[10px] text-zinc-500 font-black uppercase mb-1\">Apoios (Empr├®stimos)</p>\r\n                                <p className=\"text-xl font-bold text-white\">{healthMetrics?.database?.total_loans ?? 0}</p>\r\n                            </div>\r\n                            <div className=\"p-4 bg-black/20 rounded-2xl border border-zinc-800\">\r\n                                <p className=\"text-[10px] text-zinc-500 font-black uppercase mb-1\">Logs Administrativos</p>\r\n                                <p className=\"text-xl font-bold text-white\">{healthMetrics?.database?.total_admin_logs ?? 0}</p>\r\n                            </div>\r\n                            <div className=\"p-4 bg-black/20 rounded-2xl border border-zinc-800\">\r\n                                <p className=\"text-[10px] text-zinc-500 font-black uppercase mb-1\">Custos Sist├¬micos</p>\r\n                                <p className=\"text-xl font-bold text-white\">{healthMetrics?.database?.total_system_costs ?? 0}</p>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"mt-8 p-6 bg-primary-500/5 rounded-2xl border border-primary-500/10\">\r\n                            <div className=\"flex items-center gap-3 mb-4\">\r\n                                <Activity size={18} className=\"text-primary-400\" />\r\n                                <span className=\"text-sm font-bold text-zinc-300\">Atividade Recente (24h)</span>\r\n                            </div>\r\n                            <div className=\"grid grid-cols-2 gap-4\">\r\n                                <div className=\"flex justify-between items-center bg-black/40 p-3 rounded-xl\">\r\n                                    <span className=\"text-[10px] text-zinc-500 font-black uppercase\">Novos Usu├írios</span>\r\n                                    <span className=\"text-lg font-black text-white\">+{healthMetrics?.activity?.new_users_24h ?? 0}</span>\r\n                                </div>\r\n                                <div className=\"flex justify-between items-center bg-black/40 p-3 rounded-xl\">\r\n                                    <span className=\"text-[10px] text-zinc-500 font-black uppercase\">Transa├º├Áes</span>\r\n                                    <span className=\"text-lg font-black text-white\">+{healthMetrics?.activity?.trans_24h ?? 0}</span>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josia\\Desktop\\projetos\\cred30\\packages\\frontend-v2\\src\\presentation\\components\\features\\admin\\tabs\\AdminOverview.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","message":"Definition for rule '@typescript-eslint/no-unused-vars' was not found.","line":1,"column":1,"endLine":1,"endColumn":2,"severity":2,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { memo } from 'react';\r\nimport { PieChart, TrendingUp, DollarSign, Vote, Users } from 'lucide-react';\r\nimport { AppState } from '../../../../../domain/types/common.types';\r\n\r\ninterface AdminOverviewProps {\r\n    state: AppState;\r\n}\r\n\r\nconst MetricCard = memo(({ title, value, subtitle, icon: Icon, color }: any) => {\r\n    const colorClasses: any = {\r\n        blue: \"from-blue-600 to-blue-700 border-blue-500/30 shadow-blue-500/10\",\r\n        cyan: \"from-primary-600 to-primary-700 border-primary-500/30 shadow-primary-500/10\",\r\n        emerald: \"from-emerald-600 to-emerald-700 border-emerald-500/30 shadow-emerald-500/10\",\r\n        yellow: \"from-amber-600 to-amber-700 border-amber-500/30 shadow-amber-500/10\",\r\n        red: \"from-red-600 to-red-700 border-red-500/30 shadow-red-500/10\",\r\n        orange: \"from-orange-600 to-orange-700 border-orange-500/30 shadow-orange-500/10\",\r\n        purple: \"from-purple-600 to-purple-700 border-purple-500/30 shadow-purple-500/10\",\r\n    };\r\n\r\n    return (\r\n        <div className={`bg-gradient-to-br ${colorClasses[color]} rounded-2xl p-6 text-white border shadow-lg transition-transform hover:scale-[1.02] duration-300`}>\r\n            <div className=\"flex items-center gap-3 mb-3\">\r\n                <div className=\"w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm\">\r\n                    <Icon size={20} className=\"text-white\" />\r\n                </div>\r\n                <span className=\"text-xs font-bold uppercase tracking-wider opacity-80\">{title}</span>\r\n            </div>\r\n            <p className=\"text-3xl font-bold tracking-tight\">{value}</p>\r\n            <p className=\"text-[10px] opacity-90 mt-1 font-medium uppercase\">{subtitle}</p>\r\n        </div>\r\n    );\r\n});\r\n\r\nMetricCard.displayName = 'MetricCard';\r\n\r\nexport const AdminOverview: React.FC<AdminOverviewProps> = ({ state }) => {\r\n    const formatCurrency = (val: number | string) => {\r\n        const numVal = typeof val === 'string' ? parseFloat(val) : val;\r\n        if (typeof numVal !== 'number' || isNaN(numVal)) return 'R$ 0,00';\r\n        return numVal.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });\r\n    };\r\n\r\n    // Guard clause: prevent crash if state is not loaded yet\r\n    if (!state) {\r\n        return <div className=\"text-center py-12 text-zinc-500\">Carregando...</div>;\r\n    }\r\n\r\n    return (\r\n        <div className=\"space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700\">\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\r\n                <MetricCard title=\"Membros\" value={state.users?.length ?? 0} subtitle=\"Usu├írios Totais\" icon={Users} color=\"blue\" />\r\n                <MetricCard title=\"Participa├º├Áes\" value={state.stats?.quotasCount ?? 0} subtitle=\"Licen├ºas em Opera├º├úo\" icon={PieChart} color=\"cyan\" />\r\n                <MetricCard title=\"Reserva p/ Investimento\" value={formatCurrency(state.stats?.systemConfig?.investment_reserve || 0)} subtitle=\"Fundo de Crescimento\" icon={TrendingUp} color=\"orange\" />\r\n                <MetricCard title=\"Liquidez Real\" value={formatCurrency(state.stats?.systemConfig?.real_liquidity ?? state.systemBalance ?? 0)} subtitle=\"Dispon├¡vel p/ Saque/Apoio\" icon={DollarSign} color=\"emerald\" />\r\n                <MetricCard title=\"Vota├º├Áes Ativas\" value={state.stats?.activeProposalsCount ?? 0} subtitle=\"Governan├ºa em Aberto\" icon={Vote} color=\"purple\" />\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josia\\Desktop\\projetos\\cred30\\packages\\frontend-v2\\src\\presentation\\components\\features\\admin\\tabs\\AdminPayouts.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","message":"Definition for rule '@typescript-eslint/no-unused-vars' was not found.","line":1,"column":1,"endLine":1,"endColumn":2,"severity":2,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { ArrowUpRight, Check, Clipboard } from 'lucide-react';\r\nimport { apiService } from '../../../../../application/services/api.service';\r\n\r\ninterface AdminPayoutsProps {\r\n    onSuccess: (title: string, message: string) => void;\r\n    onError: (title: string, message: string) => void;\r\n}\r\n\r\nexport const AdminPayouts: React.FC<AdminPayoutsProps> = ({ onSuccess, onError }) => {\r\n    const [payoutQueue, setPayoutQueue] = useState<{ transactions: any[], loans: any[] }>({ transactions: [], loans: [] });\r\n\r\n    useEffect(() => {\r\n        fetchPayoutQueue();\r\n    }, []);\r\n\r\n    const fetchPayoutQueue = async () => {\r\n        try {\r\n            const data = await apiService.getPayoutQueue();\r\n            setPayoutQueue(data || { transactions: [], loans: [] });\r\n        } catch (e) {\r\n            console.error('Erro ao buscar fila de pagamentos:', e);\r\n        }\r\n    };\r\n\r\n    const handleConfirmPayout = async (id: any, type: 'TRANSACTION' | 'LOAN') => {\r\n        try {\r\n            await apiService.confirmPayout(id.toString(), type);\r\n            onSuccess('Sucesso', 'Pagamento registrado com sucesso!');\r\n            fetchPayoutQueue();\r\n        } catch (e: any) {\r\n            onError('Erro', e.message || 'Falha ao confirmar pagamento.');\r\n        }\r\n    };\r\n\r\n    const formatCurrency = (val: number | string) => {\r\n        const numVal = typeof val === 'string' ? parseFloat(val) : val;\r\n        if (typeof numVal !== 'number' || isNaN(numVal)) return 'R$ 0,00';\r\n        return numVal.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });\r\n    };\r\n\r\n    return (\r\n        <div className=\"space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700\">\r\n            <div className=\"max-w-4xl mx-auto\">\r\n                <div className=\"bg-zinc-900/50 border border-zinc-800 rounded-3xl p-8 shadow-2xl\">\r\n                    <div className=\"flex items-center justify-between mb-8\">\r\n                        <h3 className=\"text-xl font-bold text-white flex items-center gap-3\">\r\n                            <div className=\"p-2 bg-emerald-500/10 rounded-lg\"><ArrowUpRight className=\"text-emerald-400\" size={20} /></div>\r\n                            Fila de Resgates (PIX)\r\n                        </h3>\r\n                        <span className=\"bg-zinc-800 text-zinc-400 px-3 py-1 rounded-full text-[10px] font-black uppercase\">Pendentes: {payoutQueue.transactions?.length || 0}</span>\r\n                    </div>\r\n\r\n                    <div className=\"space-y-4 max-h-[700px] overflow-y-auto pr-3 custom-scrollbar\">\r\n                        {!payoutQueue.transactions || payoutQueue.transactions.length === 0 ? (\r\n                            <div className=\"py-24 text-center\">\r\n                                <div className=\"bg-zinc-800/30 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n                                    <Check className=\"text-zinc-500\" size={32} />\r\n                                </div>\r\n                                <p className=\"text-zinc-500 font-bold uppercase text-xs tracking-widest\">Tudo em dia!</p>\r\n                            </div>\r\n                        ) : (\r\n                            payoutQueue.transactions.map((t) => (\r\n                                <div key={t.id} className=\"bg-black/30 border border-zinc-800/50 rounded-2xl p-6 transition-all hover:border-zinc-700 hover:bg-black/40 group\">\r\n                                    <div className=\"flex justify-between items-start gap-4\">\r\n                                        <div className=\"space-y-3 flex-1\">\r\n                                            <div>\r\n                                                <p className=\"text-sm font-bold text-white mb-0.5\">{t.user_name}</p>\r\n                                                <div className=\"flex items-center gap-2 bg-zinc-800/50 p-2 rounded-lg cursor-pointer\" onClick={() => {\r\n                                                    navigator.clipboard.writeText(t.user_pix || t.pix_key);\r\n                                                    onSuccess('Copiado', 'Chave PIX copiada!');\r\n                                                }}>\r\n                                                    <p className=\"text-[11px] text-primary-400 font-mono break-all\">{t.user_pix || t.pix_key}</p>\r\n                                                    <Clipboard size={12} className=\"text-zinc-500\" />\r\n                                                </div>\r\n                                            </div>\r\n                                            <p className=\"text-2xl font-black text-white\">{formatCurrency(t.amount)}</p>\r\n                                        </div>\r\n                                        <button\r\n                                            onClick={() => handleConfirmPayout(t.id, 'TRANSACTION')}\r\n                                            className=\"p-4 bg-primary-500/10 text-primary-400 rounded-2xl hover:bg-primary-500 hover:text-black transition-all flex flex-col items-center justify-center gap-2 min-w-[120px]\"\r\n                                        >\r\n                                            <Check size={20} />\r\n                                            <span className=\"text-[10px] font-black uppercase\">Confirmar</span>\r\n                                        </button>\r\n                                    </div>\r\n                                </div>\r\n                            ))\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josia\\Desktop\\projetos\\cred30\\packages\\frontend-v2\\src\\presentation\\components\\features\\admin\\tabs\\AdminReferrals.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","message":"Definition for rule '@typescript-eslint/no-unused-vars' was not found.","line":1,"column":1,"endLine":1,"endColumn":2,"severity":2,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { UserPlus, Users, Trash2 } from 'lucide-react';\r\nimport { apiService } from '../../../../../application/services/api.service';\r\n\r\ninterface AdminReferralsProps {\r\n    onSuccess: (title: string, message: string) => void;\r\n    onError: (title: string, message: string) => void;\r\n}\r\n\r\nexport const AdminReferrals: React.FC<AdminReferralsProps> = ({ onSuccess, onError }) => {\r\n    const [referralCodes, setReferralCodes] = useState<any[]>([]);\r\n    const [newReferralCode, setNewReferralCode] = useState('');\r\n    const [referralMaxUses, setReferralMaxUses] = useState('');\r\n\r\n    useEffect(() => {\r\n        fetchReferralCodes();\r\n    }, []);\r\n\r\n    const fetchReferralCodes = async () => {\r\n        try {\r\n            const response = await apiService.get<any[]>('/admin/referral-codes');\r\n            if (response.success) {\r\n                setReferralCodes(response.data || []);\r\n            }\r\n        } catch (error) {\r\n            console.error('Erro ao buscar c├│digos:', error);\r\n        }\r\n    };\r\n\r\n    const handleCreateReferralCode = async () => {\r\n        if (!newReferralCode) return;\r\n        try {\r\n            const response = await apiService.post<any>('/admin/referral-codes', {\r\n                code: newReferralCode,\r\n                maxUses: referralMaxUses ? parseInt(referralMaxUses) : null\r\n            });\r\n            if (response.success) {\r\n                onSuccess('Sucesso', 'C├│digo criado!');\r\n                setNewReferralCode('');\r\n                setReferralMaxUses('');\r\n                fetchReferralCodes();\r\n            } else {\r\n                onError('Erro', response.message);\r\n            }\r\n        } catch (e: any) {\r\n            onError('Erro', e.message);\r\n        }\r\n    };\r\n\r\n    const handleDeleteReferralCode = async (id: number) => {\r\n        if (!window.confirm('Excluir este c├│digo definitivamente?')) return;\r\n        try {\r\n            const response = await apiService.delete<any>(`/admin/referral-codes/${id}`);\r\n            if (response.success) {\r\n                onSuccess('Removido', 'C├│digo exclu├¡do com sucesso');\r\n                fetchReferralCodes();\r\n            }\r\n        } catch (e: any) {\r\n            onError('Erro', e.message);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700\">\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\r\n                <div className=\"bg-zinc-900/50 border border-zinc-800 rounded-3xl p-8 shadow-2xl\">\r\n                    <h3 className=\"text-xl font-bold text-white mb-8 flex items-center gap-3\">\r\n                        <div className=\"p-2 bg-primary-500/10 rounded-lg\"><UserPlus className=\"text-primary-400\" size={20} /></div>\r\n                        Criar Novo C├│digo\r\n                    </h3>\r\n                    <div className=\"space-y-4\">\r\n                        <input\r\n                            type=\"text\"\r\n                            placeholder=\"C├ôDIGO (EX: VIP2024)\"\r\n                            value={newReferralCode}\r\n                            onChange={(e) => setNewReferralCode(e.target.value.toUpperCase())}\r\n                            className=\"w-full bg-zinc-800/50 border border-zinc-700/50 rounded-2xl px-6 py-4 text-white outline-none focus:border-primary-500/50 font-bold\"\r\n                        />\r\n                        <input\r\n                            type=\"number\"\r\n                            placeholder=\"M├íximo de Usos (vazio = ilimitado)\"\r\n                            value={referralMaxUses}\r\n                            onChange={(e) => setReferralMaxUses(e.target.value)}\r\n                            className=\"w-full bg-zinc-800/50 border border-zinc-700/50 rounded-2xl px-6 py-4 text-white outline-none focus:border-primary-500/50 font-bold\"\r\n                        />\r\n                        <button\r\n                            onClick={handleCreateReferralCode}\r\n                            className=\"w-full bg-primary-500 hover:bg-primary-400 text-black font-black py-4 rounded-2xl transition-all shadow-xl\"\r\n                        >\r\n                            Gerar C├│digo VIP\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"bg-zinc-900/50 border border-zinc-800 rounded-3xl p-8 shadow-2xl\">\r\n                    <h3 className=\"text-xl font-bold text-white mb-8 flex items-center gap-3\">\r\n                        <div className=\"p-2 bg-zinc-800 rounded-lg\"><Users className=\"text-zinc-400\" size={20} /></div>\r\n                        C├│digos Administrativos\r\n                    </h3>\r\n                    <div className=\"space-y-3 max-h-[400px] overflow-y-auto pr-2 custom-scrollbar\">\r\n                        {referralCodes.map((rc) => (\r\n                            <div key={rc.id} className=\"bg-black/20 border border-zinc-800 px-4 py-3 rounded-xl flex justify-between items-center\">\r\n                                <div>\r\n                                    <p className=\"font-black text-white tracking-widest leading-none\">{rc.code}</p>\r\n                                    <p className=\"text-[10px] text-zinc-500 font-bold mt-1 uppercase\">Usos: {rc.current_uses} / {rc.max_uses || 'Ôê×'}</p>\r\n                                </div>\r\n                                <div className=\"flex items-center gap-2\">\r\n                                    <button\r\n                                        onClick={() => handleDeleteReferralCode(rc.id)}\r\n                                        className=\"p-2 text-zinc-500 hover:text-red-500 transition-colors\"\r\n                                        aria-label=\"Excluir c├│digo de indica├º├úo\"\r\n                                        title=\"Excluir c├│digo de indica├º├úo\"\r\n                                    >\r\n                                        <Trash2 size={16} />\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                        ))}\r\n                        {referralCodes.length === 0 && (\r\n                            <div className=\"text-center py-20 opacity-30\">\r\n                                <Users size={48} className=\"mx-auto mb-4\" />\r\n                                <p className=\"text-xs font-bold uppercase tracking-widest\">Nenhum c├│digo gerado</p>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josia\\Desktop\\projetos\\cred30\\packages\\frontend-v2\\src\\presentation\\components\\features\\admin\\tabs\\AdminReviews.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","message":"Definition for rule '@typescript-eslint/no-unused-vars' was not found.","line":1,"column":1,"endLine":1,"endColumn":2,"severity":2,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { MessageSquare, Check, X as XIcon } from 'lucide-react';\r\nimport { apiService } from '../../../../../application/services/api.service';\r\n\r\ninterface AdminReviewsProps {\r\n    onSuccess: (title: string, message: string) => void;\r\n    onError: (title: string, message: string) => void;\r\n}\r\n\r\nexport const AdminReviews: React.FC<AdminReviewsProps> = ({ onSuccess, onError }) => {\r\n    const [reviews, setReviews] = useState<any[]>([]);\r\n\r\n    useEffect(() => {\r\n        fetchReviews();\r\n    }, []);\r\n\r\n    const fetchReviews = async () => {\r\n        try {\r\n            const res = await apiService.getAdminReviews();\r\n            if (res.success) {\r\n                setReviews(res.data || []);\r\n            }\r\n        } catch (e) {\r\n            console.error('Erro ao buscar avalia├º├Áes:', e);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            <div className=\"bg-zinc-900 rounded-3xl p-6 border border-zinc-800\">\r\n                <h3 className=\"text-lg font-bold text-white mb-6 flex items-center gap-3\">\r\n                    <MessageSquare size={20} className=\"text-amber-400\" />\r\n                    Avalia├º├Áes de Saques\r\n                </h3>\r\n\r\n                {reviews.length === 0 ? (\r\n                    <div className=\"text-center py-20 opacity-30\">\r\n                        <MessageSquare size={48} className=\"mx-auto mb-4\" />\r\n                        <p className=\"text-xs font-bold uppercase tracking-widest\">Nenhuma avalia├º├úo registrada</p>\r\n                    </div>\r\n                ) : (\r\n                    <div className=\"space-y-4\">\r\n                        {reviews.map((review) => (\r\n                            <div key={review.id} className={`bg-zinc-800 rounded-2xl p-5 border ${review.is_approved ? 'border-emerald-500/30' : review.is_public ? 'border-amber-500/30' : 'border-zinc-700'}`}>\r\n                                <div className=\"flex justify-between items-start mb-3\">\r\n                                    <div>\r\n                                        <p className=\"text-white font-bold\">{review.user_name}</p>\r\n                                        <p className=\"text-zinc-500 text-xs\">{review.user_email}</p>\r\n                                    </div>\r\n                                    <div className=\"flex items-center gap-1\">\r\n                                        {[1, 2, 3, 4, 5].map((star) => (\r\n                                            <span key={star} className={star <= review.rating ? 'text-amber-400' : 'text-zinc-700'}>Ôÿà</span>\r\n                                        ))}\r\n                                    </div>\r\n                                </div>\r\n\r\n                                {review.comment && (\r\n                                    <p className=\"text-zinc-300 text-sm mb-4 italic\">\"{review.comment}\"</p>\r\n                                )}\r\n\r\n                                <div className=\"flex items-center justify-between text-xs\">\r\n                                    <div className=\"flex items-center gap-3\">\r\n                                        <span className=\"text-zinc-500\">\r\n                                            Saque: <span className=\"text-white font-medium\">R$ {review.transaction_amount?.toFixed(2)}</span>\r\n                                        </span>\r\n                                        {review.is_public && (\r\n                                            <span className={`px-2 py-0.5 rounded-full ${review.is_approved ? 'bg-emerald-500/20 text-emerald-400' : 'bg-amber-500/20 text-amber-400'}`}>\r\n                                                {review.is_approved ? 'Ô£ô Aprovado' : 'Pendente'}\r\n                                            </span>\r\n                                        )}\r\n                                    </div>\r\n\r\n                                    {review.is_public && !review.is_approved && (\r\n                                        <div className=\"flex gap-2\">\r\n                                            <button\r\n                                                onClick={async () => {\r\n                                                    try {\r\n                                                        await apiService.approveReview(review.id);\r\n                                                        onSuccess('Sucesso', 'Depoimento aprovado!');\r\n                                                        fetchReviews();\r\n                                                    } catch (e) {\r\n                                                        onError('Erro', 'Falha ao aprovar');\r\n                                                    }\r\n                                                }}\r\n                                                className=\"bg-emerald-500/20 hover:bg-emerald-500 text-emerald-400 hover:text-black px-3 py-1.5 rounded-lg font-bold transition-all flex items-center gap-1\"\r\n                                            >\r\n                                                <Check size={14} /> Aprovar\r\n                                            </button>\r\n                                            <button\r\n                                                onClick={async () => {\r\n                                                    try {\r\n                                                        await apiService.rejectReview(review.id);\r\n                                                        onSuccess('Sucesso', 'Depoimento rejeitado.');\r\n                                                        fetchReviews();\r\n                                                    } catch (e) {\r\n                                                        onError('Erro', 'Falha ao rejeitar');\r\n                                                    }\r\n                                                }}\r\n                                                className=\"bg-red-500/20 hover:bg-red-500 text-red-400 hover:text-black px-3 py-1.5 rounded-lg font-bold transition-all flex items-center gap-1\"\r\n                                            >\r\n                                                <XIcon size={14} /> Rejeitar\r\n                                            </button>\r\n                                        </div>\r\n                                    )}\r\n\r\n                                    {review.is_approved && (\r\n                                        <button\r\n                                            onClick={async () => {\r\n                                                try {\r\n                                                    await apiService.rejectReview(review.id);\r\n                                                    onSuccess('Sucesso', 'Depoimento removido da p├ígina.');\r\n                                                    fetchReviews();\r\n                                                } catch (e) {\r\n                                                    onError('Erro', 'Falha ao remover');\r\n                                                }\r\n                                            }}\r\n                                            className=\"bg-zinc-700 hover:bg-red-500/20 text-zinc-400 hover:text-red-400 px-3 py-1.5 rounded-lg font-bold transition-all\"\r\n                                        >\r\n                                            Remover\r\n                                        </button>\r\n                                    )}\r\n                                </div>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josia\\Desktop\\projetos\\cred30\\packages\\frontend-v2\\src\\presentation\\components\\features\\admin\\tabs\\AdminSystem.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","message":"Definition for rule '@typescript-eslint/no-unused-vars' was not found.","line":1,"column":1,"endLine":1,"endColumn":2,"severity":2,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { TrendingUp, Coins, Activity, ArrowUpRight, ArrowDownLeft, Trash2, Check, Settings as SettingsIcon, AlertTriangle } from 'lucide-react';\r\nimport { apiService } from '../../../../../application/services/api.service';\r\nimport { AppState } from '../../../../../domain/types/common.types';\r\nimport { updateProfitPool } from '../../../../../application/services/storage.service';\r\n\r\ninterface AdminSystemProps {\r\n    state: AppState;\r\n    onRefresh: () => void;\r\n    onSuccess: (title: string, message: string) => void;\r\n    onError: (title: string, message: string) => void;\r\n}\r\n\r\nexport const AdminSystem: React.FC<AdminSystemProps> = ({ state, onRefresh, onSuccess, onError }) => {\r\n    const [systemCosts, setSystemCosts] = useState<any[]>([]);\r\n    const [newCostDescription, setNewCostDescription] = useState('');\r\n    const [newCostAmount, setNewCostAmount] = useState('');\r\n    const [financeHistory, setFinanceHistory] = useState<any[]>([]);\r\n    const [isHistoryLoading, setIsHistoryLoading] = useState(false);\r\n    const [newProfit, setNewProfit] = useState('');\r\n\r\n    useEffect(() => {\r\n        fetchSystemCosts();\r\n        fetchFinanceHistory();\r\n    }, []);\r\n\r\n    const fetchSystemCosts = async () => {\r\n        try {\r\n            const res = await apiService.get<any>('/admin/costs');\r\n            if (res.success) {\r\n                setSystemCosts(res.data || []);\r\n            }\r\n        } catch (e) {\r\n            console.error('Erro ao buscar custos:', e);\r\n        }\r\n    };\r\n\r\n    const fetchFinanceHistory = async () => {\r\n        setIsHistoryLoading(true);\r\n        try {\r\n            const res = await apiService.get<any>('/admin/finance-history');\r\n            if (res.success) {\r\n                setFinanceHistory(res.data || []);\r\n            }\r\n        } catch (e) {\r\n            console.error('Erro ao buscar hist├│rico financeiro:', e);\r\n        } finally {\r\n            setIsHistoryLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleAddCost = async () => {\r\n        if (!newCostDescription || !newCostAmount) return;\r\n        try {\r\n            const res = await apiService.post<any>('/admin/costs', {\r\n                description: newCostDescription,\r\n                amount: parseFloat(newCostAmount)\r\n            });\r\n            if (res.success) {\r\n                onSuccess('Sucesso', 'Custo adicionado!');\r\n                setNewCostDescription('');\r\n                setNewCostAmount('');\r\n                fetchSystemCosts();\r\n            }\r\n        } catch (e: any) {\r\n            onError('Erro', e.message);\r\n        }\r\n    };\r\n\r\n    const handlePayCost = async (id: number, desc: string) => {\r\n        if (!window.confirm(`Deseja marcar '${desc}' como pago e deduzir do saldo do sistema?`)) return;\r\n        try {\r\n            const res = await apiService.post<any>(`/admin/costs/${id}/pay`, {});\r\n            if (res.success) {\r\n                onSuccess('Pago', 'Custo deduzido do saldo do sistema.');\r\n                fetchSystemCosts();\r\n                fetchFinanceHistory();\r\n                onRefresh();\r\n            }\r\n        } catch (e: any) {\r\n            onError('Erro', e.message);\r\n        }\r\n    };\r\n\r\n    const handleDeleteCost = async (id: number) => {\r\n        if (!window.confirm('Excluir este custo?')) return;\r\n        try {\r\n            await apiService.delete(`/admin/costs/${id}`);\r\n            onSuccess('Sucesso', 'Custo removido.');\r\n            fetchSystemCosts();\r\n        } catch (e: any) {\r\n            onError('Erro', e.message);\r\n        }\r\n    };\r\n\r\n    const handleUpdateProfit = async () => {\r\n        if (!newProfit) return;\r\n        try {\r\n            const amount = parseFloat(newProfit);\r\n            const res = await updateProfitPool(amount);\r\n            if (res.success) {\r\n                onSuccess('Sucesso', 'Fundo de recompensas atualizado!');\r\n                setNewProfit('');\r\n                fetchFinanceHistory();\r\n                onRefresh();\r\n            } else {\r\n                onError('Erro', res.message);\r\n            }\r\n        } catch (e: any) {\r\n            onError('Erro', e.message);\r\n        }\r\n    };\r\n\r\n    const handleRunLiquidation = async () => {\r\n        if (!window.confirm('Iniciar varredura de garantias agora? O sistema executar├í o lastro de todos os apoios em atraso h├í mais de 5 dias.')) return;\r\n        try {\r\n            const res = await apiService.post<any>('/admin/run-liquidation', {});\r\n            if (res.success) {\r\n                onSuccess('Varredura Conclu├¡da', res.message);\r\n                onRefresh();\r\n            } else {\r\n                onError('Erro na Liquida├º├úo', res.message);\r\n            }\r\n        } catch (e: any) {\r\n            onError('Erro', e.message);\r\n        }\r\n    };\r\n\r\n    const formatCurrency = (val: number | string) => {\r\n        const numVal = typeof val === 'string' ? parseFloat(val) : val;\r\n        if (typeof numVal !== 'number' || isNaN(numVal)) return 'R$ 0,00';\r\n        return numVal.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });\r\n    };\r\n\r\n    return (\r\n        <div className=\"space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700\">\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8\">\r\n                {/* Gest├úo de Custos Fixos */}\r\n                <div className=\"bg-zinc-900/50 border border-zinc-800 rounded-3xl p-8 shadow-2xl\">\r\n                    <h3 className=\"text-xl font-bold text-white mb-8 flex items-center gap-3\">\r\n                        <div className=\"p-2 bg-primary-500/10 rounded-lg\"><TrendingUp className=\"text-primary-400\" size={20} /></div>\r\n                        Custos Fixos Mensais\r\n                    </h3>\r\n                    <div className=\"space-y-6\">\r\n                        <div className=\"bg-black/20 p-6 rounded-2xl border border-zinc-800\">\r\n                            <p className=\"text-[10px] text-zinc-500 font-black uppercase mb-1\">Total de Despesas/M├¬s</p>\r\n                            <p className=\"text-4xl font-black text-red-400 tracking-tighter\">\r\n                                -{formatCurrency(state.stats?.systemConfig?.monthly_fixed_costs || 0)}\r\n                            </p>\r\n                        </div>\r\n\r\n                        <div className=\"space-y-3\">\r\n                            <p className=\"text-[10px] text-zinc-500 font-black uppercase tracking-widest\">Adicionar Nova Despesa</p>\r\n                            <div className=\"flex gap-2\">\r\n                                <input\r\n                                    type=\"text\"\r\n                                    placeholder=\"Descri├º├úo (ex: MEI)\"\r\n                                    value={newCostDescription}\r\n                                    onChange={(e) => setNewCostDescription(e.target.value)}\r\n                                    className=\"flex-1 bg-zinc-800/50 border border-zinc-700/50 rounded-xl px-4 py-3 text-sm text-white outline-none focus:border-primary-500/50\"\r\n                                />\r\n                                <input\r\n                                    type=\"text\"\r\n                                    placeholder=\"Valor\"\r\n                                    value={newCostAmount}\r\n                                    onChange={(e) => setNewCostAmount(e.target.value)}\r\n                                    className=\"w-24 bg-zinc-800/50 border border-zinc-700/50 rounded-xl px-4 py-3 text-sm text-white outline-none focus:border-primary-500/50\"\r\n                                />\r\n                                <button\r\n                                    onClick={handleAddCost}\r\n                                    className=\"bg-primary-500 hover:bg-primary-400 p-3 rounded-xl text-black transition-all\"\r\n                                >\r\n                                    <Check size={20} />\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"space-y-2 max-h-[250px] overflow-y-auto pr-2 custom-scrollbar\">\r\n                            {systemCosts.map((cost) => (\r\n                                <div key={cost.id} className=\"group bg-black/40 border border-zinc-800/50 p-4 rounded-2xl flex justify-between items-center transition-all hover:border-zinc-700\">\r\n                                    <div className=\"flex-1\">\r\n                                        <p className=\"text-xs font-bold text-zinc-300\">{cost.description}</p>\r\n                                        <p className=\"text-sm font-black text-white\">{formatCurrency(parseFloat(cost.amount))}</p>\r\n                                    </div>\r\n                                    <div className=\"flex items-center gap-2\">\r\n                                        <button\r\n                                            onClick={() => handlePayCost(cost.id, cost.description)}\r\n                                            className=\"bg-emerald-500/10 hover:bg-emerald-500 text-emerald-400 hover:text-black px-4 py-2 rounded-lg text-[10px] font-black uppercase transition-all\"\r\n                                        >\r\n                                            PAGAR\r\n                                        </button>\r\n                                        <button\r\n                                            onClick={() => handleDeleteCost(cost.id)}\r\n                                            className=\"p-2 text-zinc-600 hover:text-red-500 transition-colors opacity-0 group-hover:opacity-100\"\r\n                                        >\r\n                                            <Trash2 size={16} />\r\n                                        </button>\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n                            {systemCosts.length === 0 && (\r\n                                <p className=\"text-center py-4 text-xs text-zinc-600 font-bold uppercase\">Nenhum custo fixo lan├ºado.</p>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Distribui├º├úo de Reservas Internas */}\r\n                <div className=\"bg-zinc-900/50 border border-zinc-800 rounded-3xl p-8 shadow-2xl\">\r\n                    <h3 className=\"text-xl font-bold text-white mb-8 flex items-center gap-3\">\r\n                        <div className=\"p-2 bg-primary-500/10 rounded-lg\"><Activity className=\"text-primary-400\" size={20} /></div>\r\n                        Reservas de Crescimento (25/25/25/25)\r\n                    </h3>\r\n                    <div className=\"grid grid-cols-2 gap-4\">\r\n                        <div className=\"bg-black/40 border border-zinc-800/50 p-4 rounded-2xl\">\r\n                            <p className=\"text-[10px] text-zinc-500 font-bold uppercase mb-1\">Impostos (Receita)</p>\r\n                            <p className=\"text-lg font-black text-white\">{formatCurrency(state.stats?.systemConfig?.total_tax_reserve || 0)}</p>\r\n                        </div>\r\n                        <div className=\"bg-black/40 border border-zinc-800/50 p-4 rounded-2xl\">\r\n                            <p className=\"text-[10px] text-zinc-500 font-bold uppercase mb-1\">Operacional (Infra)</p>\r\n                            <p className=\"text-lg font-black text-white\">{formatCurrency(state.stats?.systemConfig?.total_operational_reserve || 0)}</p>\r\n                        </div>\r\n                        <div className=\"bg-black/40 border border-zinc-800/50 p-4 rounded-2xl\">\r\n                            <p className=\"text-[10px] text-zinc-500 font-bold uppercase mb-1\">Owner Profit (Sal├írio)</p>\r\n                            <p className=\"text-lg font-black text-white\">{formatCurrency(state.stats?.systemConfig?.total_owner_profit || 0)}</p>\r\n                        </div>\r\n                        <div className=\"bg-black/40 border border-zinc-800/50 p-4 rounded-2xl\">\r\n                            <p className=\"text-[10px] text-zinc-500 font-bold uppercase mb-1\">Reserva Investimento</p>\r\n                            <p className=\"text-lg font-black text-primary-400\">{formatCurrency(state.stats?.systemConfig?.investment_reserve || 0)}</p>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"mt-6 pt-6 border-t border-zinc-800\">\r\n                        <div className=\"flex justify-between items-center mb-2\">\r\n                            <span className=\"text-xs text-zinc-500 font-bold uppercase\">Reward Pool (Cotistas)</span>\r\n                            <span className=\"text-xs text-emerald-400 font-black tracking-tight\">{formatCurrency(state.profitPool)}</span>\r\n                        </div>\r\n                        <div className=\"w-full bg-zinc-800 h-1.5 rounded-full overflow-hidden\">\r\n                            <div className=\"bg-emerald-500 h-full\" style={{ width: '100%' }}></div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Extrato Financeiro Administrativo */}\r\n                <div className=\"bg-zinc-900/50 border border-zinc-800 rounded-3xl p-8 shadow-2xl col-span-1 md:col-span-2\">\r\n                    <h3 className=\"text-xl font-bold text-white mb-8 flex items-center gap-3\">\r\n                        <div className=\"p-2 bg-primary-500/10 rounded-lg\"><Activity className=\"text-primary-400\" size={20} /></div>\r\n                        Extrato de Movimenta├º├Áes Administrativas\r\n                    </h3>\r\n\r\n                    <div className=\"space-y-3 max-h-[400px] overflow-y-auto pr-3 custom-scrollbar\">\r\n                        {isHistoryLoading && <div className=\"text-center py-10 text-zinc-500 text-xs font-bold uppercase animate-pulse\">Carregando extrato...</div>}\r\n\r\n                        {financeHistory.map((log) => (\r\n                            <div key={log.id} className=\"bg-black/30 border border-zinc-800/50 p-4 rounded-2xl flex items-center justify-between gap-4\">\r\n                                <div className=\"flex items-center gap-4\">\r\n                                    <div className={`p-3 rounded-xl ${log.action === 'PAY_COST' ? 'bg-red-500/10 text-red-400' :\r\n                                        log.action === 'MANUAL_PROFIT_ADD' ? 'bg-emerald-500/10 text-emerald-400' :\r\n                                            'bg-zinc-800 text-zinc-400'\r\n                                        }`}>\r\n                                        {log.action === 'PAY_COST' ? <ArrowUpRight size={18} /> :\r\n                                            log.action === 'MANUAL_PROFIT_ADD' ? <ArrowDownLeft size={18} /> :\r\n                                                <SettingsIcon size={18} />}\r\n                                    </div>\r\n                                    <div>\r\n                                        <p className=\"text-xs font-black text-white uppercase tracking-tight\">\r\n                                            {log.action === 'PAY_COST' ? 'PAGAMENTO REALIZADO' :\r\n                                                log.action === 'MANUAL_PROFIT_ADD' ? 'EXCEDENTE ADICIONADO' :\r\n                                                    log.action.replace('_', ' ')}\r\n                                        </p>\r\n                                        <p className=\"text-[10px] text-zinc-500 font-bold uppercase\">{new Date(log.created_at).toLocaleString('pt-BR')}</p>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"text-right\">\r\n                                    <p className={`text-sm font-black ${log.action === 'PAY_COST' ? 'text-red-400' :\r\n                                        log.action === 'MANUAL_PROFIT_ADD' ? 'text-emerald-400' :\r\n                                            'text-white'\r\n                                        }`}>\r\n                                        {log.action === 'PAY_COST' ? '-' : '+'}{formatCurrency(log.new_values?.amount || log.new_values?.amountToAdd || log.new_values?.addedAmount || 0)}\r\n                                    </p>\r\n                                    <p className=\"text-[9px] text-zinc-600 font-bold uppercase\">POR: {log.admin_name}</p>\r\n                                </div>\r\n                            </div>\r\n                        ))}\r\n\r\n                        {!isHistoryLoading && financeHistory.length === 0 && (\r\n                            <div className=\"py-20 text-center opacity-30\">\r\n                                <Activity size={48} className=\"mx-auto mb-4\" />\r\n                                <p className=\"text-xs font-bold uppercase\">Nenhuma movimenta├º├úo registrada</p>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Varredura de Inadimpl├¬ncia */}\r\n                <div className=\"bg-zinc-900/50 border border-zinc-800 rounded-3xl p-8 shadow-2xl col-span-1 md:col-span-2\">\r\n                    <h3 className=\"text-xl font-bold text-white mb-8 flex items-center gap-3\">\r\n                        <div className=\"p-2 bg-red-500/10 rounded-lg\"><AlertTriangle className=\"text-red-400\" size={20} /></div>\r\n                        Varredura de Atraso de Reposi├º├úo\r\n                    </h3>\r\n                    <div className=\"flex flex-col md:flex-row items-center justify-between gap-6\">\r\n                        <p className=\"text-sm text-zinc-400 leading-relaxed max-w-xl\">\r\n                            Clique abaixo para executar manualmente a prote├º├úo de lastro. Membros com atraso superior a 5 dias ter├úo suas licen├ºas executadas para cobrir o compromisso social.\r\n                        </p>\r\n                        <button\r\n                            onClick={handleRunLiquidation}\r\n                            className=\"bg-red-500/10 hover:bg-red-500 text-red-400 hover:text-black border border-red-500/30 font-black px-8 py-5 rounded-2xl transition-all uppercase tracking-widest text-xs whitespace-nowrap\"\r\n                        >\r\n                            Iniciar Varredura de Garantias\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josia\\Desktop\\projetos\\cred30\\packages\\frontend-v2\\src\\presentation\\components\\features\\admin\\tabs\\AdminUsers.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","message":"Definition for rule '@typescript-eslint/no-unused-vars' was not found.","line":1,"column":1,"endLine":1,"endColumn":2,"severity":2,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport { Gift } from 'lucide-react';\r\nimport { apiService } from '../../../../../application/services/api.service';\r\nimport { AdminUserManagement } from '../AdminUserManagement';\r\n\r\ninterface AdminUsersProps {\r\n    onSuccess: (title: string, message: string) => void;\r\n    onError: (title: string, message: string) => void;\r\n}\r\n\r\nexport const AdminUsers: React.FC<AdminUsersProps> = ({ onSuccess, onError }) => {\r\n    const [giftEmail, setGiftEmail] = useState('');\r\n    const [giftQuantity, setGiftQuantity] = useState('');\r\n    const [giftReason, setGiftReason] = useState('');\r\n\r\n    const handleGiftQuota = async () => {\r\n        if (!giftEmail || !giftQuantity) return;\r\n        if (!window.confirm(`CONFIRMA├ç├âO: Enviar ${giftQuantity} participa├º├Áes para ${giftEmail}? Esta a├º├úo criar├í as participa├º├Áes e n├úo cobrar├í do usu├írio.`)) return;\r\n\r\n        try {\r\n            const response = await apiService.post<any>('/admin/users/add-quota', {\r\n                email: giftEmail,\r\n                quantity: parseInt(giftQuantity),\r\n                reason: giftReason\r\n            });\r\n            if (response.success) {\r\n                onSuccess('Envio Realizado!', response.message);\r\n                setGiftEmail('');\r\n                setGiftQuantity('');\r\n                setGiftReason('');\r\n            } else {\r\n                onError('Erro', response.message);\r\n            }\r\n        } catch (e: any) {\r\n            onError('Erro', e.message);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"space-y-8\">\r\n            <AdminUserManagement onSuccess={onSuccess} onError={onError} />\r\n\r\n            <div className=\"bg-zinc-900/50 border border-zinc-800 rounded-3xl p-8 shadow-2xl max-w-2xl mx-auto opacity-50 hover:opacity-100 transition-opacity\">\r\n                <h3 className=\"text-xl font-bold text-white mb-8 flex items-center gap-3\">\r\n                    <div className=\"p-2 bg-purple-500/10 rounded-lg\"><Gift className=\"text-purple-400\" size={20} /></div>\r\n                    Presentear Participa├º├Áes (A├º├úo Direta)\r\n                </h3>\r\n                <div className=\"space-y-4\">\r\n                    <input\r\n                        type=\"email\"\r\n                        placeholder=\"Email do usu├írio\"\r\n                        value={giftEmail}\r\n                        onChange={(e) => setGiftEmail(e.target.value)}\r\n                        className=\"w-full bg-zinc-800/50 border border-zinc-700/50 rounded-2xl px-6 py-4 text-white outline-none focus:border-purple-500/50 font-bold\"\r\n                    />\r\n                    <div className=\"grid grid-cols-2 gap-4\">\r\n                        <input\r\n                            type=\"number\"\r\n                            placeholder=\"Quantidade\"\r\n                            value={giftQuantity}\r\n                            onChange={(e) => setGiftQuantity(e.target.value)}\r\n                            className=\"w-full bg-zinc-800/50 border border-zinc-700/50 rounded-2xl px-6 py-4 text-white outline-none focus:border-purple-500/50 font-bold\"\r\n                        />\r\n                        <button\r\n                            onClick={handleGiftQuota}\r\n                            className=\"bg-purple-500 hover:bg-purple-400 text-black font-black px-6 py-4 rounded-2xl transition-all shadow-xl\"\r\n                        >\r\n                            Enviar\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josia\\Desktop\\projetos\\cred30\\packages\\frontend-v2\\src\\presentation\\components\\features\\ai-assistant.component.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","message":"Definition for rule '@typescript-eslint/no-unused-vars' was not found.","line":1,"column":1,"endLine":1,"endColumn":2,"severity":2,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport { GoogleGenAI } from \"@google/genai\";\r\nimport { Sparkles, X, MessageSquare } from 'lucide-react';\r\nimport { AppState } from '../../../domain/types/common.types';\r\n\r\ninterface AIAssistantProps {\r\n  appState: AppState;\r\n}\r\n\r\nexport const AIAssistant: React.FC<AIAssistantProps> = ({ appState }) => {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [advice, setAdvice] = useState<string | null>(null);\r\n\r\n  const getAdvice = async () => {\r\n    setLoading(true);\r\n    try {\r\n      if (!process.env.API_KEY) {\r\n        setAdvice(\"Chave de API n├úo configurada. Por favor, configure o ambiente.\");\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      const ai = new GoogleGenAI({ apiKey: process.env.API_KEY });\r\n\r\n      const userContext = {\r\n        name: appState?.currentUser?.name,\r\n        balance: appState?.currentUser?.balance,\r\n        quotas: appState?.quotas?.length ?? 0,\r\n        totalInvested: appState?.quotas?.reduce((acc, q) => acc + q.purchasePrice, 0) ?? 0,\r\n        currentValue: appState?.quotas?.reduce((acc, q) => acc + q.currentValue, 0) ?? 0,\r\n        activeLoans: appState?.loans?.filter(l => l.status === 'APPROVED').length ?? 0,\r\n        loanDebt: appState?.loans?.filter(l => l.status === 'APPROVED').reduce((acc, l) => acc + l.totalRepayment, 0) ?? 0\r\n      };\r\n\r\n      const prompt = `\r\n        Aja como um consultor financeiro s├¬nior de uma Fintech chamada Cred30.\r\n        Analise os dados do usu├írio abaixo e d├¬ um conselho curto, motivador e estrat├®gico (max 3 frases).\r\n        Fale em Portugu├¬s do Brasil. Use emojis.\r\n        \r\n        Dados do Usu├írio:\r\n        ${JSON.stringify(userContext)}\r\n        \r\n        Contexto da Plataforma:\r\n        - Cotas rendem diariamente (vari├ível).\r\n        - Empr├®stimos custam 20% ao m├¬s.\r\n        - Venda antes de 1 ano tem 40% de multa.\r\n      `;\r\n\r\n      const response = await ai.models.generateContent({\r\n        model: 'gemini-2.5-flash',\r\n        contents: prompt,\r\n      });\r\n\r\n      setAdvice(response.text || \"N├úo foi poss├¡vel gerar um conselho.\");\r\n    } catch (error) {\r\n      console.error(error);\r\n      setAdvice(\"N├úo foi poss├¡vel gerar um conselho agora. Tente novamente mais tarde.\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  if (!isOpen) {\r\n    return (\r\n      <button\r\n        onClick={() => {\r\n          setIsOpen(true);\r\n          if (!advice) getAdvice();\r\n        }}\r\n        className=\"fixed bottom-20 md:bottom-8 right-4 md:right-8 bg-gradient-to-r from-primary-600 to-emerald-500 text-white p-4 rounded-full shadow-lg hover:shadow-xl transition-all z-40 flex items-center gap-2 group\"\r\n      >\r\n        <Sparkles className=\"animate-pulse\" />\r\n        <span className=\"hidden group-hover:block whitespace-nowrap font-medium\">Dica IA</span>\r\n      </button>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"fixed bottom-20 md:bottom-8 right-4 md:right-8 bg-white rounded-lg shadow-xl z-50 w-80 max-h-96 flex flex-col\">\r\n      <div className=\"flex items-center justify-between p-4 border-b\">\r\n        <div className=\"flex items-center gap-2\">\r\n          <MessageSquare className=\"text-primary-600\" />\r\n          <h3 className=\"font-bold text-lg\">Assistente IA</h3>\r\n        </div>\r\n        <button\r\n          onClick={() => setIsOpen(false)}\r\n          className=\"text-gray-500 hover:text-gray-700\"\r\n          aria-label=\"Fechar assistente\"\r\n        >\r\n          <X size={20} />\r\n        </button>\r\n      </div>\r\n\r\n      <div className=\"flex-1 overflow-y-auto p-4\">\r\n        {loading ? (\r\n          <div className=\"flex items-center justify-center h-full\">\r\n            <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600\"></div>\r\n          </div>\r\n        ) : (\r\n          <div className=\"text-gray-700\">\r\n            {advice || \"Clique no bot├úo abaixo para obter um conselho financeiro personalizado.\"}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      <div className=\"p-4 border-t\">\r\n        <button\r\n          onClick={getAdvice}\r\n          disabled={loading}\r\n          className=\"w-full bg-primary-600 text-white py-2 px-4 rounded-md hover:bg-primary-700 disabled:opacity-50 flex items-center justify-center gap-2\"\r\n        >\r\n          {loading ? (\r\n            <>\r\n              <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white\"></div>\r\n              Gerando...\r\n            </>\r\n          ) : (\r\n            <>\r\n              <Sparkles size={16} />\r\n              Gerar Novo Conselho\r\n            </>\r\n          )}\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josia\\Desktop\\projetos\\cred30\\packages\\frontend-v2\\src\\presentation\\components\\features\\marketplace\\OrderTrackingMap.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","message":"Definition for rule '@typescript-eslint/no-unused-vars' was not found.","line":1,"column":1,"endLine":1,"endColumn":2,"severity":2,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useRef, useState } from 'react';\r\nimport L from 'leaflet';\r\nimport { apiService } from '../../../../application/services/api.service';\r\nimport { MapPin, Truck, Navigation2, X } from 'lucide-react';\r\n\r\ninterface OrderTrackingMapProps {\r\n    orderId: string;\r\n    onClose: () => void;\r\n    userRole: 'buyer' | 'courier' | 'seller';\r\n}\r\n\r\nexport const OrderTrackingMap: React.FC<OrderTrackingMapProps> = ({ orderId, onClose, userRole }) => {\r\n    const mapContainerRef = useRef<HTMLDivElement>(null);\r\n    const mapRef = useRef<L.Map | null>(null);\r\n    const courierMarkerRef = useRef<L.Marker | null>(null);\r\n    const [trackingData, setTrackingData] = useState<any>(null);\r\n    const [isLoading, setIsLoading] = useState(true);\r\n\r\n    // ├ìcones customizados\r\n    const courierIcon = L.divIcon({\r\n        html: `<div class=\"bg-indigo-600 p-2 rounded-full shadow-lg border-2 border-white animate-pulse\">\r\n                <svg viewBox=\"0 0 24 24\" width=\"20\" height=\"20\" fill=\"none\" stroke=\"white\" stroke-width=\"2.5\">\r\n                    <path d=\"M5 18H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h3.19M15 6h2a2 2 0 0 1 2 2v2M23 13v1.17a2 2 0 0 1-1.17 1.83l-3.33 1A2 2 0 0 1 17 17h-1M15 11l-5 5-3-3\" />\r\n                    <circle cx=\"7\" cy=\"18\" r=\"2\" />\r\n                    <circle cx=\"17\" cy=\"18\" r=\"2\" />\r\n                </svg>\r\n              </div>`,\r\n        className: '',\r\n        iconSize: [40, 40],\r\n        iconAnchor: [20, 20]\r\n    });\r\n\r\n    const destinationIcon = L.divIcon({\r\n        html: `<div class=\"bg-rose-500 p-2 rounded-full shadow-lg border-2 border-white\">\r\n                <svg viewBox=\"0 0 24 24\" width=\"20\" height=\"20\" fill=\"none\" stroke=\"white\" stroke-width=\"2.5\">\r\n                    <path d=\"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z\" />\r\n                    <circle cx=\"12\" cy=\"10\" r=\"3\" />\r\n                </svg>\r\n              </div>`,\r\n        className: '',\r\n        iconSize: [40, 40],\r\n        iconAnchor: [20, 40]\r\n    });\r\n\r\n    // Buscar dados iniciais e configurar rastreio\r\n    useEffect(() => {\r\n        const fetchTracking = async () => {\r\n            try {\r\n                const res = await apiService.get<any>(`/marketplace/order/${orderId}/tracking`);\r\n                if (res.success) {\r\n                    setTrackingData(res.data);\r\n                    initMap(res.data);\r\n                }\r\n            } catch (error) {\r\n                console.error('Erro ao carregar rastreio:', error);\r\n            } finally {\r\n                setIsLoading(false);\r\n            }\r\n        };\r\n\r\n        fetchTracking();\r\n\r\n        // Polling para o comprador ver o motorista\r\n        let interval: any;\r\n        if (userRole !== 'courier') {\r\n            interval = setInterval(async () => {\r\n                try {\r\n                    const res = await apiService.get<any>(`/marketplace/order/${orderId}/tracking`);\r\n                    if (res.success && res.data.courier_lat) {\r\n                        updateCourierMarker(res.data.courier_lat, res.data.courier_lng);\r\n                    }\r\n                } catch (e) {\r\n                    console.error('Polling error', e);\r\n                }\r\n            }, 10000); // 10 segundos\r\n        }\r\n\r\n        // Se for o entregador, enviar posi├º├úo\r\n        let watchId: number;\r\n        if (userRole === 'courier' && navigator.geolocation) {\r\n            watchId = navigator.geolocation.watchPosition(\r\n                async (pos) => {\r\n                    const { latitude, longitude } = pos.coords;\r\n                    updateCourierMarker(latitude, longitude);\r\n                    try {\r\n                        await apiService.post(`/marketplace/logistic/mission/${orderId}/location`, {\r\n                            lat: latitude,\r\n                            lng: longitude\r\n                        });\r\n                    } catch (e) {\r\n                        console.error('Update location error', e);\r\n                    }\r\n                },\r\n                (err) => console.error('GPS Error', err),\r\n                { enableHighAccuracy: true }\r\n            );\r\n        }\r\n\r\n        return () => {\r\n            if (interval) clearInterval(interval);\r\n            if (watchId) navigator.geolocation.clearWatch(watchId);\r\n            if (mapRef.current) mapRef.current.remove();\r\n        };\r\n    }, [orderId, userRole]);\r\n\r\n    const initMap = async (data: any) => {\r\n        if (!mapContainerRef.current || mapRef.current) return;\r\n\r\n        // Ponto central inicial (ou a posi├º├úo do entregador, ou Belem como fallback)\r\n        const initialLat = data.courier_lat || -1.4558;\r\n        const initialLng = data.courier_lng || -48.4902;\r\n\r\n        mapRef.current = L.map(mapContainerRef.current, {\r\n            zoomControl: false,\r\n            attributionControl: false\r\n        }).setView([initialLat, initialLng], 15);\r\n\r\n        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\r\n            maxZoom: 19,\r\n        }).addTo(mapRef.current);\r\n\r\n        // Tentar geocodificar o destino e origem\r\n        const points: L.LatLngExpression[] = [];\r\n\r\n        if (data.delivery_address) {\r\n            try {\r\n                const geoRes = await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(data.delivery_address)}&limit=1`);\r\n                const geoData = await geoRes.json();\r\n                if (geoData && geoData.length > 0) {\r\n                    const destLat = parseFloat(geoData[0].lat);\r\n                    const destLng = parseFloat(geoData[0].lon);\r\n                    L.marker([destLat, destLng], { icon: destinationIcon })\r\n                        .addTo(mapRef.current)\r\n                        .bindPopup('Entrega');\r\n                    points.push([destLat, destLng]);\r\n                }\r\n            } catch (err) { console.error('Dest geocode error', err); }\r\n        }\r\n\r\n        if (data.pickup_address) {\r\n            try {\r\n                const geoRes = await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(data.pickup_address)}&limit=1`);\r\n                const geoData = await geoRes.json();\r\n                if (geoData && geoData.length > 0) {\r\n                    const pickLat = parseFloat(geoData[0].lat);\r\n                    const pickLng = parseFloat(geoData[0].lon);\r\n                    L.marker([pickLat, pickLng], {\r\n                        icon: L.divIcon({\r\n                            html: `<div class=\"bg-amber-500 p-2 rounded-full shadow-lg border-2 border-white\"><svg viewBox=\"0 0 24 24\" width=\"16\" height=\"16\" fill=\"none\" stroke=\"white\" stroke-width=\"2.5\"><circle cx=\"12\" cy=\"12\" r=\"10\"/></svg></div>`,\r\n                            className: '', iconSize: [32, 32], iconAnchor: [16, 16]\r\n                        })\r\n                    }).addTo(mapRef.current).bindPopup('Retirada');\r\n                    points.push([pickLat, pickLng]);\r\n                }\r\n            } catch (err) { console.error('Pick geocode error', err); }\r\n        }\r\n\r\n        if (data.courier_lat) {\r\n            courierMarkerRef.current = L.marker([data.courier_lat, data.courier_lng], { icon: courierIcon })\r\n                .addTo(mapRef.current);\r\n            points.push([data.courier_lat, data.courier_lng]);\r\n        }\r\n\r\n        if (points.length > 1) {\r\n            mapRef.current.fitBounds(L.latLngBounds(points), { padding: [50, 50] });\r\n        } else if (points.length === 1) {\r\n            mapRef.current.setView(points[0], 15);\r\n        }\r\n    };\r\n\r\n    const updateCourierMarker = (lat: number, lng: number) => {\r\n        if (!mapRef.current) return;\r\n\r\n        if (courierMarkerRef.current) {\r\n            courierMarkerRef.current.setLatLng([lat, lng]);\r\n        } else {\r\n            courierMarkerRef.current = L.marker([lat, lng], { icon: courierIcon })\r\n                .addTo(mapRef.current);\r\n        }\r\n\r\n        // Seguir o motorista se estivermos visualizando\r\n        mapRef.current.panTo([lat, lng], { animate: true });\r\n    };\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 z-[150] bg-black animate-in fade-in duration-300 flex flex-col\">\r\n            {/* Header */}\r\n            <div className=\"p-4 bg-zinc-950/80 backdrop-blur-md border-b border-zinc-800 flex items-center justify-between\">\r\n                <div className=\"flex items-center gap-3\">\r\n                    <div className=\"w-10 h-10 bg-indigo-500/20 rounded-xl flex items-center justify-center border border-indigo-500/20\">\r\n                        <Navigation2 className=\"text-indigo-400 animate-pulse\" size={20} />\r\n                    </div>\r\n                    <div>\r\n                        <h2 className=\"text-white font-black text-sm uppercase tracking-tighter\">Rastreio em Tempo Real</h2>\r\n                        <p className=\"text-[10px] text-zinc-500 font-bold uppercase\">Pedido #{orderId.toString().slice(-6)}</p>\r\n                    </div>\r\n                </div>\r\n                <button\r\n                    onClick={onClose}\r\n                    className=\"p-2 bg-zinc-900 rounded-full text-zinc-400 hover:text-white transition\"\r\n                >\r\n                    <X size={24} />\r\n                </button>\r\n            </div>\r\n\r\n            {/* Map Area */}\r\n            <div className=\"flex-1 relative\">\r\n                <div ref={mapContainerRef} className=\"w-full h-full bg-zinc-900\" />\r\n\r\n                {isLoading && (\r\n                    <div className=\"absolute inset-0 bg-zinc-950/50 backdrop-blur-sm flex items-center justify-center z-[10]\">\r\n                        <div className=\"text-center space-y-4\">\r\n                            <div className=\"w-12 h-12 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin mx-auto\" />\r\n                            <p className=\"text-xs text-zinc-400 font-bold uppercase tracking-widest\">Localizando...</p>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {!isLoading && !trackingData?.courier_lat && (\r\n                    <div className=\"absolute bottom-6 left-6 right-6 z-[10]\">\r\n                        <div className=\"bg-zinc-900/90 backdrop-blur-md border border-zinc-800 p-4 rounded-2xl shadow-2xl\">\r\n                            <div className=\"flex items-center gap-3\">\r\n                                <Truck className=\"text-amber-500\" />\r\n                                <div>\r\n                                    <p className=\"text-xs font-bold text-white\">Aguardando sinal do entregador</p>\r\n                                    <p className=\"text-[10px] text-zinc-500\">O rastreio iniciar├í assim que o deslocamento come├ºar.</p>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            {/* Footer Status */}\r\n            {!isLoading && trackingData && (\r\n                <div className=\"p-6 bg-zinc-950 border-t border-zinc-800 space-y-4\">\r\n                    <div className=\"flex items-center justify-between\">\r\n                        <div className=\"flex items-center gap-4\">\r\n                            <div className=\"w-12 h-12 bg-zinc-900 rounded-2xl flex items-center justify-center border border-zinc-800\">\r\n                                <Truck className=\"text-indigo-400\" size={24} />\r\n                            </div>\r\n                            <div>\r\n                                <p className=\"text-[10px] text-zinc-500 font-black uppercase tracking-widest\">Entregador</p>\r\n                                <p className=\"text-base font-black text-white\">{trackingData.courier_name}</p>\r\n                            </div>\r\n                        </div>\r\n                        <a\r\n                            href={`tel:${trackingData.courier_phone}`}\r\n                            className=\"bg-indigo-600 hover:bg-indigo-500 text-white px-4 py-2 rounded-xl text-[10px] font-black transition flex items-center gap-2\"\r\n                        >\r\n                            LIGAR\r\n                        </a>\r\n                    </div>\r\n\r\n                    <div className=\"bg-zinc-900/50 p-4 rounded-2xl space-y-2 border border-zinc-800\">\r\n                        <div className=\"flex items-center gap-2\">\r\n                            <MapPin size={12} className=\"text-primary-500\" />\r\n                            <span className=\"text-[10px] text-zinc-500 uppercase font-bold\">Destino:</span>\r\n                            <span className=\"text-[11px] text-white font-medium\">{trackingData.delivery_address}</span>\r\n                        </div>\r\n                        <div className=\"flex items-center gap-2\">\r\n                            <div className=\"w-1 h-1 bg-zinc-700 rounded-full ml-1\" />\r\n                            <div className=\"w-1 h-1 bg-zinc-700 rounded-full ml-1\" />\r\n                        </div>\r\n                        <div className=\"flex items-center gap-2\">\r\n                            <MapPin size={12} className=\"text-amber-500\" />\r\n                            <span className=\"text-[10px] text-zinc-500 uppercase font-bold\">Origem:</span>\r\n                            <span className=\"text-[11px] text-white font-medium\">{trackingData.pickup_address}</span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josia\\Desktop\\projetos\\cred30\\packages\\frontend-v2\\src\\presentation\\components\\features\\slot-machine.component.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","message":"Definition for rule '@typescript-eslint/no-unused-vars' was not found.","line":1,"column":1,"endLine":1,"endColumn":2,"severity":2,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport { Gamepad2, Bike, Smartphone, Tv, Car, Trophy, Cookie, RotateCw, Info, Volume2, VolumeX } from 'lucide-react';\r\nimport { apiService } from '../../../application/services/api.service';\r\nimport { soundManager } from '../../../shared/utils/sound.utils';\r\n\r\ninterface SlotMachineProps {\r\n    onBalanceUpdate: () => void;\r\n    currentBalance: number;\r\n}\r\n\r\n// Mapeamento de S├¡mbolos para ├ìcones\r\nconst SymbolIcon = ({ symbol }: { symbol: string }) => {\r\n    switch (symbol) {\r\n        case '­ƒì¼': return <Cookie size={40} className=\"text-pink-400 drop-shadow-[0_0_5px_rgba(244,114,182,0.8)]\" />;\r\n        case 'ÔÜ¢': return <Trophy size={40} className=\"text-yellow-400 drop-shadow-[0_0_5px_rgba(250,204,21,0.8)]\" />;\r\n        case '­ƒÜ▓': return <Bike size={40} className=\"text-cyan-400 drop-shadow-[0_0_5px_rgba(34,211,238,0.8)]\" />;\r\n        case '­ƒô▒': return <Smartphone size={40} className=\"text-purple-400 drop-shadow-[0_0_5px_rgba(192,132,252,0.8)]\" />;\r\n        case '­ƒô║': return <Tv size={40} className=\"text-emerald-400 drop-shadow-[0_0_5px_rgba(52,211,153,0.8)]\" />;\r\n        case '­ƒÜù': return <Car size={40} className=\"text-red-500 drop-shadow-[0_0_5px_rgba(239,68,68,0.8)]\" />;\r\n        default: return <span className=\"text-4xl\">{symbol}</span>;\r\n    }\r\n}\r\n\r\nexport const SlotMachine: React.FC<SlotMachineProps> = ({ onBalanceUpdate, currentBalance }) => {\r\n    const [reels, setReels] = useState(['­ƒì¼', '­ƒÜ▓', '­ƒô║']);\r\n    const [isSpinning, setIsSpinning] = useState(false);\r\n    const [lastBatchResult, setLastBatchResult] = useState<{ totalMoney: number; totalPoints: number; wins: number } | null>(null);\r\n    const [error, setError] = useState<string | null>(null);\r\n    const [isMuted, setIsMuted] = useState(false);\r\n\r\n    const SPIN_COST = 0.05; // Custo do Pacote\r\n\r\n    const handleToggleMute = () => {\r\n        const muted = soundManager.toggleMute();\r\n        setIsMuted(muted);\r\n    };\r\n\r\n    const handleSpin = async () => {\r\n        if (currentBalance < SPIN_COST) {\r\n            setError('Saldo insuficiente para jogar! Recarregue sua conta.');\r\n            soundManager.playError();\r\n            return;\r\n        }\r\n\r\n        setIsSpinning(true);\r\n        setError(null);\r\n        setLastBatchResult(null);\r\n        soundManager.playCoin();\r\n\r\n        // Efeito visual de girar\r\n        const spinInterval = setInterval(() => {\r\n            setReels(prev => prev.map(() => ['­ƒì¼', 'ÔÜ¢', '­ƒÜ▓', '­ƒô▒', '­ƒô║', '­ƒÜù'][Math.floor(Math.random() * 6)]));\r\n            soundManager.playSpin(); // Som de giro a cada tick\r\n        }, 100);\r\n\r\n        try {\r\n            const result = await apiService.spinSlot();\r\n\r\n            clearInterval(spinInterval);\r\n\r\n            if (result.success && result.data) {\r\n                // Mostrar o ├║ltimo resultado do batch nos rolos\r\n                const lastSpin = result.data.batchResults[result.data.batchResults.length - 1];\r\n                setReels(lastSpin.reels);\r\n\r\n                setLastBatchResult({\r\n                    totalMoney: result.data.totalMoneyWon,\r\n                    totalPoints: result.data.totalPointsWon,\r\n                    wins: result.data.winCount\r\n                });\r\n\r\n                // Tocar som de vit├│ria se ganhou dinheiro\r\n                if (result.data.totalMoneyWon > 0) {\r\n                    if (result.data.totalMoneyWon >= 1.00) {\r\n                        soundManager.playJackpot();\r\n                    } else {\r\n                        soundManager.playWin();\r\n                    }\r\n                }\r\n\r\n                onBalanceUpdate(); // Atualiza saldo global\r\n            } else {\r\n                setError(result.message || 'Erro ao processar jogada.');\r\n            }\r\n        } catch (e: any) {\r\n            clearInterval(spinInterval);\r\n            setError(e.message || 'Erro de conex├úo.');\r\n        } finally {\r\n            setIsSpinning(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"max-w-md mx-auto relative pb-20\">\r\n            <div className=\"bg-surface border border-surfaceHighlight rounded-3xl p-8 text-center relative overflow-hidden mb-6 shadow-2xl\">\r\n                <div className=\"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-purple-400 to-pink-600\"></div>\r\n\r\n                {/* Toggle Mute */}\r\n                <button\r\n                    onClick={handleToggleMute}\r\n                    className=\"absolute top-4 right-4 text-zinc-500 hover:text-white transition z-10 bg-black/20 p-2 rounded-full backdrop-blur-sm\"\r\n                    title={isMuted ? \"Ativar Som\" : \"Mudo\"}\r\n                >\r\n                    {isMuted ? <VolumeX size={20} /> : <Volume2 size={20} />}\r\n                </button>\r\n\r\n                <div className=\"flex justify-center mb-6\">\r\n                    <div className=\"bg-purple-900/30 p-4 rounded-full text-purple-400 border border-purple-500/30 shadow-[0_0_20px_rgba(168,85,247,0.3)] animate-pulse\">\r\n                        <Gamepad2 size={40} />\r\n                    </div>\r\n                </div>\r\n\r\n                <h2 className=\"text-2xl font-bold text-white mb-2\">Super Slot 20x</h2>\r\n                <p className=\"text-zinc-400 mb-6 text-sm\">\r\n                    Gire <strong>20 vezes seguidas</strong> por apenas <strong className=\"text-emerald-400\">R$ {SPIN_COST.toFixed(2)}</strong>!\r\n                    <br /><span className=\"text-[10px] opacity-70\">S├¡mbolos: Produtos Reais (Tv, Celular, Bike...)</span>\r\n                </p>\r\n\r\n                {/* Slot Display */}\r\n                <div className=\"bg-gradient-to-b from-zinc-900 to-black border-4 border-yellow-600/50 rounded-xl p-4 mb-8 relative shadow-[inset_0_0_20px_rgba(0,0,0,0.8)]\">\r\n                    <div className=\"flex justify-center gap-2 sm:gap-4\">\r\n                        {reels.map((symbol, i) => (\r\n                            <div key={i} className=\"w-20 h-24 bg-gradient-to-b from-zinc-800 to-zinc-900 border-2 border-zinc-700 rounded-lg flex items-center justify-center shadow-lg transform transition-transform hover:scale-105\">\r\n                                <SymbolIcon symbol={symbol} />\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n\r\n                    {/* Payline */}\r\n                    <div className=\"absolute top-1/2 left-0 w-full h-0.5 bg-red-500/30 -translate-y-1/2 pointer-events-none blur-[1px]\"></div>\r\n                </div>\r\n\r\n                {/* Status Message */}\r\n                <div className=\"min-h-20 mb-4 flex flex-col items-center justify-center\">\r\n                    {isSpinning ? (\r\n                        <div className=\"flex items-center gap-2 text-yellow-400 font-bold text-lg\">\r\n                            <RotateCw className=\"animate-spin\" /> Processando 20 Jogadas...\r\n                        </div>\r\n                    ) : lastBatchResult ? (\r\n                        <div className=\"animate-bounce bg-emerald-900/20 w-full rounded-xl p-2 border border-emerald-500/30\">\r\n                            <p className=\"text-white text-sm mb-1\">{lastBatchResult.wins} vit├│rias em 20 giros!</p>\r\n                            <p className=\"text-emerald-400 font-bold text-2xl\">Ganhou R$ {lastBatchResult.totalMoney.toFixed(2)}</p>\r\n                            <p className=\"text-zinc-500 text-xs\">+{lastBatchResult.totalPoints} pontos</p>\r\n                        </div>\r\n                    ) : error ? (\r\n                        <p className=\"text-red-400 text-sm bg-red-900/20 px-4 py-2 rounded-lg\">{error}</p>\r\n                    ) : (\r\n                        <p className=\"text-zinc-500 text-sm flex items-center gap-1 justify-center\">\r\n                            <Info size={14} /> Combine 3 iguais!\r\n                        </p>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Controls */}\r\n                <button\r\n                    onClick={handleSpin}\r\n                    disabled={isSpinning}\r\n                    className={`w-full py-4 rounded-xl font-bold text-lg transition-all transform active:scale-95 shadow-lg flex items-center justify-center gap-2 ${isSpinning\r\n                        ? 'bg-zinc-700 text-zinc-500 cursor-not-allowed'\r\n                        : 'bg-gradient-to-r from-purple-600 to-pink-600 text-white hover:brightness-110 shadow-purple-500/40 border border-purple-400/30'\r\n                        }`}\r\n                >\r\n                    {isSpinning ? 'Rodando...' : (\r\n                        <>\r\n                            <span>GIRAR 20x</span>\r\n                            <span className=\"bg-black/20 text-sm px-2 py-1 rounded\">R$ {SPIN_COST.toFixed(2)}</span>\r\n                        </>\r\n                    )}\r\n                </button>\r\n\r\n                {/* Paytable Mini */}\r\n                <div className=\"mt-8 border-t border-surfaceHighlight pt-6\">\r\n                    <h3 className=\"text-zinc-400 text-xs uppercase tracking-widest mb-4\">Pr├¬mios (3x)</h3>\r\n                    <div className=\"grid grid-cols-3 sm:grid-cols-3 gap-3 text-xs text-zinc-300\">\r\n                        <div className=\"bg-surfaceHighlight/30 p-2 rounded flex flex-col items-center gap-1\"><Cookie size={16} className=\"text-pink-400\" /> R$ 0,01</div>\r\n                        <div className=\"bg-surfaceHighlight/30 p-2 rounded flex flex-col items-center gap-1\"><Trophy size={16} className=\"text-yellow-400\" /> R$ 0,02</div>\r\n                        <div className=\"bg-surfaceHighlight/30 p-2 rounded flex flex-col items-center gap-1\"><Bike size={16} className=\"text-cyan-400\" /> R$ 0,05</div>\r\n                        <div className=\"bg-surfaceHighlight/30 p-2 rounded flex flex-col items-center gap-1\"><Smartphone size={16} className=\"text-purple-400\" />R$ 0,20</div>\r\n                        <div className=\"bg-surfaceHighlight/30 p-2 rounded flex flex-col items-center gap-1\"><Tv size={16} className=\"text-emerald-400\" /> R$ 1,00</div>\r\n                        <div className=\"bg-gradient-to-r from-red-900/50 to-red-600/50 border border-red-500/50 p-2 rounded flex flex-col items-center gap-1 font-bold text-white\"><Car size={16} /> R$ 10,00</div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josia\\Desktop\\projetos\\cred30\\packages\\frontend-v2\\src\\presentation\\components\\features\\store\\admin-store.component.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","message":"Definition for rule '@typescript-eslint/no-unused-vars' was not found.","line":1,"column":1,"endLine":1,"endColumn":2,"severity":2,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { Plus, Edit2, Trash2, ExternalLink, Image as ImageIcon, Sparkles } from 'lucide-react';\r\nimport { Product } from '../../../../domain/types/common.types';\r\nimport { apiService } from '../../../../application/services/api.service';\r\nimport { ConfirmModal } from '../../ui/ConfirmModal';\r\n\r\nexport const AdminStoreManager: React.FC<{ onSuccess: (title: string, msg: string) => void, onError: (title: string, msg: string) => void }> = ({ onSuccess, onError }) => {\r\n    const [products, setProducts] = useState<Product[]>([]);\r\n    const [showModal, setShowModal] = useState(false);\r\n    const [editingProduct, setEditingProduct] = useState<Partial<Product> | null>(null);\r\n    const [loading, setLoading] = useState(false);\r\n    const [fetchingMeta, setFetchingMeta] = useState(false);\r\n    const [productToDelete, setProductToDelete] = useState<string | null>(null);\r\n\r\n    // Form states\r\n    const [title, setTitle] = useState('');\r\n    const [affiliateUrl, setAffiliateUrl] = useState('');\r\n    const [imageUrl, setImageUrl] = useState('');\r\n    const [description, setDescription] = useState('');\r\n    const [price, setPrice] = useState('');\r\n    const [category, setCategory] = useState('geral');\r\n\r\n    useEffect(() => {\r\n        loadProducts();\r\n    }, []);\r\n\r\n    const loadProducts = async () => {\r\n        try {\r\n            const data = await apiService.getAllProductsAdmin();\r\n            setProducts(data);\r\n        } catch (error) {\r\n            console.error(error);\r\n        }\r\n    };\r\n\r\n    const handleFetchMeta = async () => {\r\n        if (!affiliateUrl) return;\r\n        setFetchingMeta(true);\r\n        try {\r\n            const meta = await apiService.fetchProductMetadata(affiliateUrl);\r\n            if (meta.title) setTitle(meta.title);\r\n            if (meta.description) setDescription(meta.description.substring(0, 500));\r\n            if (meta.imageUrl) setImageUrl(meta.imageUrl);\r\n            if (meta.price) setPrice(String(meta.price));\r\n        } catch (error) {\r\n            onError('Erro na Busca', 'N├úo foi poss├¡vel buscar dados automaticamente. Tente preencher manualmente.');\r\n        } finally {\r\n            setFetchingMeta(false);\r\n        }\r\n    };\r\n\r\n    const handleSave = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        setLoading(true);\r\n        try {\r\n            const productData = {\r\n                title,\r\n                affiliateUrl,\r\n                imageUrl,\r\n                description,\r\n                price: price ? parseFloat(price) : undefined,\r\n                category,\r\n                active: true\r\n            };\r\n\r\n            if (editingProduct?.id) {\r\n                await apiService.updateProduct(editingProduct.id, productData);\r\n            } else {\r\n                await apiService.createProduct(productData);\r\n            }\r\n            setShowModal(false);\r\n            setEditingProduct(null);\r\n            resetForm();\r\n            loadProducts();\r\n            onSuccess('Sucesso', 'Produto salvo com sucesso!');\r\n        } catch (error) {\r\n            onError('Erro', 'Erro ao salvar o produto');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleEdit = (product: Product) => {\r\n        setEditingProduct(product);\r\n        setTitle(product.title);\r\n        setAffiliateUrl(product.affiliateUrl);\r\n        setImageUrl(product.imageUrl || '');\r\n        setDescription(product.description || '');\r\n        setPrice(product.price ? String(product.price) : '');\r\n        setCategory(product.category);\r\n        setShowModal(true);\r\n    };\r\n\r\n    const handleDelete = async (id: string) => {\r\n        setProductToDelete(id);\r\n    };\r\n\r\n    const confirmDelete = async () => {\r\n        if (!productToDelete) return;\r\n        try {\r\n            await apiService.deleteProduct(productToDelete);\r\n            loadProducts();\r\n            onSuccess('Sucesso', 'Produto removido com sucesso!');\r\n        } catch (error) {\r\n            onError('Erro', 'Erro ao deletar o produto');\r\n        } finally {\r\n            setProductToDelete(null);\r\n        }\r\n    };\r\n\r\n    const resetForm = () => {\r\n        setTitle('');\r\n        setAffiliateUrl('');\r\n        setImageUrl('');\r\n        setDescription('');\r\n        setPrice('');\r\n        setCategory('geral');\r\n    }\r\n\r\n    return (\r\n        <div className=\"bg-surface rounded-3xl border border-surfaceHighlight p-6 mb-8\">\r\n            <div className=\"flex justify-between items-center mb-6\">\r\n                <h3 className=\"text-xl font-bold text-white\">Loja de Afiliados</h3>\r\n                <button onClick={() => { setEditingProduct(null); resetForm(); setShowModal(true); }} className=\"bg-primary-600 hover:bg-primary-500 text-white px-4 py-2 rounded-lg flex items-center gap-2 text-sm font-bold shadow-lg shadow-primary-500/20\">\r\n                    <Plus size={16} /> Novo Produto\r\n                </button>\r\n            </div>\r\n\r\n            <div className=\"overflow-x-auto\">\r\n                <table className=\"w-full text-left text-sm text-zinc-400\">\r\n                    <thead className=\"text-xs uppercase bg-black/40 text-zinc-500 font-bold tracking-wider border-b border-zinc-800\">\r\n                        <tr>\r\n                            <th className=\"p-3\">Produto</th>\r\n                            <th className=\"p-3\">Pre├ºo</th>\r\n                            <th className=\"p-3\">Link</th>\r\n                            <th className=\"p-3 text-right\">A├º├Áes</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody className=\"divide-y divide-zinc-800\">\r\n                        {products.length === 0 && (\r\n                            <tr>\r\n                                <td colSpan={4} className=\"p-4 text-center text-zinc-600 italic\">Nenhum produto cadastrado.</td>\r\n                            </tr>\r\n                        )}\r\n                        {products.map(p => (\r\n                            <tr key={p.id} className=\"hover:bg-white/5 transition\">\r\n                                <td className=\"p-3 flex items-center gap-3 text-white font-medium\">\r\n                                    {p.imageUrl ? <img src={p.imageUrl} className=\"w-10 h-10 rounded-lg object-cover bg-zinc-800\" /> : <div className=\"w-10 h-10 rounded-lg bg-zinc-800 flex items-center justify-center\"><ImageIcon size={16} /></div>}\r\n                                    <div>\r\n                                        <div className=\"font-bold\">{p.title}</div>\r\n                                        <div className=\"text-xs text-zinc-500\">{p.category}</div>\r\n                                    </div>\r\n                                </td>\r\n                                <td className=\"p-3 font-mono text-emerald-400\">{p.price ? `R$ ${p.price.toFixed(2)}` : '-'}</td>\r\n                                <td className=\"p-3 text-primary-400 truncate max-w-[150px] underline text-xs\"><a href={p.affiliateUrl} target=\"_blank\">{p.affiliateUrl}</a></td>\r\n                                <td className=\"p-3 text-right space-x-2\">\r\n                                    <button onClick={() => handleEdit(p)} className=\"p-2 hover:bg-white/10 rounded-lg text-zinc-400 hover:text-white transition\"><Edit2 size={16} /></button>\r\n                                    <button onClick={() => handleDelete(p.id)} className=\"p-2 hover:bg-red-500/10 rounded-lg text-red-500 hover:text-red-400 transition\"><Trash2 size={16} /></button>\r\n                                </td>\r\n                            </tr>\r\n                        ))}\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n\r\n            {showModal && (\r\n                <div className=\"fixed inset-0 bg-black/80 flex items-center justify-center z-[60] p-4 backdrop-blur-sm animate-in fade-in\">\r\n                    <div className=\"bg-surface border border-surfaceHighlight rounded-3xl w-full max-w-md p-6 max-h-[90vh] overflow-y-auto shadow-2xl\">\r\n                        <h3 className=\"text-xl font-bold text-white mb-6\">{editingProduct ? 'Editar' : 'Novo'} Produto</h3>\r\n                        <form onSubmit={handleSave} className=\"space-y-4\">\r\n                            <div>\r\n                                <label className=\"block text-xs font-bold uppercase tracking-wider text-zinc-500 mb-1\">T├¡tulo</label>\r\n                                <input className=\"w-full bg-black/50 border border-zinc-700 focus:border-primary-500 rounded-xl p-3 text-white outline-none transition\" value={title} onChange={e => setTitle(e.target.value)} required placeholder=\"Ex: iPhone 15\" />\r\n                            </div>\r\n                            <div>\r\n                                <label className=\"block text-xs font-bold uppercase tracking-wider text-zinc-500 mb-1\">Descri├º├úo</label>\r\n                                <textarea className=\"w-full bg-black/50 border border-zinc-700 focus:border-primary-500 rounded-xl p-3 text-white outline-none transition h-20 resize-none\" value={description} onChange={e => setDescription(e.target.value)} placeholder=\"Breve descri├º├úo do produto...\" />\r\n                            </div>\r\n                            <div>\r\n                                <label className=\"block text-xs font-bold uppercase tracking-wider text-zinc-500 mb-1\">URL da Imagem</label>\r\n                                <input className=\"w-full bg-black/50 border border-zinc-700 focus:border-primary-500 rounded-xl p-3 text-white outline-none transition\" value={imageUrl} onChange={e => setImageUrl(e.target.value)} placeholder=\"https://exemplo.com/imagem.jpg\" />\r\n                            </div>\r\n                            <div>\r\n                                <label className=\"block text-xs font-bold uppercase tracking-wider text-zinc-500 mb-1\">Link de Afiliado <span className=\"text-red-500\">*</span></label>\r\n                                <div className=\"flex gap-2\">\r\n                                    <input className=\"w-full bg-black/50 border border-zinc-700 focus:border-primary-500 rounded-xl p-3 text-white outline-none transition\" value={affiliateUrl} onChange={e => setAffiliateUrl(e.target.value)} required type=\"url\" placeholder=\"https://amazon.com/...\" />\r\n                                    <button type=\"button\" onClick={handleFetchMeta} disabled={!affiliateUrl || fetchingMeta} className=\"px-3 bg-purple-600 hover:bg-purple-500 rounded-xl text-white disabled:opacity-50 disabled:cursor-not-allowed transition flex items-center justify-center min-w-[50px]\" title=\"Preencher dados automaticamente\">\r\n                                        {fetchingMeta ? <div className=\"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full\" /> : <Sparkles size={18} />}\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"grid grid-cols-2 gap-4\">\r\n                                <div>\r\n                                    <label className=\"block text-xs font-bold uppercase tracking-wider text-zinc-500 mb-1\">Pre├ºo (R$)</label>\r\n                                    <input className=\"w-full bg-black/50 border border-zinc-700 focus:border-primary-500 rounded-xl p-3 text-white outline-none transition\" value={price} onChange={e => setPrice(e.target.value)} type=\"number\" step=\"0.01\" placeholder=\"0.00\" />\r\n                                </div>\r\n                                <div>\r\n                                    <label className=\"block text-xs font-bold uppercase tracking-wider text-zinc-500 mb-1\">Categoria</label>\r\n                                    <input className=\"w-full bg-black/50 border border-zinc-700 focus:border-primary-500 rounded-xl p-3 text-white outline-none transition\" value={category} onChange={e => setCategory(e.target.value)} placeholder=\"Geral\" />\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"pt-6 flex gap-3\">\r\n                                <button type=\"button\" onClick={() => setShowModal(false)} className=\"flex-1 bg-zinc-800 hover:bg-zinc-700 text-white py-3 rounded-xl font-bold transition\">Cancelar</button>\r\n                                <button type=\"submit\" disabled={loading} className=\"flex-1 bg-primary-600 hover:bg-primary-500 text-white py-3 rounded-xl font-bold transition shadow-lg shadow-primary-900/20\">{loading ? 'Salvando...' : 'Salvar Produto'}</button>\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            <ConfirmModal\r\n                isOpen={!!productToDelete}\r\n                onClose={() => setProductToDelete(null)}\r\n                onConfirm={confirmDelete}\r\n                title=\"Remover Produto\"\r\n                message=\"Tem certeza que deseja remover este produto da loja?\"\r\n                type=\"danger\"\r\n            />\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josia\\Desktop\\projetos\\cred30\\packages\\frontend-v2\\src\\presentation\\components\\features\\store\\store.component.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","message":"Definition for rule '@typescript-eslint/no-unused-vars' was not found.","line":1,"column":1,"endLine":1,"endColumn":2,"severity":2,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from 'react';\r\nimport { ShoppingBag, ExternalLink, Tag } from 'lucide-react';\r\nimport { Product } from '../../../../domain/types/common.types';\r\nimport { apiService } from '../../../../application/services/api.service';\r\n\r\nexport const StoreView: React.FC = () => {\r\n    const [products, setProducts] = useState<Product[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        loadProducts();\r\n    }, []);\r\n\r\n    const loadProducts = async () => {\r\n        try {\r\n            const data = await apiService.getProducts();\r\n            setProducts(data);\r\n        } catch (error) {\r\n            console.error('Erro ao carregar produtos:', error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    if (loading) return (\r\n        <div className=\"min-h-[50vh] flex items-center justify-center\">\r\n            <div className=\"animate-spin rounded-full h-8 w-8 border-t-2 border-purple-500\"></div>\r\n        </div>\r\n    );\r\n\r\n    return (\r\n        <div className=\"space-y-6 animate-in fade-in slide-in-from-bottom-4 pb-20\">\r\n            <div className=\"flex items-center gap-3 mb-6\">\r\n                <div className=\"p-3 bg-purple-500/10 rounded-xl text-purple-400\">\r\n                    <ShoppingBag size={24} />\r\n                </div>\r\n                <div>\r\n                    <h2 className=\"text-2xl font-bold text-white\">Loja de Parceiros</h2>\r\n                    <p className=\"text-zinc-400 text-sm\">Ofertas exclusivas para membros Cred30</p>\r\n                </div>\r\n            </div>\r\n\r\n            {products.length === 0 ? (\r\n                <div className=\"bg-zinc-900/50 border border-zinc-800 rounded-2xl p-12 text-center\">\r\n                    <div className=\"bg-zinc-800/50 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 text-zinc-500\">\r\n                        <ShoppingBag size={24} />\r\n                    </div>\r\n                    <h3 className=\"text-white font-medium mb-2\">Nenhuma oferta dispon├¡vel</h3>\r\n                    <p className=\"text-zinc-500 text-sm\">Volte mais tarde para conferir novidades!</p>\r\n                </div>\r\n            ) : (\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n                    {products.map(product => (\r\n                        <div key={product.id} className=\"bg-surface border border-surfaceHighlight rounded-2xl overflow-hidden hover:border-purple-500/30 transition group flex flex-col\">\r\n                            <div className=\"aspect-video bg-zinc-900 relative overflow-hidden group\">\r\n                                {product.imageUrl ? (\r\n                                    <img src={product.imageUrl} alt={product.title} className=\"w-full h-full object-cover group-hover:scale-105 transition duration-500\" />\r\n                                ) : (\r\n                                    <div className=\"w-full h-full flex items-center justify-center text-zinc-700 bg-zinc-900/50\">\r\n                                        <ShoppingBag size={32} />\r\n                                    </div>\r\n                                )}\r\n                                {product.category && (\r\n                                    <div className=\"absolute top-2 left-2 bg-black/60 backdrop-blur-md px-2 py-1.5 rounded-lg text-[10px] font-bold uppercase tracking-wider text-white flex items-center gap-1 border border-white/10\">\r\n                                        {product.category}\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n\r\n                            <div className=\"p-5 flex-1 flex flex-col\">\r\n                                <h3 className=\"font-bold text-white text-lg mb-2 leading-tight group-hover:text-purple-400 transition\">{product.title}</h3>\r\n                                <p className=\"text-zinc-400 text-sm line-clamp-3 mb-6 flex-1\">{product.description}</p>\r\n\r\n                                <div className=\"flex items-center justify-between mt-auto pt-4 border-t border-white/5\">\r\n                                    {product.price ? (\r\n                                        <div>\r\n                                            <p className=\"text-[10px] text-zinc-500 uppercase tracking-widest font-bold\">A partir de</p>\r\n                                            <p className=\"text-emerald-400 font-bold text-lg\">R$ {product.price.toFixed(2).replace('.', ',')}</p>\r\n                                        </div>\r\n                                    ) : <div className=\"text-[10px] text-zinc-500 uppercase tracking-widest font-bold flex items-center gap-1\"><Tag size={12} /> Oferta Especial</div>}\r\n\r\n                                    <a\r\n                                        href={product.affiliateUrl}\r\n                                        target=\"_blank\"\r\n                                        rel=\"noopener noreferrer\"\r\n                                        className=\"bg-purple-600 hover:bg-purple-500 text-white px-4 py-2 rounded-lg font-bold text-xs flex items-center gap-2 transition shadow-lg shadow-purple-900/20 hover:shadow-purple-900/40\"\r\n                                    >\r\n                                        ACESSAR <ExternalLink size={12} />\r\n                                    </a>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josia\\Desktop\\projetos\\cred30\\packages\\frontend-v2\\src\\presentation\\components\\layout\\main-layout.component.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","message":"Definition for rule '@typescript-eslint/no-unused-vars' was not found.","line":1,"column":1,"endLine":1,"endColumn":2,"severity":2,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect } from 'react';\r\nimport { LogOut, Home, PieChart, DollarSign, Settings, TrendingUp, ArrowUpFromLine, Gamepad2, ShoppingBag, HelpCircle, MessageCircle, Play } from 'lucide-react';\r\nimport { AdBanner } from '../ui/AdBanner';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { User } from '../../../domain/types/common.types';\r\n\r\ninterface LayoutProps {\r\n  children: React.ReactNode;\r\n  user: User | null;\r\n  currentView: string;\r\n  onChangeView: (view: any) => void;\r\n  onLogout: () => void;\r\n}\r\n\r\nexport const Layout: React.FC<LayoutProps> = ({ children, user, currentView, onChangeView, onLogout }) => {\r\n  const navigate = useNavigate();\r\n\r\n  const handleNavigation = (view: string) => {\r\n    onChangeView(view);\r\n    navigate(`/app/${view}`);\r\n  }\r\n\r\n  if (!user) return <div className=\"min-h-screen bg-background text-white flex flex-col justify-center py-12 sm:px-6 lg:px-8\">{children}</div>;\r\n\r\n  const navItems = [\r\n    { id: 'dashboard', label: 'In├¡cio', icon: Home },\r\n    { id: 'marketplace', label: 'Clube', icon: ShoppingBag },\r\n    { id: 'promo-videos', label: 'Views', icon: Play },\r\n    { id: 'invest', label: 'Ativa├º├úo', icon: TrendingUp },\r\n    { id: 'games', label: 'Divers├úo', icon: Gamepad2 },\r\n    { id: 'portfolio', label: 'Meus Ativos', icon: PieChart },\r\n    { id: 'loans', label: 'Apoio', icon: DollarSign },\r\n    { id: 'withdraw', label: 'Resgatar', icon: ArrowUpFromLine },\r\n    { id: 'faq', label: 'D├║vidas', icon: HelpCircle },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-background text-zinc-100 flex flex-col md:flex-row font-sans\">\r\n      {/* Mobile Header com Saldo */}\r\n      <div className=\"md:hidden bg-surface border-b border-surfaceHighlight p-4 flex justify-between items-center sticky top-0 z-20 shadow-md\">\r\n        <h1 className=\"text-xl font-bold flex items-center gap-3\">\r\n          <img src=\"/pwa-192x192.png\" alt=\"Cred30 Logo\" className=\"w-8 h-8 rounded-lg shadow-[0_0_15px_rgba(6,182,212,0.4)]\" />\r\n          <span className=\"text-white tracking-tighter\">Cred<span className=\"text-primary-400\">30</span></span>\r\n        </h1>\r\n\r\n        {user && (\r\n          <div className=\"flex items-center gap-2\">\r\n            <div className=\"bg-zinc-800 px-3 py-1.5 rounded-full border border-zinc-700 flex items-center gap-2\">\r\n              <span className=\"text-xs text-zinc-400\">Saldo</span>\r\n              <span className=\"text-sm font-bold text-emerald-400\">\r\n                {user.balance.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })}\r\n              </span>\r\n            </div>\r\n            <button onClick={onLogout} className=\"text-zinc-400 p-1\" title=\"Sair\"><LogOut size={20} /></button>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Sidebar Desktop */}\r\n      <aside className=\"hidden md:flex flex-col w-72 bg-surface border-r border-surfaceHighlight h-screen sticky top-0\">\r\n        <div className=\"p-8\">\r\n          <h1 className=\"text-3xl font-bold text-white flex items-center gap-3 tracking-tighter\">\r\n            <img src=\"/pwa-192x192.png\" alt=\"Cred30 Logo\" className=\"w-10 h-10 rounded-xl shadow-[0_0_20px_rgba(6,182,212,0.4)]\" />\r\n            Cred<span className=\"text-primary-400\">30</span>\r\n          </h1>\r\n        </div>\r\n        <nav className=\"flex-1 px-4 space-y-2 overflow-y-auto custom-scrollbar\">\r\n          {navItems.map((item) => (\r\n            <button\r\n              key={item.id}\r\n              onClick={() => handleNavigation(item.id)}\r\n              className={`w-full flex items-center gap-4 px-4 py-4 text-sm font-medium rounded-xl transition-all duration-200 ${currentView === item.id\r\n                ? 'bg-primary-400/10 text-primary-400 border border-primary-400/20'\r\n                : 'text-zinc-400 hover:bg-surfaceHighlight hover:text-white'\r\n                }`}\r\n            >\r\n              <item.icon size={22} className={currentView === item.id ? 'stroke-[2.5px]' : ''} />\r\n              {item.label}\r\n            </button>\r\n          ))}\r\n\r\n\r\n          {/* AdBanner removido para limpeza de UI */}\r\n        </nav>\r\n        <div className=\"p-4 border-t border-surfaceHighlight\">\r\n          <button\r\n            onClick={() => handleNavigation('settings')}\r\n            className={`w-full flex items-center gap-4 px-4 py-3 text-sm font-medium rounded-xl transition-colors mb-4 ${currentView === 'settings' ? 'bg-zinc-800 text-white' : 'text-zinc-500 hover:text-zinc-300'\r\n              }`}\r\n          >\r\n            <Settings size={20} />\r\n            Configura├º├Áes\r\n          </button>\r\n          <div className=\"flex items-center gap-3 px-4 py-3 bg-surfaceHighlight/50 rounded-xl border border-surfaceHighlight\">\r\n            <div className=\"w-10 h-10 rounded-full bg-gradient-to-br from-zinc-700 to-zinc-900 flex items-center justify-center font-bold text-primary-400 border border-zinc-700\">\r\n              {user.name.charAt(0).toUpperCase()}\r\n            </div>\r\n            <div className=\"flex-1 min-w-0\">\r\n              <p className=\"text-sm font-bold text-white truncate\">{user.name}</p>\r\n              <p className=\"text-xs text-zinc-500 truncate\">{user.email}</p>\r\n            </div>\r\n            <button onClick={onLogout} className=\"text-zinc-500 hover:text-red-400 transition\" title=\"Sair\" aria-label=\"Sair\">\r\n              <LogOut size={18} />\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </aside>\r\n\r\n      {/* Main Content */}\r\n      <main className=\"flex-1 p-4 md:p-8 overflow-y-auto bg-background\">\r\n        <div className=\"max-w-6xl mx-auto space-y-8 pb-32\">\r\n          {children}\r\n\r\n          <footer className=\"mt-16 pt-8 border-t border-surfaceHighlight text-center space-y-2\">\r\n            <p className=\"text-xs text-zinc-400\">Cred30 ┬® 2024 ÔÇó Sistema de Coopera├º├úo Associativa Mutu├íria</p>\r\n            <div className=\"flex justify-center gap-4 text-[10px] text-zinc-400\">\r\n              <button onClick={() => navigate('/terms')} className=\"hover:text-primary-400\">Termos de Uso</button>\r\n              <span>ÔÇó</span>\r\n              <button onClick={() => navigate('/terms')} className=\"hover:text-primary-400\">Pol├¡tica de Privacidade</button>\r\n            </div>\r\n            <p className=\"text-[9px] text-zinc-500 max-w-md mx-auto italic\">O Cred30 n├úo ├® uma institui├º├úo financeira regulada pelo BACEN ou uma corretora de valores mobili├írios (CVM). As opera├º├Áes de suporte m├║tuo e participa├º├Áes s├úo baseadas no C├│digo Civil Brasileiro (Sociedade em Conta de Participa├º├úo e M├║tua Privada).</p>\r\n          </footer>\r\n        </div>\r\n      </main>\r\n\r\n      {/* Mobile Bottom Nav - Floating Dock (Elevado para n├úo cobrar o Ad) */}\r\n      <div className=\"md:hidden fixed bottom-[110px] left-1/2 -translate-x-1/2 w-[92%] max-w-sm bg-black/60 backdrop-blur-2xl border border-white/10 rounded-[2.5rem] flex justify-around items-center px-4 py-4 shadow-[0_25px_50px_-12px_rgba(0,0,0,0.5)] z-30 ring-1 ring-white/5\">\r\n        {navItems.filter(i => ['dashboard', 'marketplace', 'promo-videos', 'invest', 'loans'].includes(i.id)).map((item) => (\r\n          <button\r\n            key={item.id}\r\n            onClick={() => handleNavigation(item.id)}\r\n            className={`flex flex-col items-center gap-1 transition-all duration-300 relative ${currentView === item.id\r\n              ? 'text-primary-400 -translate-y-1 scale-110'\r\n              : 'text-zinc-500 hover:text-zinc-300'\r\n              }`}\r\n          >\r\n            <div className={`p-2 rounded-2xl transition-all duration-500 ${currentView === item.id\r\n              ? 'bg-primary-500/10 shadow-[0_0_20px_rgba(34,211,238,0.2)] ring-1 ring-primary-500/20'\r\n              : 'hover:bg-white/5'}`}>\r\n              <item.icon size={20} strokeWidth={currentView === item.id ? 2.5 : 2} />\r\n            </div>\r\n            {currentView === item.id && (\r\n              <span className=\"absolute -bottom-2 w-1.5 h-1.5 bg-primary-400 rounded-full animate-in zoom-in duration-300 shadow-[0_0_10px_rgba(34,211,238,1)]\"></span>\r\n            )}\r\n          </button>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Removido Sticky Ad Footer para melhorar experi├¬ncia mobile */}\r\n    </div>\r\n  );\r\n};","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josia\\Desktop\\projetos\\cred30\\packages\\frontend-v2\\src\\presentation\\components\\ui\\AdBanner.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","message":"Definition for rule '@typescript-eslint/no-unused-vars' was not found.","line":1,"column":1,"endLine":1,"endColumn":2,"severity":2,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { ExternalLink, Info, Star, X } from 'lucide-react';\r\n\r\ninterface AdBannerProps {\r\n    type: 'NATIVE' | 'BANNER' | 'TIP';\r\n    title?: string;\r\n    description?: string;\r\n    actionText?: string;\r\n    hide?: boolean; // Esconde an├║ncios para usu├írios PRO\r\n}\r\n\r\nexport const AdBanner = ({ type, title, description, actionText, hide }: AdBannerProps) => {\r\n    const [isVisible, setIsVisible] = React.useState(true);\r\n    const SMART_LINK = 'https://www.effectivegatecpm.com/ec4mxdzvs?key=a9eefff1a8aa7769523373a66ff484aa';\r\n\r\n    const handleClick = () => {\r\n        window.open(SMART_LINK, '_blank');\r\n    };\r\n\r\n    // N├úo renderiza se o usu├írio ├® PRO, se foi fechado ou se h├í flag global de desativa├º├úo\r\n    if (!isVisible || hide || (window as any).DISABLE_ALL_ADS) return null;\r\n\r\n    if (type === 'NATIVE') {\r\n        return (\r\n            <div\r\n                onClick={handleClick}\r\n                className=\"bg-gradient-to-br from-primary-900/20 to-surface border border-primary-500/20 rounded-2xl p-4 flex items-center justify-between group cursor-pointer hover:border-primary-500/40 transition-all\"\r\n            >\r\n                <div className=\"flex items-center gap-4\">\r\n                    <div className=\"w-12 h-12 bg-primary-500/10 rounded-xl flex items-center justify-center text-primary-400 shrink-0\">\r\n                        <Star size={24} className=\"fill-primary-500/20\" />\r\n                    </div>\r\n                    <div>\r\n                        <div className=\"flex items-center gap-2 mb-0.5\">\r\n                            <h4 className=\"text-sm font-bold text-white group-hover:text-primary-400 transition-colors\">\r\n                                {title || 'Oferta de Parceiro'}\r\n                            </h4>\r\n                            <span className=\"text-[8px] bg-zinc-800 text-zinc-500 px-1 rounded border border-zinc-700\">EXTERNO</span>\r\n                        </div>\r\n                        <p className=\"text-xs text-zinc-500 max-w-[200px]\">\r\n                            {description || 'Descubra como aumentar seus resultados hoje.'}\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n                <div className=\"flex items-center gap-2\">\r\n                    <ExternalLink size={18} className=\"text-zinc-600 group-hover:text-primary-400 transition-colors\" />\r\n                    <button\r\n                        onClick={(e) => { e.stopPropagation(); setIsVisible(false); }}\r\n                        className=\"p-2 text-zinc-700 hover:text-white transition-colors\"\r\n                    >\r\n                        <X size={14} />\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (type === 'BANNER') {\r\n        return (\r\n            <div\r\n                onClick={handleClick}\r\n                className=\"w-full bg-zinc-900 rounded-xl overflow-hidden border border-zinc-800 cursor-pointer hover:border-zinc-700 transition-all group\"\r\n            >\r\n                <div className=\"bg-primary-500/10 p-2 flex items-center justify-between border-b border-zinc-800\">\r\n                    <div className=\"flex items-center gap-1.5\">\r\n                        <span className=\"text-[10px] font-black text-primary-400 tracking-widest uppercase\">Parceiro</span>\r\n                        <div className=\"w-1 h-1 bg-zinc-700 rounded-full\"></div>\r\n                        <span className=\"text-[9px] text-zinc-500 italic\">An├║ncio Externo</span>\r\n                    </div>\r\n                    <button\r\n                        onClick={(e) => { e.stopPropagation(); setIsVisible(false); }}\r\n                        className=\"text-zinc-600 hover:text-white p-1\"\r\n                        title=\"Ocultar\"\r\n                    >\r\n                        <X size={12} />\r\n                    </button>\r\n                </div>\r\n                <div className=\"p-4\">\r\n                    <h4 className=\"text-sm font-bold text-white mb-1\">{title || 'Oportunidades Parceiras'}</h4>\r\n                    <p className=\"text-xs text-zinc-500 mb-3\">{description || 'Explore benef├¡cios de nossos parceiros.'}</p>\r\n                    <button className=\"w-full py-2 bg-zinc-800 group-hover:bg-primary-500 group-hover:text-black rounded-lg text-xs font-bold transition-all\">\r\n                        {actionText || 'VER MAIS'}\r\n                    </button>\r\n                    <p className=\"text-[7px] text-zinc-700 mt-2 text-center uppercase tracking-tighter leading-none\">\r\n                        A Cred30 n├úo garante e n├úo se responsabiliza pelo conte├║do, ofertas ou seguran├ºa de links externos.\r\n                    </p>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    // Default: TIP\r\n    return (\r\n        <div\r\n            onClick={handleClick}\r\n            className=\"flex items-center gap-3 p-3 bg-zinc-900/50 border border-zinc-800 rounded-xl cursor-pointer hover:bg-zinc-800 transition-colors group relative\"\r\n        >\r\n            <div className=\"w-8 h-8 bg-zinc-800 rounded-full flex items-center justify-center text-zinc-500 group-hover:text-primary-400\">\r\n                <Info size={16} />\r\n            </div>\r\n            <div className=\"flex-1\">\r\n                <p className=\"text-[10px] text-zinc-500 leading-tight\">\r\n                    {description || 'Dica: Confira benef├¡cios selecionados de parceiros.'}\r\n                    <span className=\"ml-1 opacity-50 italic\">(Parceiro Externo)</span>\r\n                </p>\r\n            </div>\r\n            <button\r\n                onClick={(e) => { e.stopPropagation(); setIsVisible(false); }}\r\n                className=\"opacity-0 group-hover:opacity-100 p-1 text-zinc-600 hover:text-white transition-all\"\r\n            >\r\n                <X size={12} />\r\n            </button>\r\n            <ExternalLink size={12} className=\"text-zinc-700\" />\r\n        </div>\r\n    );\r\n};\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josia\\Desktop\\projetos\\cred30\\packages\\frontend-v2\\src\\presentation\\components\\ui\\BugReportModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","message":"Definition for rule '@typescript-eslint/no-unused-vars' was not found.","line":1,"column":1,"endLine":1,"endColumn":2,"severity":2,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport { Bug, Send, X as XIcon } from 'lucide-react';\r\nimport { apiService } from '../../../application/services/api.service';\r\n\r\ninterface BugReportModalProps {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n    onSuccess: (title: string, message: string) => void;\r\n    onError: (title: string, message: string) => void;\r\n}\r\n\r\nexport const BugReportModal: React.FC<BugReportModalProps> = ({ isOpen, onClose, onSuccess, onError }) => {\r\n    const [title, setTitle] = useState('');\r\n    const [description, setDescription] = useState('');\r\n    const [category, setCategory] = useState<'general' | 'payment' | 'ui' | 'performance' | 'other'>('general');\r\n    const [severity, setSeverity] = useState<'low' | 'medium' | 'high' | 'critical'>('low');\r\n    const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        if (title.length < 5 || description.length < 20) {\r\n            onError('Campos Inv├ílidos', 'T├¡tulo m├¡n. 5 caracteres. Descri├º├úo m├¡n. 20 caracteres.');\r\n            return;\r\n        }\r\n\r\n        setIsSubmitting(true);\r\n        try {\r\n            const deviceInfo = JSON.stringify({\r\n                userAgent: navigator.userAgent,\r\n                screenWidth: window.innerWidth,\r\n                screenHeight: window.innerHeight,\r\n                url: window.location.href\r\n            });\r\n\r\n            const res = await apiService.createBugReport({\r\n                title,\r\n                description,\r\n                category,\r\n                severity,\r\n                deviceInfo\r\n            });\r\n\r\n            if (res.success) {\r\n                onSuccess('Bug Reportado!', 'Obrigado pelo feedback. Nossa equipe ir├í analisar.');\r\n                setTitle('');\r\n                setDescription('');\r\n                setCategory('general');\r\n                setSeverity('low');\r\n                onClose();\r\n            } else {\r\n                onError('Erro', res.message);\r\n            }\r\n        } catch (error: any) {\r\n            onError('Erro ao Enviar', error.message);\r\n        } finally {\r\n            setIsSubmitting(false);\r\n        }\r\n    };\r\n\r\n    if (!isOpen) return null;\r\n\r\n    const categoryOptions = [\r\n        { value: 'general', label: 'Geral' },\r\n        { value: 'payment', label: 'Pagamentos' },\r\n        { value: 'ui', label: 'Interface/Visual' },\r\n        { value: 'performance', label: 'Lentid├úo' },\r\n        { value: 'other', label: 'Outro' },\r\n    ];\r\n\r\n    const severityOptions = [\r\n        { value: 'low', label: 'Baixa', color: 'bg-zinc-500' },\r\n        { value: 'medium', label: 'M├®dia', color: 'bg-yellow-500' },\r\n        { value: 'high', label: 'Alta', color: 'bg-orange-500' },\r\n        { value: 'critical', label: 'Cr├¡tica', color: 'bg-red-500' },\r\n    ];\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 bg-black/90 backdrop-blur-md z-[200] flex items-center justify-center p-4 animate-in fade-in duration-300\">\r\n            <div className=\"bg-zinc-950 border border-zinc-800 w-full max-w-lg rounded-3xl shadow-2xl relative animate-in zoom-in-95 duration-300\">\r\n                {/* Header */}\r\n                <div className=\"p-6 border-b border-zinc-800 flex justify-between items-center\">\r\n                    <div className=\"flex items-center gap-3\">\r\n                        <div className=\"w-10 h-10 bg-red-500/10 rounded-xl flex items-center justify-center text-red-400\">\r\n                            <Bug size={20} />\r\n                        </div>\r\n                        <div>\r\n                            <h2 className=\"text-lg font-bold text-white\">Reportar Problema</h2>\r\n                            <p className=\"text-zinc-500 text-xs\">Ajude-nos a melhorar o sistema</p>\r\n                        </div>\r\n                    </div>\r\n                    <button onClick={onClose} className=\"text-zinc-500 hover:text-white p-2 rounded-full hover:bg-zinc-800 transition\">\r\n                        <XIcon size={20} />\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Form */}\r\n                <form onSubmit={handleSubmit} className=\"p-6 space-y-5\">\r\n                    <div>\r\n                        <label className=\"text-xs text-zinc-400 font-bold uppercase tracking-wider mb-2 block\">T├¡tulo do Problema</label>\r\n                        <input\r\n                            type=\"text\"\r\n                            value={title}\r\n                            onChange={(e) => setTitle(e.target.value)}\r\n                            placeholder=\"Ex: Bot├úo de saque n├úo funciona\"\r\n                            className=\"w-full bg-zinc-900 border border-zinc-800 rounded-xl px-4 py-3 text-white placeholder-zinc-600 focus:border-primary-500 outline-none transition\"\r\n                        />\r\n                    </div>\r\n\r\n                    <div>\r\n                        <label className=\"text-xs text-zinc-400 font-bold uppercase tracking-wider mb-2 block\">Descri├º├úo Detalhada</label>\r\n                        <textarea\r\n                            value={description}\r\n                            onChange={(e) => setDescription(e.target.value)}\r\n                            placeholder=\"Descreva o problema com o m├íximo de detalhes poss├¡vel. O que voc├¬ estava fazendo? O que aconteceu?\"\r\n                            rows={4}\r\n                            className=\"w-full bg-zinc-900 border border-zinc-800 rounded-xl px-4 py-3 text-white placeholder-zinc-600 focus:border-primary-500 outline-none transition resize-none\"\r\n                        />\r\n                    </div>\r\n\r\n                    <div className=\"grid grid-cols-2 gap-4\">\r\n                        <div>\r\n                            <label className=\"text-xs text-zinc-400 font-bold uppercase tracking-wider mb-2 block\">Categoria</label>\r\n                            <select\r\n                                value={category}\r\n                                onChange={(e) => setCategory(e.target.value as any)}\r\n                                className=\"w-full bg-zinc-900 border border-zinc-800 rounded-xl px-4 py-3 text-white focus:border-primary-500 outline-none transition\"\r\n                            >\r\n                                {categoryOptions.map(opt => (\r\n                                    <option key={opt.value} value={opt.value}>{opt.label}</option>\r\n                                ))}\r\n                            </select>\r\n                        </div>\r\n\r\n                        <div>\r\n                            <label className=\"text-xs text-zinc-400 font-bold uppercase tracking-wider mb-2 block\">Severidade</label>\r\n                            <div className=\"flex gap-1\">\r\n                                {severityOptions.map(opt => (\r\n                                    <button\r\n                                        key={opt.value}\r\n                                        type=\"button\"\r\n                                        onClick={() => setSeverity(opt.value as any)}\r\n                                        className={`flex-1 py-2 rounded-lg text-xs font-bold transition-all ${severity === opt.value\r\n                                            ? `${opt.color} text-black`\r\n                                            : 'bg-zinc-800 text-zinc-500 hover:text-zinc-300'\r\n                                            }`}\r\n                                    >\r\n                                        {opt.label}\r\n                                    </button>\r\n                                ))}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <button\r\n                        type=\"submit\"\r\n                        disabled={isSubmitting || title.length < 5 || description.length < 20}\r\n                        className=\"w-full bg-primary-500 hover:bg-primary-400 disabled:bg-zinc-800 disabled:text-zinc-500 disabled:cursor-not-allowed text-black font-bold py-4 rounded-xl transition-all flex items-center justify-center gap-2 shadow-lg shadow-primary-500/20\"\r\n                    >\r\n                        {isSubmitting ? (\r\n                            <div className=\"w-5 h-5 border-2 border-black/30 border-t-black rounded-full animate-spin\" />\r\n                        ) : (\r\n                            <>\r\n                                <Send size={18} />\r\n                                Enviar Relat├│rio\r\n                            </>\r\n                        )}\r\n                    </button>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josia\\Desktop\\projetos\\cred30\\packages\\frontend-v2\\src\\presentation\\components\\ui\\ConfirmModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","message":"Definition for rule '@typescript-eslint/no-unused-vars' was not found.","line":1,"column":1,"endLine":1,"endColumn":2,"severity":2,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { AlertTriangle, X as XIcon } from 'lucide-react';\r\n\r\ninterface ConfirmModalProps {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n    onConfirm: () => void;\r\n    title: string;\r\n    message: string;\r\n    confirmText?: string;\r\n    cancelText?: string;\r\n    type?: 'danger' | 'warning' | 'info';\r\n    children?: React.ReactNode;\r\n}\r\n\r\nexport const ConfirmModal: React.FC<ConfirmModalProps> = ({\r\n    isOpen,\r\n    onClose,\r\n    onConfirm,\r\n    title,\r\n    message,\r\n    confirmText = 'Confirmar',\r\n    cancelText = 'Cancelar',\r\n    type = 'info',\r\n    children\r\n}) => {\r\n    if (!isOpen) return null;\r\n\r\n    const accentColor = type === 'danger' ? 'bg-red-500 hover:bg-red-400 text-white' :\r\n        type === 'warning' ? 'bg-yellow-500 hover:bg-yellow-400 text-black' :\r\n            'bg-primary-500 hover:bg-primary-400 text-black';\r\n\r\n    const iconColor = type === 'danger' ? 'text-red-400' :\r\n        type === 'warning' ? 'text-yellow-400' :\r\n            'text-primary-400';\r\n\r\n    return (\r\n        <div\r\n            className=\"fixed inset-0 bg-black/80 backdrop-blur-md flex items-end sm:items-center justify-center z-[500] p-0 sm:p-4 animate-in fade-in duration-300\"\r\n            onClick={(e) => { if (e.target === e.currentTarget) onClose(); }}\r\n        >\r\n            <div className=\"bg-[#0A0A0A] border-t sm:border border-white/5 sm:border-surfaceHighlight rounded-t-[2.5rem] sm:rounded-3xl p-8 w-full sm:max-w-sm relative shadow-2xl shadow-black animate-in slide-in-from-bottom-full sm:slide-in-from-bottom-0 sm:zoom-in-95 duration-500 sm:duration-300\">\r\n                {/* Mobile Handle */}\r\n                <div className=\"w-12 h-1.5 bg-zinc-800 rounded-full mx-auto mb-6 sm:hidden opacity-50\" />\r\n\r\n                <button\r\n                    title=\"Fechar\"\r\n                    onClick={onClose}\r\n                    className=\"absolute top-4 right-4 text-zinc-500 hover:text-white transition-colors bg-zinc-900/50 hover:bg-zinc-800 p-2 rounded-full hidden sm:block\"\r\n                >\r\n                    <XIcon size={18} />\r\n                </button>\r\n\r\n                <div className={`w-16 h-16 rounded-2xl flex items-center justify-center mb-6 shadow-lg shadow-black/50 ${type === 'danger' ? 'bg-red-500/10 text-red-500' : type === 'warning' ? 'bg-yellow-500/10 text-yellow-500' : 'bg-primary-500/10 text-primary-500'} ring-1 ring-inset ${type === 'danger' ? 'ring-red-500/20' : type === 'warning' ? 'ring-yellow-500/20' : 'ring-primary-500/20'} mx-auto sm:mx-0`}>\r\n                    <AlertTriangle size={32} strokeWidth={2.5} />\r\n                </div>\r\n\r\n                <div className=\"text-center sm:text-left\">\r\n                    <h3 className=\"text-2xl font-black text-white mb-2 tracking-tight leading-tight\">{title}</h3>\r\n                    <p className=\"text-zinc-400 text-sm font-medium leading-relaxed mb-8\">{message}</p>\r\n                </div>\r\n\r\n                {children}\r\n\r\n                <div className=\"flex flex-col gap-3\">\r\n                    <button\r\n                        onClick={() => { onConfirm(); onClose(); }}\r\n                        className={`w-full font-black text-sm uppercase tracking-widest py-5 rounded-2xl transition-all shadow-xl active:scale-[0.98] ${accentColor}`}\r\n                    >\r\n                        {confirmText}\r\n                    </button>\r\n                    <button\r\n                        onClick={onClose}\r\n                        className=\"w-full py-4 text-zinc-500 hover:text-white text-xs font-black uppercase tracking-[0.2em] transition-colors\"\r\n                    >\r\n                        {cancelText}\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josia\\Desktop\\projetos\\cred30\\packages\\frontend-v2\\src\\presentation\\components\\ui\\LegalFooter.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","message":"Definition for rule '@typescript-eslint/no-unused-vars' was not found.","line":1,"column":1,"endLine":1,"endColumn":2,"severity":2,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { ShieldCheck, Scale, AlertTriangle } from 'lucide-react';\r\nimport { DISCLAIMERS } from '../../../shared/constants/legal.constants';\r\n\r\ninterface LegalFooterProps {\r\n    variant?: 'minimal' | 'full';\r\n    showDisclaimer?: boolean;\r\n}\r\n\r\n/**\r\n * Rodap├® Legal obrigat├│rio em todas as p├íginas do sistema.\r\n * Garante transpar├¬ncia sobre a natureza jur├¡dica da plataforma.\r\n */\r\nexport const LegalFooter: React.FC<LegalFooterProps> = ({\r\n    variant = 'minimal',\r\n    showDisclaimer = false\r\n}) => {\r\n    if (variant === 'minimal') {\r\n        return (\r\n            <footer className=\"w-full py-6 px-4 border-t border-zinc-900 mt-auto\">\r\n                <div className=\"max-w-4xl mx-auto text-center space-y-2\">\r\n                    <div className=\"flex items-center justify-center gap-2 text-zinc-600 text-[10px]\">\r\n                        <ShieldCheck size={12} className=\"text-zinc-700\" />\r\n                        <span>SCP - Art. 991 CC</span>\r\n                        <span className=\"text-zinc-800\">ÔÇó</span>\r\n                        <span>N├âO somos banco</span>\r\n                        <span className=\"text-zinc-800\">ÔÇó</span>\r\n                        <span>N├âO somos fintech regulada</span>\r\n                    </div>\r\n                    <p className=\"text-zinc-700 text-[9px]\">\r\n                        ┬® {new Date().getFullYear()} Cred30 - Clube de Benef├¡cios Privado e Apoio M├║tuo\r\n                    </p>\r\n                </div>\r\n            </footer>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <footer className=\"w-full py-8 px-4 bg-zinc-950 border-t border-zinc-900 mt-auto\">\r\n            <div className=\"max-w-4xl mx-auto space-y-6\">\r\n                {/* Disclaimer Principal */}\r\n                {showDisclaimer && (\r\n                    <div className=\"bg-amber-500/5 border border-amber-500/20 rounded-xl p-4 flex items-start gap-3\">\r\n                        <AlertTriangle size={16} className=\"text-amber-500 shrink-0 mt-0.5\" />\r\n                        <p className=\"text-zinc-400 text-[10px] leading-relaxed\">\r\n                            {DISCLAIMERS.NOT_A_BANK}\r\n                        </p>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Badges de Conformidade */}\r\n                <div className=\"flex flex-wrap items-center justify-center gap-3\">\r\n                    <div className=\"bg-zinc-900 border border-zinc-800 px-3 py-1.5 rounded-lg flex items-center gap-2\">\r\n                        <Scale size={12} className=\"text-emerald-500\" />\r\n                        <span className=\"text-[9px] text-zinc-400 font-medium\">SCP Art. 991 CC</span>\r\n                    </div>\r\n                    <div className=\"bg-zinc-900 border border-zinc-800 px-3 py-1.5 rounded-lg flex items-center gap-2\">\r\n                        <ShieldCheck size={12} className=\"text-purple-500\" />\r\n                        <span className=\"text-[9px] text-zinc-400 font-medium\">LGPD 13.709/18</span>\r\n                    </div>\r\n                    <div className=\"bg-zinc-900 border border-zinc-800 px-3 py-1.5 rounded-lg\">\r\n                        <span className=\"text-[9px] text-zinc-500\">M├║tuo Civil Art. 586 CC</span>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Texto Legal */}\r\n                <div className=\"text-center space-y-2\">\r\n                    <p className=\"text-zinc-500 text-[10px] max-w-2xl mx-auto leading-relaxed\">\r\n                        A Cred30 ├® um clube privado de benef├¡cios operando sob Sociedade em Conta de Participa├º├úo.\r\n                        N├âO realiza opera├º├Áes privativas de institui├º├Áes financeiras.\r\n                        Os apoios m├║tuos s├úo contratos civis entre membros, sem garantia de fundo garantidor.\r\n                    </p>\r\n                    <p className=\"text-zinc-600 text-[9px]\">\r\n                        ┬® {new Date().getFullYear()} Cred30 - Todos os direitos reservados\r\n                    </p>\r\n                    <div className=\"flex justify-center gap-4 text-[9px] text-zinc-600\">\r\n                        <a href=\"/terms\" className=\"hover:text-zinc-400 transition-colors\">Termos</a>\r\n                        <a href=\"/privacy\" className=\"hover:text-zinc-400 transition-colors\">Privacidade</a>\r\n                        <a href=\"/security\" className=\"hover:text-zinc-400 transition-colors\">Seguran├ºa</a>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </footer>\r\n    );\r\n};\r\n\r\nexport default LegalFooter;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josia\\Desktop\\projetos\\cred30\\packages\\frontend-v2\\src\\presentation\\components\\ui\\LoadingButton.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","message":"Definition for rule '@typescript-eslint/no-unused-vars' was not found.","line":1,"column":1,"endLine":1,"endColumn":2,"severity":2,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { Loader2 } from 'lucide-react';\r\n\r\ninterface LoadingButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {\r\n    isLoading?: boolean;\r\n    loadingText?: string;\r\n    children: React.ReactNode;\r\n    variant?: 'primary' | 'secondary' | 'outline' | 'danger' | 'ghost';\r\n}\r\n\r\nexport const LoadingButton: React.FC<LoadingButtonProps> = ({\r\n    isLoading,\r\n    loadingText,\r\n    children,\r\n    variant = 'primary',\r\n    className = \"\",\r\n    disabled,\r\n    ...props\r\n}) => {\r\n    const variants = {\r\n        primary: \"bg-primary-500 hover:bg-primary-400 text-black shadow-lg shadow-primary-500/20\",\r\n        secondary: \"bg-zinc-800 hover:bg-zinc-700 text-white\",\r\n        outline: \"border border-white/10 hover:bg-white/5 text-white\",\r\n        danger: \"bg-red-500/10 hover:bg-red-500/20 text-red-500 border border-red-500/20\",\r\n        ghost: \"hover:bg-white/5 text-zinc-400 hover:text-white\"\r\n    };\r\n\r\n    const baseStyles = \"relative flex items-center justify-center gap-2 font-black uppercase tracking-widest transition-all active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed disabled:active:scale-100\";\r\n\r\n    return (\r\n        <button\r\n            className={`${baseStyles} ${variants[variant]} ${className}`}\r\n            disabled={isLoading || disabled}\r\n            {...props}\r\n        >\r\n            {isLoading ? (\r\n                <>\r\n                    <Loader2 size={18} className=\"animate-spin\" />\r\n                    <span>{loadingText || \"Processando...\"}</span>\r\n                </>\r\n            ) : (\r\n                children\r\n            )}\r\n        </button>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josia\\Desktop\\projetos\\cred30\\packages\\frontend-v2\\src\\presentation\\components\\ui\\LoadingScreen.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","message":"Definition for rule '@typescript-eslint/no-unused-vars' was not found.","line":1,"column":1,"endLine":1,"endColumn":2,"severity":2,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { Loader2, Sparkles } from 'lucide-react';\r\n\r\ninterface LoadingScreenProps {\r\n    message?: string;\r\n    fullScreen?: boolean;\r\n}\r\n\r\nexport const LoadingScreen: React.FC<LoadingScreenProps> = ({\r\n    message = \"Sincronizando com a rede...\",\r\n    fullScreen = false\r\n}) => {\r\n    return (\r\n        <div className={`flex flex-col items-center justify-center ${fullScreen ? 'fixed inset-0 z-[200] bg-black/90 backdrop-blur-sm' : 'min-h-[400px] w-full'}`}>\r\n            <div className=\"relative\">\r\n                {/* Outer Glow */}\r\n                <div className=\"absolute inset-0 bg-primary-500 blur-[40px] opacity-20 animate-pulse\" />\r\n\r\n                {/* Main Spinner Area */}\r\n                <div className=\"relative bg-zinc-900/50 border border-white/10 p-8 rounded-[2.5rem] shadow-2xl flex flex-col items-center gap-6\">\r\n                    <div className=\"relative\">\r\n                        <Loader2 className=\"text-primary-500 animate-spin\" size={64} strokeWidth={1.5} />\r\n                        <div className=\"absolute inset-0 flex items-center justify-center\">\r\n                            <Sparkles className=\"text-primary-400 animate-pulse\" size={24} />\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"text-center\">\r\n                        <p className=\"text-xs font-black text-white uppercase tracking-[0.3em] animate-pulse mb-2\">\r\n                            {message}\r\n                        </p>\r\n                        <div className=\"flex gap-1 justify-center\">\r\n                            <div className=\"w-1.5 h-1.5 rounded-full bg-primary-500/40 animate-bounce [animation-delay:-0.3s]\" />\r\n                            <div className=\"w-1.5 h-1.5 rounded-full bg-primary-500/70 animate-bounce [animation-delay:-0.15s]\" />\r\n                            <div className=\"w-1.5 h-1.5 rounded-full bg-primary-500 animate-bounce\" />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {fullScreen && (\r\n                <p className=\"absolute bottom-12 text-[10px] text-zinc-600 font-bold uppercase tracking-[0.2em]\">\r\n                    Sistema de Apoio M├║tuo ÔÇó Cred30 v2\r\n                </p>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josia\\Desktop\\projetos\\cred30\\packages\\frontend-v2\\src\\presentation\\components\\ui\\MetricCard.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","message":"Definition for rule '@typescript-eslint/no-unused-vars' was not found.","line":1,"column":1,"endLine":1,"endColumn":2,"severity":2,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\n\r\ninterface MetricCardProps {\r\n    title: string;\r\n    value: string;\r\n    subtitle: string;\r\n    color: 'blue' | 'green' | 'yellow' | 'purple' | 'red';\r\n    trend?: {\r\n        value: number;\r\n        isPositive: boolean;\r\n    };\r\n}\r\n\r\nconst colorStyles = {\r\n    blue: 'bg-blue-500/10 border-blue-500/20 text-blue-500',\r\n    green: 'bg-emerald-500/10 border-emerald-500/20 text-emerald-500',\r\n    yellow: 'bg-yellow-500/10 border-yellow-500/20 text-yellow-500',\r\n    purple: 'bg-purple-500/10 border-purple-500/20 text-purple-500',\r\n    red: 'bg-red-500/10 border-red-500/20 text-red-500',\r\n};\r\n\r\nexport const MetricCard: React.FC<MetricCardProps> = ({ title, value, subtitle, color, trend }) => {\r\n    return (\r\n        <div className={`p-6 rounded-2xl border ${colorStyles[color]} transition hover:scale-[1.02]`}>\r\n            <h3 className=\"text-sm font-medium mb-1 opacity-80\">{title}</h3>\r\n            <div className=\"flex items-baseline gap-2\">\r\n                <p className=\"text-2xl font-bold mb-1\">{value}</p>\r\n                {trend && (\r\n                    <span className={`text-[10px] font-bold ${trend.isPositive ? 'text-emerald-500' : 'text-red-500'}`}>\r\n                        {trend.isPositive ? 'Ôåæ' : 'Ôåô'} {trend.value.toFixed(1)}%\r\n                    </span>\r\n                )}\r\n            </div>\r\n            <p className=\"text-xs opacity-60\">{subtitle}</p>\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josia\\Desktop\\projetos\\cred30\\packages\\frontend-v2\\src\\presentation\\components\\ui\\PromoVideoPlayer.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","message":"Definition for rule '@typescript-eslint/no-unused-vars' was not found.","line":1,"column":1,"endLine":1,"endColumn":2,"severity":2,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { TrendingUp, Users, ShieldCheck, DollarSign, Play } from 'lucide-react';\r\n\r\ninterface PromoVideoPlayerProps {\r\n    duration: number; // Duration in seconds\r\n    onComplete: () => void;\r\n}\r\n\r\nexport const PromoVideoPlayer: React.FC<PromoVideoPlayerProps> = ({ duration, onComplete }) => {\r\n    const [progress, setProgress] = useState(0);\r\n    const [slideIndex, setSlideIndex] = useState(0);\r\n\r\n    const slides = [\r\n        {\r\n            icon: <TrendingUp size={64} className=\"text-emerald-400\" />,\r\n            title: \"Crescimento M├║tuo\",\r\n            text: \"Seu patrim├┤nio se fortalece com a comunidade. Adquira licen├ºas e receba b├┤nus de resultado.\",\r\n            color: \"from-emerald-900/40 to-black\"\r\n        },\r\n        {\r\n            icon: <Users size={64} className=\"text-primary-400\" />,\r\n            title: \"For├ºa da Comunidade\",\r\n            text: \"Uma rede de parceiros unidos. Aprova├º├úo de cr├®dito feita por quem confia em voc├¬.\",\r\n            color: \"from-blue-900/40 to-black\"\r\n        },\r\n        {\r\n            icon: <ShieldCheck size={64} className=\"text-purple-400\" />,\r\n            title: \"Seguran├ºa Total\",\r\n            text: \"Sistema transparente e audit├ível. Suas transa├º├Áes protegidas e garantidas por regras claras.\",\r\n            color: \"from-purple-900/40 to-black\"\r\n        },\r\n        {\r\n            icon: <DollarSign size={64} className=\"text-yellow-400\" />,\r\n            title: \"Ganhe Agora\",\r\n            text: \"Complete tarefas, assista v├¡deos e aumente seu score para ter mais limite.\",\r\n            color: \"from-yellow-900/40 to-black\"\r\n        }\r\n    ];\r\n\r\n    useEffect(() => {\r\n        const intervalTime = 100; // Update every 100ms\r\n        const totalSteps = (duration * 1000) / intervalTime;\r\n        const stepSize = 100 / totalSteps;\r\n\r\n        const timer = setInterval(() => {\r\n            setProgress((prev) => {\r\n                const next = prev + stepSize;\r\n                if (next >= 100) {\r\n                    clearInterval(timer);\r\n                    onComplete();\r\n                    return 100;\r\n                }\r\n                return next;\r\n            });\r\n        }, intervalTime);\r\n\r\n        // Slide rotation\r\n        const slideDuration = duration / slides.length;\r\n        const slideTimer = setInterval(() => {\r\n            setSlideIndex(prev => (prev + 1) % slides.length);\r\n        }, slideDuration * 1000);\r\n\r\n        return () => {\r\n            clearInterval(timer);\r\n            clearInterval(slideTimer);\r\n        };\r\n    }, [duration, onComplete, slides.length]);\r\n\r\n    const currentSlide = slides[slideIndex];\r\n\r\n    return (\r\n        <div className=\"relative w-full aspect-video bg-black rounded-2xl overflow-hidden border border-zinc-800 shadow-2xl\">\r\n            {/* Animated Background */}\r\n            <div className={`absolute inset-0 bg-gradient-to-br ${currentSlide.color} transition-colors duration-1000 ease-in-out`} />\r\n\r\n            {/* Content Content */}\r\n            <div className=\"absolute inset-0 flex flex-col items-center justify-center p-8 text-center animate-in fade-in zoom-in duration-500 key={slideIndex}\">\r\n                <div className=\"mb-6 animate-bounce\">\r\n                    {currentSlide.icon}\r\n                </div>\r\n                <h2 className=\"text-2xl font-bold text-white mb-4 tracking-tight drop-shadow-lg\">\r\n                    {currentSlide.title}\r\n                </h2>\r\n                <p className=\"text-zinc-300 text-sm leading-relaxed max-w-sm drop-shadow-md\">\r\n                    {currentSlide.text}\r\n                </p>\r\n            </div>\r\n\r\n            {/* Progress Bar */}\r\n            <div className=\"absolute bottom-0 left-0 right-0 h-1.5 bg-zinc-800\">\r\n                <div\r\n                    className=\"h-full bg-primary-500 shadow-[0_0_10px_rgba(6,182,212,0.8)] transition-all duration-100 ease-linear\"\r\n                    style={{ width: `${progress}%` }}\r\n                />\r\n            </div>\r\n\r\n            {/* Timer Overlay */}\r\n            <div className=\"absolute top-4 right-4 bg-black/50 backdrop-blur px-3 py-1 rounded-full text-[10px] font-mono text-zinc-400 border border-white/10\">\r\n                PROMO: {Math.ceil(duration - (progress / 100) * duration)}s\r\n            </div>\r\n\r\n            {/* Watermark */}\r\n            <div className=\"absolute bottom-4 left-4 flex items-center gap-2 opacity-50\">\r\n                <div className=\"w-2 h-2 rounded-full bg-red-500 animate-pulse\"></div>\r\n                <span className=\"text-[8px] uppercase tracking-widest text-white font-bold\">Cred30 Ad</span>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josia\\Desktop\\projetos\\cred30\\packages\\frontend-v2\\src\\presentation\\components\\ui\\PromptModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","message":"Definition for rule '@typescript-eslint/no-unused-vars' was not found.","line":1,"column":1,"endLine":1,"endColumn":2,"severity":2,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport { X as XIcon, MessageSquare } from 'lucide-react';\r\n\r\ninterface PromptModalProps {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n    onConfirm: (value: string) => void;\r\n    title: string;\r\n    message: string;\r\n    placeholder?: string;\r\n    confirmText?: string;\r\n    cancelText?: string;\r\n}\r\n\r\nexport const PromptModal: React.FC<PromptModalProps> = ({\r\n    isOpen,\r\n    onClose,\r\n    onConfirm,\r\n    title,\r\n    message,\r\n    placeholder = 'Digite aqui...',\r\n    confirmText = 'Confirmar',\r\n    cancelText = 'Cancelar'\r\n}) => {\r\n    const [value, setValue] = useState('');\r\n\r\n    if (!isOpen) return null;\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 bg-black/80 flex items-center justify-center z-[200] p-4 animate-in fade-in duration-200\" onClick={(e) => { if (e.target === e.currentTarget) onClose(); }}>\r\n            <div className=\"bg-surface border border-surfaceHighlight rounded-3xl p-6 w-full max-w-sm relative shadow-2xl animate-in zoom-in duration-300\">\r\n                <button title=\"Fechar\" onClick={onClose} className=\"absolute top-4 right-4 text-zinc-400 hover:text-white bg-zinc-800 p-1.5 rounded-full z-10\"><XIcon size={20} /></button>\r\n\r\n                <div className=\"w-12 h-12 rounded-full flex items-center justify-center mb-4 text-primary-400 bg-zinc-800/50\">\r\n                    <MessageSquare size={24} />\r\n                </div>\r\n\r\n                <h3 className=\"text-xl font-bold text-white mb-2\">{title}</h3>\r\n                <p className=\"text-zinc-400 text-sm leading-relaxed mb-6\">{message}</p>\r\n\r\n                <input\r\n                    type=\"text\"\r\n                    value={value}\r\n                    onChange={(e) => setValue(e.target.value)}\r\n                    placeholder={placeholder}\r\n                    className=\"w-full bg-black/40 border border-zinc-800 focus:border-primary-500 rounded-xl py-3 px-4 text-white outline-none transition mb-6\"\r\n                    autoFocus\r\n                />\r\n\r\n                <div className=\"space-y-2\">\r\n                    <button\r\n                        onClick={() => { onConfirm(value); setValue(''); onClose(); }}\r\n                        className=\"w-full font-bold py-3 rounded-xl transition shadow-lg bg-primary-500 hover:bg-primary-400 text-black\"\r\n                    >\r\n                        {confirmText}\r\n                    </button>\r\n                    <button\r\n                        onClick={onClose}\r\n                        className=\"w-full py-3 text-zinc-500 hover:text-white text-sm font-medium transition\"\r\n                    >\r\n                        {cancelText}\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josia\\Desktop\\projetos\\cred30\\packages\\frontend-v2\\src\\presentation\\components\\ui\\ReviewModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","message":"Definition for rule '@typescript-eslint/no-unused-vars' was not found.","line":1,"column":1,"endLine":1,"endColumn":2,"severity":2,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport { Star, X, Send, MessageSquare, CheckCircle2 } from 'lucide-react';\r\n\r\ninterface ReviewModalProps {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n    onSubmit: (rating: number, comment: string, isPublic: boolean) => Promise<void>;\r\n    transactionId: number;\r\n    amount: number;\r\n}\r\n\r\nexport const ReviewModal: React.FC<ReviewModalProps> = ({\r\n    isOpen,\r\n    onClose,\r\n    onSubmit,\r\n    transactionId,\r\n    amount\r\n}) => {\r\n    const [rating, setRating] = useState(5);\r\n    const [comment, setComment] = useState('');\r\n    const [isPublic, setIsPublic] = useState(false);\r\n    const [isSubmitting, setIsSubmitting] = useState(false);\r\n    const [isSuccess, setIsSuccess] = useState(false);\r\n    const [hoveredStar, setHoveredStar] = useState(0);\r\n\r\n    if (!isOpen) return null;\r\n\r\n    const handleSubmit = async () => {\r\n        if (isSubmitting) return;\r\n\r\n        setIsSubmitting(true);\r\n        try {\r\n            await onSubmit(rating, comment, isPublic);\r\n            setIsSuccess(true);\r\n            setTimeout(() => {\r\n                onClose();\r\n                setIsSuccess(false);\r\n                setRating(5);\r\n                setComment('');\r\n                setIsPublic(false);\r\n            }, 2000);\r\n        } catch (error) {\r\n            console.error('Erro ao enviar avalia├º├úo:', error);\r\n        } finally {\r\n            setIsSubmitting(false);\r\n        }\r\n    };\r\n\r\n    const formatCurrency = (value: number) =>\r\n        value.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });\r\n\r\n    return (\r\n        <div\r\n            className=\"fixed inset-0 bg-black/90 flex items-center justify-center z-[200] p-4 animate-in fade-in duration-200\"\r\n            onClick={(e) => { if (e.target === e.currentTarget) onClose(); }}\r\n        >\r\n            <div className=\"bg-zinc-900 border border-zinc-800 rounded-3xl w-full max-w-md overflow-hidden shadow-2xl\">\r\n                {/* Header */}\r\n                <div className=\"bg-gradient-to-r from-emerald-500/20 to-primary-500/20 p-6 relative\">\r\n                    <button\r\n                        onClick={onClose}\r\n                        className=\"absolute top-4 right-4 text-zinc-400 hover:text-white p-1.5 bg-zinc-800/50 rounded-full transition-colors\"\r\n                    >\r\n                        <X size={18} />\r\n                    </button>\r\n\r\n                    <div className=\"flex items-center gap-3\">\r\n                        <div className=\"w-12 h-12 bg-emerald-500/20 rounded-2xl flex items-center justify-center\">\r\n                            <CheckCircle2 className=\"text-emerald-400\" size={24} />\r\n                        </div>\r\n                        <div>\r\n                            <h2 className=\"text-xl font-bold text-white\">Saque Processado!</h2>\r\n                            <p className=\"text-emerald-400 font-medium\">{formatCurrency(amount)}</p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {isSuccess ? (\r\n                    <div className=\"p-8 text-center\">\r\n                        <div className=\"w-16 h-16 bg-emerald-500/20 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n                            <CheckCircle2 className=\"text-emerald-400\" size={32} />\r\n                        </div>\r\n                        <h3 className=\"text-xl font-bold text-white mb-2\">Obrigado!</h3>\r\n                        <p className=\"text-zinc-400 text-sm\">Sua avalia├º├úo foi enviada com sucesso.</p>\r\n                        <p className=\"text-emerald-400 text-sm font-medium mt-2\">+2 pontos de Score!</p>\r\n                    </div>\r\n                ) : (\r\n                    <div className=\"p-6 space-y-6\">\r\n                        {/* Rating Stars */}\r\n                        <div className=\"text-center\">\r\n                            <p className=\"text-zinc-400 text-sm mb-3\">Como foi sua experi├¬ncia?</p>\r\n                            <div className=\"flex justify-center gap-2\">\r\n                                {[1, 2, 3, 4, 5].map((star) => (\r\n                                    <button\r\n                                        key={star}\r\n                                        onClick={() => setRating(star)}\r\n                                        onMouseEnter={() => setHoveredStar(star)}\r\n                                        onMouseLeave={() => setHoveredStar(0)}\r\n                                        className=\"transition-transform hover:scale-110\"\r\n                                    >\r\n                                        <Star\r\n                                            size={36}\r\n                                            className={`transition-colors ${star <= (hoveredStar || rating)\r\n                                                    ? 'text-amber-400 fill-amber-400'\r\n                                                    : 'text-zinc-700'\r\n                                                }`}\r\n                                        />\r\n                                    </button>\r\n                                ))}\r\n                            </div>\r\n                            <p className=\"text-zinc-500 text-xs mt-2\">\r\n                                {rating === 5 && 'Excelente!'}\r\n                                {rating === 4 && 'Muito bom!'}\r\n                                {rating === 3 && 'Bom'}\r\n                                {rating === 2 && 'Pode melhorar'}\r\n                                {rating === 1 && 'Ruim'}\r\n                            </p>\r\n                        </div>\r\n\r\n                        {/* Comment */}\r\n                        <div>\r\n                            <label className=\"flex items-center gap-2 text-zinc-400 text-sm mb-2\">\r\n                                <MessageSquare size={14} />\r\n                                Deixe um coment├írio (opcional)\r\n                            </label>\r\n                            <textarea\r\n                                value={comment}\r\n                                onChange={(e) => setComment(e.target.value)}\r\n                                placeholder=\"Conte como foi sua experi├¬ncia com o saque...\"\r\n                                className=\"w-full bg-zinc-800 border border-zinc-700 rounded-xl p-4 text-white placeholder-zinc-500 text-sm resize-none focus:border-primary-500 focus:outline-none transition-colors\"\r\n                                rows={3}\r\n                                maxLength={500}\r\n                            />\r\n                            <p className=\"text-zinc-600 text-xs mt-1 text-right\">{comment.length}/500</p>\r\n                        </div>\r\n\r\n                        {/* Public Toggle */}\r\n                        <label className=\"flex items-center gap-3 cursor-pointer group\">\r\n                            <div className=\"relative\">\r\n                                <input\r\n                                    type=\"checkbox\"\r\n                                    checked={isPublic}\r\n                                    onChange={(e) => setIsPublic(e.target.checked)}\r\n                                    className=\"sr-only\"\r\n                                />\r\n                                <div className={`w-12 h-6 rounded-full transition-colors ${isPublic ? 'bg-primary-500' : 'bg-zinc-700'}`}>\r\n                                    <div className={`w-5 h-5 bg-white rounded-full absolute top-0.5 transition-transform ${isPublic ? 'translate-x-6' : 'translate-x-0.5'}`} />\r\n                                </div>\r\n                            </div>\r\n                            <div>\r\n                                <p className=\"text-white text-sm font-medium group-hover:text-primary-400 transition-colors\">\r\n                                    Tornar p├║blico\r\n                                </p>\r\n                                <p className=\"text-zinc-500 text-xs\">\r\n                                    Seu depoimento pode aparecer na p├ígina inicial (ap├│s aprova├º├úo)\r\n                                </p>\r\n                            </div>\r\n                        </label>\r\n\r\n                        {/* Submit Button */}\r\n                        <button\r\n                            onClick={handleSubmit}\r\n                            disabled={isSubmitting}\r\n                            className=\"w-full bg-gradient-to-r from-emerald-500 to-primary-500 hover:from-emerald-400 hover:to-primary-400 disabled:opacity-50 disabled:cursor-not-allowed text-white font-bold py-4 rounded-xl transition-all flex items-center justify-center gap-2 shadow-lg shadow-emerald-500/20\"\r\n                        >\r\n                            {isSubmitting ? (\r\n                                <div className=\"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin\" />\r\n                            ) : (\r\n                                <>\r\n                                    <Send size={18} />\r\n                                    Enviar Avalia├º├úo\r\n                                </>\r\n                            )}\r\n                        </button>\r\n\r\n                        <p className=\"text-center text-zinc-600 text-xs\">\r\n                            Ao avaliar, voc├¬ ganha +2 pontos de Score!\r\n                        </p>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ReviewModal;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josia\\Desktop\\projetos\\cred30\\packages\\frontend-v2\\src\\presentation\\components\\ui\\TermsAcceptanceModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","message":"Definition for rule '@typescript-eslint/no-unused-vars' was not found.","line":1,"column":1,"endLine":1,"endColumn":2,"severity":2,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useRef, useEffect } from 'react';\r\nimport { ScrollText, CheckCircle2, X } from 'lucide-react';\r\n\r\ninterface TermsAcceptanceModalProps {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n    onAccept: () => void;\r\n}\r\n\r\nexport const TermsAcceptanceModal: React.FC<TermsAcceptanceModalProps> = ({ isOpen, onClose, onAccept }) => {\r\n    const [hasScrolledToBottom, setHasScrolledToBottom] = useState(false);\r\n    const scrollRef = useRef<HTMLDivElement>(null);\r\n\r\n    const handleScroll = () => {\r\n        if (scrollRef.current) {\r\n            const { scrollTop, scrollHeight, clientHeight } = scrollRef.current;\r\n            // Usar margem de erro de 10px para dispositivos m├│veis\r\n            if (scrollHeight - scrollTop - clientHeight < 10) {\r\n                setHasScrolledToBottom(true);\r\n            }\r\n        }\r\n    };\r\n\r\n    if (!isOpen) return null;\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 bg-black/95 z-[150] flex items-center justify-center p-4 md:p-8 animate-in fade-in duration-300 backdrop-blur-md\">\r\n            <div className=\"bg-zinc-950 border border-zinc-800 w-full max-w-4xl max-h-[90vh] rounded-[2.5rem] flex flex-col relative overflow-hidden shadow-[0_0_50px_rgba(34,211,238,0.1)]\">\r\n                {/* Header */}\r\n                <div className=\"p-6 md:p-8 border-b border-zinc-800 flex justify-between items-center bg-zinc-950\">\r\n                    <div className=\"flex items-center gap-3\">\r\n                        <div className=\"w-10 h-10 md:w-12 md:h-12 bg-primary-500/10 rounded-xl flex items-center justify-center text-primary-500 border border-primary-500/20\">\r\n                            <ScrollText size={24} />\r\n                        </div>\r\n                        <div>\r\n                            <h2 className=\"text-xl md:text-2xl font-bold text-white tracking-tight\">Termos de Uso</h2>\r\n                            <p className=\"text-zinc-500 text-xs md:text-sm\">Leia at├® o fim para aceitar</p>\r\n                        </div>\r\n                    </div>\r\n                    <button onClick={onClose} className=\"text-zinc-500 hover:text-white p-2\">\r\n                        <X size={24} />\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Content Area */}\r\n                <div\r\n                    ref={scrollRef}\r\n                    onScroll={handleScroll}\r\n                    className=\"flex-1 overflow-y-auto p-6 md:p-10 space-y-10 custom-scrollbar scroll-smooth\"\r\n                >\r\n                    <section className=\"space-y-4\">\r\n                        <h3 className=\"text-lg md:text-xl font-bold text-primary-400 flex items-center gap-2\">\r\n                            1. Natureza da Associa├º├úo\r\n                        </h3>\r\n                        <p className=\"text-zinc-400 leading-relaxed text-sm md:text-base\">\r\n                            O Cred30 ├® um sistema de apoio m├║tuo e coopera├º├úo entre membros. Ao se cadastrar, voc├¬ torna-se um associado participante de uma comunidade de aux├¡lio m├║tuo privado. A participa├º├úo ├® volunt├íria e baseada na ajuda rec├¡proca.\r\n                        </p>\r\n                    </section>\r\n\r\n                    <section className=\"space-y-4\">\r\n                        <h3 className=\"text-lg md:text-xl font-bold text-primary-400 flex items-center gap-2\">\r\n                            2. Regras dos Aportes Sociais (Licen├ºas)\r\n                        </h3>\r\n                        <div className=\"grid md:grid-cols-2 gap-4\">\r\n                            <div className=\"bg-zinc-900/50 p-5 rounded-2xl border border-zinc-800\">\r\n                                <h4 className=\"font-bold text-white mb-2 text-sm md:text-base\">Detalhamento do Valor</h4>\r\n                                <p className=\"text-zinc-500 text-xs md:text-sm leading-relaxed\">Cada licen├ºa possui o valor de R$ 50,00, composto por R$ 42,00 de Capital Social (resgat├ível) e R$ 8,00 de taxa administrativa (n├úo resgat├ível).</p>\r\n                            </div>\r\n                            <div className=\"bg-zinc-900/50 p-5 rounded-2xl border border-zinc-800\">\r\n                                <h4 className=\"font-bold text-white mb-2 text-sm md:text-base\">Distribui├º├úo</h4>\r\n                                <p className=\"text-zinc-500 text-xs md:text-sm leading-relaxed\">85% dos excedentes gerados s├úo distribu├¡dos proporcionalmente entre os detentores de licen├ºas ativas.</p>\r\n                            </div>\r\n                        </div>\r\n                    </section>\r\n\r\n                    <section className=\"space-y-4\">\r\n                        <h3 className=\"text-lg md:text-xl font-bold text-primary-400 flex items-center gap-2\">\r\n                            3. Apoio M├║tuo e Garantia Real\r\n                        </h3>\r\n                        <p className=\"text-zinc-400 leading-relaxed text-sm md:text-base\">\r\n                            Os membros podem solicitar apoio para consumo ou projetos baseado em seu score. <strong className=\"text-white\">As licen├ºas ativas servem como garantia para honrar os compromissos de reposi├º├úo.</strong>\r\n                        </p>\r\n                        <div className=\"bg-red-500/5 border border-red-500/10 p-4 rounded-xl flex items-start gap-4\">\r\n                            <div className=\"w-6 h-6 bg-red-500/20 rounded-full flex items-center justify-center text-red-400 text-xs font-bold mt-1 shrink-0\">!</div>\r\n                            <p className=\"text-zinc-500 text-xs md:text-sm leading-relaxed\">\r\n                                Em caso de atraso superior a 5 dias, o sistema reserva-se o direito de <strong className=\"text-red-400\">LIQUIDAR AUTOMATICAMENTE</strong> as licen├ºas do devedor para quitar o saldo devedor, sem necessidade de aviso pr├®vio.\r\n                            </p>\r\n                        </div>\r\n                    </section>\r\n\r\n                    <section className=\"space-y-4\">\r\n                        <h3 className=\"text-lg md:text-xl font-bold text-primary-400 flex items-center gap-2\">\r\n                            4. Sustentabilidade e Penalidades\r\n                        </h3>\r\n                        <div className=\"bg-zinc-900/50 p-5 rounded-2xl border border-zinc-800\">\r\n                            <p className=\"text-zinc-400 text-xs md:text-sm leading-relaxed\">\r\n                                ÔÇó Taxa de sustentabilidade de 20% por opera├º├úo.<br />\r\n                                ÔÇó Multa de mora di├íria de <strong className=\"text-white\">0.5% ao dia</strong> sobre o valor em atraso.<br />\r\n                                ÔÇó Perda imediata de Score e exclus├úo de benef├¡cios VIP em caso de inadimpl├¬ncia.\r\n                            </p>\r\n                        </div>\r\n                    </section>\r\n\r\n                    <section className=\"space-y-4\">\r\n                        <h3 className=\"text-lg md:text-xl font-bold text-primary-400 flex items-center gap-2\">\r\n                            5. Publicidade e Parceiros Externos\r\n                        </h3>\r\n                        <div className=\"bg-zinc-900/50 p-5 rounded-2xl border border-zinc-800 space-y-3\">\r\n                            <p className=\"text-zinc-400 text-xs md:text-sm leading-relaxed\">\r\n                                O sistema utiliza parcerias de publicidade (ex: Adsterra) para custear opera├º├Áes e levantar capital. Ao aceitar:\r\n                            </p>\r\n                            <ul className=\"text-zinc-500 text-[10px] md:text-xs space-y-1 list-disc list-inside\">\r\n                                <li>Voc├¬ entende que an├║ncios de terceiros ser├úo exibidos.</li>\r\n                                <li>A Cred30 <strong className=\"text-white text-[11px]\">N├âO SE RESPONSABILIZA</strong> pelo conte├║do, produtos ou promessas de anunciantes externos.</li>\r\n                                <li>O redirecionamento para sites externos ocorre por sua conta e risco.</li>\r\n                            </ul>\r\n                        </div>\r\n                    </section>\r\n\r\n                    {/* AVISO DE RISCO - CR├ìTICO PARA BLINDAGEM */}\r\n                    <section className=\"space-y-4\">\r\n                        <h3 className=\"text-lg md:text-xl font-bold text-red-500 flex items-center gap-2\">\r\n                            ÔÜá´©Å 6. Aviso de Risco de Perda\r\n                        </h3>\r\n                        <div className=\"bg-red-500/10 border-2 border-red-500/30 p-5 rounded-2xl space-y-3\">\r\n                            <p className=\"text-red-300 text-sm md:text-base font-bold\">\r\n                                VOC├è PODE PERDER TODO O CAPITAL APORTADO.\r\n                            </p>\r\n                            <p className=\"text-zinc-400 text-xs md:text-sm leading-relaxed\">\r\n                                O sistema de apoio m├║tuo <strong className=\"text-white\">N├âO GARANTE</strong> retorno do investimento.\r\n                                Os rendimentos passados n├úo garantem rendimentos futuros.\r\n                                N├úo invista recursos que voc├¬ n├úo pode perder.\r\n                            </p>\r\n                        </div>\r\n                    </section>\r\n\r\n                    <section className=\"space-y-4\">\r\n                        <h3 className=\"text-lg md:text-xl font-bold text-purple-400 flex items-center gap-2\">\r\n                            7. Elegibilidade\r\n                        </h3>\r\n                        <p className=\"text-zinc-400 text-xs md:text-sm leading-relaxed\">\r\n                            Ao clicar em \"Aceitar\", voc├¬ declara ter <strong className=\"text-white\">18 anos ou mais</strong>,\r\n                            possuir plena capacidade civil e que leu, compreendeu e concorda com todos os termos acima,\r\n                            incluindo os <strong className=\"text-white\">riscos de perda financeira</strong>.\r\n                        </p>\r\n                    </section>\r\n\r\n                    <div className=\"pt-10 border-t border-zinc-900 text-center space-y-2\">\r\n                        <p className=\"text-zinc-500 text-sm italic\">\r\n                            Fim dos termos. Role at├® o fim para habilitar o bot├úo de aceite.\r\n                        </p>\r\n                        <p className=\"text-[10px] text-emerald-600 font-bold\">\r\n                            Vers├úo 2.0 ÔÇó 25/12/2024\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Footer / Action */}\r\n                <div className=\"p-6 md:p-8 border-t border-zinc-800 bg-zinc-950 flex flex-col gap-4\">\r\n                    {!hasScrolledToBottom && (\r\n                        <p className=\"text-amber-500 text-xs font-medium flex items-center gap-2 justify-center mb-2 animate-pulse\">\r\n                            <ScrollText size={14} /> Voc├¬ deve ler at├® o final para aceitar\r\n                        </p>\r\n                    )}\r\n\r\n                    <button\r\n                        onClick={onAccept}\r\n                        disabled={!hasScrolledToBottom}\r\n                        className={`w-full py-4 rounded-2xl font-bold transition-all flex items-center justify-center gap-3 text-base md:text-lg shadow-2-xl ${hasScrolledToBottom\r\n                            ? 'bg-primary-500 hover:bg-primary-400 text-black shadow-primary-500/20'\r\n                            : 'bg-zinc-800 text-zinc-500 cursor-not-allowed opacity-50'\r\n                            }`}\r\n                    >\r\n                        {hasScrolledToBottom ? <CheckCircle2 size={24} /> : <div className=\"w-6 h-6 border-2 border-zinc-600 rounded-full\" />}\r\n                        Eu li e aceito os Termos de Uso\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josia\\Desktop\\projetos\\cred30\\packages\\frontend-v2\\src\\presentation\\components\\ui\\card-modal.component.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","message":"Definition for rule '@typescript-eslint/no-unused-vars' was not found.","line":1,"column":1,"endLine":1,"endColumn":2,"severity":2,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport React, { useState, useEffect } from 'react';\r\nimport { CreditCard, X as XIcon, Loader2, ShieldCheck, MapPin, Phone, User as UserIcon } from 'lucide-react';\r\n\r\ninterface CardModalProps {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n    amount: number;\r\n    userEmail: string;\r\n    currentUser?: any;\r\n    onSubmit: (formData: any) => Promise<void>;\r\n}\r\n\r\nexport const CardModal: React.FC<CardModalProps> = ({\r\n    isOpen,\r\n    onClose,\r\n    amount,\r\n    userEmail,\r\n    currentUser,\r\n    onSubmit\r\n}) => {\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState<string | null>(null);\r\n\r\n    // Card Data\r\n    const [cardNumber, setCardNumber] = useState('');\r\n    const [holderName, setHolderName] = useState('');\r\n    const [expiry, setExpiry] = useState(''); // MM/YY\r\n    const [cvv, setCvv] = useState('');\r\n    const [installments, setInstallments] = useState('1');\r\n\r\n    // Holder Info\r\n    const [cpf, setCpf] = useState(currentUser?.cpf || '');\r\n    const [postalCode, setPostalCode] = useState('');\r\n    const [addressNumber, setAddressNumber] = useState('');\r\n    const [phone, setPhone] = useState('');\r\n\r\n    useEffect(() => {\r\n        if (currentUser?.cpf && !cpf) {\r\n            setCpf(currentUser.cpf);\r\n        }\r\n    }, [currentUser, isOpen]);\r\n\r\n    if (!isOpen) return null;\r\n\r\n    const formatCardNumber = (value: string) => {\r\n        const v = value.replace(/\\D/g, '').substring(0, 16);\r\n        const parts = v.match(/.{1,4}/g) || [];\r\n        return parts.join(' ');\r\n    };\r\n\r\n    const formatExpiry = (value: string) => {\r\n        const v = value.replace(/\\D/g, '').substring(0, 4);\r\n        if (v.length > 2) return `${v.substring(0, 2)}/${v.substring(2)}`;\r\n        return v;\r\n    };\r\n\r\n    const handleFormSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        setLoading(true);\r\n        setError(null);\r\n\r\n        try {\r\n            const [expiryMonth, expiryYear] = expiry.split('/');\r\n\r\n            const formData = {\r\n                creditCard: {\r\n                    holderName,\r\n                    number: cardNumber.replace(/\\D/g, ''),\r\n                    expiryMonth,\r\n                    expiryYear: `20${expiryYear}`,\r\n                    ccv: cvv,\r\n                },\r\n                creditCardHolderInfo: {\r\n                    name: holderName,\r\n                    email: userEmail,\r\n                    cpfCnpj: cpf.replace(/\\D/g, ''),\r\n                    postalCode: postalCode.replace(/\\D/g, ''),\r\n                    addressNumber,\r\n                    phone: phone.replace(/\\D/g, ''),\r\n                },\r\n                installments: parseInt(installments)\r\n            };\r\n\r\n            await onSubmit(formData);\r\n            onClose();\r\n        } catch (err: any) {\r\n            setError(err.message || 'Erro ao processar pagamento');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div\r\n            className=\"fixed inset-0 bg-black/90 backdrop-blur-md flex items-center justify-center z-[250] p-3 sm:p-4 animate-in fade-in duration-200 overflow-y-auto\"\r\n            onClick={(e) => {\r\n                if (e.target === e.currentTarget && !loading) onClose();\r\n            }}\r\n        >\r\n            <div className=\"bg-zinc-950 border border-zinc-800 rounded-[2rem] p-5 sm:p-8 w-full max-w-lg relative animate-in zoom-in duration-300 my-auto shadow-[0_0_50px_rgba(0,0,0,1)]\">\r\n                <button\r\n                    onClick={onClose}\r\n                    disabled={loading}\r\n                    className=\"absolute top-4 right-4 text-zinc-500 hover:text-white bg-zinc-900 border border-zinc-800 p-2 rounded-full transition-all z-[260]\"\r\n                >\r\n                    <XIcon size={20} />\r\n                </button>\r\n\r\n                <div className=\"text-center mb-6 pt-2\">\r\n                    <div className=\"w-14 h-14 bg-primary-500/10 rounded-2xl flex items-center justify-center mx-auto mb-3 border border-primary-500/20\">\r\n                        <CreditCard className=\"text-primary-400\" size={28} />\r\n                    </div>\r\n                    <h3 className=\"text-xl font-bold text-white tracking-tight\">Checkout Seguro</h3>\r\n                    <p className=\"text-zinc-500 text-xs mt-1 uppercase font-black tracking-widest\">Powered by Asaas</p>\r\n                </div>\r\n\r\n                <div className=\"bg-zinc-900/50 border border-zinc-800 rounded-2xl p-4 mb-6 flex items-center justify-between\">\r\n                    <div>\r\n                        <p className=\"text-[10px] text-zinc-500 font-black uppercase tracking-widest\">Total do Pagamento</p>\r\n                        <p className=\"text-2xl font-black text-primary-400\">\r\n                            {amount.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })}\r\n                        </p>\r\n                    </div>\r\n                    <div className=\"bg-emerald-500/10 text-emerald-400 p-2 rounded-xl flex items-center gap-2\">\r\n                        <ShieldCheck size={20} />\r\n                        <span className=\"text-[9px] font-black uppercase tracking-tighter\">SSL <br />Encrypted</span>\r\n                    </div>\r\n                </div>\r\n\r\n                {error && (\r\n                    <div className=\"bg-red-500/10 border border-red-500/20 text-red-500 p-4 rounded-xl text-xs mb-6 animate-in slide-in-from-top-2\">\r\n                        {error}\r\n                    </div>\r\n                )}\r\n\r\n                <form onSubmit={handleFormSubmit} className=\"space-y-5\">\r\n                    {/* Card Preview Simulation Style */}\r\n                    <div className=\"space-y-4\">\r\n                        {/* Payment Flags & Badges */}\r\n                        <div className=\"flex flex-col sm:flex-row items-center justify-between gap-3 mb-2 px-1\">\r\n                            <div className=\"flex items-center gap-2\">\r\n                                <img src=\"https://cdn.jsdelivr.net/gh/nicepay-dev/nicepay-node@master/public/assets/img/payment/visa.svg\" alt=\"Visa\" className=\"h-5 object-contain\" onError={(e) => e.currentTarget.style.display = 'none'} />\r\n                                <img src=\"https://cdn.jsdelivr.net/gh/nicepay-dev/nicepay-node@master/public/assets/img/payment/mastercard.svg\" alt=\"Mastercard\" className=\"h-5 object-contain\" onError={(e) => e.currentTarget.style.display = 'none'} />\r\n                                <div className=\"h-5 w-8 bg-yellow-500 rounded flex items-center justify-center text-[8px] font-black text-black\">ELO</div>\r\n                                <div className=\"h-5 w-8 bg-blue-600 rounded flex items-center justify-center text-[6px] font-black text-white\">AMEX</div>\r\n                            </div>\r\n                            <div className=\"flex items-center gap-1.5 bg-zinc-900 border border-zinc-800 rounded-lg px-2 py-1\">\r\n                                <span className=\"text-[8px] text-zinc-500 font-bold uppercase tracking-widest\">Processado por</span>\r\n                                <div className=\"flex items-center gap-1\">\r\n                                    <div className=\"w-2 h-2 bg-blue-500 rounded-full animate-pulse\"></div>\r\n                                    <span className=\"text-[10px] font-black text-white tracking-tighter\">asaas</span>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"relative\">\r\n                            <label className=\"text-[10px] text-zinc-500 font-black uppercase tracking-widest ml-1 mb-1 block\" htmlFor=\"cardNumber\">N├║mero do Cart├úo</label>\r\n                            <div className=\"relative\">\r\n                                <CreditCard className=\"absolute left-4 top-1/2 -translate-y-1/2 text-zinc-500\" size={18} />\r\n                                <input\r\n                                    id=\"cardNumber\"\r\n                                    name=\"cardNumber\"\r\n                                    autoComplete=\"cc-number\"\r\n                                    type=\"text\"\r\n                                    required\r\n                                    placeholder=\"0000 0000 0000 0000\"\r\n                                    value={cardNumber}\r\n                                    onChange={(e) => setCardNumber(formatCardNumber(e.target.value))}\r\n                                    className=\"w-full bg-zinc-900 border border-zinc-800 rounded-xl py-3.5 pl-12 pr-4 text-white focus:border-primary-500 outline-none transition-all placeholder:text-zinc-700\"\r\n                                />\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div>\r\n                            <label className=\"text-[10px] text-zinc-500 font-black uppercase tracking-widest ml-1 mb-1 block\" htmlFor=\"cardName\">Nome como no cart├úo</label>\r\n                            <div className=\"relative\">\r\n                                <UserIcon className=\"absolute left-4 top-1/2 -translate-y-1/2 text-zinc-500\" size={18} />\r\n                                <input\r\n                                    id=\"cardName\"\r\n                                    name=\"cardName\"\r\n                                    autoComplete=\"cc-name\"\r\n                                    type=\"text\"\r\n                                    required\r\n                                    placeholder=\"NOME COMPLETO\"\r\n                                    value={holderName}\r\n                                    onChange={(e) => setHolderName(e.target.value.toUpperCase())}\r\n                                    className=\"w-full bg-zinc-900 border border-zinc-800 rounded-xl py-3.5 pl-12 pr-4 text-white focus:border-primary-500 outline-none transition-all\"\r\n                                />\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"grid grid-cols-2 gap-4\">\r\n                            <div>\r\n                                <label className=\"text-[10px] text-zinc-500 font-black uppercase tracking-widest ml-1 mb-1 block\" htmlFor=\"cardExpiry\">Validade (MM/YY)</label>\r\n                                <input\r\n                                    id=\"cardExpiry\"\r\n                                    name=\"cardExpiry\"\r\n                                    autoComplete=\"cc-exp\"\r\n                                    type=\"text\"\r\n                                    required\r\n                                    placeholder=\"MM/YY\"\r\n                                    value={expiry}\r\n                                    onChange={(e) => setExpiry(formatExpiry(e.target.value))}\r\n                                    className=\"w-full bg-zinc-900 border border-zinc-800 rounded-xl py-3.5 px-4 text-white focus:border-primary-500 outline-none transition-all text-center\"\r\n                                />\r\n                            </div>\r\n                            <div>\r\n                                <label className=\"text-[10px] text-zinc-500 font-black uppercase tracking-widest ml-1 mb-1 block\" htmlFor=\"cardCvv\">CVV</label>\r\n                                <input\r\n                                    id=\"cardCvv\"\r\n                                    name=\"cardCvv\"\r\n                                    autoComplete=\"cc-csc\"\r\n                                    type=\"text\"\r\n                                    required\r\n                                    placeholder=\"000\"\r\n                                    maxLength={4}\r\n                                    value={cvv}\r\n                                    onChange={(e) => setCvv(e.target.value.replace(/\\D/g, ''))}\r\n                                    className=\"w-full bg-zinc-900 border border-zinc-800 rounded-xl py-3.5 px-4 text-white focus:border-primary-500 outline-none transition-all text-center\"\r\n                                />\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"pt-4 border-t border-zinc-900\">\r\n                            <h4 className=\"text-[10px] text-zinc-600 font-black uppercase tracking-[0.2em] mb-4 text-center\">Dados de Cobran├ºa</h4>\r\n\r\n                            <div className=\"grid grid-cols-2 gap-4\">\r\n                                <div className=\"col-span-2\">\r\n                                    <label className=\"text-[10px] text-zinc-500 font-black uppercase tracking-widest ml-1 mb-1 block\" htmlFor=\"holderCpf\">CPF do Titular</label>\r\n                                    <input\r\n                                        id=\"holderCpf\"\r\n                                        name=\"holderCpf\"\r\n                                        type=\"text\"\r\n                                        required\r\n                                        placeholder=\"000.000.000-00\"\r\n                                        value={cpf}\r\n                                        onChange={(e) => setCpf(e.target.value)}\r\n                                        className=\"w-full bg-zinc-900 border border-zinc-800 rounded-xl py-3 px-4 text-white focus:border-primary-500 outline-none transition-all\"\r\n                                    />\r\n                                </div>\r\n                                <div>\r\n                                    <label className=\"text-[10px] text-zinc-500 font-black uppercase tracking-widest ml-1 mb-1 block\" htmlFor=\"billingZip\">CEP</label>\r\n                                    <div className=\"relative\">\r\n                                        <MapPin className=\"absolute left-3 top-1/2 -translate-y-1/2 text-zinc-600\" size={14} />\r\n                                        <input\r\n                                            id=\"billingZip\"\r\n                                            name=\"billingZip\"\r\n                                            autoComplete=\"postal-code\"\r\n                                            type=\"text\"\r\n                                            required\r\n                                            placeholder=\"00000-000\"\r\n                                            value={postalCode}\r\n                                            onChange={(e) => setPostalCode(e.target.value)}\r\n                                            className=\"w-full bg-zinc-900 border border-zinc-800 rounded-xl py-3 pl-9 pr-4 text-white focus:border-primary-500 outline-none transition-all text-sm\"\r\n                                        />\r\n                                    </div>\r\n                                </div>\r\n                                <div>\r\n                                    <label className=\"text-[10px] text-zinc-500 font-black uppercase tracking-widest ml-1 mb-1 block\" htmlFor=\"addressNumber\">N┬║</label>\r\n                                    <input\r\n                                        id=\"addressNumber\"\r\n                                        name=\"addressNumber\"\r\n                                        type=\"text\"\r\n                                        required\r\n                                        placeholder=\"123\"\r\n                                        value={addressNumber}\r\n                                        onChange={(e) => setAddressNumber(e.target.value)}\r\n                                        className=\"w-full bg-zinc-900 border border-zinc-800 rounded-xl py-3 px-4 text-white focus:border-primary-500 outline-none transition-all text-sm\"\r\n                                    />\r\n                                </div>\r\n                                <div className=\"col-span-2\">\r\n                                    <label className=\"text-[10px] text-zinc-500 font-black uppercase tracking-widest ml-1 mb-1 block\" htmlFor=\"contactPhone\">Celular com DDD</label>\r\n                                    <div className=\"relative\">\r\n                                        <Phone className=\"absolute left-3 top-1/2 -translate-y-1/2 text-zinc-600\" size={14} />\r\n                                        <input\r\n                                            id=\"contactPhone\"\r\n                                            name=\"contactPhone\"\r\n                                            autoComplete=\"tel\"\r\n                                            type=\"tel\"\r\n                                            required\r\n                                            placeholder=\"(00) 00000-0000\"\r\n                                            value={phone}\r\n                                            onChange={(e) => setPhone(e.target.value)}\r\n                                            className=\"w-full bg-zinc-900 border border-zinc-800 rounded-xl py-3 pl-9 pr-4 text-white focus:border-primary-500 outline-none transition-all text-sm\"\r\n                                        />\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"pt-4\">\r\n                        <button\r\n                            type=\"submit\"\r\n                            disabled={loading}\r\n                            className=\"w-full py-4 bg-primary-500 hover:bg-primary-400 disabled:opacity-50 disabled:cursor-not-allowed text-black font-black rounded-2xl transition-all shadow-lg shadow-primary-500/10 flex items-center justify-center gap-3 uppercase tracking-widest text-sm active:scale-[0.98]\"\r\n                        >\r\n                            {loading ? (\r\n                                <>\r\n                                    <Loader2 className=\"animate-spin\" size={20} />\r\n                                    Processando...\r\n                                </>\r\n                            ) : (\r\n                                <>\r\n                                    <ShieldCheck size={20} />\r\n                                    Confirmar Pagamento\r\n                                </>\r\n                            )}\r\n                        </button>\r\n                    </div>\r\n                </form>\r\n\r\n                <p className=\"text-[9px] text-zinc-600 text-center mt-6 leading-relaxed uppercase font-bold tracking-tight\">\r\n                    Pagamento Transparente Asaas. <br />\r\n                    Ambiente 100% criptografado e seguro. <br />\r\n                    O Cred30 n├úo armazena dados do seu cart├úo.\r\n                </p>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josia\\Desktop\\projetos\\cred30\\packages\\frontend-v2\\src\\presentation\\components\\ui\\metric-card.component.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","message":"Definition for rule '@typescript-eslint/no-unused-vars' was not found.","line":1,"column":1,"endLine":1,"endColumn":2,"severity":2,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\n\r\ninterface MetricCardProps {\r\n  title: string;\r\n  value: string | number;\r\n  subtitle?: string;\r\n  trend?: {\r\n    value: number;\r\n    isPositive: boolean;\r\n  };\r\n  color?: 'blue' | 'green' | 'yellow' | 'red' | 'purple' | 'indigo';\r\n  size?: 'sm' | 'md' | 'lg';\r\n}\r\n\r\nexport const MetricCard: React.FC<MetricCardProps> = ({\r\n  title,\r\n  value,\r\n  subtitle,\r\n  trend,\r\n  color = 'blue',\r\n  size = 'md'\r\n}) => {\r\n  const colorClasses = {\r\n    blue: 'bg-blue-50 border-blue-200 text-blue-900',\r\n    green: 'bg-green-50 border-green-200 text-green-900',\r\n    yellow: 'bg-yellow-50 border-yellow-200 text-yellow-900',\r\n    red: 'bg-red-50 border-red-200 text-red-900',\r\n    purple: 'bg-purple-50 border-purple-200 text-purple-900',\r\n    indigo: 'bg-indigo-50 border-indigo-200 text-indigo-900'\r\n  };\r\n\r\n  const valueColorClasses = {\r\n    blue: 'text-blue-600',\r\n    green: 'text-green-600',\r\n    yellow: 'text-yellow-600',\r\n    red: 'text-red-600',\r\n    purple: 'text-purple-600',\r\n    indigo: 'text-indigo-600'\r\n  };\r\n\r\n  const sizeClasses = {\r\n    sm: 'p-4',\r\n    md: 'p-6',\r\n    lg: 'p-8'\r\n  };\r\n\r\n  return (\r\n    <div className={`border rounded-lg ${sizeClasses[size]} ${colorClasses[color]} transition-all hover:shadow-md`}>\r\n      <h3 className=\"text-sm font-medium text-gray-500 mb-2\">{title}</h3>\r\n      <div className={`text-2xl font-bold ${valueColorClasses[color]} mb-1`}>\r\n        {value}\r\n      </div>\r\n      {subtitle && (\r\n        <p className=\"text-sm text-gray-600\">{subtitle}</p>\r\n      )}\r\n      {trend && (\r\n        <div className={`flex items-center mt-2 text-sm ${trend.isPositive ? 'text-green-600' : 'text-red-600'}`}>\r\n          <span className=\"mr-1\">\r\n            {trend.isPositive ? 'Ôåæ' : 'Ôåô'}\r\n          </span>\r\n          <span>{Math.abs(trend.value)}%</span>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josia\\Desktop\\projetos\\cred30\\packages\\frontend-v2\\src\\presentation\\components\\ui\\modal.component.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","message":"Definition for rule '@typescript-eslint/no-unused-vars' was not found.","line":1,"column":1,"endLine":1,"endColumn":2,"severity":2,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { X, AlertTriangle, Info } from 'lucide-react';\r\n\r\ninterface ModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  title: string;\r\n  children: React.ReactNode;\r\n  size?: 'sm' | 'md' | 'lg' | 'xl';\r\n}\r\n\r\nexport const Modal: React.FC<ModalProps> = ({\r\n  isOpen,\r\n  onClose,\r\n  title,\r\n  children,\r\n  size = 'md'\r\n}) => {\r\n  if (!isOpen) return null;\r\n\r\n  const sizeClasses = {\r\n    sm: 'max-w-md',\r\n    md: 'max-w-lg',\r\n    lg: 'max-w-2xl',\r\n    xl: 'max-w-4xl'\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\r\n      <div className={`bg-white rounded-lg shadow-xl w-full mx-4 ${sizeClasses[size]}`}>\r\n        <div className=\"flex items-center justify-between p-6 border-b border-gray-200\">\r\n          <h3 className=\"text-lg font-semibold text-gray-900\">{title}</h3>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"text-gray-400 hover:text-gray-600 transition-colors\"\r\n            title=\"Fechar\"\r\n          >\r\n            <X className=\"w-6 h-6\" />\r\n          </button>\r\n        </div>\r\n        <div className=\"p-6\">\r\n          {children}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\ninterface ConfirmModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  onConfirm: () => void;\r\n  title: string;\r\n  message: string;\r\n  confirmText?: string;\r\n  cancelText?: string;\r\n  type?: 'danger' | 'warning' | 'info';\r\n}\r\n\r\nexport const ConfirmModal: React.FC<ConfirmModalProps> = ({\r\n  isOpen,\r\n  onClose,\r\n  onConfirm,\r\n  title,\r\n  message,\r\n  confirmText = 'Confirmar',\r\n  cancelText = 'Cancelar',\r\n  type = 'info'\r\n}) => {\r\n  if (!isOpen) return null;\r\n\r\n  const typeClasses = {\r\n    danger: 'bg-red-600 hover:bg-red-700',\r\n    warning: 'bg-yellow-600 hover:bg-yellow-700',\r\n    info: 'bg-blue-600 hover:bg-blue-700'\r\n  };\r\n\r\n  const iconColors = {\r\n    danger: 'text-red-600',\r\n    warning: 'text-yellow-600',\r\n    info: 'text-blue-600'\r\n  };\r\n\r\n  const getIcon = () => {\r\n    switch (type) {\r\n      case 'danger':\r\n      case 'warning':\r\n        return <AlertTriangle className=\"w-6 h-6\" />;\r\n      case 'info':\r\n      default:\r\n        return <Info className=\"w-6 h-6\" />;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\r\n      <div className=\"bg-white rounded-lg shadow-xl w-full max-w-md mx-4\">\r\n        <div className=\"p-6\">\r\n          <div className=\"flex items-center mb-4\">\r\n            <div className={`flex-shrink-0 w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center ${iconColors[type]}`}>\r\n              {getIcon()}\r\n            </div>\r\n            <h3 className=\"ml-3 text-lg font-semibold text-gray-900\">{title}</h3>\r\n          </div>\r\n          <p className=\"text-gray-600 mb-6\">{message}</p>\r\n          <div className=\"flex space-x-3\">\r\n            <button\r\n              onClick={onClose}\r\n              className=\"flex-1 bg-gray-200 text-gray-800 px-4 py-2 rounded-lg hover:bg-gray-300 transition-colors\"\r\n            >\r\n              {cancelText}\r\n            </button>\r\n            <button\r\n              onClick={onConfirm}\r\n              className={`flex-1 text-white px-4 py-2 rounded-lg transition-colors ${typeClasses[type]}`}\r\n            >\r\n              {confirmText}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josia\\Desktop\\projetos\\cred30\\packages\\frontend-v2\\src\\presentation\\components\\ui\\offline-notice.component.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","message":"Definition for rule '@typescript-eslint/no-unused-vars' was not found.","line":1,"column":1,"endLine":1,"endColumn":2,"severity":2,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { WifiOff, AlertCircle } from 'lucide-react';\r\n\r\ninterface OfflineNoticeProps {\r\n    isOnline: boolean;\r\n}\r\n\r\nexport const OfflineNotice: React.FC<OfflineNoticeProps> = ({ isOnline }) => {\r\n    if (isOnline) return null;\r\n\r\n    return (\r\n        <div className=\"fixed top-0 left-0 right-0 z-[10000] animate-in slide-in-from-top-full duration-300\">\r\n            <div className=\"bg-red-600 text-white px-4 py-2 flex items-center justify-center gap-2 text-sm font-bold shadow-lg\">\r\n                <WifiOff size={16} />\r\n                <span>Voc├¬ est├í offline. Algumas funcionalidades podem estar limitadas.</span>\r\n                <AlertCircle size={14} className=\"ml-2 opacity-50\" />\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josia\\Desktop\\projetos\\cred30\\packages\\frontend-v2\\src\\presentation\\components\\ui\\pix-modal.component.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","message":"Definition for rule '@typescript-eslint/no-unused-vars' was not found.","line":1,"column":1,"endLine":1,"endColumn":2,"severity":2,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport React from 'react';\r\nimport { QrCode, Copy, X as XIcon, CheckCircle2 } from 'lucide-react';\r\n\r\ninterface PIXModalProps {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n    qrCode: string;\r\n    qrCodeBase64: string;\r\n    amount: number;\r\n    description: string;\r\n}\r\n\r\nexport const PIXModal: React.FC<PIXModalProps> = ({\r\n    isOpen,\r\n    onClose,\r\n    qrCode,\r\n    qrCodeBase64,\r\n    amount,\r\n    description\r\n}) => {\r\n    const [copied, setCopied] = React.useState(false);\r\n\r\n    if (!isOpen) return null;\r\n\r\n    const handleCopy = () => {\r\n        navigator.clipboard.writeText(qrCode);\r\n        setCopied(true);\r\n        setTimeout(() => setCopied(false), 2000);\r\n    };\r\n\r\n    return (\r\n        <div\r\n            className=\"fixed inset-0 bg-black/80 flex items-center justify-center z-[300] p-4 animate-in fade-in duration-200\"\r\n            onClick={(e) => {\r\n                if (e.target === e.currentTarget) onClose();\r\n            }}\r\n        >\r\n            <div className=\"bg-surface border border-surfaceHighlight rounded-3xl p-6 w-full max-w-sm relative animate-in zoom-in duration-300 max-h-[90vh] overflow-y-auto flex flex-col items-stretch\">\r\n                <div className=\"text-center mb-6\">\r\n                    <div className=\"w-16 h-16 bg-emerald-500/20 rounded-2xl flex items-center justify-center mx-auto mb-4\">\r\n                        <QrCode className=\"text-emerald-400\" size={32} />\r\n                    </div>\r\n                    <h3 className=\"text-xl font-bold text-white\">Pagamento PIX</h3>\r\n                    <p className=\"text-zinc-400 text-sm mt-1\">{description}</p>\r\n                </div>\r\n\r\n                <div className=\"bg-white p-4 rounded-2xl mb-6 shadow-xl max-w-[200px] mx-auto w-full\">\r\n                    <img\r\n                        src={`data:image/png;base64,${qrCodeBase64}`}\r\n                        alt=\"QR Code PIX\"\r\n                        className=\"w-full aspect-square rounded-lg\"\r\n                    />\r\n                </div>\r\n\r\n                <div className=\"space-y-4\">\r\n                    <div className=\"bg-background border border-surfaceHighlight rounded-xl p-4\">\r\n                        <div className=\"flex justify-between text-xs text-zinc-500 mb-1 uppercase font-bold tracking-wider\">\r\n                            <span>Valor a Pagar</span>\r\n                        </div>\r\n                        <div className=\"text-2xl font-bold text-white\">\r\n                            {amount.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })}\r\n                        </div>\r\n                    </div>\r\n\r\n                    <button\r\n                        onClick={handleCopy}\r\n                        className={`w-full py-4 rounded-xl font-bold flex items-center justify-center gap-2 transition-all ${copied\r\n                            ? 'bg-emerald-500 text-black'\r\n                            : 'bg-primary-500 hover:bg-primary-400 text-black shadow-[0_0_15px_rgba(34,211,238,0.3)]'\r\n                            }`}\r\n                    >\r\n                        {copied ? (\r\n                            <>\r\n                                <CheckCircle2 size={18} />\r\n                                Copiado com Sucesso!\r\n                            </>\r\n                        ) : (\r\n                            <>\r\n                                <Copy size={18} />\r\n                                Copiar C├│digo PIX\r\n                            </>\r\n                        )}\r\n                    </button>\r\n\r\n                    <p className=\"text-[11px] text-zinc-500 text-center leading-relaxed bg-zinc-900/50 p-3 rounded-xl border border-zinc-800\">\r\n                        O sistema identificar├í o pagamento automaticamente em instantes.\r\n                    </p>\r\n\r\n                    <p className=\"text-[9px] text-zinc-600 text-center leading-relaxed mt-2\">\r\n                        Pagamento processado via gateway Asaas. O Cred30 n├úo armazena dados banc├írios.\r\n                    </p>\r\n\r\n                    <button\r\n                        onClick={onClose}\r\n                        className=\"w-full py-4 bg-zinc-800 hover:bg-zinc-700 text-white rounded-xl font-bold transition-all shadow-lg mt-2\"\r\n                    >\r\n                        Fechar Janela\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josia\\Desktop\\projetos\\cred30\\packages\\frontend-v2\\src\\presentation\\components\\ui\\pwa-enforcer.component.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","message":"Definition for rule '@typescript-eslint/no-unused-vars' was not found.","line":1,"column":1,"endLine":1,"endColumn":2,"severity":2,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from 'react';\r\nimport { Download, X, Smartphone, Monitor, Lock, AlertTriangle } from 'lucide-react';\r\n\r\ninterface BeforeInstallPromptEvent extends Event {\r\n    prompt: () => Promise<void>;\r\n    userChoice: Promise<{ outcome: 'accepted' | 'dismissed' }>;\r\n}\r\n\r\ndeclare global {\r\n    interface WindowEventMap {\r\n        'beforeinstallprompt': BeforeInstallPromptEvent;\r\n    }\r\n}\r\n\r\n/**\r\n * Detecta se est├í rodando como PWA instalado\r\n */\r\nexport const isPWAInstalled = (): boolean => {\r\n    // Check display-mode\r\n    if (window.matchMedia('(display-mode: standalone)').matches) return true;\r\n    if (window.matchMedia('(display-mode: fullscreen)').matches) return true;\r\n\r\n    // iOS Safari standalone mode\r\n    if ((navigator as any).standalone === true) return true;\r\n\r\n    // Check if launched from home screen on Android\r\n    if (document.referrer.includes('android-app://')) return true;\r\n\r\n    return false;\r\n};\r\n\r\n/**\r\n * Detecta se ├® dispositivo m├│vel\r\n */\r\nexport const isMobileDevice = (): boolean => {\r\n    return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\r\n};\r\n\r\n/**\r\n * Detecta se ├® desktop\r\n */\r\nexport const isDesktopDevice = (): boolean => {\r\n    return !isMobileDevice();\r\n};\r\n\r\n/**\r\n * Hook para gerenciar instala├º├úo do PWA\r\n */\r\nexport const usePWAInstall = () => {\r\n    const [deferredPrompt, setDeferredPrompt] = useState<BeforeInstallPromptEvent | null>(null);\r\n    const [isInstallable, setIsInstallable] = useState(false);\r\n    const [isInstalled, setIsInstalled] = useState(isPWAInstalled());\r\n\r\n    useEffect(() => {\r\n        const handleBeforeInstallPrompt = (e: BeforeInstallPromptEvent) => {\r\n            e.preventDefault();\r\n            setDeferredPrompt(e);\r\n            setIsInstallable(true);\r\n        };\r\n\r\n        const handleAppInstalled = () => {\r\n            setIsInstalled(true);\r\n            setIsInstallable(false);\r\n            setDeferredPrompt(null);\r\n        };\r\n\r\n        window.addEventListener('beforeinstallprompt', handleBeforeInstallPrompt);\r\n        window.addEventListener('appinstalled', handleAppInstalled);\r\n\r\n        // Check on mount\r\n        setIsInstalled(isPWAInstalled());\r\n\r\n        return () => {\r\n            window.removeEventListener('beforeinstallprompt', handleBeforeInstallPrompt);\r\n            window.removeEventListener('appinstalled', handleAppInstalled);\r\n        };\r\n    }, []);\r\n\r\n    const promptInstall = async () => {\r\n        if (!deferredPrompt) return false;\r\n\r\n        deferredPrompt.prompt();\r\n        const { outcome } = await deferredPrompt.userChoice;\r\n\r\n        if (outcome === 'accepted') {\r\n            setIsInstalled(true);\r\n            setIsInstallable(false);\r\n        }\r\n\r\n        setDeferredPrompt(null);\r\n        return outcome === 'accepted';\r\n    };\r\n\r\n    return { isInstallable, isInstalled, promptInstall, deferredPrompt };\r\n};\r\n\r\ninterface PWAEnforcerProps {\r\n    isAdmin: boolean;\r\n    children: React.ReactNode;\r\n}\r\n\r\n/**\r\n * Componente que for├ºa PWA para clientes e bloqueia PWA para admins\r\n * \r\n * Regras R├ìGIDAS:\r\n * - Clientes em MOBILE: DEVEM usar o PWA (mostra aviso se n├úo instalado)\r\n * - Clientes em DESKTOP: DEVEM usar o PWA/App instalado (BLOQUEIA acesso web)\r\n * - Admins: DEVEM usar a WEB (mostra aviso se est├úo no PWA)\r\n */\r\nexport const PWAEnforcer: React.FC<PWAEnforcerProps> = ({ isAdmin, children }) => {\r\n    const { isInstallable, isInstalled, promptInstall } = usePWAInstall();\r\n    const isMobile = isMobileDevice();\r\n    const isDesktop = isDesktopDevice();\r\n\r\n    // ========================================\r\n    // ADMIN: Se est├í no PWA, avisa para usar web\r\n    // ========================================\r\n    if (isAdmin && isInstalled) {\r\n        return (\r\n            <>\r\n                {children}\r\n                <div className=\"fixed bottom-0 left-0 right-0 z-[9999] p-4 animate-in slide-in-from-bottom duration-500\">\r\n                    <div className=\"max-w-md mx-auto bg-gradient-to-br from-amber-950 to-amber-900 border border-amber-500/30 rounded-2xl p-5 shadow-2xl shadow-amber-900/50\">\r\n                        <div className=\"flex items-start gap-4\">\r\n                            <div className=\"w-12 h-12 bg-amber-500/20 rounded-xl flex items-center justify-center shrink-0\">\r\n                                <Monitor className=\"text-amber-400\" size={24} />\r\n                            </div>\r\n                            <div className=\"flex-1\">\r\n                                <h3 className=\"text-white font-bold text-base mb-1\">├ürea Administrativa</h3>\r\n                                <p className=\"text-amber-200/80 text-sm leading-relaxed mb-4\">\r\n                                    Para melhor experi├¬ncia como admin, recomendamos usar o navegador web em vez do aplicativo.\r\n                                </p>\r\n                                <a\r\n                                    href={window.location.href}\r\n                                    target=\"_blank\"\r\n                                    rel=\"noopener noreferrer\"\r\n                                    className=\"w-full bg-amber-500 hover:bg-amber-400 text-black font-bold py-3 rounded-xl text-sm text-center transition block\"\r\n                                >\r\n                                    Abrir no Navegador\r\n                                </a>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </>\r\n        );\r\n    }\r\n\r\n    // ========================================\r\n    // CLIENTE DESKTOP: BLOQUEIA acesso web (for├ºa PWA)\r\n    // ========================================\r\n    if (!isAdmin && isDesktop && !isInstalled) {\r\n        return (\r\n            <div className=\"min-h-screen bg-black flex items-center justify-center p-4\">\r\n                <div className=\"max-w-lg w-full\">\r\n                    {/* Card principal de bloqueio */}\r\n                    <div className=\"bg-gradient-to-br from-zinc-900 to-zinc-950 border border-red-500/30 rounded-3xl p-8 shadow-2xl shadow-red-900/20 text-center\">\r\n                        <div className=\"w-20 h-20 bg-red-500/10 rounded-2xl flex items-center justify-center mx-auto mb-6 border border-red-500/20\">\r\n                            <Lock className=\"text-red-400\" size={40} />\r\n                        </div>\r\n\r\n                        <h1 className=\"text-2xl font-black text-white mb-3 tracking-tight\">\r\n                            Acesso Bloqueado\r\n                        </h1>\r\n\r\n                        <p className=\"text-zinc-400 text-sm leading-relaxed mb-6\">\r\n                            Para sua seguran├ºa, o acesso ao Cred30 via navegador web em desktop n├úo ├® permitido.\r\n                            <br /><br />\r\n                            <strong className=\"text-white\">Instale o aplicativo oficial</strong> para continuar.\r\n                        </p>\r\n\r\n                        {/* Alerta de seguran├ºa */}\r\n                        <div className=\"bg-amber-500/10 border border-amber-500/20 rounded-xl p-4 mb-6 text-left\">\r\n                            <div className=\"flex items-start gap-3\">\r\n                                <AlertTriangle className=\"text-amber-400 shrink-0 mt-0.5\" size={18} />\r\n                                <p className=\"text-amber-200/80 text-xs leading-relaxed\">\r\n                                    O aplicativo instalado oferece prote├º├úo adicional contra phishing,\r\n                                    mant├®m suas sess├Áes mais seguras e garante que voc├¬ est├í acessando o sistema oficial.\r\n                                </p>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Bot├úo de instala├º├úo */}\r\n                        {isInstallable ? (\r\n                            <button\r\n                                onClick={promptInstall}\r\n                                className=\"w-full bg-primary-500 hover:bg-primary-400 text-black font-black py-4 rounded-2xl text-sm flex items-center justify-center gap-3 transition shadow-lg shadow-primary-500/20 mb-4\"\r\n                            >\r\n                                <Download size={20} />\r\n                                INSTALAR APLICATIVO CRED30\r\n                            </button>\r\n                        ) : (\r\n                            <div className=\"space-y-4\">\r\n                                <p className=\"text-zinc-500 text-xs\">\r\n                                    Se o bot├úo de instala├º├úo n├úo aparecer, siga os passos abaixo:\r\n                                </p>\r\n                                <div className=\"bg-zinc-900/50 border border-zinc-800 rounded-xl p-4 text-left\">\r\n                                    <p className=\"text-xs text-zinc-400 mb-2 font-bold uppercase tracking-widest\">Como instalar:</p>\r\n                                    <ol className=\"text-xs text-zinc-300 space-y-2 list-decimal list-inside\">\r\n                                        <li>Clique nos 3 pontos (Ôï«) no canto superior direito</li>\r\n                                        <li>Selecione \"Instalar Cred30\" ou \"Adicionar ├á ├írea de trabalho\"</li>\r\n                                        <li>Confirme a instala├º├úo</li>\r\n                                        <li>Abra o app instalado no seu desktop</li>\r\n                                    </ol>\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n\r\n                        <p className=\"text-[10px] text-zinc-600 mt-6 uppercase tracking-widest\">\r\n                            Prote├º├úo contra fraudes ÔÇó Cred30 Seguro\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    // ========================================\r\n    // CLIENTE MOBILE SEM PWA: Mostra aviso para instalar\r\n    // ========================================\r\n    if (!isAdmin && isMobile && !isInstalled && isInstallable) {\r\n        return (\r\n            <>\r\n                {children}\r\n                <div className=\"fixed bottom-0 left-0 right-0 z-[9999] p-4 animate-in slide-in-from-bottom duration-500\">\r\n                    <div className=\"max-w-md mx-auto bg-gradient-to-br from-primary-950 to-primary-900 border border-primary-500/30 rounded-2xl p-5 shadow-2xl shadow-primary-900/50\">\r\n                        <div className=\"flex items-start gap-4\">\r\n                            <div className=\"w-12 h-12 bg-primary-500/20 rounded-xl flex items-center justify-center shrink-0\">\r\n                                <Smartphone className=\"text-primary-400\" size={24} />\r\n                            </div>\r\n                            <div className=\"flex-1\">\r\n                                <h3 className=\"text-white font-bold text-base mb-1\">Instale o App Cred30</h3>\r\n                                <p className=\"text-primary-200/80 text-sm leading-relaxed mb-4\">\r\n                                    Para a melhor experi├¬ncia, instale o aplicativo na sua tela inicial. ├ë r├ípido e sem downloads!\r\n                                </p>\r\n                                <button\r\n                                    onClick={promptInstall}\r\n                                    className=\"w-full bg-primary-500 hover:bg-primary-400 text-black font-bold py-3 rounded-xl text-sm flex items-center justify-center gap-2 transition\"\r\n                                >\r\n                                    <Download size={18} />\r\n                                    Instalar Agora\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </>\r\n        );\r\n    }\r\n\r\n    // Caso padr├úo: permite acesso normal\r\n    return <>{children}</>;\r\n};\r\n\r\n/**\r\n * Banner persistente para mobile pedindo instala├º├úo do PWA\r\n * (Mostra em todas as telas at├® o usu├írio instalar ou dispensar)\r\n */\r\nexport const PWAInstallBanner: React.FC<{ onDismiss?: () => void }> = ({ onDismiss }) => {\r\n    const { isInstallable, isInstalled, promptInstall } = usePWAInstall();\r\n    const [dismissed, setDismissed] = useState(() => {\r\n        return localStorage.getItem('pwa-banner-dismissed') === 'true';\r\n    });\r\n    const isMobile = isMobileDevice();\r\n\r\n    // N├úo mostra em desktop (j├í est├í bloqueado pelo PWAEnforcer)\r\n    if (!isMobile || isInstalled || !isInstallable || dismissed) {\r\n        return null;\r\n    }\r\n\r\n    const handleDismiss = () => {\r\n        localStorage.setItem('pwa-banner-dismissed', 'true');\r\n        setDismissed(true);\r\n        onDismiss?.();\r\n    };\r\n\r\n    return (\r\n        <div className=\"fixed top-0 left-0 right-0 z-[9998] p-3 bg-gradient-to-r from-primary-600 to-emerald-600 shadow-lg\">\r\n            <div className=\"max-w-md mx-auto flex items-center justify-between gap-3\">\r\n                <div className=\"flex items-center gap-3\">\r\n                    <Download size={20} className=\"text-white shrink-0\" />\r\n                    <p className=\"text-white text-sm font-medium\">\r\n                        Adicione ├á tela inicial para acesso r├ípido!\r\n                    </p>\r\n                </div>\r\n                <div className=\"flex items-center gap-2\">\r\n                    <button\r\n                        onClick={promptInstall}\r\n                        className=\"bg-white text-primary-600 px-4 py-1.5 rounded-lg text-xs font-bold shadow-lg\"\r\n                    >\r\n                        Instalar\r\n                    </button>\r\n                    <button onClick={handleDismiss} className=\"text-white/80 hover:text-white p-1\">\r\n                        <X size={18} />\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\n/**\r\n * Hook simples para checar se o usu├írio pode acessar\r\n * ├Ütil para guards de rota\r\n */\r\nexport const useCanAccessApp = (isAdmin: boolean): { canAccess: boolean; reason: string } => {\r\n    const isInstalled = isPWAInstalled();\r\n    const isDesktop = isDesktopDevice();\r\n\r\n    // Cliente em desktop sem PWA = bloqueado\r\n    if (!isAdmin && isDesktop && !isInstalled) {\r\n        return { canAccess: false, reason: 'desktop-requires-pwa' };\r\n    }\r\n\r\n    return { canAccess: true, reason: 'ok' };\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josia\\Desktop\\projetos\\cred30\\packages\\frontend-v2\\src\\presentation\\components\\ui\\update-notification.component.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","message":"Definition for rule '@typescript-eslint/no-unused-vars' was not found.","line":1,"column":1,"endLine":1,"endColumn":2,"severity":2,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect } from 'react';\r\nimport { RefreshCw, Download } from 'lucide-react';\r\n// @ts-ignore - Virtual module provided by vite-plugin-pwa\r\nimport { useRegisterSW } from 'virtual:pwa-register/react';\r\n\r\nexport const UpdateNotification: React.FC = () => {\r\n    const {\r\n        offlineReady: [offlineReady, setOfflineReady],\r\n        needRefresh: [needRefresh, setNeedRefresh],\r\n        updateServiceWorker,\r\n    } = useRegisterSW({\r\n        onRegistered(r) {\r\n            console.log('SW Registered:', r);\r\n        },\r\n        onRegisterError(error) {\r\n            console.error('SW registration error', error);\r\n        },\r\n    });\r\n\r\n    const close = () => {\r\n        setOfflineReady(false);\r\n        setNeedRefresh(false);\r\n    };\r\n\r\n    if (!offlineReady && !needRefresh) return null;\r\n\r\n    return (\r\n        <div className=\"fixed bottom-20 left-4 right-4 z-[9999] animate-in slide-in-from-bottom-5\">\r\n            <div className=\"bg-zinc-900 border border-emerald-500/50 text-white p-4 rounded-xl shadow-2xl flex items-center justify-between max-w-md mx-auto ring-1 ring-emerald-500/20\">\r\n                <div className=\"flex items-center gap-3\">\r\n                    <div className=\"bg-emerald-500/20 p-2 rounded-full text-emerald-400\">\r\n                        <Download size={20} />\r\n                    </div>\r\n                    <div>\r\n                        <p className=\"font-bold text-sm\">\r\n                            {needRefresh ? 'Atualiza├º├úo Dispon├¡vel' : 'Pronto para Offline'}\r\n                        </p>\r\n                        <p className=\"text-xs text-zinc-400\">\r\n                            {needRefresh\r\n                                ? 'Uma nova vers├úo do App est├í pronta para instala├º├úo.'\r\n                                : 'O App foi baixado e agora funciona offline!'}\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n                <div className=\"flex gap-2\">\r\n                    {needRefresh && (\r\n                        <button\r\n                            onClick={() => updateServiceWorker(true)}\r\n                            className=\"bg-emerald-500 hover:bg-emerald-600 text-white text-xs font-bold py-2 px-4 rounded-lg transition-colors flex items-center gap-2\"\r\n                        >\r\n                            <RefreshCw size={14} /> ATUALIZAR\r\n                        </button>\r\n                    )}\r\n                    <button\r\n                        onClick={close}\r\n                        className=\"text-zinc-500 hover:text-white text-xs p-2\"\r\n                    >\r\n                        Fechar\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josia\\Desktop\\projetos\\cred30\\packages\\frontend-v2\\src\\presentation\\components\\views\\AdminView.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","message":"Definition for rule '@typescript-eslint/no-unused-vars' was not found.","line":1,"column":1,"endLine":1,"endColumn":2,"severity":2,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useCallback } from 'react';\r\nimport packageJson from '../../../../package.json';\r\nimport {\r\n    ShieldCheck, RefreshCw, LogOut, Send, MessageSquare, PieChart, Activity, Settings as SettingsIcon, UserPlus, ShoppingBag as ShoppingBagIcon, Vote, Bug, TrendingUp\r\n} from 'lucide-react';\r\nimport { ConfirmModal } from '../ui/ConfirmModal';\r\nimport { AppState } from '../../../domain/types/common.types';\r\nimport { clearAllCache } from '../../../application/services/storage.service';\r\nimport { apiService } from '../../../application/services/api.service';\r\n\r\n// Tab Components\r\nimport { AdminOverview } from '../features/admin/tabs/AdminOverview';\r\nimport { AdminPayouts } from '../features/admin/tabs/AdminPayouts';\r\nimport { AdminMetrics } from '../features/admin/tabs/AdminMetrics';\r\nimport { AdminSystem } from '../features/admin/tabs/AdminSystem';\r\nimport { AdminReferrals } from '../features/admin/tabs/AdminReferrals';\r\nimport { AdminUsers } from '../features/admin/tabs/AdminUsers';\r\nimport { AdminGovernance } from '../features/admin/tabs/AdminGovernance';\r\nimport { AdminReviews } from '../features/admin/tabs/AdminReviews';\r\nimport { AdminBugs } from '../features/admin/tabs/AdminBugs';\r\nimport { AdminInvestments } from '../features/admin/tabs/AdminInvestments';\r\n\r\n// Existing Shared Components\r\nimport { AdminStoreManager } from '../features/store/admin-store.component';\r\nimport { SupportAdminView } from './SupportAdminView';\r\n\r\ninterface AdminViewProps {\r\n    state: AppState;\r\n    onRefresh: () => void;\r\n    onLogout: () => void;\r\n    onSuccess: (title: string, message: string) => void;\r\n    onError: (title: string, message: string) => void;\r\n}\r\n\r\ntype TabType = 'overview' | 'payouts' | 'system' | 'investments' | 'store' | 'referrals' | 'support' | 'users' | 'metrics' | 'governance' | 'reviews' | 'bugs';\r\n\r\nexport const AdminView = ({ state, onRefresh, onLogout, onSuccess, onError }: AdminViewProps) => {\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [confirmMP, setConfirmMP] = useState<{ id: string, tid: string } | null>(null);\r\n\r\n    const userRole = state.currentUser?.role || (state.currentUser?.isAdmin ? 'ADMIN' : 'MEMBER');\r\n    const [activeTab, setActiveTab] = useState<TabType>(\r\n        userRole === 'ATTENDANT' ? 'support' : 'overview'\r\n    );\r\n\r\n    const [pendingChatsCount, setPendingChatsCount] = useState(0);\r\n    const [pendingPayoutsCount, setPendingPayoutsCount] = useState(0);\r\n    const [pendingReviewsCount, setPendingReviewsCount] = useState(0);\r\n    const [pendingBugsCount, setPendingBugsCount] = useState(0);\r\n\r\n    const fetchCounts = useCallback(async () => {\r\n        try {\r\n            const [supportRes, payoutRes, reviewsRes, bugsRes] = await Promise.all([\r\n                apiService.getPendingSupportChats(),\r\n                apiService.getPayoutQueue(),\r\n                apiService.getAdminReviews(),\r\n                apiService.get<any>('/bugs/admin?status=open')\r\n            ]);\r\n\r\n            setPendingChatsCount(supportRes.chats?.filter((c: any) => c.status === 'PENDING_HUMAN').length || 0);\r\n            setPendingPayoutsCount(payoutRes.transactions?.length || 0);\r\n            setPendingReviewsCount(reviewsRes.data?.filter((r: any) => r.is_public && !r.is_approved).length || 0);\r\n            setPendingBugsCount(bugsRes.data?.length || 0);\r\n        } catch (e) {\r\n            console.error('Error fetching admin counts:', e);\r\n        }\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        fetchCounts();\r\n        const interval = setInterval(fetchCounts, 30000);\r\n        return () => clearInterval(interval);\r\n    }, [fetchCounts]);\r\n\r\n    const handleRefresh = async () => {\r\n        setIsLoading(true);\r\n        clearAllCache();\r\n        await onRefresh();\r\n        await fetchCounts();\r\n        setIsLoading(false);\r\n        onSuccess(\"Atualizado\", \"Dados sincronizados com o servidor.\");\r\n    };\r\n\r\n    const confirmSimulateMpPayment = async () => {\r\n        if (!confirmMP) return;\r\n        const { id: paymentId, tid: transactionId } = confirmMP;\r\n        try {\r\n            const response = await apiService.post<any>('/admin/simulate-mp-payment', { paymentId, transactionId });\r\n            if (response.success) {\r\n                onSuccess('Simula├º├úo Sucesso', 'Pagamento aprovado no Sandbox.');\r\n                await onRefresh();\r\n            } else {\r\n                onError('Erro na Simula├º├úo', response.message);\r\n            }\r\n        } catch (error: any) {\r\n            onError('Erro ao Simular', error.message);\r\n        }\r\n    };\r\n\r\n    const tabs = [\r\n        { id: 'overview', name: 'Resumo', icon: PieChart, roles: ['ADMIN'] },\r\n        { id: 'payouts', name: 'Resgates', icon: Send, count: pendingPayoutsCount, roles: ['ADMIN'] },\r\n        { id: 'metrics', name: 'Monitoramento', icon: Activity, roles: ['ADMIN', 'ATTENDANT'] },\r\n        { id: 'system', name: 'Financeiro', icon: SettingsIcon, roles: ['ADMIN'] },\r\n        { id: 'referrals', name: 'Indica├º├Áes', icon: UserPlus, roles: ['ADMIN'] },\r\n        { id: 'users', name: 'Usu├írios', icon: ShieldCheck, roles: ['ADMIN'] },\r\n        { id: 'store', name: 'Loja', icon: ShoppingBagIcon, roles: ['ADMIN'] },\r\n        { id: 'investments', name: 'Investimentos', icon: TrendingUp, roles: ['ADMIN'] },\r\n        { id: 'governance', name: 'Governan├ºa', icon: Vote, roles: ['ADMIN'] },\r\n        { id: 'reviews', name: 'Depoimentos', icon: MessageSquare, count: pendingReviewsCount, roles: ['ADMIN'] },\r\n        { id: 'bugs', name: 'Bugs', icon: Bug, count: pendingBugsCount, roles: ['ADMIN'] },\r\n        { id: 'support', name: 'Suporte', icon: MessageSquare, count: pendingChatsCount, roles: ['ADMIN', 'ATTENDANT'] },\r\n    ].filter(tab => tab.roles.includes(userRole));\r\n\r\n    return (\r\n        <div className=\"space-y-8 pb-20 max-w-[1600px] mx-auto px-4 sm:px-6 lg:px-8\">\r\n            {/* Header Modernizado */}\r\n            <div className=\"bg-gradient-to-br from-zinc-900 to-black rounded-3xl p-8 border border-zinc-800 shadow-2xl relative overflow-hidden group\">\r\n                <div className=\"absolute top-0 right-0 w-64 h-64 bg-primary-500/5 rounded-full blur-3xl -mr-32 -mt-32\"></div>\r\n\r\n                <div className=\"flex flex-col lg:flex-row items-center justify-between gap-8 relative z-10\">\r\n                    <div className=\"flex items-center gap-6\">\r\n                        <div className=\"w-20 h-20 bg-primary-500/10 rounded-3xl flex items-center justify-center border border-primary-500/20 shadow-[0_0_30px_rgba(6,182,212,0.1)] group-hover:scale-105 transition-transform duration-500\">\r\n                            <ShieldCheck size={40} className=\"text-primary-400\" />\r\n                        </div>\r\n                        <div>\r\n                            <h1 className=\"text-3xl font-extrabold text-white tracking-tight\">Painel de Controle</h1>\r\n                            <div className=\"flex items-center gap-3 mt-2\">\r\n                                <span className=\"flex h-2.5 w-2.5 relative\">\r\n                                    <span className=\"animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75\"></span>\r\n                                    <span className=\"relative inline-flex rounded-full h-2.5 w-2.5 bg-emerald-500\"></span>\r\n                                </span>\r\n                                <p className=\"text-xs text-zinc-400 font-bold uppercase tracking-[0.2em]\">Servidor Ativo ÔÇó v{packageJson.version}</p>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"flex flex-wrap items-center justify-center gap-4\">\r\n                        <button\r\n                            onClick={handleRefresh}\r\n                            className=\"group bg-zinc-800/50 hover:bg-zinc-800 border border-zinc-700/50 hover:border-primary-500/50 px-6 py-3.5 rounded-2xl flex items-center gap-3 transition-all duration-300 text-sm font-bold text-zinc-300 shadow-lg\"\r\n                        >\r\n                            <RefreshCw size={18} className={isLoading ? \"animate-spin\" : \"group-hover:rotate-180 transition-transform duration-500\"} />\r\n                            {isLoading ? \"Sincronizando\" : \"Atualizar Sistema\"}\r\n                        </button>\r\n                        <button\r\n                            onClick={onLogout}\r\n                            className=\"bg-red-500/10 hover:bg-red-500/20 border border-red-500/20 hover:border-red-500/40 px-6 py-3.5 rounded-2xl flex items-center gap-3 transition-all duration-300 text-sm font-bold text-red-500 shadow-lg\"\r\n                        >\r\n                            <LogOut size={18} /> Sair\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Abas */}\r\n            <div className=\"flex items-center gap-1.5 p-1.5 bg-zinc-900/80 backdrop-blur-xl border border-zinc-800 rounded-[2rem] overflow-x-auto no-scrollbar shadow-xl sticky top-4 z-50\">\r\n                {tabs.map((tab) => (\r\n                    <button\r\n                        key={tab.id}\r\n                        onClick={() => setActiveTab(tab.id as TabType)}\r\n                        className={`\r\n                            relative flex items-center gap-3 px-8 py-4 rounded-[1.5rem] text-sm font-bold transition-all duration-500 whitespace-nowrap\r\n                            ${activeTab === tab.id\r\n                                ? 'bg-zinc-800 text-white shadow-2xl border border-zinc-700/50 scale-[1.02]'\r\n                                : 'text-zinc-500 hover:text-zinc-300 hover:bg-zinc-800/30'}\r\n                        `}\r\n                    >\r\n                        <tab.icon size={20} className={activeTab === tab.id ? \"text-primary-400\" : \"\"} />\r\n                        {tab.name}\r\n                        {tab.count !== undefined && tab.count > 0 && (\r\n                            <span className=\"flex h-5 w-5 items-center justify-center bg-primary-500 text-zinc-900 text-[10px] font-black rounded-full shadow-[0_0_15px_rgba(6,182,212,0.4)]\">\r\n                                {tab.count}\r\n                            </span>\r\n                        )}\r\n                    </button>\r\n                ))}\r\n            </div>\r\n\r\n            {/* Tab Content */}\r\n            <div className=\"min-h-[600px]\">\r\n                {activeTab === 'overview' && <AdminOverview state={state} />}\r\n                {activeTab === 'payouts' && <AdminPayouts onSuccess={onSuccess} onError={onError} />}\r\n                {activeTab === 'metrics' && <AdminMetrics />}\r\n                {activeTab === 'system' && <AdminSystem state={state} onRefresh={onRefresh} onSuccess={onSuccess} onError={onError} />}\r\n                {activeTab === 'referrals' && <AdminReferrals onSuccess={onSuccess} onError={onError} />}\r\n                {activeTab === 'users' && <AdminUsers onSuccess={onSuccess} onError={onError} />}\r\n                {activeTab === 'store' && <AdminStoreManager onSuccess={onSuccess} onError={onError} />}\r\n                {activeTab === 'investments' && <AdminInvestments onSuccess={onSuccess} onError={onError} />}\r\n                {activeTab === 'governance' && <AdminGovernance onSuccess={onSuccess} onError={onError} />}\r\n                {activeTab === 'reviews' && <AdminReviews onSuccess={onSuccess} onError={onError} />}\r\n                {activeTab === 'bugs' && <AdminBugs onSuccess={onSuccess} onError={onError} />}\r\n                {activeTab === 'support' && <SupportAdminView />}\r\n            </div>\r\n\r\n            {confirmMP && (\r\n                <ConfirmModal\r\n                    isOpen={true}\r\n                    title=\"Simular Pagamento\"\r\n                    message=\"Deseja aprovar este pagamento no Sandbox?\"\r\n                    onConfirm={confirmSimulateMpPayment}\r\n                    onClose={() => setConfirmMP(null)}\r\n                />\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josia\\Desktop\\projetos\\cred30\\packages\\frontend-v2\\src\\presentation\\components\\views\\AuthScreen.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","message":"Definition for rule '@typescript-eslint/no-unused-vars' was not found.","line":1,"column":1,"endLine":1,"endColumn":2,"severity":2,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport { useNavigate, useSearchParams } from 'react-router-dom';\r\nimport { Users, KeyRound, Lock, QrCode, Repeat, ArrowLeft, Mail, ShieldCheck, XCircle, Check, Copy } from 'lucide-react';\r\nimport { loginUser, registerUser, resetPassword, verify2FA, apiService } from '../../../application/services/storage.service';\r\nimport { TermsAcceptanceModal } from '../ui/TermsAcceptanceModal';\r\nimport { User } from '../../../domain/types/common.types';\r\n\r\nexport const AuthScreen = ({ onLogin }: { onLogin: (u: User) => void }) => {\r\n    const [isRegister, setIsRegister] = useState(false);\r\n    const [isForgot, setIsForgot] = useState(false);\r\n    const [isRecover2FA, setIsRecover2FA] = useState(false); // Recuperar autenticador perdido\r\n\r\n    // Verification Modal State\r\n    const [showVerifyModal, setShowVerifyModal] = useState(false);\r\n    const [verifyEmailAddr, setVerifyEmailAddr] = useState('');\r\n    const [verifyCode, setVerifyCode] = useState('');\r\n\r\n    // Form States\r\n    const [name, setName] = useState('');\r\n    const [cpf, setCpf] = useState('');\r\n    const [email, setEmail] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [secretPhrase, setSecretPhrase] = useState('');\r\n    const [pixKey, setPixKey] = useState('');\r\n    const [referralCode, setReferralCode] = useState('');\r\n    const [newPassword, setNewPassword] = useState('');\r\n\r\n    // 2FA Setup State\r\n    const [twoFactorData, setTwoFactorData] = useState<{ secret: string, qrCode: string, otpUri: string } | null>(null);\r\n    const [is2FASetup, setIs2FASetup] = useState(false);\r\n    const [requires2FA, setRequires2FA] = useState(false);\r\n    const [twoFactorCode, setTwoFactorCode] = useState('');\r\n\r\n    // Error/Success States for Custom Alerts\r\n    const [error, setError] = useState<string | null>(null);\r\n    const [success, setSuccess] = useState<string | null>(null);\r\n    const [showTerms, setShowTerms] = useState(false);\r\n    const [pendingUser, setPendingUser] = useState<User | null>(null);\r\n\r\n    const navigate = useNavigate();\r\n    const [searchParams] = useSearchParams();\r\n\r\n    // Capturar c├│digo de indica├º├úo da URL se existir\r\n    React.useEffect(() => {\r\n        const ref = searchParams.get('ref');\r\n        if (ref) {\r\n            setReferralCode(ref.toUpperCase());\r\n            setIsRegister(true); // Se tem link de indica├º├úo, provavelmente quer cadastrar\r\n        }\r\n    }, [searchParams]);\r\n\r\n    const handleLogin = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        setError(null);\r\n        setSuccess(null);\r\n\r\n        if (isForgot) {\r\n            try {\r\n                await resetPassword(email, secretPhrase, newPassword);\r\n                setSuccess('Senha redefinida com sucesso! Fa├ºa login.');\r\n                setTimeout(() => {\r\n                    setIsForgot(false);\r\n                    setNewPassword('');\r\n                    setSuccess(null);\r\n                }, 2000);\r\n            } catch (error: any) {\r\n                setError(error.message);\r\n            }\r\n            return;\r\n        }\r\n\r\n        if (isRegister) {\r\n            // Validar campos b├ísicos antes de mostrar os termos\r\n            if (!name || !email || !password || !pixKey || !secretPhrase) {\r\n                setError(\"Por favor, preencha todos os campos obrigat├│rios.\");\r\n                return;\r\n            }\r\n            setShowTerms(true);\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const res = await loginUser(email, password, secretPhrase, twoFactorCode);\r\n\r\n            if (res.requires2FA) {\r\n                setRequires2FA(true);\r\n                setError(null);\r\n                setSuccess('C├│digo 2FA necess├írio');\r\n                return;\r\n            }\r\n\r\n            onLogin(res);\r\n        } catch (error: any) {\r\n            // Se o backend indicar que o email n├úo est├í verificado\r\n            if (error.requiresVerification) {\r\n                setVerifyEmailAddr(error.email || email);\r\n                setShowVerifyModal(true);\r\n                setError(error.message);\r\n            } else {\r\n                setError(error.message);\r\n            }\r\n        }\r\n    };\r\n\r\n    // Fun├º├úo para recuperar 2FA usando email + senha + frase secreta\r\n    const handleRecover2FA = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        setError(null);\r\n        setSuccess(null);\r\n\r\n        if (!email || !password || !secretPhrase) {\r\n            setError('Preencha email, senha e frase secreta.');\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const res = await apiService.recover2FA(email, password, secretPhrase);\r\n            if (res.success && res.data?.twoFactor) {\r\n                setTwoFactorData(res.data.twoFactor);\r\n                setVerifyEmailAddr(email);\r\n                setIs2FASetup(true);\r\n                setShowVerifyModal(true);\r\n                setSuccess('2FA recuperado! Configure novamente seu autenticador.');\r\n            } else {\r\n                setError(res.message || 'Erro ao recuperar 2FA');\r\n            }\r\n        } catch (error: any) {\r\n            setError(error.message || 'Erro ao recuperar 2FA');\r\n        }\r\n    };\r\n\r\n    const handleConfirmRegistration = async () => {\r\n        setShowTerms(false);\r\n        setError(null);\r\n        try {\r\n            const res = await registerUser(name, email, password, pixKey, secretPhrase, referralCode, cpf);\r\n            if (res.twoFactor) {\r\n                setTwoFactorData(res.twoFactor);\r\n                setVerifyEmailAddr(email);\r\n                setPendingUser(res.user);\r\n                setIs2FASetup(true);\r\n                setShowVerifyModal(true);\r\n            }\r\n        } catch (e: any) {\r\n            setError(e.message);\r\n        }\r\n    };\r\n\r\n\r\n    const handleVerifySubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        setError(null);\r\n        try {\r\n            const res = await verify2FA(verifyEmailAddr, verifyCode);\r\n            if (res.success) {\r\n                setSuccess('Conta ativada com sucesso! Entrando...');\r\n                setTimeout(() => {\r\n                    setShowVerifyModal(false);\r\n                    if (pendingUser) {\r\n                        onLogin(pendingUser);\r\n                    } else {\r\n                        setIsRegister(false);\r\n                        setIs2FASetup(false);\r\n                    }\r\n                    setSuccess(null);\r\n                }, 1500);\r\n            } else {\r\n                setError(res.message);\r\n            }\r\n        } catch (e: any) {\r\n            setError(e.message);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"min-h-screen w-full flex bg-gradient-premium overflow-hidden\">\r\n            {/* Desktop Side Image */}\r\n            <div className=\"hidden lg:flex w-1/2 bg-zinc-900 relative overflow-hidden items-center justify-center\">\r\n                <div className=\"absolute inset-0 z-0\">\r\n                    <img\r\n                        src=\"https://images.unsplash.com/photo-1639762681485-074b7f938ba0?q=80&w=2832&auto=format&fit=crop\"\r\n                        alt=\"Background\"\r\n                        className=\"w-full h-full object-cover opacity-30\"\r\n                    />\r\n                    <div className=\"absolute inset-0 bg-gradient-to-t from-background via-background/40 to-transparent\" />\r\n                    <div className=\"absolute inset-0 bg-gradient-to-r from-background via-transparent to-transparent\" />\r\n                </div>\r\n\r\n                <div className=\"relative z-10 p-12 max-w-lg text-center\">\r\n                    <div className=\"w-24 h-24 bg-primary-500/10 rounded-3xl flex items-center justify-center mx-auto mb-8 border border-primary-500/20 shadow-[0_0_40px_rgba(6,182,212,0.2)]\">\r\n                        <img src=\"/pwa-192x192.png\" alt=\"Cred30 Logo\" className=\"w-16 h-16 drop-shadow-2xl\" />\r\n                    </div>\r\n                    <h1 className=\"text-5xl font-black text-white mb-6 tracking-tight\">\r\n                        Cred<span className=\"text-primary-400\">30</span>\r\n                    </h1>\r\n                    <p className=\"text-xl text-zinc-400 font-medium leading-relaxed\">\r\n                        A revolu├º├úo do microcr├®dito associativo.\r\n                        <br />\r\n                        <span className=\"text-primary-400\">Sem juros abusivos. Sem bancos.</span>\r\n                    </p>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Form Side */}\r\n            <div className=\"w-full lg:w-1/2 flex items-center justify-center p-4 sm:p-8 md:p-12 relative overflow-y-auto\">\r\n                <div className=\"w-full max-w-md space-y-8\">\r\n                    {/* Header Mobile Only */}\r\n                    <div className=\"lg:hidden text-center mb-8\">\r\n                        <div className=\"w-16 h-16 bg-primary-500/10 rounded-2xl flex items-center justify-center mx-auto mb-4 border border-primary-500/20\">\r\n                            <img src=\"/pwa-192x192.png\" alt=\"Cred30 Logo\" className=\"w-10 h-10\" />\r\n                        </div>\r\n                        <h2 className=\"text-2xl font-black text-white\">Cred<span className=\"text-primary-400\">30</span></h2>\r\n                    </div>\r\n\r\n                    <div className=\"glass p-6 sm:p-10 rounded-[2.5rem] relative overflow-hidden animate-fade-in shadow-2xl shadow-primary-500/5\">\r\n                        <div className=\"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-primary-400 via-emerald-400 to-primary-600\"></div>\r\n\r\n                        {/* Bot├úo Voltar para Boas-Vindas */}\r\n                        {!isForgot && !isRecover2FA && !requires2FA && (\r\n                            <button\r\n                                onClick={() => navigate('/')}\r\n                                className=\"mb-6 flex items-center gap-2 text-zinc-500 hover:text-white text-xs font-medium transition-colors\"\r\n                            >\r\n                                <ArrowLeft size={14} />\r\n                                Voltar para in├¡cio\r\n                            </button>\r\n                        )}\r\n\r\n                        {/* Custom Error Alert */}\r\n                        {error && (\r\n                            <div className=\"mb-6 bg-red-500/10 border border-red-500/20 text-red-500 p-4 rounded-xl flex items-center gap-3 animate-in fade-in slide-in-from-top-2\">\r\n                                <XCircle size={20} className=\"shrink-0\" />\r\n                                <p className=\"text-sm font-medium flex-1 leading-tight\">{error}</p>\r\n                                <button onClick={() => setError(null)} className=\"hover:text-white\"><XCircle size={16} /></button>\r\n                            </div>\r\n                        )}\r\n\r\n                        {/* Custom Success Alert */}\r\n                        {success && (\r\n                            <div className=\"mb-6 bg-emerald-500/10 border border-emerald-500/20 text-emerald-500 p-4 rounded-xl flex items-center gap-3 animate-in fade-in slide-in-from-top-2\">\r\n                                <Check size={20} className=\"shrink-0\" />\r\n                                <p className=\"text-sm font-medium\">{success}</p>\r\n                            </div>\r\n                        )}\r\n\r\n                        <form onSubmit={handleLogin} method=\"POST\" className=\"space-y-4\">\r\n                            {isForgot ? (\r\n                                <>\r\n                                    <div className=\"text-center mb-6\">\r\n                                        <h2 className=\"text-white text-xl font-bold\">Recuperar Senha</h2>\r\n                                        <p className=\"text-zinc-500 text-xs mt-1\">Insira seus dados para redefinir o acesso</p>\r\n                                    </div>\r\n                                    <div className=\"space-y-4\">\r\n                                        <div className=\"relative group\">\r\n                                            <Users className=\"absolute left-3 top-3.5 text-zinc-500 group-focus-within:text-primary-400 transition-colors\" size={20} />\r\n                                            <input\r\n                                                type=\"email\"\r\n                                                name=\"email\"\r\n                                                placeholder=\"Email\"\r\n                                                value={email}\r\n                                                onChange={e => setEmail(e.target.value)}\r\n                                                className=\"w-full glass border-white/5 rounded-xl py-3.5 pl-10 text-white focus:border-primary-500 outline-none transition-all group-focus-within:bg-white/10\"\r\n                                                required\r\n                                            />\r\n                                        </div>\r\n                                        <div className=\"relative group\">\r\n                                            <KeyRound className=\"absolute left-3 top-3.5 text-zinc-500 group-focus-within:text-primary-400 transition-colors\" size={20} />\r\n                                            <input\r\n                                                type=\"text\"\r\n                                                name=\"secretPhrase\"\r\n                                                placeholder=\"Frase Secreta\"\r\n                                                value={secretPhrase}\r\n                                                onChange={e => setSecretPhrase(e.target.value)}\r\n                                                className=\"w-full glass border-white/5 rounded-xl py-3.5 pl-10 text-white focus:border-primary-500 outline-none transition-all group-focus-within:bg-white/10\"\r\n                                                required\r\n                                            />\r\n                                        </div>\r\n                                        <div className=\"relative group\">\r\n                                            <Lock className=\"absolute left-3 top-3.5 text-zinc-500 group-focus-within:text-primary-400 transition-colors\" size={20} />\r\n                                            <input\r\n                                                type=\"password\"\r\n                                                name=\"new-password\"\r\n                                                placeholder=\"Nova Senha\"\r\n                                                value={newPassword}\r\n                                                onChange={e => setNewPassword(e.target.value)}\r\n                                                className=\"w-full glass border-white/5 rounded-xl py-3.5 pl-10 text-white focus:border-primary-500 outline-none transition-all group-focus-within:bg-white/10\"\r\n                                                required\r\n                                            />\r\n                                        </div>\r\n                                    </div>\r\n                                    <button type=\"submit\" className=\"w-full bg-primary-500 hover:bg-primary-400 text-black font-black uppercase tracking-wider py-4 rounded-xl transition-all shadow-lg shadow-primary-500/20 mt-2\">\r\n                                        Redefinir Senha\r\n                                    </button>\r\n                                    <button type=\"button\" onClick={() => setIsForgot(false)} className=\"w-full py-2 text-zinc-500 hover:text-white text-xs font-bold transition-colors\">\r\n                                        Voltar para Login\r\n                                    </button>\r\n                                </>\r\n                            ) : isRecover2FA ? (\r\n                                <>\r\n                                    <div className=\"text-center mb-6\">\r\n                                        <ShieldCheck className=\"mx-auto text-primary-400 mb-4\" size={48} />\r\n                                        <h2 className=\"text-white text-xl font-bold\">Recuperar Autenticador</h2>\r\n                                        <p className=\"text-zinc-500 text-xs mt-2 px-4\">\r\n                                            Use suas credenciais mestre para gerar um novo segredo 2FA.\r\n                                        </p>\r\n                                    </div>\r\n\r\n                                    <div className=\"space-y-4\">\r\n                                        <div className=\"relative group\">\r\n                                            <Users className=\"absolute left-3 top-3.5 text-zinc-500 group-focus-within:text-primary-400 transition-colors\" size={20} />\r\n                                            <input\r\n                                                type=\"email\"\r\n                                                placeholder=\"Email Cadastrado\"\r\n                                                value={email}\r\n                                                onChange={e => setEmail(e.target.value)}\r\n                                                className=\"w-full bg-background border border-surfaceHighlight rounded-xl py-3.5 pl-10 text-white focus:border-primary-500 outline-none transition\"\r\n                                                required\r\n                                            />\r\n                                        </div>\r\n                                        <div className=\"relative group\">\r\n                                            <Lock className=\"absolute left-3 top-3.5 text-zinc-500 group-focus-within:text-primary-400 transition-colors\" size={20} />\r\n                                            <input\r\n                                                type=\"password\"\r\n                                                placeholder=\"Sua Senha\"\r\n                                                value={password}\r\n                                                onChange={e => setPassword(e.target.value)}\r\n                                                className=\"w-full bg-background border border-surfaceHighlight rounded-xl py-3.5 pl-10 text-white focus:border-primary-500 outline-none transition\"\r\n                                                required\r\n                                            />\r\n                                        </div>\r\n                                        <div className=\"relative group\">\r\n                                            <KeyRound className=\"absolute left-3 top-3.5 text-zinc-500 group-focus-within:text-primary-400 transition-colors\" size={20} />\r\n                                            <input\r\n                                                type=\"text\"\r\n                                                placeholder=\"Frase Secreta\"\r\n                                                value={secretPhrase}\r\n                                                onChange={e => setSecretPhrase(e.target.value)}\r\n                                                className=\"w-full bg-background border border-surfaceHighlight rounded-xl py-3.5 pl-10 text-white focus:border-primary-500 outline-none transition\"\r\n                                                required\r\n                                            />\r\n                                        </div>\r\n                                    </div>\r\n                                    <button type=\"button\" onClick={handleRecover2FA} className=\"w-full bg-primary-500 hover:bg-primary-400 text-black font-black uppercase tracking-wider py-4 rounded-xl transition-all shadow-lg shadow-primary-500/20 mt-4\">\r\n                                        Recuperar Acesso\r\n                                    </button>\r\n                                    <button type=\"button\" onClick={() => setIsRecover2FA(false)} className=\"w-full py-2 text-zinc-500 hover:text-white text-xs font-bold transition-colors\">\r\n                                        Cancelar\r\n                                    </button>\r\n                                </>\r\n                            ) : (\r\n                                <>\r\n                                    <div className=\"text-center mb-8 hidden lg:block\">\r\n                                        <h2 className=\"text-2xl font-bold text-white mb-1\">\r\n                                            {isRegister ? 'Criar Conta' : 'Boas vindas'}\r\n                                        </h2>\r\n                                        <p className=\"text-zinc-500 text-sm\">\r\n                                            {isRegister ? 'Preencha os dados abaixo para come├ºar.' : 'Entre para acessar sua carteira.'}\r\n                                        </p>\r\n                                    </div>\r\n\r\n                                    {isRegister && (\r\n                                        <div className=\"relative group animate-in slide-in-from-left-2 duration-300\">\r\n                                            <Users className=\"absolute left-3 top-3.5 text-zinc-500 group-focus-within:text-primary-400 transition-colors\" size={18} />\r\n                                            <input\r\n                                                type=\"text\"\r\n                                                placeholder=\"Nome Completo\"\r\n                                                value={name}\r\n                                                onChange={e => setName(e.target.value)}\r\n                                                className=\"w-full glass border-white/5 rounded-xl py-3.5 pl-10 text-sm text-white focus:border-primary-500 outline-none transition-all group-focus-within:bg-white/10\"\r\n                                                required\r\n                                            />\r\n                                        </div>\r\n                                    )}\r\n\r\n                                    <div className=\"relative group\">\r\n                                        <Mail className=\"absolute left-3 top-3.5 text-zinc-500 group-focus-within:text-primary-400 transition-colors\" size={18} />\r\n                                        <input\r\n                                            type=\"email\"\r\n                                            placeholder=\"Email\"\r\n                                            value={email}\r\n                                            onChange={e => setEmail(e.target.value)}\r\n                                            className=\"w-full glass border-white/5 rounded-xl py-3.5 pl-10 text-sm text-white focus:border-primary-500 outline-none transition-all group-focus-within:bg-white/10\"\r\n                                            required\r\n                                        />\r\n                                    </div>\r\n\r\n                                    <div className=\"relative group\">\r\n                                        <Lock className=\"absolute left-3 top-3.5 text-zinc-500 group-focus-within:text-primary-400 transition-colors\" size={18} />\r\n                                        <input\r\n                                            type=\"password\"\r\n                                            placeholder=\"Senha\"\r\n                                            value={password}\r\n                                            onChange={e => setPassword(e.target.value)}\r\n                                            className=\"w-full glass border-white/5 rounded-xl py-3.5 pl-10 text-sm text-white focus:border-primary-500 outline-none transition-all group-focus-within:bg-white/10\"\r\n                                            required\r\n                                        />\r\n                                    </div>\r\n\r\n                                    <div className=\"relative group\">\r\n                                        <KeyRound className=\"absolute left-3 top-3.5 text-zinc-500 group-focus-within:text-primary-400 transition-colors\" size={18} />\r\n                                        <input\r\n                                            type=\"password\"\r\n                                            placeholder={isRegister ? \"Crie sua Frase Secreta\" : \"Frase Secreta\"}\r\n                                            value={secretPhrase}\r\n                                            onChange={e => setSecretPhrase(e.target.value)}\r\n                                            className=\"w-full glass border-white/5 rounded-xl py-3.5 pl-10 text-sm text-white focus:border-primary-500 outline-none transition-all group-focus-within:bg-white/10\"\r\n                                            required\r\n                                        />\r\n                                    </div>\r\n\r\n                                    {isRegister && (\r\n                                        <>\r\n                                            <div className=\"relative group animate-in slide-in-from-left-2 duration-300 delay-75\">\r\n                                                <ShieldCheck className=\"absolute left-3 top-3.5 text-zinc-500 group-focus-within:text-primary-400 transition-colors\" size={18} />\r\n                                                <input\r\n                                                    type=\"text\"\r\n                                                    placeholder=\"CPF (apenas n├║meros)\"\r\n                                                    value={cpf}\r\n                                                    onChange={e => setCpf(e.target.value.replace(/\\D/g, '').slice(0, 11))}\r\n                                                    className=\"w-full glass border-white/5 rounded-xl py-3.5 pl-10 text-sm text-white focus:border-primary-500 outline-none transition-all group-focus-within:bg-white/10\"\r\n                                                    required\r\n                                                />\r\n                                            </div>\r\n\r\n                                            <div className=\"relative group animate-in slide-in-from-left-2 duration-300 delay-100\">\r\n                                                <QrCode className=\"absolute left-3 top-3.5 text-zinc-500 group-focus-within:text-primary-400 transition-colors\" size={18} />\r\n                                                <input\r\n                                                    type=\"text\"\r\n                                                    placeholder=\"Chave Pix\"\r\n                                                    value={pixKey}\r\n                                                    onChange={e => setPixKey(e.target.value)}\r\n                                                    className=\"w-full glass border-white/5 rounded-xl py-3.5 pl-10 text-sm text-white focus:border-primary-500 outline-none transition-all group-focus-within:bg-white/10\"\r\n                                                    required\r\n                                                />\r\n                                            </div>\r\n\r\n                                            <div className=\"relative group animate-in slide-in-from-left-2 duration-300 delay-150\">\r\n                                                <Repeat className=\"absolute left-3 top-3.5 text-zinc-500 group-focus-within:text-primary-400 transition-colors\" size={18} />\r\n                                                <input\r\n                                                    type=\"text\"\r\n                                                    placeholder=\"C├│digo de Indica├º├úo (Recomendado)\"\r\n                                                    value={referralCode}\r\n                                                    onChange={e => setReferralCode(e.target.value.toUpperCase())}\r\n                                                    className=\"w-full glass border-primary-500/30 rounded-xl py-3.5 pl-10 text-sm text-white focus:border-primary-500 outline-none transition-all bg-primary-500/5 group-focus-within:bg-primary-500/10 placeholder:text-primary-500/30\"\r\n                                                />\r\n                                            </div>\r\n                                        </>\r\n                                    )}\r\n\r\n                                    {requires2FA && (\r\n                                        <div className=\"space-y-4 animate-in fade-in slide-in-from-bottom-4 bg-primary-500/5 p-4 rounded-xl border border-primary-500/20\">\r\n                                            <div className=\"flex items-center gap-3 mb-2\">\r\n                                                <div className=\"p-2 bg-primary-500/20 rounded-lg text-primary-400\">\r\n                                                    <ShieldCheck size={20} />\r\n                                                </div>\r\n                                                <div>\r\n                                                    <p className=\"text-white font-bold text-sm\">Autentica├º├úo 2FA</p>\r\n                                                    <p className=\"text-[10px] text-zinc-400\">Digite o c├│digo do seu app</p>\r\n                                                </div>\r\n                                            </div>\r\n                                            <input\r\n                                                type=\"text\"\r\n                                                placeholder=\"000 000\"\r\n                                                inputMode=\"numeric\"\r\n                                                maxLength={6}\r\n                                                value={twoFactorCode}\r\n                                                onChange={e => setTwoFactorCode(e.target.value.replace(/\\D/g, ''))}\r\n                                                className=\"w-full bg-background/50 border border-primary-500/40 rounded-xl py-3 text-center text-white text-xl tracking-[0.5em] font-mono focus:border-primary-500 outline-none transition\"\r\n                                                autoFocus\r\n                                            />\r\n                                        </div>\r\n                                    )}\r\n\r\n                                    <button\r\n                                        type=\"submit\"\r\n                                        className=\"w-full bg-white hover:bg-zinc-100 text-black font-black uppercase tracking-[0.2em] py-5 rounded-xl transition-all shadow-xl active:scale-95 mt-6\"\r\n                                    >\r\n                                        {isRegister ? 'Solicitar Ades├úo' : (requires2FA ? 'Confirmar' : 'Acessar Painel')}\r\n                                    </button>\r\n                                </>\r\n                            )}\r\n                        </form>\r\n\r\n                        {!isForgot && !isRecover2FA && (\r\n                            <div className=\"mt-6 pt-6 border-t border-white/5 space-y-4\">\r\n                                <p className=\"text-zinc-400 text-xs text-center\">\r\n                                    {isRegister ? 'J├í ├® membro?' : 'Ainda n├úo ├® membro?'}\r\n                                    <button\r\n                                        onClick={() => setIsRegister(!isRegister)}\r\n                                        className=\"ml-2 text-primary-400 hover:text-white font-bold transition-colors underline decoration-primary-500/30\"\r\n                                    >\r\n                                        {isRegister ? 'Fazer Login' : 'Solicitar Convite'}\r\n                                    </button>\r\n                                </p>\r\n\r\n                                {!isRegister && (\r\n                                    <div className=\"flex justify-center gap-6\">\r\n                                        <button onClick={() => setIsForgot(true)} className=\"text-[10px] text-zinc-500 hover:text-zinc-300 font-medium\">\r\n                                            Esqueci a senha\r\n                                        </button>\r\n                                        <button onClick={() => setIsRecover2FA(true)} className=\"text-[10px] text-zinc-500 hover:text-zinc-300 font-medium\">\r\n                                            Perdi o 2FA\r\n                                        </button>\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n\r\n                    <footer className=\"text-center\">\r\n                        <div className=\"flex justify-center gap-6 text-[10px] text-zinc-600 mb-2\">\r\n                            <a href=\"/terms\" className=\"hover:text-zinc-400\">Termos</a>\r\n                            <a href=\"/privacy\" className=\"hover:text-zinc-400\">Privacidade</a>\r\n                            <a href=\"/support\" className=\"hover:text-zinc-400\">Suporte</a>\r\n                        </div>\r\n                        <p className=\"text-[10px] text-zinc-700\">┬® 2025 Cred30 Social Bank</p>\r\n                    </footer>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Email Verification Modal - Mantido Global */}\r\n            {showVerifyModal && (\r\n                <div className=\"fixed inset-0 bg-black/95 flex items-center justify-center z-[200] p-4 animate-in fade-in duration-300 backdrop-blur-md\">\r\n                    <div className=\"glass-strong p-6 md:p-10 w-full max-w-md relative animate-fade-in shadow-[0_0_80px_rgba(6,182,212,0.15)] max-h-[90vh] overflow-y-auto custom-scrollbar rounded-[2.5rem]\">\r\n                        <button onClick={() => setShowVerifyModal(false)} className=\"absolute top-4 right-4 md:top-6 md:right-6 text-zinc-500 hover:text-white transition-colors z-10\" aria-label=\"Fechar modal\">\r\n                            <XCircle size={24} />\r\n                        </button>\r\n\r\n                        <div className=\"text-center mb-8\">\r\n                            <div className=\"w-20 h-20 bg-primary-500/20 rounded-3xl flex items-center justify-center mx-auto mb-6 transform rotate-3 shadow-inner\">\r\n                                <ShieldCheck size={40} className=\"text-primary-500\" />\r\n                            </div>\r\n                            <h3 className=\"text-2xl font-bold text-white mb-2\">Configurar Autenticador</h3>\r\n                            <p className=\"text-zinc-400 text-sm leading-relaxed\">\r\n                                Escaneie o QR Code abaixo com o <strong>Google Authenticator</strong> ou <strong>Authy</strong>.\r\n                            </p>\r\n                        </div>\r\n\r\n                        {twoFactorData?.qrCode && (\r\n                            <div className=\"space-y-6 mb-8\">\r\n                                <div className=\"bg-white p-4 rounded-3xl mx-auto w-fit shadow-[0_0_30px_rgba(255,255,255,0.1)] transition-transform hover:scale-105\">\r\n                                    <img src={twoFactorData.qrCode} alt=\"2FA QR Code\" className=\"w-48 h-48\" />\r\n                                </div>\r\n\r\n                                {twoFactorData?.otpUri && (\r\n                                    <a\r\n                                        href={twoFactorData.otpUri}\r\n                                        className=\"w-full bg-primary-500/10 hover:bg-primary-500/20 text-primary-400 border border-primary-500/30 py-4 rounded-2xl flex items-center justify-center gap-2 text-sm font-bold transition-all group\"\r\n                                    >\r\n                                        <ShieldCheck size={20} className=\"group-hover:scale-110 transition-transform\" />\r\n                                        Configurar no Navegador (Extens├úo)\r\n                                    </a>\r\n                                )}\r\n                            </div>\r\n                        )}\r\n\r\n                        <div className=\"bg-zinc-900/50 border border-zinc-800 rounded-3xl p-5 mb-8 space-y-4\">\r\n                            <div className=\"flex justify-between items-start border-b border-white/5 pb-3\">\r\n                                <div>\r\n                                    <p className=\"text-[10px] text-zinc-500 uppercase tracking-widest font-bold mb-1\">Emissor</p>\r\n                                    <p className=\"text-white font-medium\">Cred30</p>\r\n                                </div>\r\n                                <div className=\"text-right\">\r\n                                    <p className=\"text-[10px] text-zinc-500 uppercase tracking-widest font-bold mb-1\">Conta</p>\r\n                                    <p className=\"text-white font-medium truncate max-w-[120px]\">{verifyEmailAddr}</p>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div>\r\n                                <p className=\"text-[10px] text-zinc-500 uppercase tracking-widest font-bold mb-2\">Chave Secreta</p>\r\n                                <div className=\"flex items-center gap-2\">\r\n                                    <div className=\"flex-1 bg-black/40 border border-white/10 rounded-xl px-4 py-3 font-mono text-primary-400 text-lg font-bold tracking-wider overflow-x-auto whitespace-nowrap hide-scrollbar\">\r\n                                        {twoFactorData?.secret}\r\n                                    </div>\r\n                                    <button\r\n                                        onClick={() => {\r\n                                            navigator.clipboard.writeText(twoFactorData?.secret || '');\r\n                                            setSuccess('Chave copiada!');\r\n                                            setTimeout(() => setSuccess(null), 2000);\r\n                                        }}\r\n                                        className=\"h-12 w-12 bg-primary-500/10 hover:bg-primary-500/20 text-primary-400 border border-primary-500/30 rounded-xl flex items-center justify-center transition-all active:scale-90\"\r\n                                        title=\"Copiar Chave\"\r\n                                    >\r\n                                        <Copy size={20} />\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {error && (\r\n                            <div className=\"mb-6 bg-red-500/10 border border-red-500/20 text-red-500 p-4 rounded-2xl text-sm flex items-center gap-3\">\r\n                                <XCircle size={18} />\r\n                                <p className=\"leading-tight flex-1\">{error}</p>\r\n                            </div>\r\n                        )}\r\n\r\n                        <form onSubmit={handleVerifySubmit} className=\"space-y-4\">\r\n                            <div className=\"space-y-2\">\r\n                                <label className=\"text-xs font-bold text-zinc-500 uppercase tracking-widest ml-1\">C├│digo de Confirma├º├úo</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    name=\"verifyCode\"\r\n                                    placeholder=\"000000\"\r\n                                    inputMode=\"numeric\"\r\n                                    autoComplete=\"one-time-code\"\r\n                                    value={verifyCode}\r\n                                    onChange={e => setVerifyCode(e.target.value.replace(/\\D/g, '').slice(0, 6))}\r\n                                    className=\"w-full bg-background border border-surfaceHighlight rounded-2xl py-5 text-center text-white text-3xl tracking-[0.4em] font-mono focus:border-primary-500 outline-none transition shadow-inner\"\r\n                                    autoFocus\r\n                                    required\r\n                                />\r\n                            </div>\r\n                            <button\r\n                                type=\"submit\"\r\n                                className=\"w-full bg-primary-500 hover:bg-primary-400 text-black font-bold py-5 rounded-2xl transition-all shadow-[0_10px_30px_rgba(6,182,212,0.3)] flex items-center justify-center gap-3 text-lg mt-4 group\"\r\n                            >\r\n                                <ShieldCheck size={22} className=\"group-hover:scale-110 transition-transform\" />\r\n                                Ativar 2FA e Entrar\r\n                            </button>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            <TermsAcceptanceModal\r\n                isOpen={showTerms}\r\n                onClose={() => setShowTerms(false)}\r\n                onAccept={handleConfirmRegistration}\r\n            />\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josia\\Desktop\\projetos\\cred30\\packages\\frontend-v2\\src\\presentation\\components\\views\\Dashboard.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","message":"Definition for rule '@typescript-eslint/no-unused-vars' was not found.","line":1,"column":1,"endLine":1,"endColumn":2,"severity":2,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useMemo, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport {\r\n    Users, Gamepad2, TrendingUp, ArrowUpFromLine, BookOpen,\r\n    Crown, Clock, ArrowDownLeft, ArrowUpRight,\r\n    PieChart, Star, Zap,\r\n    ShieldCheck, ChevronRight, Wallet, Settings, BarChart3, Gift, Sparkles, Eye, EyeOff\r\n} from 'lucide-react';\r\nimport { AppState, User, Transaction, Quota, Loan } from '../../../domain/types/common.types';\r\nimport { apiService } from '../../../application/services/api.service';\r\nimport { LoadingScreen } from '../ui/LoadingScreen';\r\n\r\ninterface DashboardProps {\r\n    state: AppState;\r\n    onBuyQuota: () => void;\r\n    onGames: () => void;\r\n    onLoans: () => void;\r\n    onWithdraw: () => void;\r\n    onRefer: () => void;\r\n    onSuccess: (title: string, message: string) => void;\r\n    onError: (title: string, message: string) => void;\r\n    onEducation: () => void;\r\n    onVoting: () => void;\r\n}\r\n\r\nexport const Dashboard = ({ state, onBuyQuota, onGames, onLoans, onWithdraw, onRefer, onSuccess, onError, onEducation, onVoting }: DashboardProps) => {\r\n    const user = state?.currentUser;\r\n\r\n    // Guard clause: prevent crash if state or user is not loaded yet\r\n    if (!state || !user) {\r\n        return <LoadingScreen fullScreen message=\"Sincronizando seu Painel...\" />;\r\n    }\r\n\r\n    // Usu├írios PRO n├úo veem an├║ncios\r\n    const isPro = user?.membership_type === 'PRO';\r\n\r\n    const { userQuotas, totalInvested, totalCurrentValue, totalEarnings, earningsPercentage } = useMemo(() => {\r\n        const quotas = state.quotas?.filter((q: Quota) => q.userId === user.id) ?? [];\r\n        const invested = quotas.reduce((acc: number, q: Quota) => acc + q.purchasePrice, 0);\r\n        const current = quotas.reduce((acc: number, q: Quota) => acc + (q.currentValue || q.purchasePrice), 0);\r\n        const earnings = current - invested;\r\n        const percentage = invested > 0 ? (earnings / invested) * 100 : 0;\r\n        return { userQuotas: quotas, totalInvested: invested, totalCurrentValue: current, totalEarnings: earnings, earningsPercentage: percentage };\r\n    }, [state.quotas, user.id]);\r\n\r\n    const { userLoans, totalDebt } = useMemo(() => {\r\n        const loans = state.loans?.filter((l: Loan) => l.userId === user.id && l.status === 'APPROVED') ?? [];\r\n        const debt = loans.reduce((acc: number, l: Loan) => acc + l.totalRepayment, 0);\r\n        return { userLoans: loans, totalDebt: debt };\r\n    }, [state.loans, user.id]);\r\n\r\n    const navigate = useNavigate();\r\n\r\n    // Benef├¡cio de boas-vindas vem do estado global (sincronizado)\r\n    const welcomeBenefit = state.welcomeBenefit;\r\n\r\n    // Estados para o Ba├║ de Recompensas (sincronizado com backend)\r\n    const [chestCountdown, setChestCountdown] = useState(0);\r\n    const [chestsRemaining, setChestsRemaining] = useState(3);\r\n    const [isOpeningChest, setIsOpeningChest] = useState(false);\r\n    const [showValues, setShowValues] = useState(true);\r\n\r\n    // Buscar status do ba├║ do backend ao carregar\r\n    useEffect(() => {\r\n        const fetchChestStatus = async () => {\r\n            try {\r\n                const response = await apiService.get('/earn/chest-status') as any;\r\n                if (response.success) {\r\n                    setChestsRemaining(response.chestsRemaining ?? 3);\r\n                    setChestCountdown(response.countdown ?? 0);\r\n                }\r\n            } catch (error) {\r\n                console.error('Erro ao buscar status do ba├║:', error);\r\n            }\r\n        };\r\n        fetchChestStatus();\r\n    }, []);\r\n\r\n    // Memoizar transa├º├Áes recentes do estado global\r\n    const recentTransactions = useMemo(() => {\r\n        if (!state.transactions) return [];\r\n        return [...state.transactions]\r\n            .filter(t => t.userId === user.id)\r\n            .sort((a: Transaction, b: Transaction) =>\r\n                new Date((b.created_at || b.date)!).getTime() - new Date((a.created_at || a.date)!).getTime()\r\n            )\r\n            .slice(0, 5);\r\n    }, [state.transactions, user.id]);\r\n\r\n\r\n    const handleOpenChest = async () => {\r\n        if (chestsRemaining <= 0 || chestCountdown > 0 || isOpeningChest) return;\r\n\r\n        // Abrir link do an├║ncio (Faturamento para o dono)\r\n        window.open('https://www.effectivegatecpm.com/ec4mxdzvs?key=a9eefff1a8aa7769523373a66ff484aa', '_blank');\r\n\r\n        setIsOpeningChest(true);\r\n\r\n        // Aguardar 5 segundos (tempo do an├║ncio) e depois chamar API\r\n        setTimeout(async () => {\r\n            try {\r\n                // R$ 0,01 a R$ 0,03 (Lucro garantido: CPM de R$ 0,04 - R$ 0,06)\r\n                const reward = (Math.random() * (0.03 - 0.01) + 0.01).toFixed(2);\r\n                const response = await apiService.post('/earn/chest-reward', { amount: parseFloat(reward) }) as any;\r\n\r\n                if (response.success) {\r\n                    onSuccess(\"Ba├║ Aberto!\", response.message || `Voc├¬ recebeu R$ ${reward}!`);\r\n                    setChestsRemaining(response.chestsRemaining ?? chestsRemaining - 1);\r\n                    setChestCountdown(3600); // 1 hora de intervalo\r\n                } else {\r\n                    onError(\"Erro\", response.message || \"N├úo foi poss├¡vel abrir o ba├║\");\r\n                }\r\n            } catch (error: any) {\r\n                console.error(error);\r\n                onError(\"Erro\", error.message || \"Erro ao abrir o ba├║\");\r\n            } finally {\r\n                setIsOpeningChest(false);\r\n            }\r\n        }, 5000);\r\n    };\r\n\r\n    // Timer para countdown\r\n    useEffect(() => {\r\n        let timer: any;\r\n        if (chestCountdown > 0) {\r\n            timer = setInterval(() => setChestCountdown(prev => Math.max(0, prev - 1)), 1000);\r\n        }\r\n        return () => clearInterval(timer);\r\n    }, [chestCountdown]);\r\n\r\n    const formatCountdown = (s: number) => {\r\n        const m = Math.floor(s / 60);\r\n        const sec = s % 60;\r\n        return `${m}:${sec.toString().padStart(2, '0')}`;\r\n    };\r\n\r\n    const getVipLevel = (quotas: number) => {\r\n        if (quotas >= 100) return { name: 'Fundador', color: 'bg-primary-600/20 text-primary-400 border-primary-500/30' };\r\n        if (quotas >= 50) return { name: 'Ouro', color: 'bg-yellow-500/20 text-yellow-500 border-yellow-500/30' };\r\n        if (quotas >= 10) return { name: 'Prata', color: 'bg-zinc-400/20 text-zinc-300 border-zinc-400/30' };\r\n        return { name: 'Bronze', color: 'bg-orange-700/20 text-orange-600 border-orange-700/30' };\r\n    };\r\n\r\n    const vipLevel = getVipLevel(userQuotas.length);\r\n    const getNextLevelInfo = (level: string) => {\r\n        if (level === 'Bronze') return { next: 'Prata', goal: 10 };\r\n        if (level === 'Prata') return { next: 'Ouro', goal: 50 };\r\n        if (level === 'Ouro') return { next: 'Fundador', goal: 100 };\r\n        return { next: null, goal: 100 };\r\n    };\r\n\r\n    const nextLevel = getNextLevelInfo(vipLevel.name);\r\n    const progressToNext = nextLevel.next ? Math.min((userQuotas.length / nextLevel.goal) * 100, 100) : 100;\r\n\r\n    const formatCurrency = (val: number) => val.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });\r\n\r\n    const isPositive = (type: string) => ['DEPOSIT', 'DIVIDEND', 'REFERRAL_BONUS', 'LOAN_RECEIVED', 'QUOTA_SELL', 'EDUCATION_REWARD', 'GAME_WIN', 'ADMIN_GIFT'].includes(type);\r\n\r\n    const isLocked = user.securityLockUntil ? new Date(user.securityLockUntil).getTime() > Date.now() : false;\r\n    const lockTimeRemaining = user.securityLockUntil ? Math.ceil((new Date(user.securityLockUntil).getTime() - Date.now()) / (1000 * 60 * 60)) : 0;\r\n\r\n    return (\r\n        <div className=\"space-y-6 pb-24\">\r\n            {/* 1. Header com Boas-Vindas */}\r\n            <div className=\"relative overflow-hidden rounded-3xl glass p-5 sm:p-8 animate-fade-in animate-float\">\r\n                <div className=\"absolute top-0 right-0 p-6 opacity-10 pointer-events-none select-none\">\r\n                    <Sparkles size={120} className=\"text-primary-400\" />\r\n                </div>\r\n\r\n                <div className=\"relative z-10\">\r\n                    <div className=\"flex items-center gap-3 mb-6\">\r\n                        <div className=\"px-4 py-1.5 rounded-full bg-primary-500/10 border border-primary-500/20 flex items-center gap-2\">\r\n                            <Crown size={14} className=\"text-primary-400\" fill=\"currentColor\" />\r\n                            <span className=\"text-[10px] font-black uppercase tracking-[0.2em] text-primary-400\">Associado Fundador</span>\r\n                        </div>\r\n                        <div className=\"flex items-center gap-2 bg-emerald-500/10 px-3 py-1.5 rounded-full border border-emerald-500/20\">\r\n                            <div className=\"w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse\" />\r\n                            <span className=\"text-[10px] font-black text-emerald-400 uppercase tracking-wider\">Verificado</span>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-end gap-6\">\r\n                        <div>\r\n                            <p className=\"text-zinc-500 font-bold text-sm mb-1 uppercase tracking-widest flex items-center gap-2\">\r\n                                {new Date().getHours() < 12 ? 'Bom dia' : new Date().getHours() < 18 ? 'Boa tarde' : 'Boa noite'}\r\n                                <span className=\"w-1 h-1 rounded-full bg-zinc-700\" />\r\n                                {new Date().toLocaleDateString('pt-BR', { weekday: 'long' })}\r\n                            </p>\r\n                            <h1 className=\"text-4xl sm:text-5xl font-black text-white tracking-tight leading-none text-gradient\">\r\n                                {user.name.split(' ')[0]}<span className=\"text-white\">.</span>\r\n                            </h1>\r\n                        </div>\r\n\r\n                        <div className=\"flex items-center gap-4\">\r\n                            <div className=\"text-right\">\r\n                                <p className=\"text-[10px] text-zinc-500 font-black uppercase tracking-widest mb-1\">Impacto Democr├ítico</p>\r\n                                <div\r\n                                    onClick={onVoting}\r\n                                    className=\"cursor-pointer flex items-center gap-2 glass px-4 py-2 rounded-2xl hover:bg-white/10 transition-all active:scale-95\"\r\n                                >\r\n                                    <BarChart3 size={16} className=\"text-primary-400\" />\r\n                                    <span className=\"text-xl font-black text-white\">\r\n                                        {((1 + Math.sqrt(userQuotas.length)) * (1 + (user.score || 0) / 1000)).toFixed(1)}\r\n                                    </span>\r\n                                </div>\r\n                            </div>\r\n                            <button\r\n                                onClick={() => navigate('/app/settings')}\r\n                                className=\"w-14 h-14 glass glass-hover rounded-2xl flex items-center justify-center group\"\r\n                            >\r\n                                <Settings size={24} className=\"text-zinc-400 group-hover:text-white transition-colors\" />\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                    {/* Stats Grid - Score e N├¡vel */}\r\n                    <div className=\"mt-6 pt-6 border-t border-white/5 grid grid-cols-2 sm:grid-cols-4 gap-4\">\r\n                        <div className=\"flex items-center gap-3\">\r\n                            <div className=\"w-10 h-10 rounded-xl bg-primary-500/10 flex items-center justify-center text-primary-400 border border-primary-500/20\">\r\n                                <Star size={18} fill=\"currentColor\" />\r\n                            </div>\r\n                            <div>\r\n                                <p className=\"text-[9px] text-zinc-500 font-bold uppercase tracking-wider\">Score</p>\r\n                                <p className=\"text-sm font-black text-white\">{user.score || 0} pts</p>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"flex items-center gap-3\">\r\n                            <div className={`w-10 h-10 rounded-xl flex items-center justify-center border ${vipLevel.color}`}>\r\n                                <ShieldCheck size={18} />\r\n                            </div>\r\n                            <div>\r\n                                <p className=\"text-[9px] text-zinc-500 font-bold uppercase tracking-wider\">N├¡vel</p>\r\n                                <p className=\"text-sm font-black text-white\">{vipLevel.name}</p>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"flex items-center gap-3\">\r\n                            <div className=\"w-10 h-10 rounded-xl bg-blue-500/10 flex items-center justify-center text-blue-400 border border-blue-500/20\">\r\n                                <PieChart size={18} />\r\n                            </div>\r\n                            <div>\r\n                                <p className=\"text-[9px] text-zinc-500 font-bold uppercase tracking-wider\">Licen├ºas</p>\r\n                                <p className=\"text-sm font-black text-white\">{userQuotas.length} ativas</p>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"flex items-center gap-3\">\r\n                            <div className=\"w-10 h-10 rounded-xl bg-emerald-500/10 flex items-center justify-center text-emerald-400 border border-emerald-500/20\">\r\n                                <TrendingUp size={18} />\r\n                            </div>\r\n                            <div>\r\n                                <p className=\"text-[9px] text-zinc-500 font-bold uppercase tracking-wider\">Excedente</p>\r\n                                <p className=\"text-sm font-black text-emerald-400\">+{earningsPercentage.toFixed(1)}%</p>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"flex items-center gap-3\">\r\n                            <div className=\"w-10 h-10 rounded-xl bg-yellow-500/10 flex items-center justify-center text-yellow-500 border border-yellow-500/20\">\r\n                                <Zap size={18} fill=\"currentColor\" />\r\n                            </div>\r\n                            <div>\r\n                                <p className=\"text-[9px] text-zinc-500 font-bold uppercase tracking-wider\">Pontos Farm</p>\r\n                                <p className=\"text-sm font-black text-white\">{user.ad_points || 0} pts</p>\r\n                                <p className=\"text-[8px] text-zinc-600\">1000 pts = R$ 0,03</p>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Alerta de Seguran├ºa */}\r\n            {isLocked && (\r\n                <div className=\"bg-red-500/5 border border-red-500/20 rounded-2xl p-5 flex items-center gap-4\">\r\n                    <div className=\"w-12 h-12 rounded-xl bg-red-500/20 flex items-center justify-center text-red-500 shrink-0\">\r\n                        <ShieldCheck size={24} />\r\n                    </div>\r\n                    <div>\r\n                        <h3 className=\"text-red-500 font-bold text-sm mb-1\">Trava de Seguran├ºa Ativa</h3>\r\n                        <p className=\"text-zinc-400 text-xs\">\r\n                            Opera├º├Áes bloqueadas. Libera├º├úo em <strong className=\"text-white\">{lockTimeRemaining}h</strong>.\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* 2. Card de Saldo Principal */}\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-4 gap-4\">\r\n                <div className=\"lg:col-span-2 bg-gradient-to-br from-primary-600 via-primary-700 to-[#10b981] rounded-3xl p-6 sm:p-8 text-white relative overflow-hidden shadow-2xl shadow-primary-900/40\">\r\n                    <div className=\"absolute top-0 right-0 p-8 opacity-20 rotate-12 group-hover:scale-110 transition-transform duration-700 pointer-events-none select-none\">\r\n                        <Wallet size={180} />\r\n                    </div>\r\n\r\n                    <div className=\"relative z-10\">\r\n                        <div className=\"flex items-center gap-3 mb-3\">\r\n                            <div className=\"w-2 h-2 rounded-full bg-white animate-pulse\" />\r\n                            <span className=\"text-[10px] font-black uppercase tracking-[0.3em] opacity-80\">Saldo Corrente L├¡quido</span>\r\n                            <button onClick={() => setShowValues(!showValues)} className=\"ml-auto text-white/50 hover:text-white transition-colors\">\r\n                                {showValues ? <Eye size={16} /> : <EyeOff size={16} />}\r\n                            </button>\r\n                        </div>\r\n                        <h2 className=\"text-4xl sm:text-5xl font-black tracking-tighter mb-6 tabular-nums\">\r\n                            {showValues ? formatCurrency(user.balance) : 'ÔÇóÔÇóÔÇóÔÇóÔÇóÔÇó'}\r\n                        </h2>\r\n\r\n                        <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\r\n                            <button\r\n                                onClick={onWithdraw}\r\n                                className=\"bg-black/20 hover:bg-black/40 text-white text-[10px] font-black uppercase tracking-[0.2em] py-5 rounded-2xl backdrop-blur-md transition-all flex items-center justify-center gap-3 border border-white/10 active:scale-95\"\r\n                            >\r\n                                <ArrowUpFromLine size={20} /> SACAR AGORA\r\n                            </button>\r\n                            <button\r\n                                onClick={onBuyQuota}\r\n                                className=\"bg-white text-emerald-900 hover:scale-[1.02] transition-all text-[10px] font-black uppercase tracking-[0.2em] py-5 rounded-2xl shadow-2xl flex items-center justify-center gap-3 active:scale-95\"\r\n                            >\r\n                                <TrendingUp size={20} /> NOVA LICEN├çA\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"glass glass-hover p-5 sm:p-8 flex flex-col justify-between\">\r\n                    <div className=\"flex items-center justify-between mb-2\">\r\n                        <div className=\"w-14 h-14 bg-primary-500/10 rounded-2xl flex items-center justify-center text-primary-400\">\r\n                            <PieChart size={28} />\r\n                        </div>\r\n                        <span className=\"glass px-4 py-1.5 rounded-full text-[10px] font-black tracking-widest text-primary-400\">{userQuotas.length} ATIVAS</span>\r\n                    </div>\r\n                    <div>\r\n                        <p className=\"text-[10px] text-zinc-500 font-black uppercase tracking-widest mb-2\">Capital Alocado</p>\r\n                        <h3 className=\"text-3xl font-black text-white tracking-tight\">{formatCurrency(totalInvested)}</h3>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"glass glass-hover p-5 sm:p-8 flex flex-col justify-between\">\r\n                    <div className=\"flex items-center justify-between mb-2\">\r\n                        <div className=\"w-14 h-14 bg-emerald-500/10 rounded-2xl flex items-center justify-center text-emerald-400\">\r\n                            <ArrowUpRight size={28} />\r\n                        </div>\r\n                        <span className=\"glass px-4 py-1.5 rounded-full text-[10px] font-black tracking-widest text-emerald-400\">+{earningsPercentage.toFixed(1)}%</span>\r\n                    </div>\r\n                    <div>\r\n                        <p className=\"text-[10px] text-zinc-500 font-black uppercase tracking-widest mb-2\">Excedentes Totais</p>\r\n                        <h3 className=\"text-3xl font-black text-emerald-400 tracking-tight\">{formatCurrency(totalEarnings)}</h3>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* 3. Central de Pr├¬mios */}\r\n            <div className=\"bg-zinc-900 border border-white/5 rounded-3xl p-5 sm:p-8 relative overflow-hidden\">\r\n                <div className=\"absolute top-0 right-0 p-16 opacity-5 pointer-events-none select-none\">\r\n                    <Zap size={180} className=\"text-yellow-500\" />\r\n                </div>\r\n\r\n                <div className=\"relative z-10\">\r\n                    <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-6 mb-10\">\r\n                        <div>\r\n                            <h3 className=\"text-xl sm:text-2xl font-black text-white tracking-tight flex items-center gap-3\">\r\n                                <span className=\"p-3 bg-yellow-500/10 rounded-2xl shadow-inner\">\r\n                                    <Zap size={28} className=\"text-yellow-500 fill-yellow-500\" />\r\n                                </span>\r\n                                Central de Pr├¬mios\r\n                            </h3>\r\n                            <p className=\"text-sm text-zinc-500 font-bold uppercase tracking-wider mt-2\">Maximize sua reputa├º├úo para desbloquear benef├¡cios</p>\r\n                        </div>\r\n                        <div className=\"bg-zinc-900/80 px-5 py-3 rounded-2xl border border-white/5 flex items-center gap-4 shadow-2xl\">\r\n                            <div className=\"w-2.5 h-2.5 rounded-full bg-yellow-500 animate-pulse shadow-[0_0_10px_rgba(234,179,8,0.5)]\" />\r\n                            <span className=\"text-[11px] font-black text-white uppercase tracking-[0.2em]\">Miss├Áes Dispon├¡veis</span>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"grid grid-cols-2 sm:grid-cols-5 gap-4 mb-10\">\r\n                        {[\r\n                            { icon: Zap, label: 'Farm', sub: 'Views', act: () => navigate('/app/promo-videos/farm'), color: 'text-yellow-400', bg: 'bg-yellow-500/10' },\r\n                            { icon: Gamepad2, label: 'Jogar', sub: 'Fun', act: onGames, color: 'text-purple-400', bg: 'bg-purple-500/10' },\r\n                            { icon: BookOpen, label: 'Estudar', sub: 'Learn', act: onEducation, color: 'text-blue-400', bg: 'bg-blue-500/10' },\r\n                            { icon: Users, label: 'Indicar', sub: 'Invite', act: onRefer, color: 'text-primary-400', bg: 'bg-primary-500/10' },\r\n                            { icon: BarChart3, label: 'Votar', sub: 'Club', act: onVoting, color: 'text-emerald-400', bg: 'bg-emerald-500/10' }\r\n                        ].map((item, idx) => (\r\n                            <button\r\n                                key={idx}\r\n                                onClick={item.act}\r\n                                className=\"aspect-square glass glass-hover rounded-[2rem] flex flex-col items-center justify-center gap-3 group\"\r\n                            >\r\n                                <div className={`w-14 h-14 ${item.bg} rounded-2xl flex items-center justify-center ${item.color} group-hover:scale-110 transition-transform`}>\r\n                                    <item.icon size={28} />\r\n                                </div>\r\n                                <div className=\"text-center\">\r\n                                    <p className=\"text-[11px] font-black text-white uppercase tracking-widest\">{item.label}</p>\r\n                                    <p className=\"text-[8px] font-black opacity-40 uppercase tracking-[0.3em] mt-1\">{item.sub}</p>\r\n                                </div>\r\n                            </button>\r\n                        ))}\r\n                    </div>\r\n                    {/* Ba├║ de Excedentes */}\r\n                    <div\r\n                        onClick={handleOpenChest}\r\n                        className={`group relative rounded-2xl p-5 sm:p-6 transition-all cursor-pointer ${chestCountdown > 0 || chestsRemaining === 0\r\n                            ? 'bg-zinc-800/50 opacity-60'\r\n                            : 'bg-gradient-to-r from-amber-500/10 to-orange-500/10 border border-amber-500/20 hover:border-amber-500/40'\r\n                            }`}\r\n                    >\r\n                        <div className=\"flex items-center gap-4 sm:gap-6\">\r\n                            {/* ├ìcone do Ba├║ */}\r\n                            <div className=\"relative shrink-0\">\r\n                                <Gift size={48} className={chestCountdown > 0 ? 'text-zinc-600' : 'text-amber-500'} strokeWidth={1.5} />\r\n                                {chestCountdown === 0 && chestsRemaining > 0 && (\r\n                                    <div className=\"absolute inset-0 bg-amber-500 blur-xl opacity-30 animate-pulse\" />\r\n                                )}\r\n                            </div>\r\n\r\n                            {/* Conte├║do */}\r\n                            <div className=\"flex-1 min-w-0\">\r\n                                <h4 className=\"text-base sm:text-lg font-bold text-white mb-1\">Ba├║ de Excedentes Di├írios</h4>\r\n                                <p className=\"text-xs text-zinc-400 mb-3\">Assista conte├║do e receba saldo imediato</p>\r\n\r\n                                <div className=\"flex flex-wrap items-center gap-2\">\r\n                                    <span className=\"px-3 py-1.5 bg-black/50 rounded-lg border border-white/5 text-[10px] font-bold text-zinc-400 uppercase\">\r\n                                        {chestCountdown > 0 ? `Aguarde: ${formatCountdown(chestCountdown)}` : `${chestsRemaining}/3 Ba├║s`}\r\n                                    </span>\r\n                                    {chestCountdown === 0 && chestsRemaining > 0 && (\r\n                                        <span className=\"px-3 py-1.5 bg-amber-500 text-black rounded-lg text-[10px] font-bold uppercase flex items-center gap-1\">\r\n                                            Abrir <ChevronRight size={14} />\r\n                                        </span>\r\n                                    )}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Loading Overlay */}\r\n                        {isOpeningChest && (\r\n                            <div className=\"absolute inset-0 bg-black/80 backdrop-blur-sm flex flex-col items-center justify-center z-20 rounded-2xl\">\r\n                                <div className=\"w-10 h-10 border-3 border-amber-500 border-t-transparent rounded-full animate-spin mb-3\" />\r\n                                <p className=\"text-xs font-bold text-amber-500 uppercase tracking-wider\">Carregando...</p>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n\r\n            {/* 4. Hist├│rico de Transa├º├Áes */}\r\n            <div className=\"bg-zinc-900 border border-white/5 rounded-3xl p-5 sm:p-8\">\r\n                <div className=\"flex items-center justify-between mb-6\">\r\n                    <h3 className=\"text-xl sm:text-2xl font-black text-white tracking-tight flex items-center gap-3\">\r\n                        <Clock size={24} className=\"text-zinc-600\" />\r\n                        Fluxo de Caixa\r\n                    </h3>\r\n                    <button\r\n                        onClick={() => navigate('/app/history')}\r\n                        className=\"text-[11px] font-black text-primary-400 uppercase tracking-[0.2em] hover:text-white transition-all ring-1 ring-primary-500/20 px-4 py-2 rounded-xl\"\r\n                    >\r\n                        EXTRATO COMPLETO\r\n                    </button>\r\n                </div>\r\n\r\n                <div className=\"space-y-4\">\r\n                    {recentTransactions.length > 0 ? (\r\n                        recentTransactions.map((t: Transaction) => (\r\n                            <div key={t.id} className=\"group glass glass-hover p-6 rounded-[2rem] flex items-center justify-between\">\r\n                                <div className=\"flex items-center gap-6\">\r\n                                    <div className={`w-16 h-16 rounded-2xl flex items-center justify-center shadow-2xl shadow-black ${isPositive(t.type) ? 'bg-emerald-500/10 text-emerald-400 border border-emerald-500/20' : 'bg-red-500/10 text-red-400 border border-red-500/20'\r\n                                        }`}>\r\n                                        {isPositive(t.type) ? <ArrowDownLeft size={32} /> : <ArrowUpRight size={32} />}\r\n                                    </div>\r\n                                    <div>\r\n                                        <h4 className=\"text-base font-black text-white uppercase tracking-tight mb-1 group-hover:text-primary-400 transition-colors\">{t.description}</h4>\r\n                                        <p className=\"text-[10px] text-zinc-500 font-black uppercase tracking-widest\">\r\n                                            {new Date(t.created_at || t.date).toLocaleDateString('pt-BR', { day: '2-digit', month: 'short', hour: '2-digit', minute: '2-digit' }).replace(' de ', ' ')}\r\n                                        </p>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"text-right\">\r\n                                    <p className={`text-xl font-black tabular-nums tracking-tighter mb-1 ${isPositive(t.type) ? 'text-emerald-400' : 'text-zinc-500'\r\n                                        }`}>\r\n                                        {showValues ? (\r\n                                            <>\r\n                                                {isPositive(t.type) ? '+' : '-'} {formatCurrency(t.amount)}\r\n                                            </>\r\n                                        ) : 'ÔÇóÔÇóÔÇóÔÇóÔÇóÔÇó'}\r\n                                    </p>\r\n                                    <div className={`text-[9px] font-black uppercase tracking-[0.2em] px-3 py-1 rounded-lg inline-block border ${t.status === 'PENDING' ? 'bg-amber-500/10 text-amber-500 border-amber-500/20 animate-pulse' : 'bg-zinc-900 text-zinc-600 border-white/5'\r\n                                        }`}>\r\n                                        {t.status === 'PENDING' ? 'Em Valida├º├úo' : 'Processado'}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        ))\r\n                    ) : (\r\n                        <div className=\"flex flex-col items-center justify-center py-20 text-center bg-zinc-900/10 rounded-[3rem] border border-dashed border-zinc-800\">\r\n                            <Clock size={60} className=\"text-zinc-800 mb-6\" />\r\n                            <p className=\"text-zinc-500 text-sm font-black uppercase tracking-[0.2em]\">Fluxo de caixa vazio</p>\r\n                            <p className=\"text-[10px] text-zinc-700 mt-3 font-bold uppercase tracking-widest italic\">Inicie sua jornada para ver movimenta├º├Áes aqui</p>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josia\\Desktop\\projetos\\cred30\\packages\\frontend-v2\\src\\presentation\\components\\views\\EarnView.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","message":"Definition for rule '@typescript-eslint/no-unused-vars' was not found.","line":1,"column":1,"endLine":1,"endColumn":2,"severity":2,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport {\r\n    Coins, Crown, PlayCircle,\r\n    ArrowLeft, TrendingUp, ShieldCheck, Zap,\r\n    ChevronRight, Sparkles, RefreshCw, Users, Play, X as XIcon, Clock,\r\n    Calendar, Search, ShieldAlert, BadgeCheck, Rocket\r\n} from 'lucide-react';\r\nimport { PromoVideoPlayer } from '../ui/PromoVideoPlayer';\r\nimport { AppState } from '../../../domain/types/common.types';\r\nimport { apiService } from '../../../application/services/api.service';\r\n\r\ninterface EarnViewProps {\r\n    state: AppState;\r\n    onBack: () => void;\r\n    onSuccess: (title: string, message: string) => void;\r\n    onError: (title: string, message: string) => void;\r\n    onRefresh: () => Promise<void>;\r\n    onUpgrade: (method: 'balance' | 'pix' | 'card') => Promise<void>;\r\n}\r\n\r\nexport const EarnView = ({ state, onBack, onSuccess, onError, onRefresh, onUpgrade }: EarnViewProps) => {\r\n    const [loading, setLoading] = useState(false);\r\n    const [showAdModal, setShowAdModal] = useState(false);\r\n    const [countDown, setCountDown] = useState(15);\r\n    const user = state.currentUser!;\r\n\r\n    const handleWatchVideo = () => {\r\n        setShowAdModal(true);\r\n        setCountDown(10); // 10 segundos de \"v├¡deo\"\r\n\r\n        const timer = setInterval(() => {\r\n            setCountDown((prev) => {\r\n                if (prev <= 1) {\r\n                    clearInterval(timer);\r\n                    return 0;\r\n                }\r\n                return prev - 1;\r\n            });\r\n        }, 1000);\r\n    };\r\n\r\n    const handleAdRewardClaim = async () => {\r\n        setLoading(true);\r\n        try {\r\n            // Abrir Smart Link (An├║ncio Real)\r\n            window.open('https://www.effectivegatecpm.com/ec4mxdzvs?key=a9eefff1a8aa7769523373a66ff484aa', '_blank');\r\n\r\n            // Creditar Recompensa\r\n            const response = await apiService.post<any>('/monetization/reward-video', {});\r\n\r\n            if (response.success) {\r\n                onSuccess('B├┤nus Recebido!', response.message);\r\n                await onRefresh();\r\n            } else {\r\n                onError('Aguarde', response.message);\r\n            }\r\n        } catch (e: any) {\r\n            onError('Erro', e.message || 'Erro ao processar recompensa.');\r\n        } finally {\r\n            setLoading(false);\r\n            setShowAdModal(false);\r\n        }\r\n    };\r\n\r\n    const handleDailyCheckin = async () => {\r\n        setLoading(true);\r\n        try {\r\n            // Abrir o link de an├║ncio ANTES de validar no backend para garantir a receita\r\n            window.open('https://www.effectivegatecpm.com/ec4mxdzvs?key=a9eefff1a8aa7769523373a66ff484aa', '_blank');\r\n\r\n            const response = await apiService.post<any>('/monetization/daily-checkin', {});\r\n            if (response.success) {\r\n                onSuccess('Check-in Realizado!', response.message);\r\n                await onRefresh();\r\n            } else {\r\n                onError('Aviso', response.message);\r\n            }\r\n        } catch (e: any) {\r\n            onError('Aguarde', e.message || 'Tente novamente amanh├ú.');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const [searchEmail, setSearchEmail] = useState('');\r\n    const [reputationData, setReputationData] = useState<any>(null);\r\n    const [searchingRep, setSearchingRep] = useState(false);\r\n\r\n    const handleReputationCheck = async () => {\r\n        if (!searchEmail.trim()) {\r\n            onError('Campo Vazio', 'Digite o e-mail do associado para consultar.');\r\n            return;\r\n        }\r\n\r\n        if (!window.confirm(`Esta consulta possui um custo de R$ 35,00 que ser├í debitado do seu saldo. Deseja prosseguir com a busca por ${searchEmail}?`)) {\r\n            return;\r\n        }\r\n\r\n        setSearchingRep(true);\r\n        setReputationData(null);\r\n        try {\r\n            const response = await apiService.get<any>(`/monetization/reputation-check/${searchEmail}`);\r\n            if (response.success) {\r\n                setReputationData(response.data);\r\n                onSuccess('Consulta Realizada!', 'Relat├│rio de idoneidade gerado com sucesso.');\r\n                await onRefresh();\r\n            } else {\r\n                onError('Erro na Consulta', response.message);\r\n            }\r\n        } catch (e: any) {\r\n            onError('Aten├º├úo', e.message || 'Erro ao realizar consulta.');\r\n        } finally {\r\n            setSearchingRep(false);\r\n        }\r\n    };\r\n\r\n    const [proMethod, setProMethod] = useState<'balance' | 'pix' | 'card'>('balance');\r\n    const [loadingLocal, setLoadingLocal] = useState(false);\r\n    const [buyingBadge, setBuyingBadge] = useState(false);\r\n    const [buyingBoost, setBuyingBoost] = useState(false);\r\n\r\n    const handleUpgradePro = async () => {\r\n        setLoadingLocal(true);\r\n        try {\r\n            await onUpgrade(proMethod);\r\n        } catch (e: any) {\r\n            // Erros s├úo tratados no app.page por prop\r\n        } finally {\r\n            setLoadingLocal(false);\r\n        }\r\n    };\r\n\r\n    const handleBuyVerifiedBadge = async () => {\r\n        if (user.is_verified) {\r\n            onError('Aviso', 'Voc├¬ j├í possui o Selo de Verificado!');\r\n            return;\r\n        }\r\n        setBuyingBadge(true);\r\n        try {\r\n            const response = await apiService.buyVerifiedBadge();\r\n            if (response.success) {\r\n                onSuccess('Selo Adquirido!', response.message || 'Voc├¬ agora ├® um membro verificado!');\r\n                await onRefresh();\r\n            } else {\r\n                onError('Erro', response.message);\r\n            }\r\n        } catch (e: any) {\r\n            onError('Erro', e.message || 'N├úo foi poss├¡vel adquirir o selo.');\r\n        } finally {\r\n            setBuyingBadge(false);\r\n        }\r\n    };\r\n\r\n    const handleBuyScoreBoost = async () => {\r\n        setBuyingBoost(true);\r\n        try {\r\n            const response = await apiService.buyScoreBoost();\r\n            if (response.success) {\r\n                onSuccess('Boost Ativado!', response.message || '+100 pontos de Score!');\r\n                await onRefresh();\r\n            } else {\r\n                onError('Erro', response.message);\r\n            }\r\n        } catch (e: any) {\r\n            onError('Erro', e.message || 'N├úo foi poss├¡vel ativar o boost.');\r\n        } finally {\r\n            setBuyingBoost(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"space-y-6 pb-20 relative\">\r\n            {/* Header */}\r\n            <div className=\"flex items-center gap-3\">\r\n                <button onClick={onBack} className=\"text-zinc-400 hover:text-white transition\">\r\n                    <ArrowLeft size={24} />\r\n                </button>\r\n                <div>\r\n                    <h1 className=\"text-xl font-bold text-white flex items-center gap-2\">\r\n                        <Coins className=\"text-primary-400\" />\r\n                        Ganhos & B├┤nus\r\n                    </h1>\r\n                    <p className=\"text-[10px] text-zinc-500 uppercase tracking-widest font-bold\">Aumente sua Renda na Cred30</p>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Rewarded Video Card */}\r\n            <div className=\"bg-surface border border-surfaceHighlight rounded-3xl overflow-hidden relative\">\r\n                <div className=\"absolute top-0 right-0 p-4 opacity-10\">\r\n                    <PlayCircle size={100} />\r\n                </div>\r\n                <div className=\"p-6 relative z-10\">\r\n                    <div className=\"flex items-center gap-2 mb-2\">\r\n                        <div className=\"bg-primary-500/20 p-2 rounded-xl text-primary-400\">\r\n                            <Sparkles size={20} />\r\n                        </div>\r\n                        <span className=\"text-xs font-black text-primary-400 uppercase\">V├¡deo Premiado</span>\r\n                    </div>\r\n                    <h3 className=\"text-xl font-bold text-white mb-2\">Ganhe Saldo em Segundos</h3>\r\n                    <p className=\"text-sm text-zinc-400 mb-6 leading-relaxed\">\r\n                        Assista a um breve v├¡deo informativo de nossos parceiros e receba b├┤nus de saldo e pontos de Score imediatamente.\r\n                    </p>\r\n                    <div className=\"bg-background/50 rounded-2xl p-4 border border-surfaceHighlight mb-6 flex items-center justify-between\">\r\n                        <div className=\"flex flex-col\">\r\n                            <span className=\"text-[10px] text-zinc-500 uppercase font-black\">Recompensa</span>\r\n                            <span className=\"text-lg font-black text-white\">+ R$ 0,002 / +5 Score</span>\r\n                        </div>\r\n                        <PlayCircle size={32} className=\"text-primary-400\" />\r\n                    </div>\r\n                    <button\r\n                        onClick={handleWatchVideo}\r\n                        className=\"w-full bg-primary-500 hover:bg-primary-400 text-black py-4 rounded-2xl font-black transition active:scale-95 flex items-center justify-center gap-2 shadow-lg shadow-primary-500/20\"\r\n                    >\r\n                        <PlayCircle size={20} />\r\n                        ASSISTIR E GANHAR\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Subscription PRO Card */}\r\n            <div className=\"bg-gradient-to-br from-zinc-900 to-black border border-primary-500/30 rounded-3xl overflow-hidden relative group\">\r\n                <div className=\"absolute top-0 right-0 p-4\">\r\n                    <Crown size={40} className=\"text-primary-400/20 group-hover:text-primary-400/40 transition-all\" />\r\n                </div>\r\n                <div className=\"p-6\">\r\n                    <div className=\"flex items-center gap-2 mb-2\">\r\n                        <div className=\"bg-primary-500 text-black p-1 rounded font-black text-[9px] uppercase tracking-tighter\">\r\n                            OFERTA EXCLUSIVA\r\n                        </div>\r\n                        {user.membership_type === 'PRO' && (\r\n                            <span className=\"text-[9px] text-primary-400 font-bold flex items-center gap-1 uppercase\">\r\n                                <ShieldCheck size={10} /> Seu plano atual\r\n                            </span>\r\n                        )}\r\n                    </div>\r\n                    <h3 className=\"text-xl font-bold text-white mb-2 flex items-center gap-2\">\r\n                        Seja Cred30 <span className=\"text-primary-400\">PRO</span>\r\n                    </h3>\r\n                    <p className=\"text-sm text-zinc-400 mb-6 leading-relaxed\">\r\n                        Fa├ºa o upgrade da sua conta e tenha benef├¡cios exclusivos que aumentam seus pontos e os excedentes operacionais da comunidade.\r\n                    </p>\r\n\r\n                    <div className=\"grid grid-cols-1 gap-3 mb-8\">\r\n                        {[\r\n                            { icon: <Zap size={14} />, text: \"Aprova├º├úo de Cr├®dito Priorit├íria\" },\r\n                            { icon: <TrendingUp size={14} />, text: \"Taxas de Administra├º├úo 20% Menores\" },\r\n                            { icon: <ShieldCheck size={14} />, text: \"Selo de Membro Verificado PRO\" },\r\n                            { icon: <Users size={14} />, text: \"Contribui para os Excedentes M├║tuos\" }\r\n                        ].map((item, i) => (\r\n                            <div key={i} className=\"flex items-center gap-3 text-zinc-300\">\r\n                                <div className=\"text-primary-400\">{item.icon}</div>\r\n                                <span className=\"text-xs font-medium\">{item.text}</span>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n\r\n                    <div className=\"bg-background/40 rounded-xl p-1 mb-6 flex gap-1 border border-primary-500/10\">\r\n                        <button\r\n                            onClick={() => setProMethod('balance')}\r\n                            className={`flex-1 py-2 rounded-lg text-[10px] font-black tracking-widest transition ${proMethod === 'balance' ? 'bg-primary-500 text-black shadow-lg shadow-primary-500/20' : 'text-zinc-500 hover:text-white'}`}\r\n                        >\r\n                            SALDO\r\n                        </button>\r\n                        <button\r\n                            onClick={() => setProMethod('pix')}\r\n                            className={`flex-1 py-2 rounded-lg text-[10px] font-black tracking-widest transition ${proMethod === 'pix' ? 'bg-emerald-500 text-black shadow-lg shadow-emerald-500/20' : 'text-zinc-500 hover:text-white'}`}\r\n                        >\r\n                            PIX\r\n                        </button>\r\n                        <button\r\n                            onClick={() => setProMethod('card')}\r\n                            className={`flex-1 py-2 rounded-lg text-[10px] font-black tracking-widest transition ${proMethod === 'card' ? 'bg-blue-500 text-white shadow-lg shadow-blue-500/20' : 'text-zinc-500 hover:text-white'}`}\r\n                        >\r\n                            CART├âO\r\n                        </button>\r\n                    </div>\r\n\r\n                    <button\r\n                        onClick={handleUpgradePro}\r\n                        disabled={loadingLocal || user.membership_type === 'PRO'}\r\n                        className={`w-full py-4 rounded-2xl font-black transition active:scale-95 flex items-center justify-center gap-2 ${user.membership_type === 'PRO' ? 'bg-zinc-800 text-zinc-500' : (proMethod === 'pix' ? 'bg-emerald-500 text-black' : (proMethod === 'card' ? 'bg-blue-500 text-white' : 'bg-white text-black hover:bg-zinc-200'))} shadow-xl`}\r\n                    >\r\n                        {loadingLocal ? <RefreshCw className=\"animate-spin\" size={20} /> : (user.membership_type === 'PRO' ? 'MEMBRO PRO ATIVO' : `ASSINAR PRO POR R$ 29,90`)}\r\n                    </button>\r\n                    <p className=\"text-[8px] text-zinc-600 text-center mt-3 uppercase font-bold tracking-widest leading-normal\">\r\n                        Assinando hoje voc├¬ ajuda a aumentar os excedentes operacionais para todos os membros da plataforma.\r\n                    </p>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Daily Check-in Section */}\r\n            <div className=\"bg-surface border border-surfaceHighlight p-8 rounded-3xl group relative overflow-hidden cursor-pointer active:scale-[0.98] transition\" onClick={handleDailyCheckin}>\r\n                <div className=\"absolute -right-4 -top-4 opacity-5 group-hover:opacity-10 transition\">\r\n                    <Calendar size={120} />\r\n                </div>\r\n                <div className=\"flex flex-col gap-4 relative z-10\">\r\n                    <div className=\"bg-emerald-500/10 w-fit p-3 rounded-2xl text-emerald-400\">\r\n                        <Calendar size={28} />\r\n                    </div>\r\n                    <div>\r\n                        <h4 className=\"text-xl font-bold text-white\">Check-in Di├írio</h4>\r\n                        <p className=\"text-sm text-zinc-500\">Acesse todos os dias para ganhar b├┤nus de Score e Saldo.</p>\r\n                    </div>\r\n                    <div className=\"flex items-center gap-2\">\r\n                        <div className=\"bg-emerald-500 text-black text-[10px] font-black py-1.5 px-3 rounded-lg uppercase tracking-wider\">\r\n                            Recompensa:+R$0.01\r\n                        </div>\r\n                        <div className=\"bg-zinc-800 text-zinc-400 text-[10px] font-black py-1.5 px-3 rounded-lg uppercase tracking-wider\">\r\n                            +10 Score\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Premium Benefits Section */}\r\n            <div className=\"space-y-4\">\r\n                <h3 className=\"text-xs font-bold text-zinc-500 uppercase tracking-widest ml-1\">Benef├¡cios Premium</h3>\r\n\r\n                {/* Verified Badge Card */}\r\n                <div className=\"bg-surface border border-surfaceHighlight rounded-2xl p-5 relative overflow-hidden group\">\r\n                    <div className=\"absolute -right-4 -top-4 opacity-5 group-hover:opacity-10 transition\">\r\n                        <BadgeCheck size={80} />\r\n                    </div>\r\n                    <div className=\"flex items-start gap-4 relative z-10\">\r\n                        <div className={`p-3 rounded-2xl ${user.is_verified ? 'bg-blue-500/20 text-blue-400' : 'bg-zinc-800 text-zinc-400'}`}>\r\n                            <BadgeCheck size={24} />\r\n                        </div>\r\n                        <div className=\"flex-1\">\r\n                            <div className=\"flex items-center gap-2 mb-1\">\r\n                                <h4 className=\"text-lg font-bold text-white\">Selo de Verificado</h4>\r\n                                {user.is_verified && (\r\n                                    <span className=\"bg-blue-500/20 text-blue-400 text-[9px] font-bold px-2 py-0.5 rounded-full uppercase\">Ativo</span>\r\n                                )}\r\n                            </div>\r\n                            <p className=\"text-sm text-zinc-500 mb-3\">Aumente sua confian├ºa no marketplace e ganhe +100 pontos de Score.</p>\r\n                            <div className=\"flex items-center gap-2\">\r\n                                <span className=\"text-primary-400 font-bold\">R$ 9,90</span>\r\n                                <span className=\"text-zinc-600\">ÔÇó</span>\r\n                                <span className=\"text-emerald-400 text-xs font-bold\">+100 Score</span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    {!user.is_verified && (\r\n                        <button\r\n                            onClick={handleBuyVerifiedBadge}\r\n                            disabled={buyingBadge}\r\n                            className=\"w-full mt-4 bg-blue-500 hover:bg-blue-400 disabled:bg-zinc-800 text-white font-bold py-3 rounded-xl transition flex items-center justify-center gap-2 shadow-lg shadow-blue-500/20\"\r\n                        >\r\n                            {buyingBadge ? <RefreshCw className=\"animate-spin\" size={18} /> : <BadgeCheck size={18} />}\r\n                            {buyingBadge ? 'Processando...' : 'Adquirir Selo'}\r\n                        </button>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Score Boost Card */}\r\n                <div className=\"bg-surface border border-surfaceHighlight rounded-2xl p-5 relative overflow-hidden group\">\r\n                    <div className=\"absolute -right-4 -top-4 opacity-5 group-hover:opacity-10 transition\">\r\n                        <Rocket size={80} />\r\n                    </div>\r\n                    <div className=\"flex items-start gap-4 relative z-10\">\r\n                        <div className=\"p-3 rounded-2xl bg-gradient-to-br from-purple-500/20 to-pink-500/20 text-purple-400\">\r\n                            <Rocket size={24} />\r\n                        </div>\r\n                        <div className=\"flex-1\">\r\n                            <h4 className=\"text-lg font-bold text-white mb-1\">Score Boost</h4>\r\n                            <p className=\"text-sm text-zinc-500 mb-3\">Aumente seu limite de cr├®dito instantaneamente com +100 pontos de Score.</p>\r\n                            <div className=\"flex items-center gap-2\">\r\n                                <span className=\"text-primary-400 font-bold\">R$ 15,00</span>\r\n                                <span className=\"text-zinc-600\">ÔÇó</span>\r\n                                <span className=\"text-emerald-400 text-xs font-bold\">+100 Score</span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <button\r\n                        onClick={handleBuyScoreBoost}\r\n                        disabled={buyingBoost}\r\n                        className=\"w-full mt-4 bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-400 hover:to-pink-400 disabled:from-zinc-700 disabled:to-zinc-800 text-white font-bold py-3 rounded-xl transition flex items-center justify-center gap-2 shadow-lg shadow-purple-500/20\"\r\n                    >\r\n                        {buyingBoost ? <RefreshCw className=\"animate-spin\" size={18} /> : <Rocket size={18} />}\r\n                        {buyingBoost ? 'Processando...' : 'Ativar Boost'}\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Reputation Check (Serasa Style) Card */}\r\n            <div className=\"bg-surface border border-surfaceHighlight rounded-3xl overflow-hidden shadow-2xl\">\r\n                <div className=\"p-6\">\r\n                    <div className=\"flex items-center gap-2 mb-4\">\r\n                        <div className=\"bg-blue-500/10 p-2 rounded-xl text-blue-400\">\r\n                            <Search size={20} />\r\n                        </div>\r\n                        <span className=\"text-xs font-black text-blue-400 uppercase\">Consulta de Idoneidade</span>\r\n                    </div>\r\n                    <h3 className=\"text-xl font-bold text-white mb-2\">Relat├│rio de Parceiro</h3>\r\n                    <p className=\"text-sm text-zinc-400 mb-6 font-medium\">\r\n                        Vai negociar no Marketplace? Verifique o <span className=\"text-white font-bold\">Score</span> e a reputa├º├úo oficial do associado antes de fechar o neg├│cio.\r\n                    </p>\r\n\r\n                    <div className=\"flex gap-2 mb-6\">\r\n                        <input\r\n                            type=\"email\"\r\n                            placeholder=\"E-mail do associado...\"\r\n                            value={searchEmail}\r\n                            onChange={(e) => setSearchEmail(e.target.value)}\r\n                            className=\"flex-1 bg-background border border-surfaceHighlight rounded-2xl px-4 py-3 text-sm text-white outline-none focus:border-blue-500/50 transition-all font-medium\"\r\n                        />\r\n                        <button\r\n                            onClick={handleReputationCheck}\r\n                            disabled={searchingRep}\r\n                            className=\"bg-blue-500 hover:bg-blue-400 text-white px-6 rounded-2xl font-black text-xs transition active:scale-95 shadow-lg shadow-blue-500/20 disabled:opacity-50\"\r\n                        >\r\n                            {searchingRep ? <RefreshCw className=\"animate-spin\" size={16} /> : 'CONSULTAR'}\r\n                        </button>\r\n                    </div>\r\n\r\n                    {reputationData && (\r\n                        <div className=\"animate-in fade-in slide-in-from-top-4 duration-500\">\r\n                            <div className=\"bg-zinc-800/50 border border-blue-500/20 rounded-2xl p-6 relative overflow-hidden\">\r\n                                <div className=\"absolute top-0 right-0 p-4 opacity-5\">\r\n                                    <ShieldCheck size={80} className=\"text-blue-400\" />\r\n                                </div>\r\n                                <div className=\"space-y-4 relative z-10\">\r\n                                    <div className=\"flex justify-between items-start\">\r\n                                        <div>\r\n                                            <p className=\"text-[10px] text-zinc-500 font-black uppercase tracking-widest\">Nome do Associado</p>\r\n                                            <h4 className=\"text-lg font-black text-white\">{reputationData.name}</h4>\r\n                                        </div>\r\n                                        {reputationData.isVerified && (\r\n                                            <div className=\"bg-blue-500 text-white p-1 rounded-full\">\r\n                                                <ShieldCheck size={16} />\r\n                                            </div>\r\n                                        )}\r\n                                    </div>\r\n\r\n                                    <div className=\"grid grid-cols-2 gap-4\">\r\n                                        <div className=\"bg-black/20 p-4 rounded-xl border border-zinc-700/30\">\r\n                                            <p className=\"text-[9px] text-zinc-500 font-bold uppercase mb-1\">Score Cred30</p>\r\n                                            <p className={`text-2xl font-black ${reputationData.score >= 700 ? 'text-emerald-400' : (reputationData.score >= 400 ? 'text-yellow-400' : 'text-red-400')}`}>\r\n                                                {reputationData.score}\r\n                                            </p>\r\n                                        </div>\r\n                                        <div className=\"bg-black/20 p-4 rounded-xl border border-zinc-700/30\">\r\n                                            <p className=\"text-[9px] text-zinc-500 font-bold uppercase mb-1\">Status Global</p>\r\n                                            <p className={`text-xs font-black uppercase ${reputationData.status === 'ACTIVE' ? 'text-emerald-400' : 'text-red-500'}`}>\r\n                                                {reputationData.status === 'ACTIVE' ? 'CONTRATO ATIVO' : 'SUSPENSO'}\r\n                                            </p>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <div className=\"flex items-center gap-2 text-[10px] text-zinc-500 font-bold pt-2 border-t border-zinc-700/50\">\r\n                                        <Clock size={12} />\r\n                                        <span>MEMBRO DESDE: {new Date(reputationData.since).toLocaleDateString()}</span>\r\n                                        <span className=\"mx-1\">ÔÇó</span>\r\n                                        <span>PLANO: {reputationData.membership}</span>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <p className=\"text-[9px] text-zinc-600 text-center mt-4 uppercase font-bold italic\">\r\n                                * Informa├º├Áes geradas com base nos dados reais de idoneidade da comunidade Cred30.\r\n                            </p>\r\n                        </div>\r\n                    )}\r\n\r\n                    {!reputationData && (\r\n                        <div className=\"flex items-center gap-2 text-[10px] text-zinc-600 font-bold uppercase tracking-tight justify-center\">\r\n                            <ShieldAlert size={12} />\r\n                            Custo por consulta de idoneidade: R$ 35,00\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n\r\n            {/* Share & Dividend Pool Card */}\r\n            <div className=\"bg-zinc-900/50 border border-zinc-800 rounded-3xl p-6\">\r\n                <div className=\"flex items-center gap-4 mb-4\">\r\n                    <div className=\"bg-zinc-800 p-3 rounded-2xl\">\r\n                        <TrendingUp size={24} className=\"text-emerald-400\" />\r\n                    </div>\r\n                    <div>\r\n                        <h4 className=\"text-sm font-bold text-white\">Resultados Proporcionais</h4>\r\n                        <p className=\"text-[10px] text-zinc-500 uppercase font-black\">Distribui├º├úo de Excedentes</p>\r\n                    </div>\r\n                </div>\r\n                <div className=\"space-y-4\">\r\n                    <div className=\"flex justify-between items-center text-xs\">\r\n                        <span className=\"text-zinc-400\">Total Distribu├¡do</span>\r\n                        <span className=\"font-bold text-white\">R$ {state.systemBalance.toLocaleString()}</span>\r\n                    </div>\r\n                    <div className=\"w-full bg-zinc-800 h-1.5 rounded-full overflow-hidden\">\r\n                        <div className=\"bg-emerald-500 h-full w-[65%]\" />\r\n                    </div>\r\n                    <p className=\"text-[10px] text-zinc-500 italic leading-relaxed\">\r\n                        Dica: Quanto mais membros usarem o Mercado e assistirem v├¡deos, maior ser├í a distribui├º├úo proporcional por Participa├º├úo adquirida.\r\n                    </p>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Video Ad Modal */}\r\n            {showAdModal && (\r\n                <div className=\"fixed inset-0 bg-black/95 z-[200] flex items-center justify-center p-4\">\r\n                    <div className=\"bg-surface border border-surfaceHighlight rounded-3xl p-6 max-w-sm w-full relative\">\r\n                        <button\r\n                            onClick={() => setShowAdModal(false)}\r\n                            className=\"absolute top-4 right-4 text-zinc-500 hover:text-white\"\r\n                        >\r\n                            <XIcon size={20} />\r\n                        </button>\r\n\r\n                        <div className=\"text-center pt-4\">\r\n                            <div className=\"w-20 h-20 bg-primary-500/10 rounded-full flex items-center justify-center mx-auto mb-6 relative\">\r\n                                <div className=\"absolute inset-0 border-4 border-primary-500/20 rounded-full animate-spin-slow\"></div>\r\n                                <PlayCircle size={40} className=\"text-primary-400\" />\r\n                            </div>\r\n\r\n                            <h3 className=\"text-2xl font-bold text-white mb-2\">V├¡deo Publicit├írio</h3>\r\n                            <p className=\"text-sm text-zinc-400 mb-8 px-4\">\r\n                                Assista ao v├¡deo do nosso parceiro para desbloquear sua recompensa exclusiva.\r\n                            </p>\r\n\r\n                            <div className=\"bg-black/50 rounded-xl p-4 border border-zinc-800 mb-6\">\r\n                                <div className=\"flex items-center justify-between text-xs text-zinc-500 mb-2 uppercase font-bold tracking-wider\">\r\n                                    <span>Tempo Restante</span>\r\n                                    <Clock size={14} />\r\n                                </div>\r\n                                <div className=\"text-4xl font-mono font-bold text-white tabular-nums\">\r\n                                    00:{countDown.toString().padStart(2, '0')}\r\n                                </div>\r\n                            </div>\r\n\r\n                            <button\r\n                                onClick={handleAdRewardClaim}\r\n                                disabled={countDown > 0 || loading}\r\n                                className={`w-full py-4 rounded-xl font-bold text-sm transition-all flex items-center justify-center gap-2 ${countDown > 0\r\n                                    ? 'bg-zinc-800 text-zinc-500 cursor-not-allowed'\r\n                                    : 'bg-emerald-500 hover:bg-emerald-400 text-black shadow-[0_0_20px_rgba(16,185,129,0.3)]'\r\n                                    }`}\r\n                            >\r\n                                {loading ? <RefreshCw className=\"animate-spin\" size={20} /> : (\r\n                                    countDown > 0 ? 'AGUARDE O V├ìDEO...' : 'RESGATAR RECOMPENSA'\r\n                                )}\r\n                            </button>\r\n\r\n                            <p className=\"text-[9px] text-zinc-600 mt-4 italic\">\r\n                                Ao clicar em resgatar, voc├¬ ser├í redirecionado ao site do parceiro.\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josia\\Desktop\\projetos\\cred30\\packages\\frontend-v2\\src\\presentation\\components\\views\\EducationView.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","message":"Definition for rule '@typescript-eslint/no-unused-vars' was not found.","line":1,"column":1,"endLine":1,"endColumn":2,"severity":2,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useRef } from 'react';\r\nimport { BookOpen, PlayCircle, Clock, Trophy, AlertTriangle, CheckCircle2, X as XIcon, BrainCircuit, MousePointerClick, ArrowLeft } from 'lucide-react';\r\nimport { apiService } from '../../../application/services/api.service';\r\n\r\ndeclare global {\r\n    interface Window {\r\n        onYouTubeIframeAPIReady: () => void;\r\n        YT: any;\r\n    }\r\n}\r\n\r\ninterface EducationViewProps {\r\n    onBack: () => void;\r\n    onSuccess: (title: string, msg: string) => void;\r\n}\r\n\r\nconst POINTS_PER_SECOND = 0.5; // ~30 pontos por minuto. 1000 pontos = ~33 min. \r\nconst POINTS_TO_CURRENCY_RATE = 0.03 / 1000; // 1000 pontos = R$ 0.03\r\n\r\nexport const EducationView: React.FC<EducationViewProps> = ({ onBack, onSuccess }) => {\r\n    // Estados da Aula\r\n    const [selectedLesson, setSelectedLesson] = useState<any>(null);\r\n    const [isPlaying, setIsPlaying] = useState(false);\r\n\r\n    // Estados de Farm e Pontos\r\n    const [sessionPoints, setSessionPoints] = useState(0);\r\n    const [totalPoints, setTotalPoints] = useState(0); // Acumulado persistente (mock por enquanto)\r\n    const [sessionTime, setSessionTime] = useState(0);\r\n    const [playerState, setPlayerState] = useState<number>(-1);\r\n    const [sessionId, setSessionId] = useState<number | null>(null);\r\n    const playerRef = useRef<any>(null);\r\n\r\n    // Anti-Cheat States\r\n    const [isTabFocused, setIsTabFocused] = useState(true);\r\n    const [lastInteraction, setLastInteraction] = useState(Date.now());\r\n    const [showPresenceCheck, setShowPresenceCheck] = useState(false);\r\n    const [presenceTimer, setPresenceTimer] = useState(0);\r\n    const [isBlocked, setIsBlocked] = useState(false);\r\n    const [generatedCode, setGeneratedCode] = useState('');\r\n    const [inputCode, setInputCode] = useState('');\r\n\r\n    const interactionTimeout = 120000; // 2 minutos sem mexer pede check\r\n    const presenceTimeout = 15000; // 15 segundos para responder o check\r\n\r\n    // Aulas Ativas (Sebrae & B3)\r\n    const lessons = [\r\n        {\r\n            id: 1,\r\n            title: \"Solu├º├úo: Gest├úo Financeira para Pequenos Neg├│cios\",\r\n            duration: \"02:36\",\r\n            category: \"Gest├úo Financeira\",\r\n            videoUrl: \"https://www.youtube.com/embed/N-0_r7VaP5s\",\r\n            thumbnail: \"https://img.youtube.com/vi/N-0_r7VaP5s/mqdefault.jpg\"\r\n        },\r\n        {\r\n            id: 2,\r\n            title: \"B3 Explica: Quem ├® quem no Mercado Financeiro?\",\r\n            duration: \"01:51\",\r\n            category: \"Mercado de Capitais\",\r\n            videoUrl: \"https://www.youtube.com/embed/sXuzPU-cyBI\",\r\n            thumbnail: \"https://img.youtube.com/vi/sXuzPU-cyBI/mqdefault.jpg\"\r\n        },\r\n        {\r\n            id: 3,\r\n            title: \"Entenda seu Score de Cr├®dito (Sebrae)\",\r\n            duration: \"03:07\",\r\n            category: \"Cr├®dito & Reputa├º├úo\",\r\n            videoUrl: \"https://www.youtube.com/embed/Swl3eyTLpCk\",\r\n            thumbnail: \"https://img.youtube.com/vi/Swl3eyTLpCk/mqdefault.jpg\"\r\n        }\r\n    ];\r\n\r\n    // Monitoramento de Foco na Aba\r\n    useEffect(() => {\r\n        const handleVisibilityChange = () => {\r\n            if (document.hidden) {\r\n                setIsTabFocused(false);\r\n                setIsPlaying(false); // Pausa se sair\r\n                if (playerRef.current) playerRef.current.pauseVideo();\r\n            } else {\r\n                setIsTabFocused(true);\r\n                if (!isBlocked && !showPresenceCheck) {\r\n                    setIsPlaying(true); // Retoma se voltar e n├úo estiver bloqueado\r\n                    if (playerRef.current) playerRef.current.playVideo();\r\n                }\r\n            }\r\n        };\r\n\r\n        const handleInteraction = () => {\r\n            setLastInteraction(Date.now());\r\n        };\r\n\r\n        // Load YouTube API\r\n        if (!window.YT) {\r\n            const tag = document.createElement('script');\r\n            tag.src = \"https://www.youtube.com/iframe_api\";\r\n            const firstScriptTag = document.getElementsByTagName('script')[0];\r\n            firstScriptTag.parentNode?.insertBefore(tag, firstScriptTag);\r\n        }\r\n\r\n        document.addEventListener('visibilitychange', handleVisibilityChange);\r\n        window.addEventListener('mousemove', handleInteraction);\r\n        window.addEventListener('keydown', handleInteraction);\r\n        window.addEventListener('click', handleInteraction);\r\n\r\n        return () => {\r\n            document.removeEventListener('visibilitychange', handleVisibilityChange);\r\n            window.removeEventListener('mousemove', handleInteraction);\r\n            window.removeEventListener('keydown', handleInteraction);\r\n            window.removeEventListener('click', handleInteraction);\r\n        };\r\n    }, [isBlocked, showPresenceCheck]);\r\n\r\n    // Loop Principal de Pontos e Checagem\r\n    useEffect(() => {\r\n        let interval: any;\r\n\r\n        if (selectedLesson && !isBlocked) {\r\n            interval = setInterval(() => {\r\n                const timeSinceLastInteraction = Date.now() - lastInteraction;\r\n\r\n                // 1. Checagem de Foco\r\n                if (!isTabFocused) return; // N├úo conta ponto se aba oculta\r\n\r\n                // 2. Checagem de Presen├ºa (Anti-Bot)\r\n                if (timeSinceLastInteraction > interactionTimeout && !showPresenceCheck) {\r\n                    setShowPresenceCheck(true);\r\n                    setGeneratedCode(Math.floor(1000 + Math.random() * 9000).toString()); // Gera c├│digo 1000-9999\r\n                    setInputCode(''); // Limpa input anterior\r\n                    setPresenceTimer(presenceTimeout / 1000);\r\n                    return;\r\n                }\r\n\r\n                // 3. Contagem regressiva do Check de Presen├ºa\r\n                if (showPresenceCheck) {\r\n                    setPresenceTimer(prev => {\r\n                        if (prev <= 1) {\r\n                            // Falhou no check\r\n                            setIsBlocked(true);\r\n                            setShowPresenceCheck(false);\r\n                            setIsPlaying(false);\r\n                            return 0;\r\n                        }\r\n                        return prev - 1;\r\n                    });\r\n                    return; // N├úo ganha ponto enquanto o modal est├í aberto\r\n                }\r\n\r\n                // *** GANHO DE PONTOS ***\r\n                // Agora depende de playerState === 1 (PLAYING)\r\n                if (isPlaying && !showPresenceCheck && playerState === 1) {\r\n                    setSessionPoints(prev => prev + POINTS_PER_SECOND);\r\n                    setSessionTime(prev => prev + 1);\r\n                }\r\n\r\n            }, 1000);\r\n        }\r\n\r\n        return () => clearInterval(interval);\r\n    }, [selectedLesson, isPlaying, isTabFocused, lastInteraction, showPresenceCheck, isBlocked, playerState]);\r\n\r\n    // Calcular Ganhos\r\n    const currentEarnings = sessionPoints * POINTS_TO_CURRENCY_RATE;\r\n\r\n    const handleLessonSelect = async (lesson: any) => {\r\n        try {\r\n            const res = await apiService.post<any>('/education/start-session', { lessonId: lesson.id });\r\n            if (res.success && res.data) {\r\n                setSessionId(res.data.sessionId);\r\n                setSelectedLesson(lesson);\r\n                setIsPlaying(true);\r\n                setPlayerState(-1);\r\n                setSessionPoints(0);\r\n                setSessionTime(0);\r\n                setIsBlocked(false);\r\n                setLastInteraction(Date.now());\r\n            }\r\n        } catch (e: any) {\r\n            onSuccess(\"Erro\", \"N├úo foi poss├¡vel iniciar a sess├úo de estudo.\");\r\n        }\r\n    };\r\n\r\n    const getVideoId = (url: string) => {\r\n        const ytMatch = url.match(/(?:youtube\\.com\\/embed\\/|youtube\\.com\\/watch\\?v=|youtu\\.be\\/)([\\w-]+)/);\r\n        return ytMatch ? ytMatch[1] : null;\r\n    };\r\n\r\n    const handlePresenceConfirm = () => {\r\n        setShowPresenceCheck(false);\r\n        setLastInteraction(Date.now());\r\n        setIsPlaying(true);\r\n    };\r\n\r\n    const handleExitLesson = async () => {\r\n        setIsPlaying(false);\r\n        // Salvar pontos acumulados se houver ganhos\r\n        if (sessionPoints > 50 && sessionId) { // M├¡nimo de 50 pontos para requisitar (evita spam)\r\n            try {\r\n                await apiService.post('/education/reward', {\r\n                    points: Math.floor(sessionPoints),\r\n                    lessonId: selectedLesson.id,\r\n                    sessionId: sessionId\r\n                });\r\n                onSuccess(\"Sess├úo Finalizada\", `Parab├®ns! Voc├¬ ganhou R$ ${currentEarnings.toFixed(4)} e ${sessionPoints.toFixed(0)} pontos!`);\r\n            } catch (error: any) {\r\n                // Erro 429 = Limite moment├óneo\r\n                if (error.response?.status === 429 || error.message?.includes('Limite')) {\r\n                    onSuccess(\"Pontos Salvos\", \"O Fundo de Recompensas atingiu o limite moment├óneo. Seus pontos foram salvos e ser├úo processados em breve.\");\r\n                } else {\r\n                    console.error(error);\r\n                    // Fallback amig├ível\r\n                    onSuccess(\"Sess├úo Finalizada\", \"Seus pontos foram contabilizados no sistema.\");\r\n                }\r\n            }\r\n        } else if (sessionPoints > 0) {\r\n            // Feedback para poucos pontos\r\n            onSuccess(\"Sess├úo Curta\", \"Estude um pouco mais para ganhar recompensas significativas!\");\r\n        }\r\n\r\n        setSelectedLesson(null);\r\n        setSessionId(null);\r\n        setSessionPoints(0);\r\n        setSessionTime(0);\r\n    };\r\n\r\n    const formatTime = (seconds: number) => {\r\n        const mins = Math.floor(seconds / 60);\r\n        const secs = seconds % 60;\r\n        return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;\r\n    };\r\n\r\n    return (\r\n        <div className=\"space-y-6 pb-20 relative min-h-screen\">\r\n            {/* Header */}\r\n            {!selectedLesson && (\r\n                <div className=\"flex items-center gap-3 mb-6\">\r\n                    <button onClick={onBack} className=\"text-zinc-400 hover:text-white transition\">\r\n                        <XIcon size={24} />\r\n                    </button>\r\n                    <div>\r\n                        <h1 className=\"text-2xl font-bold text-white flex items-center gap-2\">\r\n                            <BookOpen className=\"text-blue-500\" />\r\n                            Cred30 Academy\r\n                        </h1>\r\n                        <p className=\"text-xs text-zinc-500 uppercase tracking-widest font-bold\">Estude e Monetize seu Tempo</p>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* Lista de Aulas */}\r\n            {!selectedLesson ? (\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n                    {lessons.map(lesson => (\r\n                        <div key={lesson.id} onClick={() => handleLessonSelect(lesson)} className=\"bg-surface border border-surfaceHighlight rounded-2xl overflow-hidden group hover:border-blue-500/50 transition-all cursor-pointer\">\r\n                            <div className=\"aspect-video bg-zinc-800 relative\">\r\n                                <img src={lesson.thumbnail} alt={lesson.title} className=\"w-full h-full object-cover opacity-80 group-hover:opacity-100 transition-opacity\" />\r\n                                <div className=\"absolute inset-0 flex items-center justify-center\">\r\n                                    <div className=\"w-12 h-12 bg-black/50 rounded-full flex items-center justify-center backdrop-blur-sm group-hover:scale-110 transition-transform\">\r\n                                        <PlayCircle className=\"text-white\" size={24} />\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"absolute top-2 right-2 bg-black/60 px-2 py-1 rounded text-[10px] text-white font-bold\">\r\n                                    {lesson.duration}\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"p-4\">\r\n                                <div className=\"text-[10px] text-blue-400 font-bold uppercase mb-1\">{lesson.category}</div>\r\n                                <h3 className=\"text-white font-bold leading-tight mb-2\">{lesson.title}</h3>\r\n                                <div className=\"flex items-center gap-2 text-[10px] text-zinc-500\">\r\n                                    <Trophy size={12} className=\"text-yellow-500\" />\r\n                                    <span>Ganhe at├® R$ 0,03 a cada 1k pts</span>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            ) : (\r\n                /* Modo Sala de Aula */\r\n                <div className=\"space-y-4 animate-in fade-in slide-in-from-bottom duration-300\">\r\n                    <div className=\"flex items-center justify-between bg-zinc-900/50 p-2 rounded-xl\">\r\n                        <button onClick={handleExitLesson} className=\"flex items-center gap-2 text-zinc-400 hover:text-red-400 transition text-xs font-bold px-2\">\r\n                            <ArrowLeft size={16} /> SAIR DA AULA\r\n                        </button>\r\n                        <div className=\"flex items-center gap-4\">\r\n                            <div className=\"flex flex-col items-end\">\r\n                                <span className=\"text-[10px] text-zinc-500 font-bold uppercase\">Tempo de Estudo</span>\r\n                                <span className=\"text-white font-mono font-bold\">{formatTime(sessionTime)}</span>\r\n                            </div>\r\n                            <div className=\"h-8 w-px bg-zinc-800\"></div>\r\n                            <div className=\"flex flex-col items-end\">\r\n                                <span className=\"text-[10px] text-zinc-500 font-bold uppercase\">Pontos</span>\r\n                                <span className=\"text-yellow-400 font-mono font-bold flex items-center gap-1\">\r\n                                    <Trophy size={12} /> {sessionPoints.toFixed(0)}\r\n                                </span>\r\n                            </div>\r\n                            <div className=\"h-8 w-px bg-zinc-800\"></div>\r\n                            <div className=\"flex flex-col items-end\">\r\n                                <span className=\"text-[10px] text-zinc-500 font-bold uppercase\">Ganhos</span>\r\n                                <span className=\"text-emerald-400 font-mono font-bold\">R$ {currentEarnings.toFixed(4)}</span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Aviso Anti-Farm */}\r\n                    <div className=\"bg-blue-500/10 border border-blue-500/20 rounded-xl p-3 flex items-start gap-3\">\r\n                        <BrainCircuit size={18} className=\"text-blue-400 shrink-0 mt-0.5\" />\r\n                        <p className=\"text-[11px] text-zinc-400 leading-tight\">\r\n                            <strong className=\"text-blue-400 block mb-1\">Sistema Anti-Farm Ativo</strong>\r\n                            Mantenha a aba aberta e interaja com a aula. Se mudar de aba ou ficar inativo por muito tempo, a contagem de pontos ser├í pausada automaticamente.\r\n                        </p>\r\n                    </div>\r\n\r\n                    {/* ├ürea do V├¡deo */}\r\n                    <div className={`aspect-video bg-black rounded-3xl overflow-hidden border border-zinc-800 shadow-2xl relative ${isBlocked ? 'grayscale opacity-50' : ''}`}>\r\n                        {!isBlocked ? (\r\n                            <div className=\"w-full h-full relative\">\r\n                                <div id=\"edu-player\" className=\"w-full h-full\"></div>\r\n                                <YouTubeInit\r\n                                    videoId={getVideoId(selectedLesson.videoUrl)!}\r\n                                    onStateChange={(state: number) => setPlayerState(state)}\r\n                                    onReady={(player: any) => {\r\n                                        playerRef.current = player;\r\n                                        player.playVideo();\r\n                                    }}\r\n                                    playerId=\"edu-player\"\r\n                                />\r\n                            </div>\r\n                        ) : (\r\n                            <div className=\"absolute inset-0 flex flex-col items-center justify-center p-8 text-center bg-zinc-900\">\r\n                                <AlertTriangle size={48} className=\"text-red-500 mb-4 animate-bounce\" />\r\n                                <h2 className=\"text-2xl font-bold text-white mb-2\">Sess├úo Bloqueada</h2>\r\n                                <p className=\"text-zinc-400 text-sm mb-6\">Detectamos inatividade prolongada. Para continuar acumulando pontos, voc├¬ precisa reiniciar a aula.</p>\r\n                                <button onClick={handleExitLesson} className=\"bg-red-500 hover:bg-red-400 text-white font-bold py-3 px-8 rounded-xl transition\">\r\n                                    Encerrar Sess├úo\r\n                                </button>\r\n                            </div>\r\n                        )}\r\n\r\n                        {/* Overlay de Pausa por Foco */}\r\n                        {!isTabFocused && !isBlocked && (\r\n                            <div className=\"absolute inset-0 bg-black/90 backdrop-blur-sm flex flex-col items-center justify-center text-center z-50\">\r\n                                <Clock size={48} className=\"text-yellow-500 mb-4 animate-pulse\" />\r\n                                <h3 className=\"text-xl font-bold text-white\">Sess├úo Pausada</h3>\r\n                                <p className=\"text-zinc-400 text-sm mt-2\">Volte para esta aba para continuar ganhando pontos.</p>\r\n                            </div>\r\n                        )}\r\n\r\n                        {/* Modal Check de Presen├ºa */}\r\n                        {showPresenceCheck && !isBlocked && (\r\n                            <div className=\"fixed inset-0 z-[60] bg-black/95 backdrop-blur-md overflow-y-auto\">\r\n                                <div className=\"min-h-full w-full flex items-center justify-center p-4\">\r\n                                    <div className=\"bg-zinc-900 border border-blue-500/30 p-5 rounded-3xl w-full max-w-[300px] text-center shadow-2xl shadow-blue-900/20 relative\">\r\n                                        <div className=\"w-12 h-12 bg-blue-500/10 rounded-full flex items-center justify-center mx-auto mb-3 text-blue-400 border border-blue-500/20\">\r\n                                            <MousePointerClick size={24} />\r\n                                        </div>\r\n                                        <h3 className=\"text-lg font-bold text-white mb-1\">Presen├ºa</h3>\r\n                                        <p className=\"text-zinc-400 text-[11px] mb-4 px-2\">Digite o c├│digo para continuar:</p>\r\n\r\n                                        <div className=\"bg-black/60 p-2 rounded-xl mb-4 border border-zinc-800 flex justify-center items-center gap-2\">\r\n                                            {generatedCode.split('').map((digit, i) => (\r\n                                                <span key={i} className=\"text-xl font-mono font-black text-blue-400 w-8 h-10 flex items-center justify-center bg-blue-500/5 rounded\">{digit}</span>\r\n                                            ))}\r\n                                        </div>\r\n\r\n                                        <input\r\n                                            type=\"tel\"\r\n                                            pattern=\"[0-9]*\"\r\n                                            maxLength={4}\r\n                                            value={inputCode}\r\n                                            onChange={(e) => setInputCode(e.target.value.slice(0, 4))}\r\n                                            onKeyDown={(e) => {\r\n                                                if (e.key === 'Enter' && inputCode === generatedCode) {\r\n                                                    handlePresenceConfirm();\r\n                                                }\r\n                                            }}\r\n                                            placeholder=\"0000\"\r\n                                            className=\"w-full bg-zinc-800 border border-zinc-700 text-white rounded-xl p-3 text-center font-bold text-xl mb-2 focus:ring-2 focus:ring-blue-500 outline-none tracking-widest placeholder-zinc-700\"\r\n                                            autoFocus\r\n                                        />\r\n\r\n                                        <div className=\"flex justify-between items-center text-[10px] font-bold uppercase mb-4 px-2\">\r\n                                            <span className={presenceTimer < 5 ? \"text-red-500 animate-pulse\" : \"text-zinc-500\"}>Tempo: {presenceTimer}s</span>\r\n                                            <span className={inputCode.length === 4 ? (inputCode === generatedCode ? \"text-emerald-500\" : \"text-red-500\") : \"text-zinc-600\"}>\r\n                                                {inputCode.length === 4 ? (inputCode === generatedCode ? \"Correto\" : \"Inv├ílido\") : \"...\"}\r\n                                            </span>\r\n                                        </div>\r\n\r\n                                        <button\r\n                                            onClick={handlePresenceConfirm}\r\n                                            disabled={inputCode !== generatedCode}\r\n                                            className={`w-full font-bold py-3 rounded-xl transition-all shadow-lg flex items-center justify-center gap-2 text-xs uppercase ${inputCode === generatedCode ? 'bg-blue-600 hover:bg-blue-500 text-white shadow-blue-900/40 scale-105' : 'bg-zinc-800 text-zinc-600 cursor-not-allowed border border-zinc-700'}`}\r\n                                        >\r\n                                            <CheckCircle2 size={16} /> Confirmar\r\n                                        </button>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\n// Helper component to initialize individual YouTube players\r\nconst YouTubeInit: React.FC<{\r\n    videoId: string;\r\n    onStateChange: (state: number) => void;\r\n    onReady: (player: any) => void;\r\n    playerId?: string;\r\n}> = ({ videoId, onStateChange, onReady, playerId = 'edu-player' }) => {\r\n    useEffect(() => {\r\n        const initPlayer = () => {\r\n            new window.YT.Player(playerId, {\r\n                videoId: videoId,\r\n                playerVars: {\r\n                    autoplay: 1,\r\n                    controls: 1,\r\n                    modestbranding: 1,\r\n                    rel: 0,\r\n                    iv_load_policy: 3\r\n                },\r\n                events: {\r\n                    onReady: (event: any) => onReady(event.target),\r\n                    onStateChange: (event: any) => onStateChange(event.data)\r\n                }\r\n            });\r\n        };\r\n\r\n        if (window.YT && window.YT.Player) {\r\n            initPlayer();\r\n        } else {\r\n            const originalOnReady = window.onYouTubeIframeAPIReady;\r\n            window.onYouTubeIframeAPIReady = () => {\r\n                if (originalOnReady) originalOnReady();\r\n                initPlayer();\r\n            };\r\n        }\r\n    }, [videoId, playerId]);\r\n\r\n    return null;\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josia\\Desktop\\projetos\\cred30\\packages\\frontend-v2\\src\\presentation\\components\\views\\FaqView.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","message":"Definition for rule '@typescript-eslint/no-unused-vars' was not found.","line":1,"column":1,"endLine":1,"endColumn":2,"severity":2,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport { ChevronDown, ChevronUp, HelpCircle, MessageCircle, ShieldCheck, TrendingUp, DollarSign, Users } from 'lucide-react';\r\n\r\ninterface FaqItemProps {\r\n    question: string;\r\n    answer: string;\r\n    icon: React.ReactNode;\r\n}\r\n\r\nconst FaqItem: React.FC<FaqItemProps> = ({ question, answer, icon }) => {\r\n    const [isOpen, setIsOpen] = useState(false);\r\n\r\n    return (\r\n        <div className=\"border border-zinc-800 rounded-2xl overflow-hidden bg-zinc-900/30 mb-3 transition-all\">\r\n            <button\r\n                onClick={() => setIsOpen(!isOpen)}\r\n                className=\"w-full p-4 flex items-center justify-between text-left hover:bg-zinc-800/50 transition-colors\"\r\n            >\r\n                <div className=\"flex items-center gap-3\">\r\n                    <div className=\"text-primary-400 p-2 bg-primary-400/10 rounded-lg\">\r\n                        {icon}\r\n                    </div>\r\n                    <span className=\"font-bold text-sm text-white\">{question}</span>\r\n                </div>\r\n                {isOpen ? <ChevronUp size={18} className=\"text-zinc-500\" /> : <ChevronDown size={18} className=\"text-zinc-500\" />}\r\n            </button>\r\n            {isOpen && (\r\n                <div className=\"p-4 pt-0 text-xs text-zinc-400 leading-relaxed border-t border-zinc-800/50 animate-in fade-in slide-in-from-top-2 duration-200\">\r\n                    {answer}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport const FaqView: React.FC = () => {\r\n    const faqs = [\r\n        {\r\n            icon: <ShieldCheck size={18} />,\r\n            question: \"O Cred30 ├® um banco?\",\r\n            answer: \"N├úo. O Cred30 ├® uma plataforma tecnol├│gica que facilita a gest├úo de um Clube de Benef├¡cios operando sob Sociedade em Conta de Participa├º├úo (SCP) e contratos de M├║tuo Civil entre membros, conforme os Artigos 991 a 996 do C├│digo Civil Brasileiro. N├úo somos uma institui├º├úo financeira regulada pelo BACEN.\"\r\n        },\r\n        {\r\n            icon: <TrendingUp size={18} />,\r\n            question: \"Como funcionam as cotas de R$ 50,00?\",\r\n            answer: \"Ao adquirir uma participa├º├úo (licen├ºa), voc├¬ aporta R$ 42,00 no Capital Social (valor que gera b├┤nus e ├® resgat├ível) e R$ 8,00 em uma Taxa Administrativa ├║nica para manuten├º├úo e tecnologia da plataforma. Esse modelo garante a sustentabilidade do clube a longo prazo.\"\r\n        },\r\n        {\r\n            icon: <DollarSign size={18} />,\r\n            question: \"Quando posso sacar meu dinheiro?\",\r\n            answer: \"Os b├┤nus de participa├º├úo podem ser sacados assim que atingirem o valor m├¡nimo. J├í o Capital Social das participa├º├Áes possui um per├¡odo de car├¬ncia (vesting) para garantir a estabilidade do fundo comum. Consulte a aba 'Carteira' para ver seus prazos de resgate.\"\r\n        },\r\n        {\r\n            icon: <Users size={18} />,\r\n            question: \"O que acontece se eu n├úo pagar um apoio?\",\r\n            answer: \"Como todos os apoios m├║tuos s├úo baseados em lastros reais, caso haja atraso superior a 5 dias, o sistema executa automaticamente o lastro (suas participa├º├Áes ativas) para recompor o fundo comum. Seu score tamb├®m ser├í reduzido para zero.\"\r\n        },\r\n        {\r\n            icon: <MessageCircle size={18} />,\r\n            question: \"Como funciona o b├┤nus de indica├º├úo?\",\r\n            answer: \"Voc├¬ ganha uma participa├º├úo sobre cada nova licen├ºa adquirida por membros que entrarem com seu c├│digo de convite. Esse valor cai direto no seu saldo dispon├¡vel para saque ou reinvestimento.\"\r\n        }\r\n    ];\r\n\r\n    return (\r\n        <div className=\"animate-in fade-in slide-in-from-bottom duration-500\">\r\n            <div className=\"flex flex-col items-center text-center mb-8\">\r\n                <div className=\"w-16 h-16 bg-primary-400/10 rounded-full flex items-center justify-center text-primary-400 mb-4 shadow-xl shadow-primary-900/20\">\r\n                    <HelpCircle size={32} />\r\n                </div>\r\n                <h1 className=\"text-2xl font-black text-white mb-2 uppercase tracking-tighter\">Central de Ajuda</h1>\r\n                <p className=\"text-zinc-500 text-xs max-w-xs\">Tire suas d├║vidas sobre o funcionamento do clube e as regras de participa├º├úo.</p>\r\n            </div>\r\n\r\n            <div className=\"max-w-2xl mx-auto\">\r\n                <h2 className=\"text-[10px] font-black text-zinc-500 uppercase tracking-[0.2em] mb-4 ml-2\">Perguntas Frequentes</h2>\r\n                {faqs.map((faq, index) => (\r\n                    <FaqItem key={index} {...faq} />\r\n                ))}\r\n\r\n                <div className=\"mt-8 p-6 bg-gradient-to-br from-zinc-900 to-black border border-zinc-800 rounded-3xl text-center\">\r\n                    <h3 className=\"text-white font-bold mb-2\">Ainda tem d├║vidas?</h3>\r\n                    <p className=\"text-xs text-zinc-500 mb-6\">Nosso atendimento inteligente est├í dispon├¡vel 24h para ajudar voc├¬ diretamente pelo chat.</p>\r\n                    <button\r\n                        onClick={() => window.alert(\"Clique no ├¡cone do 'Edy' no canto da tela para falar com nosso suporte direto!\")}\r\n                        className=\"w-full bg-primary-500 hover:bg-primary-400 text-black font-black py-4 px-8 rounded-2xl transition-all flex items-center justify-center gap-3 text-sm shadow-xl shadow-primary-900/20\"\r\n                    >\r\n                        <MessageCircle size={20} />\r\n                        Abrir Chat de Suporte\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josia\\Desktop\\projetos\\cred30\\packages\\frontend-v2\\src\\presentation\\components\\views\\GamesView.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","message":"Definition for rule '@typescript-eslint/no-unused-vars' was not found.","line":1,"column":1,"endLine":1,"endColumn":2,"severity":2,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { Gamepad2, PlayCircle, Trophy, ArrowLeft, RefreshCw, X as XIcon, BookOpen } from 'lucide-react';\r\nimport { PromoVideoPlayer } from '../ui/PromoVideoPlayer';\r\nimport { apiService } from '../../../application/services/api.service';\r\n\r\ninterface GamesViewProps {\r\n    onBack?: () => void;\r\n}\r\n\r\nexport const GamesView: React.FC<GamesViewProps> = ({ onBack }) => {\r\n    const [loadingAd, setLoadingAd] = useState(false);\r\n    const [showAdModal, setShowAdModal] = useState(false);\r\n    const [selectedGameUrl, setSelectedGameUrl] = useState('');\r\n    const [adCompleted, setAdCompleted] = useState(false);\r\n\r\n    const handlePlayGame = (url: string) => {\r\n        setSelectedGameUrl(url);\r\n        setShowAdModal(true);\r\n        setAdCompleted(false);\r\n    };\r\n\r\n    const handleAdFinished = () => {\r\n        setAdCompleted(true);\r\n    };\r\n\r\n    const handleManualClick = async () => {\r\n        setLoadingAd(true);\r\n        let rewardMsg = '';\r\n\r\n        try {\r\n            // Tenta creditar recompensa real\r\n            const res = await apiService.post<any>('/monetization/reward-video', {});\r\n            if (res.success) {\r\n                rewardMsg = 'Recompensa Recebida! (+5 Score)';\r\n            }\r\n        } catch (error: any) {\r\n            console.error(error);\r\n            if (error.response?.data?.message) {\r\n                rewardMsg = `Aviso: ${error.response.data.message}`;\r\n            }\r\n        }\r\n\r\n        // Abrir Smart Link (Monetiza├º├úo) em nova aba\r\n        const adWindow = window.open('https://www.effectivegatecpm.com/ec4mxdzvs?key=a9eefff1a8aa7769523373a66ff484aa', '_blank');\r\n\r\n        // Se o bloqueador de popvps barrar, o adWindow ser├í nulo\r\n        if (!adWindow) {\r\n            console.warn(\"Popup bloqueado pelo navegador\");\r\n        }\r\n\r\n        // Abrir Jogo no final (Redirecionar a guia atual ou abrir nova)\r\n        // Para evitar bloqueio de m├║ltiplos popups, vamos redirecionar a guia ATUAL para o jogo\r\n        // E deixar o an├║ncio na guia nova\r\n        setTimeout(() => {\r\n            if (selectedGameUrl) {\r\n                window.location.href = selectedGameUrl;\r\n            }\r\n            setShowAdModal(false);\r\n            setLoadingAd(false);\r\n            setAdCompleted(false);\r\n            if (rewardMsg) alert(rewardMsg);\r\n        }, 300);\r\n    };\r\n\r\n    const navigate = useNavigate();\r\n\r\n    // Navegar para Educa├º├úo\r\n    const handleEducation = () => {\r\n        navigate('/app/education');\r\n    };\r\n\r\n    const games = [\r\n        {\r\n            id: 1,\r\n            title: 'Subway Surfers Online',\r\n            description: 'Corra, pule e desvie dos trens para bater recordes.',\r\n            image: '/images/games/subway-surfers.png',\r\n            url: 'https://poki.com.br/g/subway-surfers',\r\n            reward: 'R$ 0,002',\r\n            category: 'A├º├úo'\r\n        },\r\n        {\r\n            id: 2,\r\n            title: 'Quiz de Finan├ºas Cred30',\r\n            description: 'Teste seus conhecimentos e ganhe pontos de score reais.',\r\n            image: '/images/games/finance-quiz.png',\r\n            onAction: () => handleEducation(),\r\n            reward: '+5 Score',\r\n            category: 'Educa├º├úo'\r\n        },\r\n        {\r\n            id: 3,\r\n            title: 'Moto X3M',\r\n            description: 'Desafie a gravidade em pistas de motocross insanas.',\r\n            image: '/images/games/moto-x3m.png',\r\n            url: 'https://poki.com.br/g/moto-x3m',\r\n            reward: 'R$ 0,002',\r\n            category: 'Esporte'\r\n        }\r\n    ];\r\n\r\n    return (\r\n        <div className=\"space-y-6 pb-20 relative\">\r\n            {/* Header */}\r\n            <div className=\"flex items-center justify-between\">\r\n                <div className=\"flex items-center gap-3\">\r\n                    {onBack && (\r\n                        <button onClick={onBack} className=\"text-zinc-400 hover:text-white transition\">\r\n                            <ArrowLeft size={24} />\r\n                        </button>\r\n                    )}\r\n                    <div>\r\n                        <h1 className=\"text-2xl font-bold text-white flex items-center gap-2\">\r\n                            <Gamepad2 className=\"text-purple-500\" />\r\n                            Jogos & Divers├úo\r\n                        </h1>\r\n                        <p className=\"text-xs text-zinc-500 uppercase tracking-widest font-bold\">Divirta-se e Obtenha Benef├¡cios</p>\r\n                    </div>\r\n                </div>\r\n                <button\r\n                    onClick={handleEducation}\r\n                    className=\"flex flex-col items-center gap-1 bg-zinc-800/50 p-2 rounded-xl border border-zinc-700 hover:border-blue-500/50 transition\"\r\n                >\r\n                    <BookOpen size={20} className=\"text-blue-400\" />\r\n                    <span className=\"text-[10px] font-bold text-zinc-300\">Aprender</span>\r\n                </button>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                {games.map(game => (\r\n                    <div key={game.id} className=\"bg-surface border border-surfaceHighlight rounded-2xl overflow-hidden group hover:border-purple-500/50 transition-all\">\r\n                        <div className=\"h-32 bg-zinc-800 relative overflow-hidden\">\r\n                            <img src={game.image} alt={game.title} className=\"w-full h-full object-cover opacity-60 group-hover:opacity-80 transition-opacity group-hover:scale-105 duration-500\" />\r\n                            <div className=\"absolute top-2 right-2 bg-black/60 backdrop-blur px-2 py-1 rounded-lg text-[10px] font-bold text-white border border-white/10 uppercase\">\r\n                                {game.category}\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"p-4\">\r\n                            <div className=\"flex justify-between items-start mb-2\">\r\n                                <h3 className=\"text-lg font-bold text-white\">{game.title}</h3>\r\n                                <div className=\"bg-purple-500/10 text-purple-400 text-[10px] font-bold px-2 py-1 rounded border border-purple-500/20 flex items-center gap-1\">\r\n                                    <Trophy size={10} /> {game.reward}\r\n                                </div>\r\n                            </div>\r\n                            <p className=\"text-xs text-zinc-400 mb-4\">{game.description}</p>\r\n                            <button\r\n                                onClick={() => (game as any).onAction ? (game as any).onAction() : handlePlayGame(game.url!)}\r\n                                className=\"w-full bg-zinc-800 hover:bg-purple-600 hover:text-white text-zinc-300 py-3 rounded-xl font-bold text-xs transition-colors flex items-center justify-center gap-2\"\r\n                            >\r\n                                <PlayCircle size={16} />\r\n                                ACESSAR\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                ))}\r\n\r\n                {/* Card \"Em Breve\" */}\r\n                <div className=\"bg-surface/50 border border-surfaceHighlight border-dashed rounded-2xl p-6 flex flex-col items-center justify-center text-center min-h-[200px]\">\r\n                    <div className=\"w-12 h-12 bg-zinc-800 rounded-full flex items-center justify-center text-zinc-600 mb-3\">\r\n                        <Gamepad2 size={24} />\r\n                    </div>\r\n                    <h3 className=\"text-zinc-500 font-bold mb-1\">Mais Jogos em Breve</h3>\r\n                    <p className=\"text-[10px] text-zinc-600 max-w-[200px]\">Novos parceiros est├úo sendo integrados ├á plataforma.</p>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Ad Modal */}\r\n            {showAdModal && (\r\n                <div className=\"fixed inset-0 bg-black/95 z-[200] flex items-center justify-center p-4 animate-in fade-in duration-300\">\r\n                    <div className=\"bg-surface border border-surfaceHighlight rounded-3xl p-0 max-w-lg w-full relative overflow-hidden shadow-2xl\">\r\n                        {!adCompleted && (\r\n                            <button onClick={() => setShowAdModal(false)} className=\"absolute top-4 right-4 z-50 bg-black/50 text-white p-1 rounded-full hover:bg-black/80 transition\">\r\n                                <XIcon size={20} />\r\n                            </button>\r\n                        )}\r\n\r\n                        {!adCompleted ? (\r\n                            <PromoVideoPlayer\r\n                                duration={5}\r\n                                onComplete={handleAdFinished}\r\n                            />\r\n                        ) : (\r\n                            <div className=\"p-8 text-center animate-in zoom-in duration-300\">\r\n                                <div className=\"w-20 h-20 bg-purple-500/20 rounded-full flex items-center justify-center mx-auto mb-6 text-purple-400 animate-bounce\">\r\n                                    <Trophy size={40} />\r\n                                </div>\r\n                                <h2 className=\"text-2xl font-black text-white mb-2\">Recompensa Liberada!</h2>\r\n                                <p className=\"text-zinc-400 text-sm mb-8\">\r\n                                    Obrigado por apoiar a comunidade. Clique abaixo para acessar seu jogo.\r\n                                </p>\r\n                                <button\r\n                                    onClick={handleManualClick}\r\n                                    className=\"w-full bg-purple-600 hover:bg-purple-500 text-white font-black py-4 rounded-xl shadow-lg shadow-purple-900/40 transition active:scale-95 flex items-center justify-center gap-2 text-lg mb-2\"\r\n                                >\r\n                                    {loadingAd ? <RefreshCw className=\"animate-spin\" /> : <PlayCircle />} ACESSAR\r\n                                </button>\r\n                                <p className=\"text-[10px] text-zinc-500 italic\">\r\n                                    O jogo abrir├í nesta aba. O an├║ncio abrir├í em uma nova aba.\r\n                                </p>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josia\\Desktop\\projetos\\cred30\\packages\\frontend-v2\\src\\presentation\\components\\views\\HistoryView.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","message":"Definition for rule '@typescript-eslint/no-unused-vars' was not found.","line":1,"column":1,"endLine":1,"endColumn":2,"severity":2,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useMemo } from 'react';\r\nimport { ArrowDownLeft, ArrowUpRight, Clock, CheckCircle2, XCircle, Search, Filter, Calendar, DollarSign, TrendingUp, TrendingDown, Receipt, ChevronDown } from 'lucide-react';\r\nimport { Transaction } from '../../../domain/types/common.types';\r\nimport { AdBanner } from '../ui/AdBanner';\r\n\r\ninterface HistoryViewProps {\r\n    transactions: Transaction[];\r\n    isPro?: boolean;\r\n}\r\n\r\ntype FilterType = 'ALL' | 'IN' | 'OUT';\r\ntype StatusFilter = 'ALL' | 'APPROVED' | 'PENDING' | 'REJECTED';\r\n\r\nexport const HistoryView = ({ transactions, isPro }: HistoryViewProps) => {\r\n    const [searchTerm, setSearchTerm] = useState('');\r\n    const [typeFilter, setTypeFilter] = useState<FilterType>('ALL');\r\n    const [statusFilter, setStatusFilter] = useState<StatusFilter>('ALL');\r\n    const [showFilters, setShowFilters] = useState(false);\r\n\r\n    // Classificar tipos de transa├º├úo\r\n    const isIncoming = (type: string) => ['DEPOSIT', 'DIVIDEND', 'REFERRAL_BONUS', 'LOAN_RECEIVED', 'QUOTA_SELL', 'EDUCATION_REWARD', 'GAME_WIN', 'ADMIN_GIFT'].includes(type);\r\n    const isOutgoing = (type: string) => ['WITHDRAWAL', 'LOAN_PAYMENT', 'QUOTA_PURCHASE', 'LOAN_INSTALLMENT', 'GAME_BET'].includes(type);\r\n\r\n    // Traduzir tipos\r\n    const translateType = (type: string) => {\r\n        const map: Record<string, string> = {\r\n            'DEPOSIT': 'Ades├úo Social',\r\n            'WITHDRAWAL': 'Resgate de Capital',\r\n            'DIVIDEND': 'Excedente Operacional',\r\n            'REFERRAL_BONUS': 'B├┤nus de Indica├º├úo',\r\n            'LOAN_RECEIVED': 'Apoio M├║tuo Recebido',\r\n            'QUOTA_SELL': 'Cess├úo de Participa├º├úo',\r\n            'EDUCATION_REWARD': 'Recompensa Educacional',\r\n            'GAME_WIN': 'Bonifica├º├úo de Intera├º├úo',\r\n            'ADMIN_GIFT': 'Presente Administrativo',\r\n        };\r\n        return map[type] || type;\r\n    };\r\n\r\n    // Traduzir status\r\n    const translateStatus = (status: string) => {\r\n        const map: Record<string, string> = {\r\n            'APPROVED': 'Aprovado',\r\n            'PENDING': 'Pendente',\r\n            'REJECTED': 'Rejeitado',\r\n            'PAYMENT_PENDING': 'Aguardando Pagamento',\r\n            'COMPLETED': 'Conclu├¡do',\r\n        };\r\n        return map[status] || status;\r\n    };\r\n\r\n    // Filtrar transa├º├Áes\r\n    const filteredTransactions = useMemo(() => {\r\n        return transactions.filter(t => {\r\n            // Filtro de busca\r\n            if (searchTerm) {\r\n                const search = searchTerm.toLowerCase();\r\n                const matchDesc = t.description?.toLowerCase().includes(search);\r\n                const matchType = translateType(t.type).toLowerCase().includes(search);\r\n                const matchAmount = t.amount.toString().includes(search);\r\n                if (!matchDesc && !matchType && !matchAmount) return false;\r\n            }\r\n\r\n            // Filtro de tipo\r\n            if (typeFilter === 'IN' && !isIncoming(t.type)) return false;\r\n            if (typeFilter === 'OUT' && !isOutgoing(t.type)) return false;\r\n\r\n            // Filtro de status\r\n            if (statusFilter !== 'ALL' && t.status !== statusFilter) return false;\r\n\r\n            return true;\r\n        });\r\n    }, [transactions, searchTerm, typeFilter, statusFilter]);\r\n\r\n    // Calcular totais\r\n    const totals = useMemo(() => {\r\n        const incoming = filteredTransactions.filter(t => isIncoming(t.type)).reduce((sum, t) => sum + t.amount, 0);\r\n        const outgoing = filteredTransactions.filter(t => isOutgoing(t.type)).reduce((sum, t) => sum + t.amount, 0);\r\n        return { incoming, outgoing, net: incoming - outgoing };\r\n    }, [filteredTransactions]);\r\n\r\n    // Agrupar por data\r\n    const groupedTransactions = useMemo(() => {\r\n        const groups: Record<string, Transaction[]> = {};\r\n        filteredTransactions.forEach(t => {\r\n            const date = new Date(t.date).toLocaleDateString('pt-BR');\r\n            if (!groups[date]) groups[date] = [];\r\n            groups[date].push(t);\r\n        });\r\n        return groups;\r\n    }, [filteredTransactions]);\r\n\r\n    const formatCurrency = (val: number) => val.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });\r\n    const formatTime = (timestamp: number) => new Date(timestamp).toLocaleTimeString('pt-BR', { hour: '2-digit', minute: '2-digit' });\r\n\r\n    return (\r\n        <div className=\"space-y-6 max-w-4xl mx-auto pb-32\">\r\n            {/* Header */}\r\n            <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4\">\r\n                <div>\r\n                    <h1 className=\"text-xl sm:text-2xl font-bold text-white\">Extrato Completo</h1>\r\n                    <p className=\"text-zinc-400 text-sm mt-1\">{filteredTransactions.length} transa├º├Áes encontradas</p>\r\n                </div>\r\n            </div>\r\n\r\n\r\n            {/* Cards de resumo */}\r\n            <div className=\"grid grid-cols-2 sm:grid-cols-3 gap-3 sm:gap-4\">\r\n                <div className=\"glass p-4\">\r\n                    <div className=\"flex items-center gap-2 mb-2\">\r\n                        <TrendingUp size={16} className=\"text-emerald-400\" />\r\n                        <span className=\"text-[10px] text-zinc-500 font-bold uppercase tracking-widest\">Entradas</span>\r\n                    </div>\r\n                    <p className=\"text-lg sm:text-xl font-black text-emerald-400\">{formatCurrency(totals.incoming)}</p>\r\n                </div>\r\n                <div className=\"glass p-4\">\r\n                    <div className=\"flex items-center gap-2 mb-2\">\r\n                        <TrendingDown size={16} className=\"text-red-400\" />\r\n                        <span className=\"text-[10px] text-zinc-500 font-bold uppercase tracking-widest\">Sa├¡das</span>\r\n                    </div>\r\n                    <p className=\"text-lg sm:text-xl font-bold text-red-400\">{formatCurrency(totals.outgoing)}</p>\r\n                </div>\r\n                <div className=\"col-span-2 sm:col-span-1 glass p-4\">\r\n                    <div className=\"flex items-center gap-2 mb-2\">\r\n                        <DollarSign size={16} className=\"text-primary-400\" />\r\n                        <span className=\"text-[10px] text-zinc-500 font-bold uppercase tracking-widest\">Per├¡odo</span>\r\n                    </div>\r\n                    <p className={`text-lg sm:text-xl font-bold ${totals.net >= 0 ? 'text-emerald-400' : 'text-red-400'}`}>\r\n                        {formatCurrency(totals.net)}\r\n                    </p>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Barra de busca e filtros */}\r\n            <div className=\"space-y-3\">\r\n                <div className=\"flex gap-2\">\r\n                    <div className=\"relative flex-1\">\r\n                        <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 text-zinc-500\" size={18} />\r\n                        <input\r\n                            type=\"text\"\r\n                            placeholder=\"Buscar transa├º├úo...\"\r\n                            value={searchTerm}\r\n                            onChange={(e) => setSearchTerm(e.target.value)}\r\n                            className=\"w-full glass rounded-xl py-3 pl-10 pr-4 text-sm text-white placeholder:text-zinc-600 focus:border-primary-500 outline-none transition\"\r\n                        />\r\n                    </div>\r\n                    <button\r\n                        onClick={() => setShowFilters(!showFilters)}\r\n                        className={`flex items-center gap-2 px-4 py-3 rounded-xl border transition ${showFilters ? 'bg-primary-500/10 border-primary-500/30 text-primary-400' : 'bg-surface border-surfaceHighlight text-zinc-400 hover:text-white'}`}\r\n                        aria-label=\"Abrir filtros\"\r\n                        title=\"Abrir filtros\"\r\n                    >\r\n                        <Filter size={18} />\r\n                        <ChevronDown size={16} className={`transition-transform ${showFilters ? 'rotate-180' : ''}`} />\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Filtros expandidos */}\r\n                {showFilters && (\r\n                    <div className=\"bg-surface border border-surfaceHighlight rounded-xl p-4 space-y-4 animate-in fade-in slide-in-from-top-2\">\r\n                        <div>\r\n                            <label className=\"text-xs text-zinc-400 mb-2 block\">Tipo de Transa├º├úo</label>\r\n                            <div className=\"flex flex-wrap gap-2\">\r\n                                {[\r\n                                    { value: 'ALL', label: 'Todas' },\r\n                                    { value: 'IN', label: 'Entradas' },\r\n                                    { value: 'OUT', label: 'Sa├¡das' },\r\n                                ].map((opt) => (\r\n                                    <button\r\n                                        key={opt.value}\r\n                                        onClick={() => setTypeFilter(opt.value as FilterType)}\r\n                                        className={`px-3 py-1.5 rounded-lg text-xs font-medium transition ${typeFilter === opt.value ? 'bg-primary-500 text-black' : 'bg-surfaceHighlight text-zinc-400 hover:text-white'}`}\r\n                                    >\r\n                                        {opt.label}\r\n                                    </button>\r\n                                ))}\r\n                            </div>\r\n                        </div>\r\n                        <div>\r\n                            <label className=\"text-xs text-zinc-400 mb-2 block\">Status</label>\r\n                            <div className=\"flex flex-wrap gap-2\">\r\n                                {[\r\n                                    { value: 'ALL', label: 'Todos' },\r\n                                    { value: 'APPROVED', label: 'Aprovados' },\r\n                                    { value: 'PENDING', label: 'Pendentes' },\r\n                                    { value: 'REJECTED', label: 'Rejeitados' },\r\n                                ].map((opt) => (\r\n                                    <button\r\n                                        key={opt.value}\r\n                                        onClick={() => setStatusFilter(opt.value as StatusFilter)}\r\n                                        className={`px-3 py-1.5 rounded-lg text-xs font-medium transition ${statusFilter === opt.value ? 'bg-primary-500 text-black' : 'bg-surfaceHighlight text-zinc-400 hover:text-white'}`}\r\n                                    >\r\n                                        {opt.label}\r\n                                    </button>\r\n                                ))}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Lista de transa├º├Áes agrupadas por data */}\r\n                {Object.keys(groupedTransactions).length === 0 ? (\r\n                    <div className=\"text-center py-16 bg-surface/50 rounded-2xl border border-surfaceHighlight border-dashed\">\r\n                        <Receipt size={48} className=\"mx-auto text-zinc-600 mb-4\" />\r\n                        <p className=\"text-zinc-500\">Nenhuma transa├º├úo encontrada.</p>\r\n                        {(searchTerm || typeFilter !== 'ALL' || statusFilter !== 'ALL') && (\r\n                            <button\r\n                                onClick={() => { setSearchTerm(''); setTypeFilter('ALL'); setStatusFilter('ALL'); }}\r\n                                className=\"mt-4 text-primary-400 text-sm hover:underline\"\r\n                                aria-label=\"Limpar filtros\"\r\n                                title=\"Limpar filtros\"\r\n                            >\r\n                                Limpar filtros\r\n                            </button>\r\n                        )}\r\n                    </div>\r\n                ) : (\r\n                    <div className=\"space-y-6\">\r\n                        {Object.entries(groupedTransactions).map(([date, dayTransactions]) => (\r\n                            <div key={date} className=\"space-y-2\">\r\n                                {/* Cabe├ºalho do dia */}\r\n                                <div className=\"flex items-center gap-2 text-zinc-500 text-xs font-medium px-1\">\r\n                                    <Calendar size={14} />\r\n                                    <span>{date}</span>\r\n                                    <span className=\"text-zinc-600\">ÔÇó</span>\r\n                                    <span>{dayTransactions.length} transa├º├Áes</span>\r\n                                </div>\r\n\r\n                                {/* Transa├º├Áes do dia */}\r\n                                <div className=\"space-y-3\">\r\n                                    {dayTransactions.map((t) => {\r\n                                        const incoming = isIncoming(t.type);\r\n                                        const statusColor = t.status === 'APPROVED' || t.status === 'COMPLETED'\r\n                                            ? 'text-emerald-400'\r\n                                            : t.status === 'PENDING' || t.status === 'PAYMENT_PENDING'\r\n                                                ? 'text-yellow-400'\r\n                                                : 'text-red-400';\r\n                                        const StatusIcon = t.status === 'APPROVED' || t.status === 'COMPLETED'\r\n                                            ? CheckCircle2\r\n                                            : t.status === 'PENDING' || t.status === 'PAYMENT_PENDING'\r\n                                                ? Clock\r\n                                                : XCircle;\r\n\r\n                                        return (\r\n                                            <div key={t.id} className=\"group glass glass-hover flex items-center gap-4 p-4\">\r\n                                                {/* ├ìcone */}\r\n                                                <div className={`w-12 h-12 rounded-2xl flex items-center justify-center shrink-0 ${incoming ? 'bg-emerald-500/10 text-emerald-400' : 'bg-red-500/10 text-red-400'}`}>\r\n                                                    {incoming ? <ArrowDownLeft size={24} /> : <ArrowUpRight size={24} />}\r\n                                                </div>\r\n\r\n                                                {/* Info */}\r\n                                                <div className=\"flex-1 min-w-0\">\r\n                                                    <p className=\"text-sm sm:text-base font-medium text-white truncate\">{translateType(t.type)}</p>\r\n                                                    <p className=\"text-[10px] sm:text-xs text-zinc-500 truncate\">{t.description || `ID: ${t.id}`}</p>\r\n                                                </div>\r\n\r\n                                                {/* Valor e Status */}\r\n                                                <div className=\"text-right shrink-0\">\r\n                                                    <p className={`text-sm sm:text-base font-bold ${incoming ? 'text-emerald-400' : 'text-red-400'}`}>\r\n                                                        {incoming ? '+' : '-'}{formatCurrency(t.amount)}\r\n                                                    </p>\r\n                                                    <div className={`flex items-center justify-end gap-1 ${statusColor}`}>\r\n                                                        <StatusIcon size={12} />\r\n                                                        <span className=\"text-[10px] sm:text-xs\">{translateStatus(t.status)}</span>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        );\r\n                                    })}\r\n                                </div>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                )}\r\n\r\n                {/* Banner promocional */}\r\n                <div className=\"pt-4\">\r\n                    <AdBanner\r\n                        type=\"BANNER\"\r\n                        title=\"Aumente seu Score Hoje!\"\r\n                        description=\"Nossos parceiros ajudam voc├¬ a limpar seu nome e conseguir mais apoios m├║tuos.\"\r\n                        actionText=\"ABRIR OFERTA\"\r\n                        hide={isPro}\r\n                    />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josia\\Desktop\\projetos\\cred30\\packages\\frontend-v2\\src\\presentation\\components\\views\\InvestView.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","message":"Definition for rule '@typescript-eslint/no-unused-vars' was not found.","line":1,"column":1,"endLine":1,"endColumn":2,"severity":2,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport { TrendingUp, X as XIcon, Users, ShieldCheck, Info, CheckCircle2, Building2, ArrowRight, Zap, Gavel } from 'lucide-react';\r\nimport { QUOTA_PRICE, QUOTA_SHARE_VALUE, QUOTA_ADM_FEE } from '../../../shared/constants/app.constants';\r\nimport { calculateTotalToPay } from '../../../shared/utils/financial.utils';\r\n\r\ninterface InvestViewProps {\r\n    onBuy: (qty: number, method: 'PIX' | 'BALANCE' | 'CARD') => void;\r\n    isPro?: boolean;\r\n}\r\n\r\nexport const InvestView = ({ onBuy, isPro }: InvestViewProps) => {\r\n    const [qty, setQty] = useState(1);\r\n    const [method, setMethod] = useState<'PIX' | 'BALANCE' | 'CARD'>('PIX');\r\n    const [showConfirm, setShowConfirm] = useState(false);\r\n    const [acceptedTerms, setAcceptedTerms] = useState(false);\r\n    const [showTermsModal, setShowTermsModal] = useState(false);\r\n\r\n    const baseAmount = qty * QUOTA_PRICE;\r\n    const { total, fee } = calculateTotalToPay(baseAmount, method.toLowerCase() as any);\r\n\r\n    const handlePurchase = () => {\r\n        if (!acceptedTerms) return;\r\n        onBuy(qty, method);\r\n        setShowConfirm(false);\r\n    };\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-gradient-premium text-zinc-400 font-medium pb-24 lg:pb-12\">\r\n            <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 pt-8 sm:pt-12\">\r\n\r\n                {/* Hero Section */}\r\n                <div className=\"text-center mb-16 animate-in fade-in slide-in-from-top-4 duration-700\">\r\n                    <div className=\"inline-flex items-center gap-2 bg-primary-500/10 border border-primary-500/20 px-4 py-2 rounded-full text-primary-400 font-bold text-[10px] uppercase tracking-widest mb-6\">\r\n                        <ShieldCheck size={14} /> Cooperativa Digital Cred30\r\n                    </div>\r\n                    <h1 className=\"text-4xl sm:text-6xl font-black text-white leading-tight mb-6 tracking-tight\">\r\n                        Fa├ºa parte da <span className=\"text-transparent bg-clip-text bg-gradient-to-r from-primary-400 to-primary-600\">Revolu├º├úo Financeira</span> Colaborativa.\r\n                    </h1>\r\n                    <p className=\"text-base sm:text-lg text-zinc-500 max-w-2xl mx-auto leading-relaxed\">\r\n                        Ao adquirir suas cotas-parte, voc├¬ se torna dono do neg├│cio, participa das decis├Áes e recebe excedentes proporcionais ao capital investido.\r\n                    </p>\r\n                </div>\r\n\r\n                {/* Benefits Grid */}\r\n                <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-16 animate-in fade-in slide-in-from-bottom-4 duration-700 delay-150\">\r\n                    <BenefitCard\r\n                        icon={<TrendingUp size={20} />}\r\n                        title=\"Distribui├º├úo de Excedentes\"\r\n                        color=\"primary\"\r\n                        description=\"Receba parte dos resultados operacionais da cooperativa diretamente em sua conta.\"\r\n                    />\r\n                    <BenefitCard\r\n                        icon={<Users size={20} />}\r\n                        title=\"Gest├úo Democr├ítica\"\r\n                        color=\"blue\"\r\n                        description=\"Voz ativa e poder de voto nas assembleias de decis├úo de rumo do capital.\"\r\n                    />\r\n                    <BenefitCard\r\n                        icon={<Gavel size={20} />}\r\n                        title=\"Seguran├ºa Jur├¡dica\"\r\n                        color=\"purple\"\r\n                        description=\"Operamos sob o modelo de Sociedade em Conta de Participa├º├úo (Lei 10.406/02).\"\r\n                    />\r\n                </div>\r\n\r\n                {/* Configurator Section */}\r\n                <div className=\"grid grid-cols-1 lg:grid-cols-5 gap-8 items-start animate-in fade-in slide-in-from-bottom-8 duration-1000 delay-300\">\r\n\r\n                    {/* Left: Input Selection */}\r\n                    <div className=\"lg:col-span-3 space-y-6\">\r\n                        <div className=\"glass p-8 relative overflow-hidden group\">\r\n                            <div className=\"absolute -right-8 -bottom-8 text-primary-500/5 rotate-12 group-hover:scale-110 transition-transform duration-700\">\r\n                                <Building2 size={200} />\r\n                            </div>\r\n\r\n                            <h3 className=\"text-xl font-black text-white mb-8 flex items-center gap-3\">\r\n                                <Zap size={20} className=\"text-primary-500\" /> Configurar Aporte\r\n                            </h3>\r\n\r\n                            <div className=\"space-y-8 relative z-10\">\r\n                                <div>\r\n                                    <div className=\"flex justify-between items-end mb-4\">\r\n                                        <p className=\"text-xs font-black uppercase tracking-widest text-zinc-500\">Valor Atual por Cota</p>\r\n                                        <p className=\"text-3xl font-black text-white\">\r\n                                            {QUOTA_PRICE.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })}\r\n                                            <span className=\"text-sm font-normal text-zinc-600\"> / unidade</span>\r\n                                        </p>\r\n                                    </div>\r\n\r\n                                    <div className=\"flex items-center gap-6 bg-black/40 p-4 rounded-3xl border border-white/5 ring-1 ring-white/5 mb-8\">\r\n                                        <button\r\n                                            onClick={() => setQty(Math.max(1, qty - 1))}\r\n                                            className=\"w-14 h-14 rounded-2xl bg-zinc-800 text-white flex items-center justify-center hover:bg-zinc-700 transition active:scale-90 shadow-xl\"\r\n                                        >\r\n                                            <span className=\"text-3xl font-light\">-</span>\r\n                                        </button>\r\n                                        <div className=\"flex-1 text-center\">\r\n                                            <span className=\"text-4xl font-black text-white tabular-nums\">{qty}</span>\r\n                                            <p className=\"text-[10px] font-black uppercase text-zinc-600 tracking-tighter mt-1\">Cotas Selecionadas</p>\r\n                                        </div>\r\n                                        <button\r\n                                            onClick={() => setQty(qty + 1)}\r\n                                            className=\"w-14 h-14 rounded-2xl bg-primary-500 text-black flex items-center justify-center hover:bg-primary-400 transition active:scale-90 shadow-xl shadow-primary-500/20\"\r\n                                        >\r\n                                            <span className=\"text-3xl font-light\">+</span>\r\n                                        </button>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div>\r\n                                    <p className=\"text-xs font-black uppercase tracking-widest text-zinc-500 mb-4\">M├®todo de Integraliza├º├úo</p>\r\n                                    <div className=\"grid grid-cols-3 gap-2 bg-black/40 p-1.5 rounded-2xl border border-white/5\">\r\n                                        <MethodButton\r\n                                            active={method === 'PIX'}\r\n                                            onClick={() => setMethod('PIX')}\r\n                                            label=\"PIX\"\r\n                                        />\r\n                                        <MethodButton\r\n                                            active={method === 'CARD'}\r\n                                            onClick={() => setMethod('CARD')}\r\n                                            label=\"CART├âO\"\r\n                                        />\r\n                                        <MethodButton\r\n                                            active={method === 'BALANCE'}\r\n                                            onClick={() => setMethod('BALANCE')}\r\n                                            label=\"SALDO\"\r\n                                        />\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Legal Disclaimers */}\r\n                        <div className=\"bg-zinc-900/30 border border-white/5 rounded-3xl p-6 flex gap-4 items-start\">\r\n                            <Info size={18} className=\"text-primary-500 shrink-0 mt-0.5\" />\r\n                            <p className=\"text-[10px] sm:text-xs text-zinc-600 leading-relaxed font-medium\">\r\n                                <strong className=\"text-zinc-500 uppercase tracking-widest block mb-1\">Nota T├®cnica</strong>\r\n                                O Cred30 ├® um sistema de economia colaborativa. A integraliza├º├úo de capital social n├úo se caracteriza como investimento, poupan├ºa, t├¡tulo de capitaliza├º├úo ou dep├│sito banc├írio. Opera├º├Áes realizadas sob modelo de SCP conforme Lei 10.406/02.\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Right: Summary & CTA */}\r\n                    <div className=\"lg:col-span-2 space-y-6 lg:sticky lg:top-24\">\r\n                        <div className=\"bg-zinc-900/50 border border-white/5 rounded-[2rem] p-8 backdrop-blur-sm shadow-2xl\">\r\n                            <h4 className=\"text-xs font-black text-zinc-500 uppercase tracking-widest mb-6 border-b border-white/5 pb-4\">Composi├º├úo do Aporte</h4>\r\n\r\n                            <div className=\"space-y-4 mb-8\">\r\n                                <SummaryItem label={`Capital Social (${qty}x)`} value={qty * QUOTA_SHARE_VALUE} />\r\n                                <SummaryItem label=\"Taxa Operacional\" value={qty * QUOTA_ADM_FEE} />\r\n                                {fee > 0 && (\r\n                                    <SummaryItem\r\n                                        label={`Encargos ${method === 'PIX' ? 'Gateway' : 'Processamento'}`}\r\n                                        value={fee}\r\n                                        highlight\r\n                                    />\r\n                                )}\r\n                                <div className=\"pt-4 mt-4 border-t border-white/5\">\r\n                                    <div className=\"flex justify-between items-baseline\">\r\n                                        <span className=\"text-sm font-black text-white uppercase tracking-wider\">Total Final</span>\r\n                                        <span className=\"text-3xl font-black text-primary-400\">\r\n                                            {total.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })}\r\n                                        </span>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"space-y-4\">\r\n                                <div className=\"flex items-start gap-3 text-left bg-black/40 p-4 rounded-2xl border border-white/5\">\r\n                                    <div className=\"relative flex items-center shrink-0\">\r\n                                        <input\r\n                                            type=\"checkbox\"\r\n                                            id=\"terms\"\r\n                                            checked={acceptedTerms}\r\n                                            onChange={(e) => setAcceptedTerms(e.target.checked)}\r\n                                            className=\"peer h-5 w-5 cursor-pointer appearance-none rounded-md border border-zinc-700 checked:border-primary-500 checked:bg-primary-500 transition-all\"\r\n                                        />\r\n                                        <CheckCircle2 size={12} className=\"pointer-events-none absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 text-black opacity-0 peer-checked:opacity-100 transition-opacity\" strokeWidth={3} />\r\n                                    </div>\r\n                                    <label htmlFor=\"terms\" className=\"text-[10px] text-zinc-500 leading-tight pt-0.5 cursor-pointer select-none\">\r\n                                        Li e aceito os <button onClick={() => setShowTermsModal(true)} className=\"text-primary-500 font-bold hover:underline\">Termos de Ades├úo</button> ao grupo Cred30.\r\n                                    </label>\r\n                                </div>\r\n\r\n                                <button\r\n                                    onClick={() => {\r\n                                        if (!acceptedTerms) {\r\n                                            alert('Por favor, aceite os termos de ades├úo para continuar.');\r\n                                            return;\r\n                                        }\r\n                                        setShowConfirm(true);\r\n                                    }}\r\n                                    disabled={!acceptedTerms}\r\n                                    className={`w-full py-5 rounded-2xl font-black text-xs uppercase tracking-[0.2em] transition-all flex items-center justify-center gap-3 shadow-xl ${acceptedTerms\r\n                                        ? 'bg-primary-500 text-black hover:bg-primary-400 shadow-primary-500/20 active:scale-[0.98]'\r\n                                        : 'bg-zinc-800 text-zinc-600 opacity-50 cursor-not-allowed shadow-none'\r\n                                        }`}\r\n                                >\r\n                                    Confirmar Ingresso\r\n                                    <ArrowRight size={18} />\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Extra Context */}\r\n                        <div className=\"px-4 space-y-4\">\r\n                            <div className=\"flex items-start gap-4\">\r\n                                <div className=\"w-10 h-10 rounded-xl bg-primary-500/10 flex items-center justify-center shrink-0 text-primary-400 border border-primary-500/20\">\r\n                                    <Building2 size={20} />\r\n                                </div>\r\n                                <div>\r\n                                    <h5 className=\"text-[11px] font-black text-white uppercase tracking-tight\">Cota-Parte Social</h5>\r\n                                    <p className=\"text-[10px] text-zinc-500 leading-tight mt-1\">Representa sua participa├º├úo no Capital Social, tornando voc├¬ um cooperado com acesso a cr├®dito.</p>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Footer Disclaimers */}\r\n                <footer className=\"mt-24 pt-12 border-t border-white/5 text-center\">\r\n                    <p className=\"text-[11px] font-black text-white tracking-widest uppercase mb-4\">Cred30 ┬® 2024 ÔÇó Sistema de Coopera├º├úo Associativa Mutu├íria</p>\r\n                    <div className=\"flex justify-center gap-6 text-[10px] font-bold text-zinc-600 mb-8\">\r\n                        <button className=\"hover:text-primary-500 transition-colors uppercase tracking-widest\">Termos de Uso</button>\r\n                        <span className=\"opacity-20\">ÔÇó</span>\r\n                        <button className=\"hover:text-primary-500 transition-colors uppercase tracking-widest\">Pol├¡tica de Privacidade</button>\r\n                    </div>\r\n                    <p className=\"text-[10px] text-zinc-700 max-w-3xl mx-auto leading-relaxed uppercase tracking-wider\">\r\n                        O Cred30 n├úo ├® uma institui├º├úo financeira regulada pelo BACEN ou uma corretora de valores mobili├írios (CVM). As opera├º├Áes de suporte m├║tuo e participa├º├Áes s├úo baseadas no C├│digo Civil Brasileiro (Sociedade em Conta de Participa├º├úo e M├║tua Privada).\r\n                    </p>\r\n                </footer>\r\n            </div>\r\n\r\n            {/* Modals from previous version adapted */}\r\n            {showTermsModal && (\r\n                <div className=\"fixed inset-0 bg-black/95 backdrop-blur-xl z-[700] flex items-center justify-center p-4 animate-in fade-in zoom-in duration-300\">\r\n                    <div className=\"bg-zinc-900 border border-white/10 rounded-[2.5rem] p-10 w-full max-w-sm max-h-[80vh] overflow-y-auto relative shadow-2xl ring-1 ring-white/10\">\r\n                        <button onClick={() => setShowTermsModal(false)} className=\"absolute top-6 right-6 text-zinc-600 hover:text-white bg-white/5 p-2 rounded-full transition-colors\"><XIcon size={20} /></button>\r\n\r\n                        <div className=\"text-center mb-8\">\r\n                            <div className=\"w-20 h-20 bg-primary-500/10 rounded-3xl flex items-center justify-center mx-auto mb-6 border border-primary-500/20 shadow-xl shadow-primary-900/20\">\r\n                                <ShieldCheck size={40} className=\"text-primary-500\" />\r\n                            </div>\r\n                            <h3 className=\"text-2xl font-black text-white tracking-tight uppercase\">Termo de Ades├úo</h3>\r\n                            <p className=\"text-[10px] text-zinc-500 font-black uppercase tracking-widest mt-2\">Leia atentamente antes de prosseguir</p>\r\n                        </div>\r\n\r\n                        <div className=\"space-y-4 text-xs text-zinc-500 leading-relaxed font-medium\">\r\n                            <p className=\"text-black font-black bg-primary-500 p-4 rounded-2xl text-center shadow-lg shadow-primary-500/20 uppercase tracking-tighter\">Declara├º├úo de Ci├¬ncia e Aceite</p>\r\n\r\n                            <TermItem num=\"01\" text=\"Trata-se de uma ades├úo a um sistema de suporte m├║tuo e economia colaborativa (SCP - Sociedade em Conta de Participa├º├úo).\" />\r\n                            <TermItem num=\"02\" text=\"O valor aportado comp├Áe o capital social da comunidade para fins de socorro financeiro e benef├¡cios m├║tuos.\" />\r\n                            <TermItem num=\"03\" text=\"Os excedentes operacionais distribu├¡dos s├úo frutos do desempenho coletivo da plataforma.\" />\r\n                            <TermItem num=\"04\" text=\"N├úo h├í garantia de rendimento fixo. Resultados passados n├úo garantem resultados futuros.\" highlight />\r\n                            <TermItem num=\"05\" text=\"Existe um per├¡odo de car├¬ncia (Vesting) de 365 dias para o resgate do capital social sem taxas de sa├¡da.\" />\r\n                        </div>\r\n\r\n                        <button\r\n                            onClick={() => { setAcceptedTerms(true); setShowTermsModal(false); }}\r\n                            className=\"w-full bg-white text-black font-black py-5 rounded-2xl mt-8 text-xs uppercase tracking-[0.2em] hover:scale-[1.02] transition-all shadow-xl active:scale-95\"\r\n                        >\r\n                            ENTENDI E ACEITO\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {showConfirm && (\r\n                <div className=\"fixed inset-0 bg-black/90 backdrop-blur-md z-[500] flex items-end sm:items-center justify-center p-0 sm:p-4 animate-in fade-in duration-500\" onClick={(e) => { if (e.target === e.currentTarget) setShowConfirm(false); }}>\r\n                    <div className=\"bg-[#0A0A0A] border-t sm:border border-white/10 rounded-t-[3rem] sm:rounded-[2.5rem] p-10 w-full sm:max-w-sm relative shadow-2xl animate-in slide-in-from-bottom-full sm:slide-in-from-bottom-0 sm:zoom-in-95 duration-500 sm:duration-300 ring-1 ring-white/10\">\r\n                        <div className=\"w-12 h-1.5 bg-zinc-800 rounded-full mx-auto mb-8 sm:hidden opacity-50\" />\r\n                        <button title=\"Fechar\" onClick={() => setShowConfirm(false)} className=\"absolute top-6 right-6 text-zinc-600 hover:text-white bg-zinc-900/50 p-2 rounded-full hidden sm:block transition-colors\"><XIcon size={20} /></button>\r\n\r\n                        <div className=\"text-center mb-10\">\r\n                            <div className=\"w-20 h-20 bg-primary-500/10 rounded-3xl flex items-center justify-center mx-auto mb-6 shadow-xl shadow-primary-900/20 ring-1 ring-primary-500/20\">\r\n                                <CheckCircle2 size={40} className=\"text-primary-500\" strokeWidth={2.5} />\r\n                            </div>\r\n                            <h3 className=\"text-2xl font-black text-white tracking-tight\">Confirmar Ades├úo</h3>\r\n                            <p className=\"text-zinc-500 text-sm mt-3 font-medium tracking-tight\">Integraliza├º├úo de <span className=\"text-white font-bold\">{qty} cota(s)-parte</span></p>\r\n                        </div>\r\n\r\n                        <div className=\"bg-zinc-900/50 border border-white/10 rounded-[2rem] p-6 mb-10 space-y-4\">\r\n                            <div className=\"flex justify-between items-center text-[10px] font-black uppercase tracking-widest\">\r\n                                <span className=\"text-zinc-600\">Subtotal Aporte</span>\r\n                                <span className=\"text-white\">{baseAmount.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })}</span>\r\n                            </div>\r\n                            {fee > 0 && (\r\n                                <div className=\"flex justify-between items-center text-[10px] font-black uppercase tracking-widest text-primary-500/70\">\r\n                                    <span>Taxas Externas</span>\r\n                                    <span>+{fee.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })}</span>\r\n                                </div>\r\n                            )}\r\n                            <div className=\"h-px bg-white/5 my-2\"></div>\r\n                            <div className=\"flex justify-between items-end\">\r\n                                <span className=\"text-xs text-zinc-500 font-bold uppercase tracking-widest mb-1\">Total Final</span>\r\n                                <span className=\"text-3xl font-black text-primary-400\">{total.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })}</span>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"space-y-4\">\r\n                            <button\r\n                                onClick={handlePurchase}\r\n                                className=\"w-full bg-primary-500 hover:bg-primary-400 text-black font-black uppercase tracking-[0.2em] py-5 rounded-2xl transition-all shadow-xl shadow-primary-500/20 active:scale-[0.98] text-xs flex items-center justify-center gap-3\"\r\n                            >\r\n                                {method === 'BALANCE' ? 'PAGAR COM MEU SALDO' : method === 'PIX' ? 'GERAR PAGAMENTO PIX' : 'PAGAR COM CART├âO'}\r\n                                <ArrowRight size={18} />\r\n                            </button>\r\n                            <button\r\n                                onClick={() => setShowConfirm(false)}\r\n                                className=\"w-full py-4 text-zinc-700 hover:text-zinc-400 text-[10px] font-black uppercase tracking-[0.3em] transition-all\"\r\n                            >\r\n                                CANCELAR E VOLTAR\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\n// Sub-components for cleaner structure\r\nconst BenefitCard = ({ icon, title, description, color }: { icon: any, title: string, description: string, color: string }) => (\r\n    <div className=\"glass glass-hover p-6 group\">\r\n        <div className={`w-12 h-12 rounded-2xl flex items-center justify-center mb-6 shrink-0 border transition-all ${color === 'primary' ? 'bg-primary-500/10 border-primary-500/20 text-primary-400 group-hover:bg-primary-500 group-hover:text-black' :\r\n            color === 'blue' ? 'bg-blue-500/10 border-blue-500/20 text-blue-400 group-hover:bg-blue-500 group-hover:text-black' :\r\n                'bg-purple-500/10 border-purple-500/20 text-purple-400 group-hover:bg-purple-500 group-hover:text-black'\r\n            }`}>\r\n            {icon}\r\n        </div>\r\n        <h4 className=\"text-white font-bold text-lg mb-2 tracking-tight\">{title}</h4>\r\n        <p className=\"text-zinc-500 text-xs leading-relaxed font-medium\">{description}</p>\r\n    </div>\r\n);\r\n\r\nconst MethodButton = ({ active, onClick, label }: any) => (\r\n    <button\r\n        onClick={onClick}\r\n        className={`flex-1 py-3.5 rounded-xl text-[10px] font-black tracking-widest transition-all ${active\r\n            ? 'bg-primary-500 text-black shadow-lg shadow-primary-500/20'\r\n            : 'text-zinc-600 hover:text-white hover:bg-white/5'\r\n            }`}\r\n    >\r\n        {label}\r\n    </button>\r\n);\r\n\r\nconst SummaryItem = ({ label, value, highlight }: any) => (\r\n    <div className={`flex justify-between text-xs font-bold ${highlight ? 'text-primary-500/80' : 'text-zinc-500'}`}>\r\n        <span className=\"uppercase tracking-widest\">{label}</span>\r\n        <span className={highlight ? 'font-black' : 'font-medium'}>\r\n            {value.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })}\r\n        </span>\r\n    </div>\r\n);\r\n\r\nconst TermItem = ({ num, text, highlight }: any) => (\r\n    <div className=\"flex gap-4 bg-black/40 p-4 rounded-2xl border border-white/5 group hover:border-white/10 transition-colors\">\r\n        <span className={`font-black text-lg ${highlight ? 'text-primary-400' : 'text-zinc-700'}`}>{num}</span>\r\n        <p className={`text-[11px] leading-snug font-medium ${highlight ? 'text-zinc-300' : ''}`}>{text}</p>\r\n    </div>\r\n);\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josia\\Desktop\\projetos\\cred30\\packages\\frontend-v2\\src\\presentation\\components\\views\\LoansView.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","message":"Definition for rule '@typescript-eslint/no-unused-vars' was not found.","line":1,"column":1,"endLine":1,"endColumn":2,"severity":2,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { DollarSign, AlertTriangle, X as XIcon, CheckCircle2, Clock, TrendingUp, Download, FileText, QrCode, CreditCard, Wallet } from 'lucide-react';\r\nimport { Loan, User } from '../../../domain/types/common.types';\r\nimport { apiService } from '../../../application/services/api.service';\r\nimport { downloadLoanContract, createContractData } from '../../../application/services/contract.service';\r\nimport { AdBanner } from '../ui/AdBanner';\r\n\r\ninterface LoansViewProps {\r\n    loans: Loan[];\r\n    onRequest: (amount: number, installments: number) => void;\r\n    onPay: (loanId: string, full: boolean, method?: 'pix' | 'card') => void;\r\n    onPayInstallment: (loanId: string, amount: number, full: boolean, method?: 'pix' | 'card') => void;\r\n    userBalance: number;\r\n    currentUser: User | null;\r\n}\r\n\r\nexport const LoansView = ({ loans, onRequest, onPay, onPayInstallment, userBalance, currentUser }: LoansViewProps) => {\r\n    const [amount, setAmount] = useState(500);\r\n    const [months, setMonths] = useState(3);\r\n    const [payModalId, setPayModalId] = useState<string | null>(null);\r\n    const [payMethod, setPayMethod] = useState<'pix' | 'card'>('pix');\r\n    const [viewDetailsId, setViewDetailsId] = useState<string | null>(null);\r\n    const [installmentModalData, setInstallmentModalData] = useState<{ loanId: string, installmentAmount: number } | null>(null);\r\n\r\n    // Usu├írios PRO n├úo veem an├║ncios\r\n    const isPro = currentUser?.membership_type === 'PRO';\r\n\r\n    // Limite de Apoio M├║tuo (Nubank Style)\r\n    const [creditLimit, setCreditLimit] = useState<{ totalLimit: number; activeDebt: number; remainingLimit: number } | null>(null);\r\n\r\n    useEffect(() => {\r\n        const fetchLimit = async () => {\r\n            try {\r\n                const data = await apiService.getAvailableLimit();\r\n                setCreditLimit(data);\r\n            } catch (e) {\r\n                console.error('Erro ao buscar limite de apoio m├║tuo:', e);\r\n            }\r\n        };\r\n        fetchLimit();\r\n    }, []);\r\n\r\n    const interestRate = 0.20; // 20%\r\n    const totalRepay = amount * (1 + interestRate);\r\n    const monthlyPayment = totalRepay / months;\r\n\r\n    const activeLoans = loans.filter(l => l.status === 'APPROVED' || l.status === 'PENDING' || l.status === 'PAYMENT_PENDING' || l.status === 'REJECTED');\r\n    const selectedLoan = activeLoans.find(l => l.id === payModalId);\r\n\r\n    // Helper: Calculate remaining installments\r\n    const getRemainingInstallments = (loan: Loan) => {\r\n        const total = loan.installments;\r\n        const paid = loan.paidInstallmentsCount || 0;\r\n        return Math.max(0, total - paid);\r\n    };\r\n\r\n    // Helper: Calculate installment value\r\n    const getInstallmentValue = (loan: Loan) => {\r\n        return loan.totalRepayment / loan.installments;\r\n    };\r\n\r\n    return (\r\n        <div className=\"space-y-8 pb-32\">\r\n            {/* Active Loan Card - Adaptado para responsividade */}\r\n            <div className=\"bg-surface border border-surfaceHighlight rounded-2xl p-6 relative overflow-hidden\">\r\n                <div className=\"absolute top-0 right-0 p-8 opacity-5\">\r\n                    <Wallet size={120} />\r\n                </div>\r\n\r\n                <div className=\"relative z-10\">\r\n                    <div className=\"flex flex-col sm:flex-row sm:items-center justify-between mb-6 gap-4\">\r\n                        <div>\r\n                            <span className=\"text-zinc-500 text-xs font-bold uppercase tracking-widest mb-1 block\">Empr├®stimo Ativo</span>\r\n                            {/* This activeLoan variable is not defined in the current scope.\r\n                                Assuming it should be derived from 'loans' or 'activeLoans' if there's only one active loan to display here.\r\n                                For now, I'll use a placeholder or the first active loan if available.\r\n                                If there can be multiple active loans, this card structure might need to be iterated or adapted.\r\n                                For the purpose of this edit, I'll assume a single 'activeLoan' concept for this card.\r\n                                If no active loan, this card might not render or show a different state.\r\n                            */}\r\n                            <h3 className=\"text-2xl sm:text-3xl font-black text-white\">R$ {activeLoans.length > 0 ? activeLoans[0].amount.toLocaleString('pt-BR', { minimumFractionDigits: 2 }) : '0,00'}</h3>\r\n                        </div>\r\n                        <div className=\"bg-yellow-500/10 border border-yellow-500/20 px-3 py-1.5 rounded-lg flex items-center gap-2 self-start sm:self-auto\">\r\n                            <Clock size={14} className=\"text-yellow-500\" />\r\n                            <span className=\"text-yellow-500 text-xs font-bold uppercase\">Vence em {activeLoans.length > 0 && activeLoans[0].dueDate ? Math.ceil((new Date(activeLoans[0].dueDate).getTime() - Date.now()) / (1000 * 60 * 60 * 24)) : 'N/A'} dias</span>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"space-y-4\">\r\n                        <div className=\"w-full bg-zinc-900 rounded-full h-3 overflow-hidden border border-white/5\">\r\n                            <div\r\n                                className=\"h-full bg-gradient-to-r from-emerald-500 to-emerald-400\"\r\n                                style={{ width: `${activeLoans.length > 0 ? ((activeLoans[0].totalPaid || 0) / activeLoans[0].totalRepayment) * 100 : 0}%` }}\r\n                            />\r\n                        </div>\r\n                        <div className=\"flex justify-between text-xs font-medium text-zinc-500\">\r\n                            <span>Pago: R$ {activeLoans.length > 0 ? (activeLoans[0].totalPaid || 0).toLocaleString('pt-BR', { minimumFractionDigits: 2 }) : '0,00'}</span>\r\n                            <span>Total: R$ {activeLoans.length > 0 ? activeLoans[0].totalRepayment.toLocaleString('pt-BR', { minimumFractionDigits: 2 }) : '0,00'}</span>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-3 mt-6\">\r\n                        <button\r\n                            onClick={() => activeLoans.length > 0 && setInstallmentModalData({ loanId: activeLoans[0].id, installmentAmount: getInstallmentValue(activeLoans[0]) })}\r\n                            className=\"bg-emerald-500 hover:bg-emerald-400 text-black py-4 rounded-xl font-black uppercase tracking-widest text-xs flex items-center justify-center gap-2 transition-all shadow-lg shadow-emerald-500/20 active:scale-[0.98]\"\r\n                        >\r\n                            Pagar Parcela\r\n                        </button>\r\n                        <button\r\n                            onClick={() => activeLoans.length > 0 && setPayModalId(activeLoans[0].id)}\r\n                            className=\"bg-zinc-800 hover:bg-zinc-700 text-white py-4 rounded-xl font-black uppercase tracking-widest text-xs flex items-center justify-center gap-2 transition-all active:scale-[0.98]\"\r\n                        >\r\n                            Finalizar\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            {/* Loan Request Card */}\r\n            <div className=\"bg-surface border border-surfaceHighlight rounded-3xl p-6 relative overflow-hidden\">\r\n                <div className=\"absolute top-0 right-0 p-8 opacity-5\">\r\n                    <DollarSign size={120} />\r\n                </div>\r\n\r\n                <div className=\"relative z-10\">\r\n                    <div className=\"flex items-center gap-3 mb-6\">\r\n                        <div className=\"w-12 h-12 bg-primary-500/20 rounded-full flex items-center justify-center\">\r\n                            <DollarSign className=\"text-primary-400\" size={24} />\r\n                        </div>\r\n                        <div>\r\n                            <h2 className=\"text-xl font-bold text-white\">Solicitar Ajuda M├║tua</h2>\r\n                            <p className=\"text-zinc-400 text-sm\">Apoio financeiro imediato para membros</p>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Limite de Cr├®dito Card (Nubank Style) */}\r\n                    {creditLimit && (\r\n                        <div className={`border rounded-2xl p-4 mb-6 ${creditLimit.totalLimit === 0 ? 'bg-orange-500/10 border-orange-500/30' : 'bg-gradient-to-r from-emerald-500/10 to-primary-500/10 border-emerald-500/30'}`}>\r\n                            <div className=\"flex items-center gap-2 mb-2\">\r\n                                {creditLimit.totalLimit === 0 ? (\r\n                                    <AlertTriangle className=\"text-orange-400\" size={18} />\r\n                                ) : (\r\n                                    <TrendingUp className=\"text-emerald-400\" size={18} />\r\n                                )}\r\n                                <span className={`text-sm font-medium ${creditLimit.totalLimit === 0 ? 'text-orange-400' : 'text-emerald-400'}`}>\r\n                                    {creditLimit.totalLimit === 0 ? 'Aten├º├úo: Ajuda Indispon├¡vel' : 'Seu Limite de Ajuda M├║tua'}\r\n                                </span>\r\n                            </div>\r\n\r\n                            {creditLimit.totalLimit === 0 ? (\r\n                                <p className=\"text-sm text-zinc-300\">\r\n                                    Para liberar o apoio m├║tuo, voc├¬ precisa ter no m├¡nimo <strong className=\"text-white\">1 participa├º├úo ativa</strong> no clube.\r\n                                </p>\r\n                            ) : (\r\n                                <>\r\n                                    <div className=\"flex justify-between items-center mb-2\">\r\n                                        <span className=\"text-2xl font-bold text-white\">{creditLimit.remainingLimit.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })}</span>\r\n                                        <span className=\"text-xs text-zinc-400\">de {creditLimit.totalLimit.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })}</span>\r\n                                    </div>\r\n                                    <div className=\"w-full h-2 bg-background rounded-full overflow-hidden\">\r\n                                        <div\r\n                                            className=\"h-full bg-gradient-to-r from-emerald-500 to-primary-500 transition-all\"\r\n                                            style={{ width: `${Math.max(0, Math.min(100, (creditLimit.remainingLimit / creditLimit.totalLimit) * 100))}%` }}\r\n                                        />\r\n                                    </div>\r\n                                    {creditLimit.activeDebt > 0 && (\r\n                                        <p className=\"text-xs text-zinc-500 mt-2\">Voc├¬ tem {creditLimit.activeDebt.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })} em compromissos ativos.</p>\r\n                                    )}\r\n                                </>\r\n                            )}\r\n                        </div>\r\n                    )}\r\n\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8\">\r\n                        {/* Simulation Inputs */}\r\n                        <div className=\"space-y-6\">\r\n                            <div>\r\n                                <label className=\"text-xs text-zinc-400 font-medium mb-2 block\">Quanto voc├¬ precisa?</label>\r\n                                <div className=\"relative\">\r\n                                    <span className=\"absolute left-4 top-1/2 -translate-y-1/2 text-zinc-400 font-medium\">R$</span>\r\n                                    <input\r\n                                        type=\"number\"\r\n                                        value={amount}\r\n                                        onChange={(e) => setAmount(Number(e.target.value))}\r\n                                        className=\"w-full bg-background border border-surfaceHighlight rounded-xl py-4 pl-10 pr-4 text-white text-lg font-bold focus:border-primary-500 outline-none transition\"\r\n                                        placeholder=\"0,00\"\r\n                                    />\r\n                                </div>\r\n                                <div className=\"flex gap-2 mt-2\">\r\n                                    {[100, 300, 500, 1000].map(val => (\r\n                                        <button\r\n                                            key={val}\r\n                                            onClick={() => setAmount(val)}\r\n                                            className=\"px-3 py-1 rounded-lg bg-surfaceHighlight text-xs text-zinc-400 hover:bg-zinc-700 hover:text-white transition\"\r\n                                        >\r\n                                            R$ {val}\r\n                                        </button>\r\n                                    ))}\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div>\r\n                                <label className=\"text-xs text-zinc-400 font-medium mb-2 block\">Em quantas vezes?</label>\r\n                                <div className=\"grid grid-cols-4 gap-2\">\r\n                                    {[1, 2, 3, 6].map(m => (\r\n                                        <button\r\n                                            key={m}\r\n                                            onClick={() => setMonths(m)}\r\n                                            className={`py-3 rounded-xl text-sm font-bold border transition ${months === m\r\n                                                ? 'bg-primary-500 text-black border-primary-500'\r\n                                                : 'bg-background border-surfaceHighlight text-zinc-400 hover:border-zinc-600'\r\n                                                }`}\r\n                                        >\r\n                                            {m}x\r\n                                        </button>\r\n                                    ))}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Summary */}\r\n                        <div className=\"bg-background rounded-2xl p-6 border border-surfaceHighlight flex flex-col justify-between\">\r\n                            <div>\r\n                                <h3 className=\"text-sm font-medium text-white mb-4\">Resumo da Simula├º├úo</h3>\r\n                                <div className=\"space-y-3\">\r\n                                    <div className=\"flex justify-between text-sm\">\r\n                                        <span className=\"text-zinc-500\">Valor Solicitado</span>\r\n                                        <span className=\"text-white font-medium\">{amount.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })}</span>\r\n                                    </div>\r\n                                    <div className=\"flex justify-between text-sm\">\r\n                                        <span className=\"text-zinc-500\">Taxa de Manuten├º├úo (20%)</span>\r\n                                        <span className=\"text-red-400 font-medium\">{(totalRepay - amount).toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })}</span>\r\n                                    </div>\r\n                                    <div className=\"flex justify-between text-sm\">\r\n                                        <span className=\"text-zinc-500\">Valor da Parcela</span>\r\n                                        <span className=\"text-primary-400 font-medium\">{monthlyPayment.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })}</span>\r\n                                    </div>\r\n                                    <div className=\"h-px bg-zinc-800 my-2\"></div>\r\n                                    <div className=\"flex justify-between items-center\">\r\n                                        <span className=\"text-zinc-400 text-sm\">Total a Repor</span>\r\n                                        <span className=\"text-xl font-bold text-white\">{totalRepay.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })}</span>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <button\r\n                                onClick={() => onRequest(amount, months)}\r\n                                disabled={!amount || amount <= 0 || creditLimit?.totalLimit === 0}\r\n                                className=\"w-full bg-emerald-500 hover:bg-emerald-400 disabled:opacity-50 disabled:cursor-not-allowed text-black font-bold py-4 rounded-xl mt-6 transition shadow-lg shadow-emerald-500/20\"\r\n                            >\r\n                                {creditLimit?.totalLimit === 0 ? 'Ajuda Indispon├¡vel' : 'Solicitar Apoio M├║tuo'}\r\n                            </button>\r\n\r\n                            {/* AdBanner removido para limpeza de UI */}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Active Loans List */}\r\n            <div className=\"space-y-4\">\r\n                <h3 className=\"text-lg font-bold text-white pl-1\">Seus Compromissos Sociais</h3>\r\n\r\n                {activeLoans.length === 0 && (\r\n                    <div className=\"text-center py-12 bg-surface/50 rounded-3xl border border-surfaceHighlight border-dashed\">\r\n                        <p className=\"text-zinc-500\">Nenhum apoio m├║tuo ativo no momento.</p>\r\n                    </div>\r\n                )}\r\n\r\n                {activeLoans.map(loan => {\r\n                    const daysUntilDue = loan.dueDate ? Math.ceil((new Date(loan.dueDate).getTime() - Date.now()) / (1000 * 60 * 60 * 24)) : 0;\r\n                    const isOverdue = daysUntilDue < 0;\r\n                    const isUrgent = daysUntilDue <= 3 && daysUntilDue >= 0;\r\n\r\n                    const paidAmount = loan.totalPaid || 0;\r\n                    const remainingAmount = loan.remainingAmount || loan.totalRepayment;\r\n                    const progressPercentage = (paidAmount / loan.totalRepayment) * 100;\r\n                    const installmentValue = getInstallmentValue(loan);\r\n\r\n                    return (\r\n                        <div key={loan.id} className=\"bg-surface border border-surfaceHighlight rounded-2xl p-5 transition hover:border-zinc-700\">\r\n                            <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-4\">\r\n                                <div className=\"flex items-center gap-4\">\r\n                                    <div className={`w-10 h-10 rounded-full flex items-center justify-center ${loan.status === 'APPROVED' ? 'bg-emerald-500/20 text-emerald-400' :\r\n                                        loan.status === 'PENDING' ? 'bg-yellow-500/20 text-yellow-400' :\r\n                                            'bg-zinc-800 text-zinc-400'\r\n                                        }`}>\r\n                                        <DollarSign size={20} />\r\n                                    </div>\r\n                                    <div>\r\n                                        <h4 className=\"font-bold text-white text-lg\">{loan.amount.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })}</h4>\r\n                                        <div className=\"flex items-center gap-2\">\r\n                                            <span className={`text-xs px-2 py-0.5 rounded-full ${loan.status === 'APPROVED' ? 'bg-emerald-500/10 text-emerald-400' :\r\n                                                loan.status === 'PENDING' ? 'bg-yellow-500/10 text-yellow-400' :\r\n                                                    'bg-zinc-800 text-zinc-400'\r\n                                                }`}>\r\n                                                {loan.status === 'APPROVED' ? 'Aprovado' : loan.status === 'PENDING' ? 'Em An├ílise' : loan.status}\r\n                                            </span>\r\n                                            {isOverdue && <span className=\"text-xs bg-red-500/20 text-red-400 px-2 py-0.5 rounded-full flex items-center gap-1\"><AlertTriangle size={10} /> Atrasado</span>}\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div className=\"text-right\">\r\n                                    <p className=\"text-xs text-zinc-400\">Restante</p>\r\n                                    <p className=\"font-bold text-white\">{remainingAmount.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })}</p>\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Progress Bar */}\r\n                            {loan.status === 'APPROVED' && (\r\n                                <div className=\"mb-4\">\r\n                                    <div className=\"flex justify-between text-xs mb-1\">\r\n                                        <span className=\"text-zinc-500\">{loan.paidInstallmentsCount || 0} de {loan.installments} reposi├º├Áes</span>\r\n                                        <span className=\"text-zinc-400\">{progressPercentage.toFixed(0)}% reposto</span>\r\n                                    </div>\r\n                                    <div className=\"w-full bg-background rounded-full h-2 overflow-hidden\">\r\n                                        <div\r\n                                            className=\"h-full bg-emerald-500 rounded-full transition-all duration-500\"\r\n                                            style={{ width: `${Math.min(progressPercentage, 100)}%` }}\r\n                                        ></div>\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n\r\n                            {/* Actions */}\r\n                            {loan.status === 'APPROVED' && !loan.isFullyPaid && (\r\n                                <div className=\"grid grid-cols-3 gap-2 pt-4 border-t border-surfaceHighlight\">\r\n                                    <button\r\n                                        onClick={() => setInstallmentModalData({ loanId: loan.id, installmentAmount: installmentValue })}\r\n                                        className=\"py-2.5 rounded-xl bg-surfaceHighlight hover:bg-zinc-700 text-white text-sm font-medium transition\"\r\n                                    >\r\n                                        Repor Parcela\r\n                                    </button>\r\n                                    <button\r\n                                        onClick={() => setPayModalId(loan.id)}\r\n                                        className={`py-2.5 rounded-xl text-white text-sm font-medium transition ${isOverdue ? 'bg-red-500 hover:bg-red-600' : 'bg-primary-500 hover:bg-primary-400 text-black'}`}\r\n                                    >\r\n                                        Finalizar Compromisso\r\n                                    </button>\r\n                                    <button\r\n                                        onClick={() => {\r\n                                            if (currentUser) {\r\n                                                const contractData = createContractData(loan, currentUser);\r\n                                                downloadLoanContract(contractData);\r\n                                            }\r\n                                        }}\r\n                                        className=\"py-2.5 rounded-xl bg-zinc-800 hover:bg-zinc-700 text-zinc-300 text-sm font-medium transition flex items-center justify-center gap-1.5\"\r\n                                        title=\"Baixar Contrato\"\r\n                                    >\r\n                                        <FileText size={14} />\r\n                                        <span className=\"hidden sm:inline\">Contrato</span>\r\n                                    </button>\r\n                                </div>\r\n                            )}\r\n\r\n                            {/* Bot├úo de contrato para compromissos j├í quitados */}\r\n                            {loan.status === 'APPROVED' && loan.isFullyPaid && (\r\n                                <div className=\"pt-4 border-t border-surfaceHighlight\">\r\n                                    <button\r\n                                        onClick={() => {\r\n                                            if (currentUser) {\r\n                                                const contractData = createContractData(loan, currentUser);\r\n                                                downloadLoanContract(contractData);\r\n                                            }\r\n                                        }}\r\n                                        className=\"w-full py-2.5 rounded-xl bg-zinc-800 hover:bg-zinc-700 text-zinc-300 text-sm font-medium transition flex items-center justify-center gap-2\"\r\n                                    >\r\n                                        <Download size={16} />\r\n                                        Baixar Contrato PDF\r\n                                    </button>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    );\r\n                })}\r\n            </div>\r\n\r\n            {/* Pay Full Loan Modal */}\r\n            {selectedLoan && (\r\n                <div className=\"fixed inset-0 bg-black/80 flex items-center justify-center z-[100] p-4\" onClick={(e) => { if (e.target === e.currentTarget) setPayModalId(null); }}>\r\n                    <div className=\"bg-surface border border-surfaceHighlight rounded-3xl p-6 w-full max-w-sm relative animate-fade-in\">\r\n                        <button title=\"Fechar\" onClick={() => setPayModalId(null)} className=\"absolute top-4 right-4 text-zinc-400 hover:text-white bg-zinc-800 p-1.5 rounded-full z-10\"><XIcon size={24} /></button>\r\n\r\n                        <h3 className=\"text-xl font-bold text-white mb-4\">Finalizar Compromisso</h3>\r\n                        <p className=\"text-zinc-400 text-sm mb-6\">\r\n                            Voc├¬ est├í prestes a repor o valor total de <strong className=\"text-white\">{selectedLoan.totalRepayment.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })}</strong> para a cooperativa.\r\n                        </p>\r\n\r\n                        <div className=\"space-y-4\">\r\n                            <div className=\"grid grid-cols-2 gap-2\">\r\n                                <button\r\n                                    onClick={() => setPayMethod('pix')}\r\n                                    className={`py-3 rounded-xl border flex flex-col items-center gap-1 transition-all ${payMethod === 'pix' ? 'bg-primary-500/20 border-primary-500 text-primary-400' : 'bg-background border-surfaceHighlight text-zinc-500'}`}\r\n                                >\r\n                                    <QrCode size={20} />\r\n                                    <span className=\"text-[10px] font-bold uppercase\">PIX</span>\r\n                                </button>\r\n                                <button\r\n                                    onClick={() => setPayMethod('card')}\r\n                                    className={`py-3 rounded-xl border flex flex-col items-center gap-1 transition-all ${payMethod === 'card' ? 'bg-primary-500/20 border-primary-500 text-primary-400' : 'bg-background border-surfaceHighlight text-zinc-500'}`}\r\n                                >\r\n                                    <CreditCard size={20} />\r\n                                    <span className=\"text-[10px] font-bold uppercase\">Cart├úo</span>\r\n                                </button>\r\n                            </div>\r\n\r\n                            <div className=\"bg-background p-3 rounded-xl border border-surfaceHighlight\">\r\n                                <div className=\"flex justify-between text-sm mb-1\">\r\n                                    <span className=\"text-zinc-400\">Seu Saldo</span>\r\n                                    <span className=\"text-white font-bold\">{userBalance.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })}</span>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <button\r\n                                onClick={() => { onPay(selectedLoan.id, true); setPayModalId(null); }}\r\n                                disabled={userBalance < selectedLoan.totalRepayment}\r\n                                className=\"w-full bg-primary-500 hover:bg-primary-600 disabled:bg-zinc-800 disabled:text-zinc-500 disabled:cursor-not-allowed text-black font-black py-4 rounded-xl mb-2 transition shadow-lg shadow-primary-500/20\"\r\n                            >\r\n                                {userBalance < selectedLoan.totalRepayment ? 'Saldo Insuficiente' : 'Abater com Saldo'}\r\n                            </button>\r\n\r\n                            <button\r\n                                onClick={() => { onPay(selectedLoan.id, false, payMethod); setPayModalId(null); }}\r\n                                className={`w-full font-black py-4 rounded-xl transition shadow-lg ${payMethod === 'pix' ? 'bg-emerald-500 text-white shadow-emerald-500/20' : 'bg-blue-500 text-white shadow-blue-500/20'}`}\r\n                            >\r\n                                {payMethod === 'pix' ? 'Gerar PIX de Reposi├º├úo' : 'Pagar com Cart├úo'}\r\n                            </button>\r\n\r\n                            <p className=\"text-[9px] text-zinc-600 text-center mt-4 leading-relaxed\">\r\n                                Pagamento processado via gateway Asaas. O valor reposto retorna ao fundo de apoio m├║tuo para beneficiar outros membros.\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* Pay Installment Modal */}\r\n            {installmentModalData && (\r\n                <div className=\"fixed inset-0 bg-black/80 flex items-center justify-center z-[100] p-4\" onClick={(e) => { if (e.target === e.currentTarget) setInstallmentModalData(null); }}>\r\n                    <div className=\"bg-surface border border-surfaceHighlight rounded-3xl p-6 w-full max-w-sm relative animate-fade-in\">\r\n                        <button title=\"Fechar\" onClick={() => setInstallmentModalData(null)} className=\"absolute top-4 right-4 text-zinc-400 hover:text-white bg-zinc-800 p-1.5 rounded-full z-10\"><XIcon size={24} /></button>\r\n\r\n                        <h3 className=\"text-xl font-bold text-white mb-4\">Repor Parcela</h3>\r\n                        <p className=\"text-zinc-400 text-sm mb-6\">\r\n                            Valor da parcela: <strong className=\"text-white\">{installmentModalData.installmentAmount.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })}</strong>\r\n                        </p>\r\n\r\n                        <div className=\"space-y-4\">\r\n                            <div className=\"grid grid-cols-2 gap-2\">\r\n                                <button\r\n                                    onClick={() => setPayMethod('pix')}\r\n                                    className={`py-3 rounded-xl border flex flex-col items-center gap-1 transition-all ${payMethod === 'pix' ? 'bg-primary-500/20 border-primary-500 text-primary-400' : 'bg-background border-surfaceHighlight text-zinc-500'}`}\r\n                                >\r\n                                    <QrCode size={20} />\r\n                                    <span className=\"text-[10px] font-bold uppercase\">PIX</span>\r\n                                </button>\r\n                                <button\r\n                                    onClick={() => setPayMethod('card')}\r\n                                    className={`py-3 rounded-xl border flex flex-col items-center gap-1 transition-all ${payMethod === 'card' ? 'bg-primary-500/20 border-primary-500 text-primary-400' : 'bg-background border-surfaceHighlight text-zinc-500'}`}\r\n                                >\r\n                                    <CreditCard size={20} />\r\n                                    <span className=\"text-[10px] font-bold uppercase\">Cart├úo</span>\r\n                                </button>\r\n                            </div>\r\n\r\n                            <div className=\"bg-background p-3 rounded-xl border border-surfaceHighlight\">\r\n                                <div className=\"flex justify-between text-sm mb-1\">\r\n                                    <span className=\"text-zinc-400\">Seu Saldo</span>\r\n                                    <span className=\"text-white font-bold\">{userBalance.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })}</span>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <button\r\n                                onClick={() => {\r\n                                    onPayInstallment(installmentModalData.loanId, installmentModalData.installmentAmount, true);\r\n                                    setInstallmentModalData(null);\r\n                                }}\r\n                                disabled={userBalance < installmentModalData.installmentAmount}\r\n                                className=\"w-full bg-primary-500 hover:bg-primary-600 disabled:bg-zinc-800 disabled:text-zinc-500 disabled:cursor-not-allowed text-black font-black py-4 rounded-xl mb-2 transition shadow-lg shadow-primary-500/20\"\r\n                            >\r\n                                {userBalance < installmentModalData.installmentAmount ? 'Saldo Insuficiente' : 'Abater com Saldo'}\r\n                            </button>\r\n\r\n                            <button\r\n                                onClick={() => {\r\n                                    onPayInstallment(installmentModalData.loanId, installmentModalData.installmentAmount, false, payMethod);\r\n                                    setInstallmentModalData(null);\r\n                                }}\r\n                                className={`w-full font-black py-4 rounded-xl transition shadow-lg ${payMethod === 'pix' ? 'bg-emerald-500 text-white shadow-emerald-500/20' : 'bg-blue-500 text-white shadow-blue-500/20'}`}\r\n                            >\r\n                                {payMethod === 'pix' ? 'Gerar PIX da Parcela' : 'Pagar Parcela com Cart├úo'}\r\n                            </button>\r\n\r\n                            <p className=\"text-[9px] text-zinc-600 text-center mt-4 leading-relaxed\">\r\n                                Pagamento processado via gateway Asaas. O valor reposto retorna ao fundo de apoio m├║tuo.\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n            {/* Legal Disclaimer */}\r\n            <div className=\"mt-8 px-4 text-[10px] text-zinc-600 text-center leading-relaxed\">\r\n                <p>As ajudas m├║tuas est├úo sujeitas ├á an├ílise de Score e disponibilidade de caixa do Clube. Os apoios s├úo lastreados por execu├º├úo de garantia sobre licen├ºas ativas no sistema. Em caso de atraso superior a 5 dias, o lastro ser├í executado automaticamente conforme Termos de Uso (SCP/M├║tuo Civil).</p>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josia\\Desktop\\projetos\\cred30\\packages\\frontend-v2\\src\\presentation\\components\\views\\MarketplaceView.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","message":"Definition for rule '@typescript-eslint/no-unused-vars' was not found.","line":1,"column":1,"endLine":1,"endColumn":2,"severity":2,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, memo, useMemo, useCallback } from 'react';\r\nimport {\r\n    Search, Tag, ShoppingBag, PlusCircle, ImageIcon, Zap, Sparkles,\r\n    ChevronRight, ArrowLeft, ShieldCheck, Heart, Share2, MessageCircle,\r\n    Truck, Clock, CheckCircle2, History, Package, RefreshCw, Wand2, X as XIcon,\r\n    QrCode, WifiOff, ScanLine, MapPin, Phone, Navigation2\r\n} from 'lucide-react';\r\nimport { QRCodeSVG } from 'qrcode.react';\r\nimport { Scanner } from '@yudiel/react-qr-scanner';\r\nimport { useLocation, useNavigate } from 'react-router-dom';\r\nimport { AppState } from '../../../domain/types/common.types';\r\nimport { apiService } from '../../../application/services/api.service';\r\nimport { ConfirmModal } from '../ui/ConfirmModal';\r\nimport { OfflineMarketplaceView } from './OfflineMarketplaceView';\r\nimport { useDebounce } from '../../hooks/use-performance';\r\nimport { LoadingScreen } from '../ui/LoadingScreen';\r\nimport { LoadingButton } from '../ui/LoadingButton';\r\nimport { OrderTrackingMap } from '../features/marketplace/OrderTrackingMap';\r\n\r\ninterface MarketplaceViewProps {\r\n    state: AppState;\r\n    onRefresh: () => void;\r\n    onSuccess: (title: string, message: string) => void;\r\n    onError: (title: string, message: string) => void;\r\n}\r\n\r\n// Componentes internos para an├║ncios (memoizados para evitar re-renders)\r\nconst AdBanner = memo(({ type, title, description, actionText }: any) => (\r\n    <div className={`p-4 rounded-2xl border transition-all hover:scale-[1.02] cursor-pointer ${type === 'BANNER'\r\n        ? 'bg-gradient-to-br from-primary-600/20 to-purple-600/10 border-primary-500/20 shadow-lg shadow-primary-500/5'\r\n        : 'bg-zinc-900/50 border-zinc-800'\r\n        }`}>\r\n        <div className=\"flex items-center justify-between mb-2\">\r\n            <span className=\"text-[8px] font-black bg-zinc-800 text-zinc-400 px-1.5 py-0.5 rounded border border-zinc-700 uppercase tracking-widest\">Patrocinado</span>\r\n            <Sparkles size={12} className=\"text-primary-400\" />\r\n        </div>\r\n        {title && <h4 className=\"text-xs font-black text-white mb-1 uppercase tracking-tight\">{title}</h4>}\r\n        <p className=\"text-[10px] text-zinc-400 leading-tight mb-3\">{description}</p>\r\n        {actionText && (\r\n            <button className=\"w-full py-2 bg-primary-500 hover:bg-primary-400 text-black text-[9px] font-black rounded-lg transition-all uppercase tracking-widest shadow-lg shadow-primary-500/20\">\r\n                {actionText}\r\n            </button>\r\n        )}\r\n    </div>\r\n));\r\nAdBanner.displayName = 'AdBanner';\r\n\r\nconst NativeAdCard = ({ title, price, category, img }: any) => (\r\n    <div className=\"bg-zinc-900/40 border border-zinc-800/50 rounded-2xl overflow-hidden group hover:border-amber-500/30 transition-all flex flex-col relative\">\r\n        <div className=\"absolute top-2 left-2 z-10\">\r\n            <span className=\"text-[8px] font-black bg-amber-500 text-black px-1.5 py-0.5 rounded shadow-lg uppercase\">OFERTA PARCEIRA</span>\r\n        </div>\r\n        <div className=\"aspect-square bg-zinc-950 flex items-center justify-center overflow-hidden\">\r\n            <img src={img} alt={title} className=\"w-full h-full object-cover opacity-60 group-hover:scale-110 transition-transform duration-700\" />\r\n        </div>\r\n        <div className=\"p-4 flex-1 flex flex-col\">\r\n            <h3 className=\"font-bold text-white text-sm line-clamp-1 mb-1 uppercase tracking-tight\">{title}</h3>\r\n            <p className=\"text-[10px] text-zinc-500 mb-4 uppercase font-bold tracking-widest\">{category}</p>\r\n            <div className=\"mt-auto flex items-center justify-between\">\r\n                <span className=\"text-sm font-black text-amber-400\">{price}</span>\r\n                <div className=\"p-2 bg-amber-500/10 text-amber-500 rounded-lg group-hover:bg-amber-500 group-hover:text-black transition-all\">\r\n                    <ChevronRight size={14} />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n);\r\n\r\nexport const MarketplaceView = ({ state, onRefresh, onSuccess, onError }: MarketplaceViewProps) => {\r\n    const navigate = useNavigate();\r\n    const [view, setView] = useState<'browse' | 'create' | 'my-orders' | 'details' | 'missions' | 'offline'>('browse');\r\n    const [pendingOfflineSales, setPendingOfflineSales] = useState<any[]>(() => {\r\n        const saved = localStorage.getItem('cred30_offline_sales');\r\n        return saved ? JSON.parse(saved) : [];\r\n    });\r\n    const [listings, setListings] = useState<any[]>([]);\r\n    const [myOrders, setMyOrders] = useState<any[]>([]);\r\n    const [missions, setMissions] = useState<any[]>([]);\r\n    const [deliveryOption, setDeliveryOption] = useState<'SELF_PICKUP' | 'COURIER_REQUEST'>('SELF_PICKUP');\r\n    const [offeredFee, setOfferedFee] = useState<string>('5.00');\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const [selectedItem, setSelectedItem] = useState<any>(null);\r\n    const [searchQuery, setSearchQuery] = useState('');\r\n    const debouncedSearchQuery = useDebounce(searchQuery, 300); // Debounce de 300ms\r\n    const [selectedCategory, setSelectedCategory] = useState('TODOS');\r\n    const [confirmData, setConfirmData] = useState<any>(null);\r\n    const [offlineVoucher, setOfflineVoucher] = useState<{ code: string, amount: number, item: string } | null>(null);\r\n    const [redeemCode, setRedeemCode] = useState('');\r\n    const [paymentMethod, setPaymentMethod] = useState<'BALANCE' | 'PIX' | 'CARD'>('BALANCE');\r\n    const [cardData, setCardData] = useState({\r\n        holderName: '',\r\n        number: '',\r\n        expiryMonth: '',\r\n        expiryYear: '',\r\n        ccv: '',\r\n        cpf: ''\r\n    });\r\n    const [externalPayment, setExternalPayment] = useState<any>(null);\r\n    const [trackingOrder, setTrackingOrder] = useState<any>(null);\r\n\r\n    const [newListing, setNewListing] = useState({\r\n        title: '',\r\n        description: '',\r\n        price: '',\r\n        category: 'ELETR├öNICOS',\r\n        image_url: '',\r\n        quotaId: null as number | null\r\n    });\r\n\r\n    const categories = ['COTAS', 'ELETR├öNICOS', 'VE├ìCULOS', 'IM├ôVEIS', 'SERVI├çOS', 'MODA', 'OUTROS'];\r\n    const [aiLoading, setAiLoading] = useState(false);\r\n    const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n    const handleSaveOfflineSale = (sale: any) => {\r\n        const newSales = [...pendingOfflineSales, sale];\r\n        setPendingOfflineSales(newSales);\r\n        localStorage.setItem('cred30_offline_sales', JSON.stringify(newSales));\r\n    };\r\n\r\n    const handleSyncOffline = async () => {\r\n        if (pendingOfflineSales.length === 0) return;\r\n        try {\r\n            setIsLoading(true);\r\n            const response = await apiService.post('/marketplace/offline/sync', { transactions: pendingOfflineSales });\r\n            if (response.success) {\r\n                setPendingOfflineSales([]);\r\n                localStorage.removeItem('cred30_offline_sales');\r\n                onSuccess('Sincronizado!', 'Vendas offline enviadas com sucesso.');\r\n                setView('my-orders');\r\n            } else {\r\n                onError('Erro', 'Falha ao sincronizar.');\r\n            }\r\n        } catch (error) {\r\n            console.error(error);\r\n            onError('Erro', 'Falha na conex├úo.');\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    // Handle navigation state from PortfolioView (preloaded quota)\r\n    const location = useLocation();\r\n    useEffect(() => {\r\n        const navState = location.state as any;\r\n        if (navState?.view === 'create' && navState?.preloadQuota) {\r\n            setView('create');\r\n            setNewListing({\r\n                title: navState.preloadQuota.title || `Cota-Parte #${navState.preloadQuota.id}`,\r\n                description: `Cess├úo de cota-parte do grupo Cred30. Valor de mercado atual. Transferida automaticamente ap├│s confirma├º├úo do pagamento.`,\r\n                price: String(navState.preloadQuota.price || ''),\r\n                category: 'COTAS',\r\n                image_url: '',\r\n                quotaId: navState.preloadQuota.id\r\n            });\r\n            // Limpar o state para evitar reprocessamento\r\n            window.history.replaceState({}, document.title);\r\n        }\r\n    }, [location.state]);\r\n\r\n    const fetchData = useCallback(async () => {\r\n        setIsLoading(true);\r\n        try {\r\n            if (view === 'browse') {\r\n                const response = await apiService.get<any>('/marketplace/listings');\r\n                if (response.success) {\r\n                    const data = response.data;\r\n                    setListings(Array.isArray(data) ? data : (data?.listings || []));\r\n                }\r\n            } else if (view === 'my-orders') {\r\n                const response = await apiService.get<any>('/marketplace/my-orders');\r\n                if (response.success) {\r\n                    const data = response.data;\r\n                    setMyOrders(Array.isArray(data) ? data : (data?.orders || []));\r\n                }\r\n            } else if (view === 'missions') {\r\n                const response = await apiService.get<any>('/marketplace/logistic/missions');\r\n                if (response.success) {\r\n                    setMissions(response.data);\r\n                }\r\n            }\r\n        } catch (error) {\r\n            console.error('Erro ao buscar dados do marketplace:', error);\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    }, [view]);\r\n\r\n    useEffect(() => {\r\n        fetchData();\r\n    }, [fetchData]);\r\n\r\n    const handleCreateListing = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        setIsSubmitting(true);\r\n        try {\r\n            const payload: any = {\r\n                title: newListing.title,\r\n                description: newListing.description,\r\n                price: parseFloat(newListing.price),\r\n                category: newListing.category,\r\n                imageUrl: newListing.image_url || undefined\r\n            };\r\n\r\n            // Se for uma cota, enviar o ID\r\n            if (newListing.quotaId) {\r\n                payload.quotaId = newListing.quotaId;\r\n            }\r\n\r\n            const response = await apiService.post<any>('/marketplace/create', payload);\r\n            if (response.success) {\r\n                onSuccess('Sucesso', newListing.quotaId ? 'Sua cota-parte foi listada para repasse!' : 'An├║ncio publicado!');\r\n                setView('browse');\r\n                setNewListing({ title: '', description: '', price: '', category: 'ELETR├öNICOS', image_url: '', quotaId: null });\r\n                onRefresh();\r\n            }\r\n        } catch (error: any) {\r\n            onError('Erro', error.message || 'Falha ao publicar an├║ncio');\r\n        } finally {\r\n            setIsSubmitting(false);\r\n        }\r\n    };\r\n\r\n    const handleAIAssist = async () => {\r\n        if (!newListing.title) return;\r\n        setAiLoading(true);\r\n        try {\r\n            const response = await apiService.post<any>('/marketplace/ai-assist', { title: newListing.title });\r\n            if (response.success) {\r\n                setNewListing(prev => ({\r\n                    ...prev,\r\n                    description: response.data.description,\r\n                    category: response.data.category || prev.category\r\n                }));\r\n                onSuccess('IA Ativa', 'Descri├º├úo e categoria sugeridas com sucesso!');\r\n            }\r\n        } catch (error) {\r\n            console.error('Erro no assistente IA:', error);\r\n        } finally {\r\n            setAiLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleBoostListing = async (listing: any) => {\r\n        setConfirmData({\r\n            isOpen: true,\r\n            title: 'Impulsionar An├║ncio?',\r\n            message: `Escolha o m├®todo para pagar o destaque de 7 dias (R$ 5,00) para \"${listing.title}\":`,\r\n            confirmText: 'IMPULSIONAR AGORA',\r\n            type: 'success',\r\n            showPaymentMethods: true, // Flag para o modal mostrar op├º├Áes\r\n            onConfirm: async (method: string, card?: any) => {\r\n                try {\r\n                    const res = await apiService.post<any>(`/marketplace/listings/${listing.id}/boost`, {\r\n                        paymentMethod: method,\r\n                        creditCard: card\r\n                    });\r\n                    if (res.success) {\r\n                        if (method !== 'BALANCE') {\r\n                            setExternalPayment(res.data);\r\n                        } else {\r\n                            onSuccess('Impulsionado!', 'Seu an├║ncio ter├í prioridade nas buscas por 7 dias.');\r\n                            fetchData();\r\n                        }\r\n                        setConfirmData(null);\r\n                    }\r\n                } catch (err: any) {\r\n                    onError('Erro', err.message);\r\n                }\r\n            }\r\n        });\r\n    };\r\n\r\n    const generateOfflineVoucher = (item: any) => {\r\n        // Criar um c├│digo baseado no tempo e IDs (apenas para exibi├º├úo, a seguran├ºa real ├® no sync posterior)\r\n        const code = `CR30-${Math.random().toString(36).substring(2, 7).toUpperCase()}-${item.id}`;\r\n        setOfflineVoucher({ code, amount: item.price, item: item.title });\r\n\r\n        // Registrar no sync service que esta compra foi iniciada offline\r\n        import('../../../application/services/sync.service').then(({ syncService }) => {\r\n            syncService.enqueue('BUY_MARKETPLACE', {\r\n                listingId: item.id,\r\n                offlineToken: code\r\n            });\r\n        });\r\n\r\n        onSuccess('Voucher Gerado', 'Mostre este c├│digo ao vendedor para confirmar a compra offline.');\r\n    };\r\n\r\n    const handleRedeemOfflineCode = async () => {\r\n        if (!redeemCode) return;\r\n\r\n        // O vendedor registra o c├│digo recebido do comprador.\r\n        // Como ambos est├úo offline, isso fica na fila de sincroniza├º├úo do vendedor.\r\n        import('../../../application/services/sync.service').then(({ syncService }) => {\r\n            syncService.enqueue('RELEASE_ESCROW', {\r\n                verificationCode: redeemCode,\r\n                note: 'Resgate via modo offline (Interior)'\r\n            });\r\n        });\r\n\r\n        onSuccess('C├│digo Registrado', 'O resgate foi agendado. O saldo cair├í assim que voc├¬ detectar internet.');\r\n        setRedeemCode('');\r\n        setView('browse');\r\n    };\r\n\r\n    const formatCurrency = (val: number) => {\r\n        return val.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });\r\n    };\r\n\r\n    // Loading principal\r\n    if (isLoading && view === 'browse' && listings.length === 0) {\r\n        return <LoadingScreen fullScreen message=\"Carregando Mercado...\" />;\r\n    }\r\n\r\n    return (\r\n        <div className=\"space-y-6 pb-12\">\r\n            {/* Header / Barra de A├º├úo */}\r\n            <div className=\"flex items-center justify-between\">\r\n                <div className=\"flex items-center gap-3\">\r\n                    <div className=\"w-10 h-10 bg-primary-500/10 rounded-xl flex items-center justify-center border border-primary-500/20\">\r\n                        <ShoppingBag className=\"text-primary-400\" size={20} />\r\n                    </div>\r\n                    <div>\r\n                        <h2 className=\"text-xl font-bold text-white tracking-tight\">Mercado Cred30</h2>\r\n                        <p className=\"text-[10px] text-zinc-500 font-bold uppercase tracking-widest\">Compre e venda com seguran├ºa</p>\r\n                    </div>\r\n                </div>\r\n\r\n                {view === 'browse' && (\r\n                    <button\r\n                        onClick={() => setView('create')}\r\n                        className=\"bg-primary-500 hover:bg-primary-400 text-black px-4 py-2.5 rounded-xl text-xs font-black transition active:scale-95 flex items-center gap-2 shadow-lg shadow-primary-500/20\"\r\n                    >\r\n                        <PlusCircle size={16} /> ANUNCIAR\r\n                    </button>\r\n                )}\r\n            </div>\r\n\r\n            {/* View Tabs */}\r\n            <div className=\"flex gap-2 bg-zinc-900/50 p-1 rounded-xl border border-zinc-800\">\r\n                <button\r\n                    onClick={() => setView('browse')}\r\n                    className={`flex-1 py-2 text-xs font-bold rounded-lg transition ${view === 'browse' ? 'bg-zinc-800 text-white shadow-sm' : 'text-zinc-500'}`}\r\n                >\r\n                    Explorar\r\n                </button>\r\n                <button\r\n                    onClick={() => setView('my-orders')}\r\n                    className={`flex-1 py-2 text-xs font-bold rounded-lg transition ${view === 'my-orders' ? 'bg-zinc-800 text-white shadow-sm' : 'text-zinc-500'}`}\r\n                >\r\n                    Meus Pedidos\r\n                </button>\r\n                <button\r\n                    onClick={() => setView('missions')}\r\n                    className={`flex-1 py-2 text-xs font-bold rounded-lg transition ${view === 'missions' ? 'bg-zinc-800 text-white shadow-sm' : 'text-zinc-500'}`}\r\n                >\r\n                    <div className=\"flex items-center justify-center gap-1\">\r\n                        <Truck size={10} className={view === 'missions' ? 'text-primary-400' : 'text-zinc-500'} />\r\n                        Miss├Áes\r\n                    </div>\r\n                </button>\r\n                <button\r\n                    onClick={() => setView('offline')}\r\n                    className={`flex-1 py-2 text-xs font-bold rounded-lg transition ${view === 'offline' ? 'bg-zinc-800 text-white shadow-sm' : 'text-zinc-500'}`}\r\n                >\r\n                    <div className=\"flex items-center justify-center gap-1\">\r\n                        <Zap size={10} className={view === 'offline' ? 'text-primary-400' : 'text-zinc-500'} />\r\n                        Modo Offline\r\n                    </div>\r\n                </button>\r\n            </div>\r\n\r\n            {/* Protective Escrow Banner */}\r\n            {view === 'browse' && (\r\n                <div className=\"space-y-3\">\r\n                    <div className=\"bg-emerald-900/20 border border-emerald-500/20 rounded-2xl p-4 flex items-start gap-4\">\r\n                        <div className=\"bg-emerald-500/20 p-2 rounded-xl text-emerald-400\">\r\n                            <ShieldCheck size={24} />\r\n                        </div>\r\n                        <div>\r\n                            <h4 className=\"text-sm font-bold text-emerald-400\">Compra Garantida Cred30</h4>\r\n                            <p className=\"text-[11px] text-zinc-400 leading-relaxed mt-1\">\r\n                                Seu dinheiro fica protegido conosco. S├│ liberamos o valor ao vendedor quando voc├¬ confirmar que recebeu tudo ok.\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {!state.currentUser?.asaas_wallet_id && (\r\n                        <div className=\"bg-primary-500/5 border border-primary-500/20 rounded-2xl p-4 flex items-center justify-between gap-4\">\r\n                            <div className=\"flex items-start gap-3\">\r\n                                <div className=\"bg-primary-500/10 p-2 rounded-xl text-primary-400\">\r\n                                    <Sparkles size={20} />\r\n                                </div>\r\n                                <div>\r\n                                    <h4 className=\"text-xs font-bold text-white\">Seja um Vendedor Verificado</h4>\r\n                                    <p className=\"text-[10px] text-zinc-500 mt-0.5\">Receba via PIX/Cart├úo e passe mais confian├ºa.</p>\r\n                                </div>\r\n                            </div>\r\n                            <button\r\n                                onClick={() => navigate('/app/seller')}\r\n                                className=\"bg-primary-500 hover:bg-primary-400 text-black px-3 py-1.5 rounded-lg text-[10px] font-black transition active:scale-95\"\r\n                            >\r\n                                COME├çAR\r\n                            </button>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            )}\r\n\r\n            {/* Search and Filters */}\r\n            {view === 'browse' && (\r\n                <div className=\"space-y-4\">\r\n                    <div className=\"relative group\">\r\n                        <Search className=\"absolute left-4 top-1/2 -translate-y-1/2 text-zinc-500 group-focus-within:text-primary-400 transition-colors\" size={18} />\r\n                        <input\r\n                            type=\"text\"\r\n                            placeholder=\"O que voc├¬ est├í procurando hoje?\"\r\n                            value={searchQuery}\r\n                            onChange={(e) => setSearchQuery(e.target.value)}\r\n                            className=\"w-full bg-zinc-900/40 border border-zinc-800 rounded-2xl pl-12 pr-12 py-4 text-sm text-white focus:outline-none focus:border-primary-500/50 transition-all shadow-xl\"\r\n                        />\r\n                        {searchQuery && (\r\n                            <button\r\n                                onClick={() => setSearchQuery('')}\r\n                                className=\"absolute right-4 top-1/2 -translate-y-1/2 text-zinc-500 hover:text-white transition-colors\"\r\n                            >\r\n                                <XIcon size={18} />\r\n                            </button>\r\n                        )}\r\n                    </div>\r\n\r\n                    <div className=\"flex items-center gap-2 overflow-x-auto no-scrollbar pb-2\">\r\n                        {['TODOS', ...categories].map((cat) => (\r\n                            <button\r\n                                key={cat}\r\n                                onClick={() => setSelectedCategory(cat)}\r\n                                className={`\r\n                                    px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-wider transition-all whitespace-nowrap border\r\n                                    ${selectedCategory === cat\r\n                                        ? 'bg-primary-500 text-black border-primary-500 shadow-lg shadow-primary-500/20'\r\n                                        : 'bg-zinc-900 text-zinc-500 border-zinc-800 hover:border-zinc-700'}\r\n                                `}\r\n                            >\r\n                                {cat}\r\n                            </button>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* Content Rendering */}\r\n            {view === 'browse' && (\r\n                <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 animate-in fade-in duration-300\">\r\n                    {(() => {\r\n                        // Usar debouncedSearchQuery para evitar filtros excessivos durante digita├º├úo\r\n                        const filtered = listings.filter(item => {\r\n                            const matchesSearch = item.title.toLowerCase().includes(debouncedSearchQuery.toLowerCase()) ||\r\n                                item.description.toLowerCase().includes(debouncedSearchQuery.toLowerCase());\r\n                            const matchesCategory = selectedCategory === 'TODOS' || item.category === selectedCategory;\r\n                            return matchesSearch && matchesCategory;\r\n                        });\r\n\r\n                        if (filtered.length === 0 && (debouncedSearchQuery || selectedCategory !== 'TODOS')) {\r\n                            return (\r\n                                <div className=\"col-span-full py-20 text-center animate-in fade-in zoom-in duration-300\">\r\n                                    <div className=\"w-16 h-16 bg-zinc-900 rounded-full flex items-center justify-center mx-auto mb-4 border border-zinc-800\">\r\n                                        <Search size={32} className=\"text-zinc-700\" />\r\n                                    </div>\r\n                                    <h3 className=\"text-white font-bold mb-1\">Nenhum resultado encontrado</h3>\r\n                                    <p className=\"text-zinc-500 text-xs\">Tente ajustar sua busca ou filtro para encontrar o que precisa.</p>\r\n                                    <button\r\n                                        onClick={() => { setSearchQuery(''); setSelectedCategory('TODOS'); }}\r\n                                        className=\"mt-6 text-primary-400 text-[10px] font-black uppercase tracking-widest hover:underline\"\r\n                                    >\r\n                                        Limpar todos os filtros\r\n                                    </button>\r\n                                </div>\r\n                            );\r\n                        }\r\n\r\n                        if (filtered.length === 0) {\r\n                            return (\r\n                                <div className=\"col-span-full py-12 text-center\">\r\n                                    <Tag size={48} className=\"text-zinc-800 mx-auto mb-4\" />\r\n                                    <p className=\"text-zinc-500 text-sm\">Nenhum item anunciado no momento.</p>\r\n                                    <button onClick={() => setView('create')} className=\"text-primary-400 text-xs font-bold mt-2\">Clique aqui para ser o primeiro!</button>\r\n                                </div>\r\n                            );\r\n                        }\r\n\r\n                        return (\r\n                            <>\r\n                                {/* Inserir An├║ncio Adsterra no topo */}\r\n                                <div className=\"col-span-1\">\r\n                                    <AdBanner\r\n                                        type=\"BANNER\"\r\n                                        title=\"Ganhe + R$ 500 no Saldo\"\r\n                                        description=\"Confira como liberar b├┤nus de parceiros assistindo v├¡deos.\"\r\n                                        actionText=\"LIBERAR AGORA\"\r\n                                    />\r\n                                </div>\r\n\r\n                                {filtered.map((item, index) => (\r\n                                    <React.Fragment key={item.id}>\r\n                                        <div className=\"bg-zinc-900 border border-zinc-800 rounded-2xl overflow-hidden group hover:border-primary-500/30 transition-all flex flex-col\">\r\n                                            <div className=\"aspect-square bg-zinc-950 flex items-center justify-center relative\">\r\n                                                {item.image_url ? (\r\n                                                    <img\r\n                                                        src={item.image_url.includes('cloudinary') ? item.image_url.replace('/upload/', '/upload/w_600,c_fill,g_auto,q_auto,f_auto/') : item.image_url}\r\n                                                        alt={item.title}\r\n                                                        className=\"w-full h-full object-cover\"\r\n                                                    />\r\n                                                ) : (\r\n                                                    <ImageIcon size={40} className=\"text-zinc-800\" />\r\n                                                )}\r\n                                                <div className=\"absolute top-2 right-2 bg-black/60 backdrop-blur-md px-2 py-1 rounded text-[10px] text-zinc-300 font-bold uppercase\">\r\n                                                    {item.category}\r\n                                                </div>\r\n                                            </div>\r\n                                            <div className=\"p-4 flex-1 flex flex-col\">\r\n                                                <div className=\"flex justify-between items-start mb-1\">\r\n                                                    <h3 className=\"font-bold text-white text-base line-clamp-1\">{item.title}</h3>\r\n                                                    {item.type === 'AFFILIATE' ? (\r\n                                                        <div className=\"bg-amber-500/20 text-amber-400 text-[8px] px-1.5 py-0.5 rounded border border-amber-500/20 flex items-center gap-1 font-black\">\r\n                                                            <Sparkles size={8} /> PARCEIRO\r\n                                                        </div>\r\n                                                    ) : item.is_boosted ? (\r\n                                                        <div className=\"bg-primary-500/10 text-primary-400 text-[8px] px-1.5 py-0.5 rounded border border-primary-500/20 flex items-center gap-1 font-black\">\r\n                                                            <Zap size={8} /> DESTAQUE\r\n                                                        </div>\r\n                                                    ) : item.asaas_wallet_id && (\r\n                                                        <div className=\"bg-emerald-500/20 text-emerald-400 text-[8px] px-1.5 py-0.5 rounded border border-emerald-500/20 flex items-center gap-1 font-black\">\r\n                                                            <ShieldCheck size={8} /> VERIFICADO\r\n                                                        </div>\r\n                                                    )}\r\n                                                </div>\r\n                                                <p className=\"text-xs text-zinc-500 mb-4 line-clamp-2 h-8\">{item.description}</p>\r\n\r\n                                                <div className=\"mt-auto pt-4 border-t border-zinc-800 flex flex-col gap-3\">\r\n                                                    <div className=\"flex items-center justify-between\">\r\n                                                        <span className=\"text-lg font-black text-primary-400\">\r\n                                                            {item.price > 0 ? formatCurrency(parseFloat(item.price)) : 'Ver Pre├ºo'}\r\n                                                        </span>\r\n                                                        {item.seller_id === state.currentUser?.id ? (\r\n                                                            <button\r\n                                                                onClick={() => handleBoostListing(item)}\r\n                                                                disabled={item.is_boosted}\r\n                                                                className={`text-[9px] font-black px-3 py-1.5 rounded-lg flex items-center gap-1 transition ${item.is_boosted ? 'bg-zinc-800 text-zinc-500' : 'bg-primary-500/10 text-primary-400 hover:bg-primary-500 hover:text-black'}`}\r\n                                                            >\r\n                                                                <Zap size={10} /> {item.is_boosted ? 'IMPULSIONADO' : 'IMPULSIONAR'}\r\n                                                            </button>\r\n                                                        ) : (\r\n                                                            <button\r\n                                                                onClick={() => {\r\n                                                                    setSelectedItem(item);\r\n                                                                    setView('details');\r\n                                                                }}\r\n                                                                className={`${item.type === 'AFFILIATE' ? 'bg-amber-500 hover:bg-amber-400 transition-all active:scale-95' : 'bg-primary-600 hover:bg-primary-500 transition-all active:scale-95'} text-black px-4 py-2 rounded-lg text-xs font-black flex items-center gap-2`}\r\n                                                            >\r\n                                                                {item.type === 'AFFILIATE' ? 'VER OFERTA' : 'COMPRAR AGORA'}\r\n                                                            </button>\r\n                                                        )}\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        {(index + 1) % 3 === 0 && (\r\n                                            <NativeAdCard\r\n                                                title={index === 2 ? \"Novo Cart├úo Black Sem Anuidade\" : \"Empr├®stimo FGTS Cai na Hora\"}\r\n                                                price={index === 2 ? \"GR├üTIS\" : \"SIMULAR\"}\r\n                                                category=\"OFERTA\"\r\n                                                img={index === 2 ? \"https://images.unsplash.com/photo-1563013544-824ae1b704d3?auto=format&fit=crop&w=600&q=80\" : \"https://images.unsplash.com/photo-1554224155-16974a4005d1?auto=format&fit=crop&w=600&q=80\"}\r\n                                            />\r\n                                        )}\r\n                                    </React.Fragment>\r\n                                ))}\r\n\r\n                                <div className=\"col-span-1\">\r\n                                    <AdBanner\r\n                                        type=\"TIP\"\r\n                                        description=\"Dica: Clique em an├║ncios parceiros para aumentar seu Score Cred30.\"\r\n                                    />\r\n                                </div>\r\n                            </>\r\n                        );\r\n                    })()}\r\n                </div>\r\n            )}\r\n\r\n            {view === 'create' && (\r\n                <div className=\"bg-zinc-900 border border-zinc-800 rounded-3xl p-6 animate-in slide-in-from-bottom duration-300\">\r\n                    <h3 className=\"text-lg font-bold text-white mb-6 flex items-center gap-2\">\r\n                        O que voc├¬ quer vender?\r\n                        <div className=\"bg-primary-500/10 text-primary-400 text-[9px] px-2 py-0.5 rounded-full border border-primary-500/20 flex items-center gap-1\">\r\n                            <Sparkles size={10} /> ASSISTENTE IA ATIVO\r\n                        </div>\r\n                    </h3>\r\n                    <form onSubmit={handleCreateListing} className=\"space-y-4\">\r\n                        <div>\r\n                            <div className=\"flex justify-between items-center mb-1\">\r\n                                <label className=\"text-[10px] font-bold text-zinc-500 uppercase ml-1\">T├¡tulo do An├║ncio</label>\r\n                                <button\r\n                                    type=\"button\"\r\n                                    onClick={handleAIAssist}\r\n                                    disabled={aiLoading || !newListing.title}\r\n                                    className=\"text-[9px] font-black text-primary-400 flex items-center gap-1 hover:text-white transition-colors disabled:opacity-30\"\r\n                                >\r\n                                    {aiLoading ? <RefreshCw size={10} className=\"animate-spin\" /> : <Wand2 size={10} />}\r\n                                    MELHORAR COM IA\r\n                                </button>\r\n                            </div>\r\n                            <input\r\n                                type=\"text\"\r\n                                value={newListing.title}\r\n                                onChange={(e) => setNewListing({ ...newListing, title: e.target.value })}\r\n                                className=\"w-full bg-zinc-950 border border-zinc-800 rounded-xl px-4 py-3 text-sm text-white focus:outline-none focus:border-primary-500/50\"\r\n                                placeholder=\"Ex: iPhone 13 Pro Max 256GB\"\r\n                                required\r\n                            />\r\n                        </div>\r\n\r\n                        <div>\r\n                            <label className=\"text-[10px] font-bold text-zinc-500 uppercase ml-1 mb-1 block\">Descri├º├úo Detalhada</label>\r\n                            <textarea\r\n                                value={newListing.description}\r\n                                onChange={(e) => setNewListing({ ...newListing, description: e.target.value })}\r\n                                className=\"w-full bg-zinc-950 border border-zinc-800 rounded-xl px-4 py-3 text-sm text-white h-32 focus:outline-none focus:border-primary-500/50\"\r\n                                placeholder=\"Descreva o estado do produto, tempo de uso, acess├│rios inclusos...\"\r\n                                required\r\n                            />\r\n                        </div>\r\n\r\n                        <div className=\"grid grid-cols-2 gap-4\">\r\n                            <div>\r\n                                <label className=\"text-[10px] font-bold text-zinc-500 uppercase ml-1 mb-1 block\">Pre├ºo de Venda</label>\r\n                                <input\r\n                                    type=\"number\"\r\n                                    value={newListing.price}\r\n                                    onChange={(e) => setNewListing({ ...newListing, price: e.target.value })}\r\n                                    className=\"w-full bg-zinc-950 border border-zinc-800 rounded-xl px-4 py-3 text-sm text-white focus:outline-none focus:border-primary-500/50\"\r\n                                    placeholder=\"0,00\"\r\n                                    required\r\n                                />\r\n                            </div>\r\n                            <div>\r\n                                <label className=\"text-[10px] font-bold text-zinc-500 uppercase ml-1 mb-1 block\">Categoria</label>\r\n                                <select\r\n                                    value={newListing.category}\r\n                                    onChange={(e) => setNewListing({ ...newListing, category: e.target.value })}\r\n                                    className=\"w-full bg-zinc-950 border border-zinc-800 rounded-xl px-4 py-3 text-sm text-white focus:outline-none focus:border-primary-500/50\"\r\n                                >\r\n                                    {categories.map(c => <option key={c} value={c}>{c}</option>)}\r\n                                </select>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div>\r\n                            <label className=\"text-[10px] font-bold text-zinc-500 uppercase ml-1 mb-1 block\">Foto do Produto (Autom├ítico)</label>\r\n                            <div className=\"flex gap-4 items-start\">\r\n                                <div className=\"w-24 h-24 bg-zinc-950 border border-zinc-800 rounded-xl overflow-hidden flex items-center justify-center shrink-0\">\r\n                                    {newListing.image_url ? (\r\n                                        <img src={newListing.image_url} alt=\"Preview\" className=\"w-full h-full object-cover\" />\r\n                                    ) : (\r\n                                        <ImageIcon className=\"text-zinc-800\" />\r\n                                    )}\r\n                                </div>\r\n                                <div className=\"flex-1\">\r\n                                    <input\r\n                                        type=\"file\"\r\n                                        accept=\"image/*\"\r\n                                        onChange={(e) => {\r\n                                            const file = e.target.files?.[0];\r\n                                            if (file) {\r\n                                                const reader = new FileReader();\r\n                                                reader.onload = (readerEvent) => {\r\n                                                    const img = new Image();\r\n                                                    img.onload = () => {\r\n                                                        const canvas = document.createElement('canvas');\r\n                                                        const ctx = canvas.getContext('2d');\r\n                                                        const size = 600; // Standard Size\r\n                                                        canvas.width = size;\r\n                                                        canvas.height = size;\r\n\r\n                                                        // Calculate crop (Cover)\r\n                                                        const ratio = Math.max(size / img.width, size / img.height);\r\n                                                        const centerShift_x = (size - img.width * ratio) / 2;\r\n                                                        const centerShift_y = (size - img.height * ratio) / 2;\r\n\r\n                                                        if (ctx) {\r\n                                                            ctx.clearRect(0, 0, size, size);\r\n                                                            ctx.drawImage(img, 0, 0, img.width, img.height,\r\n                                                                centerShift_x, centerShift_y, img.width * ratio, img.height * ratio);\r\n\r\n                                                            // Compression\r\n                                                            const dataUrl = canvas.toDataURL('image/jpeg', 0.85);\r\n                                                            setNewListing(prev => ({ ...prev, image_url: dataUrl }));\r\n                                                        }\r\n                                                    };\r\n                                                    img.src = readerEvent.target?.result as string;\r\n                                                };\r\n                                                reader.readAsDataURL(file);\r\n                                            }\r\n                                        }}\r\n                                        className=\"w-full text-xs text-zinc-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-[10px] file:font-semibold file:bg-primary-500/10 file:text-primary-400 hover:file:bg-primary-500/20\"\r\n                                    />\r\n                                    <p className=\"text-[9px] text-zinc-600 mt-2\">\r\n                                        A imagem ser├í automaticamente ajustada para o formato padr├úo do feed (Quadrado 600px).\r\n                                    </p>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"pt-4 flex gap-3\">\r\n                            <button\r\n                                type=\"button\"\r\n                                onClick={() => setView('browse')}\r\n                                className=\"flex-1 py-4 bg-zinc-800 text-zinc-400 font-bold rounded-2xl transition hover:bg-zinc-700 uppercase tracking-widest text-[10px]\"\r\n                            >\r\n                                Cancelar\r\n                            </button>\r\n                            <LoadingButton\r\n                                type=\"submit\"\r\n                                isLoading={isSubmitting}\r\n                                loadingText=\"PUBLICANDO...\"\r\n                                className=\"flex-[2] py-4 bg-primary-500 text-black font-black rounded-2xl transition hover:bg-primary-400 shadow-lg shadow-primary-500/20 uppercase tracking-widest text-[10px]\"\r\n                            >\r\n                                PUBLICAR AN├ÜNCIO AGORA\r\n                            </LoadingButton>\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n            )}\r\n\r\n            {view === 'my-orders' && (\r\n                <div className=\"space-y-4\">\r\n                    <h3 className=\"text-lg font-bold text-white mb-4\">Minhas Compras</h3>\r\n                    {myOrders.length === 0 ? (\r\n                        <div className=\"py-20 text-center bg-zinc-900 border border-zinc-800 rounded-3xl\">\r\n                            <History size={48} className=\"text-zinc-800 mx-auto mb-4\" />\r\n                            <p className=\"text-zinc-500 text-sm\">Voc├¬ ainda n├úo realizou nenhuma compra.</p>\r\n                            <button onClick={() => setView('browse')} className=\"text-primary-400 text-xs font-bold mt-2\">Explorar Mercado</button>\r\n                        </div>\r\n                    ) : (\r\n                        myOrders.map(order => (\r\n                            <div key={order.id} className=\"bg-zinc-900 border border-zinc-800 rounded-2xl p-4 flex gap-4\">\r\n                                <div className=\"w-20 h-20 bg-zinc-950 rounded-xl overflow-hidden flex-shrink-0\">\r\n                                    <img src={order.listing_image} alt={order.listing_title} className=\"w-full h-full object-cover\" />\r\n                                </div>\r\n                                <div className=\"flex-1\">\r\n                                    <div className=\"flex justify-between items-start\">\r\n                                        <h4 className=\"font-bold text-white text-sm\">{order.listing_title}</h4>\r\n                                        <span className={`text-[10px] font-black px-2 py-0.5 rounded ${order.status === 'COMPLETED' ? 'bg-emerald-500/10 text-emerald-400' : 'bg-primary-500/10 text-primary-400'}`}>\r\n                                            {order.status}\r\n                                        </span>\r\n                                    </div>\r\n                                    <p className=\"text-lg font-black text-white mt-1\">{formatCurrency(parseFloat(order.amount))}</p>\r\n                                    <div className=\"flex flex-wrap items-center gap-3 mt-4\">\r\n                                        <p className=\"text-[10px] text-zinc-500 uppercase font-bold\">Pedido: #{order.id.toString().slice(-6)}</p>\r\n\r\n                                        {/* Bot├úo de Rastreio (se houver entregador e n├úo estiver conclu├¡do) */}\r\n                                        {order.courier_id && (order.status === 'WAITING_SHIPPING' || order.status === 'IN_TRANSIT') && (\r\n                                            <button\r\n                                                onClick={() => setTrackingOrder(order)}\r\n                                                className=\"flex items-center gap-1.5 bg-indigo-500/10 text-indigo-400 px-3 py-1 rounded-lg text-[10px] font-black border border-indigo-500/20 hover:bg-indigo-500 hover:text-white transition-all\"\r\n                                            >\r\n                                                <Navigation2 size={12} className=\"animate-pulse\" /> RASTREAR\r\n                                            </button>\r\n                                        )}\r\n\r\n                                        <span className=\"text-[9px] font-black px-2 py-0.5 rounded bg-zinc-800 text-zinc-400 capitalize\">\r\n                                            {order.buyer_id === state.currentUser?.id ? 'Compra' : order.seller_id === state.currentUser?.id ? 'Venda' : 'Entrega'}\r\n                                        </span>\r\n                                        {order.courier_name && (\r\n                                            <div className=\"flex items-center gap-2 text-[10px] text-amber-500 font-black\">\r\n                                                <div className=\"flex items-center gap-1\"><Truck size={12} /> {order.courier_name.split(' ')[0]}</div>\r\n                                                <div className=\"flex items-center gap-1 text-zinc-500 font-mono font-normal\">\r\n                                                    <Phone size={10} /> {order.courier_phone}\r\n                                                </div>\r\n                                            </div>\r\n                                        )}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        ))\r\n                    )}\r\n                </div>\r\n            )}\r\n\r\n            {view === 'missions' && (\r\n                <div className=\"space-y-4 animate-in fade-in duration-300\">\r\n                    <div className=\"bg-gradient-to-br from-indigo-900/40 to-indigo-600/10 border border-indigo-500/20 rounded-3xl p-6 relative overflow-hidden\">\r\n                        <div className=\"relative z-10\">\r\n                            <h3 className=\"text-xl font-black text-white uppercase tracking-tight mb-2\">Mural de Miss├Áes</h3>\r\n                            <p className=\"text-sm text-zinc-400 max-w-sm\">\r\n                                Ganhe dinheiro extra ajudando outros membros com a log├¡stica. Aceite miss├Áes que cruzam com seu caminho.\r\n                            </p>\r\n                        </div>\r\n                        <Truck className=\"absolute -right-4 -bottom-4 text-indigo-500/20 w-32 h-32 rotate-12\" />\r\n                    </div>\r\n\r\n                    {missions.length === 0 ? (\r\n                        <div className=\"py-20 text-center bg-zinc-900/50 border border-zinc-800 rounded-3xl\">\r\n                            <Truck size={48} className=\"text-zinc-800 mx-auto mb-4\" />\r\n                            <p className=\"text-zinc-500 text-sm\">Nenhuma miss├úo de log├¡stica dispon├¡vel no momento.</p>\r\n                            <p className=\"text-[10px] text-zinc-600 mt-2\">Novas oportunidades aparecem quando membros solicitam apoio.</p>\r\n                        </div>\r\n                    ) : (\r\n                        <div className=\"grid gap-4\">\r\n                            {missions.map(mission => (\r\n                                <div key={mission.id} className=\"bg-zinc-900 border border-zinc-800 rounded-2xl p-5 flex flex-col md:flex-row gap-5 items-start md:items-center group hover:border-indigo-500/40 transition-all\">\r\n                                    <div className=\"w-16 h-16 bg-zinc-950 rounded-xl overflow-hidden shrink-0 border border-zinc-800\">\r\n                                        <img src={mission.image_url} alt={mission.item_title} className=\"w-full h-full object-cover\" />\r\n                                    </div>\r\n                                    <div className=\"flex-1\">\r\n                                        <div className=\"flex items-center gap-2 mb-1\">\r\n                                            <span className=\"text-[10px] font-black bg-indigo-500/20 text-indigo-300 px-2 py-0.5 rounded uppercase tracking-widest\">TRANSPORTE</span>\r\n                                            <span className=\"text-[10px] text-zinc-500 font-bold uppercase\">ÔÇó {new Date(mission.created_at).toLocaleDateString()}</span>\r\n                                        </div>\r\n                                        <h4 className=\"font-bold text-white text-base\">{mission.item_title}</h4>\r\n                                        <p className=\"text-xs text-zinc-400 mt-2 flex flex-col gap-2\">\r\n                                            <span className=\"flex flex-col gap-0.5\">\r\n                                                <span className=\"flex items-center gap-2\"><MapPin size={12} className=\"text-amber-500\" /> <span className=\"text-zinc-500\">Coleta:</span> <strong>{mission.pickup_address}</strong> ({mission.seller_name.split(' ')[0]})</span>\r\n                                                <span className=\"flex items-center gap-2 pl-5 text-[10px] text-zinc-500 font-mono\"><Phone size={10} /> {mission.seller_phone}</span>\r\n                                            </span>\r\n                                            <span className=\"flex flex-col gap-0.5\">\r\n                                                <span className=\"flex items-center gap-2\"><MapPin size={12} className=\"text-primary-500\" /> <span className=\"text-zinc-500\">Entrega:</span> <strong>{mission.delivery_address}</strong> ({mission.buyer_name.split(' ')[0]})</span>\r\n                                                <span className=\"flex items-center gap-2 pl-5 text-[10px] text-zinc-500 font-mono\"><Phone size={10} /> {mission.buyer_phone}</span>\r\n                                            </span>\r\n                                        </p>\r\n                                    </div>\r\n                                    <div className=\"flex flex-col items-end gap-2 w-full md:w-auto mt-2 md:mt-0 pt-4 md:pt-0 border-t md:border-0 border-zinc-800\">\r\n                                        <div className=\"text-right\">\r\n                                            <p className=\"text-[10px] text-zinc-500 font-bold uppercase tracking-widest\">Recompensa</p>\r\n                                            <p className=\"text-xl font-black text-emerald-400\">{formatCurrency(parseFloat(mission.delivery_fee))}</p>\r\n                                        </div>\r\n                                        <button\r\n                                            onClick={async () => {\r\n                                                setConfirmData({\r\n                                                    isOpen: true,\r\n                                                    title: 'Aceitar Miss├úo?',\r\n                                                    message: 'Voc├¬ se compromete a retirar o produto com o vendedor e entregar ao comprador. Ao aceitar, enviaremos o c├│digo de coleta.',\r\n                                                    confirmText: 'ACEITAR MISS├âO',\r\n                                                    type: 'info',\r\n                                                    onConfirm: async () => {\r\n                                                        try {\r\n                                                            const res = await apiService.post<any>(`/marketplace/logistic/mission/${mission.id}/accept`, {});\r\n                                                            if (res.success) {\r\n                                                                onSuccess('Miss├úo Aceita!', `C├│digo de Coleta: ${res.data.pickupCode}. Mostre ao vendedor.`);\r\n                                                                setConfirmData(null);\r\n                                                                fetchData(); // refresh\r\n                                                            }\r\n                                                        } catch (err: any) {\r\n                                                            onError('Erro', err.message);\r\n                                                        }\r\n                                                    }\r\n                                                });\r\n                                            }}\r\n                                            className=\"w-full md:w-auto bg-indigo-600 hover:bg-indigo-500 text-white font-black py-3 px-6 rounded-xl transition shadow-lg shadow-indigo-600/20 text-xs uppercase tracking-widest\"\r\n                                        >\r\n                                            Aceitar\r\n                                        </button>\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            )}\r\n            {view === 'offline' && (\r\n                <OfflineMarketplaceView\r\n                    user={state.currentUser}\r\n                    pendingSales={pendingOfflineSales}\r\n                    onSaveSale={handleSaveOfflineSale}\r\n                    onSync={handleSyncOffline}\r\n                />\r\n            )}\r\n\r\n\r\n            {view === 'details' && selectedItem && (\r\n                <div className=\"fixed inset-0 z-[100] bg-black/95 backdrop-blur-xl animate-in fade-in duration-300 overflow-y-auto\">\r\n                    <div className=\"max-w-xl mx-auto min-h-screen bg-zinc-950 flex flex-col\">\r\n                        <div className=\"sticky top-0 z-10 p-4 flex items-center justify-between bg-zinc-950/80 backdrop-blur-md\">\r\n                            <button onClick={() => setView('browse')} className=\"p-2 bg-zinc-900 rounded-full text-zinc-400 hover:text-white transition\">\r\n                                <ArrowLeft size={24} />\r\n                            </button>\r\n                            <div className=\"flex gap-2\">\r\n                                <button className=\"p-2 bg-zinc-900 rounded-full text-zinc-400 hover:text-white transition\"><Share2 size={20} /></button>\r\n                                <button className=\"p-2 bg-zinc-900 rounded-full text-zinc-400 hover:text-white transition\"><Heart size={20} /></button>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"aspect-[4/3] bg-zinc-900 relative\">\r\n                            {selectedItem.image_url ? (\r\n                                <img src={selectedItem.image_url} alt={selectedItem.title} className=\"w-full h-full object-cover\" />\r\n                            ) : (\r\n                                <ImageIcon size={64} className=\"text-zinc-800 absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2\" />\r\n                            )}\r\n                        </div>\r\n\r\n                        <div className=\"p-6 space-y-8\">\r\n                            <div>\r\n                                <div className=\"flex justify-between items-start mb-2\">\r\n                                    <span className=\"text-[10px] font-black bg-primary-500/10 text-primary-400 px-2 py-0.5 rounded uppercase tracking-widest\">{selectedItem.category}</span>\r\n                                    {selectedItem.is_boosted && <span className=\"text-[10px] font-black bg-primary-400 text-black px-2 py-0.5 rounded animate-pulse\">DESTAQUE</span>}\r\n                                </div>\r\n                                <h1 className=\"text-3xl font-black text-white tracking-tight leading-none mb-1\">{selectedItem.title}</h1>\r\n                                <div className=\"flex items-center justify-between\">\r\n                                    <p className=\"text-2xl font-black text-primary-400\">{formatCurrency(parseFloat(selectedItem.price))}</p>\r\n                                    <div className=\"flex items-center gap-2\">\r\n                                        <span className=\"text-[10px] text-zinc-500 font-bold uppercase\">Vendedor:</span>\r\n                                        <div className=\"flex items-center gap-1.5\">\r\n                                            <span className=\"text-xs font-bold text-white\">{selectedItem.seller_name}</span>\r\n                                            {selectedItem.asaas_wallet_id && (\r\n                                                <span className=\"text-[9px] text-emerald-400 bg-emerald-500/10 px-1.5 py-0.5 rounded-full border border-emerald-500/20 flex items-center gap-1\">\r\n                                                    <ShieldCheck size={10} /> Verificado\r\n                                                </span>\r\n                                            )}\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"bg-zinc-900/50 border border-zinc-800 rounded-3xl p-6 space-y-4\">\r\n                                <h4 className=\"text-[10px] font-black text-zinc-500 uppercase tracking-widest flex items-center gap-2\">\r\n                                    <Package size={14} className=\"text-primary-400\" /> Descri├º├úo do Item\r\n                                </h4>\r\n                                <p className=\"text-sm text-zinc-400 leading-relaxed whitespace-pre-wrap\">{selectedItem.description}</p>\r\n                            </div>\r\n\r\n                            <div className=\"grid grid-cols-2 gap-4\">\r\n                                <div className=\"bg-zinc-900/50 border border-zinc-800 p-4 rounded-2xl\">\r\n                                    <div className=\"flex items-center gap-2 mb-1\">\r\n                                        <div className=\"p-1.5 bg-emerald-500/10 rounded-lg text-emerald-400\"><ShieldCheck size={16} /></div>\r\n                                        <span className=\"text-[10px] font-black text-zinc-300 uppercase\">Seguran├ºa</span>\r\n                                    </div>\r\n                                    <p className=\"text-[10px] text-zinc-500 leading-tight\">Pagamento protegido por Escrow Cred30.</p>\r\n                                </div>\r\n                                <div className=\"bg-zinc-900/50 border border-zinc-800 p-4 rounded-2xl\">\r\n                                    <div className=\"flex items-center gap-2 mb-1\">\r\n                                        <div className=\"p-1.5 bg-primary-500/10 rounded-lg text-primary-400\"><Truck size={16} /></div>\r\n                                        <span className=\"text-[10px] font-black text-zinc-300 uppercase\">Log├¡stica</span>\r\n                                    </div>\r\n                                    <p className=\"text-[10px] text-zinc-500 leading-tight\">Retirada ou Apoio Colaborativo (Sem V├¡nculo Empregat├¡cio).</p>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"sticky bottom-6 mt-12 bg-black border border-zinc-800 p-4 rounded-3xl shadow-[0_-20px_50px_rgba(0,0,0,0.5)]\">\r\n                                <div className=\"flex-1 space-y-4 mb-4\">\r\n                                    <div className=\"space-y-2\">\r\n                                        <p className=\"text-[10px] text-zinc-500 font-bold uppercase tracking-widest\">M├®todo de Pagamento</p>\r\n                                        <div className=\"grid grid-cols-3 gap-2\">\r\n                                            {['BALANCE', 'PIX', 'CARD'].map(m => (\r\n                                                <button\r\n                                                    key={m}\r\n                                                    onClick={() => setPaymentMethod(m as any)}\r\n                                                    className={`py-2 text-[9px] font-black rounded-lg border transition-all ${paymentMethod === m ? 'bg-primary-500 text-black border-primary-500' : 'bg-zinc-900 text-zinc-500 border-zinc-800'}`}\r\n                                                >\r\n                                                    {m === 'BALANCE' ? 'SALDO' : m}\r\n                                                </button>\r\n                                            ))}\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    {paymentMethod === 'CARD' && (\r\n                                        <div className=\"grid grid-cols-2 gap-2 animate-in slide-in-from-top-2\">\r\n                                            <input\r\n                                                placeholder=\"N┬║ do Cart├úo\"\r\n                                                className=\"col-span-2 bg-zinc-900 border border-zinc-800 rounded-xl px-3 py-2 text-xs text-white\"\r\n                                                value={cardData.number}\r\n                                                onChange={e => setCardData({ ...cardData, number: e.target.value.replace(/\\s/g, '').slice(0, 16) })}\r\n                                            />\r\n                                            <input\r\n                                                placeholder=\"MM/AA\"\r\n                                                className=\"bg-zinc-900 border border-zinc-800 rounded-xl px-3 py-2 text-xs text-white\"\r\n                                                onChange={e => {\r\n                                                    const [m, a] = e.target.value.split('/');\r\n                                                    setCardData({ ...cardData, expiryMonth: m || '', expiryYear: a ? '20' + a : '' });\r\n                                                }}\r\n                                            />\r\n                                            <input\r\n                                                placeholder=\"CVV\"\r\n                                                className=\"bg-zinc-900 border border-zinc-800 rounded-xl px-3 py-2 text-xs text-white\"\r\n                                                value={cardData.ccv}\r\n                                                onChange={e => setCardData({ ...cardData, ccv: e.target.value.replace(/\\D/g, '').slice(0, 4) })}\r\n                                            />\r\n                                            <input\r\n                                                placeholder=\"Nome\"\r\n                                                className=\"bg-zinc-900 border border-zinc-800 rounded-xl px-3 py-2 text-xs text-white\"\r\n                                                value={cardData.holderName}\r\n                                                onChange={e => setCardData({ ...cardData, holderName: e.target.value })}\r\n                                            />\r\n                                            <input\r\n                                                placeholder=\"CPF Titular\"\r\n                                                className=\"bg-zinc-900 border border-zinc-800 rounded-xl px-3 py-2 text-xs text-white\"\r\n                                                value={cardData.cpf}\r\n                                                onChange={e => setCardData({ ...cardData, cpf: e.target.value.replace(/\\D/g, '').slice(0, 11) })}\r\n                                            />\r\n                                        </div>\r\n                                    )}\r\n\r\n                                    <div className=\"flex justify-between items-end\">\r\n                                        <div>\r\n                                            <p className=\"text-[10px] text-zinc-500 font-bold uppercase tracking-widest\">Pre├ºo Final</p>\r\n                                            <p className=\"text-xl font-black text-white\">\r\n                                                {(() => {\r\n                                                    const base = parseFloat(selectedItem.price) + (deliveryOption === 'COURIER_REQUEST' ? parseFloat(offeredFee || '0') : 0);\r\n                                                    if (paymentMethod === 'PIX') return formatCurrency(base + 0.99);\r\n                                                    if (paymentMethod === 'CARD') return formatCurrency((base + 0.49) / (1 - 0.0299));\r\n                                                    return formatCurrency(base);\r\n                                                })()}\r\n                                            </p>\r\n                                            {paymentMethod !== 'BALANCE' && (\r\n                                                <p className=\"text-[8px] text-zinc-600 font-bold uppercase italic\">* Taxas inclusas</p>\r\n                                            )}\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                <button\r\n                                    className=\"w-full bg-primary-500 hover:bg-primary-400 text-black font-black py-4 rounded-2xl transition shadow-lg shadow-primary-500/20 flex items-center justify-center gap-3 uppercase tracking-widest text-xs\"\r\n                                    onClick={() => {\r\n                                        if (!navigator.onLine) {\r\n                                            generateOfflineVoucher(selectedItem);\r\n                                            return;\r\n                                        }\r\n\r\n                                        // Se for afiliado, abre link\r\n                                        if (selectedItem.type === 'AFFILIATE') {\r\n                                            window.open(selectedItem.affiliate_url, '_blank');\r\n                                            onSuccess('Redirecionando', 'Aproveite a oferta do parceiro!');\r\n                                            return;\r\n                                        }\r\n\r\n                                        // Confirma├º├úo de Compra com Delivery\r\n                                        setConfirmData({\r\n                                            isOpen: true,\r\n                                            title: deliveryOption === 'COURIER_REQUEST' ? 'Confirmar Compra + Entrega' : 'Confirmar Compra',\r\n                                            message: `Deseja comprar \"${selectedItem.title}\" via ${paymentMethod}?`,\r\n                                            confirmText: 'CONFIRMAR AGORA',\r\n                                            type: 'success',\r\n                                            onConfirm: async () => {\r\n                                                try {\r\n                                                    const res = await apiService.post<any>('/marketplace/buy', {\r\n                                                        listingId: selectedItem.id,\r\n                                                        deliveryType: deliveryOption,\r\n                                                        offeredDeliveryFee: parseFloat(offeredFee),\r\n                                                        deliveryAddress: 'Endere├ºo Principal', // TODO: Pegar do user ou input\r\n                                                        contactPhone: '000000000',\r\n                                                        paymentMethod: paymentMethod,\r\n                                                        payerCpfCnpj: paymentMethod !== 'BALANCE' ? cardData.cpf : undefined,\r\n                                                        creditCard: paymentMethod === 'CARD' ? cardData : undefined\r\n                                                    });\r\n                                                    if (res.success) {\r\n                                                        if (paymentMethod !== 'BALANCE') {\r\n                                                            setExternalPayment(res.data);\r\n                                                        } else {\r\n                                                            onSuccess('Sucesso!', 'Compra realizada. Veja detalhes em Seus Pedidos.');\r\n                                                            setView('my-orders');\r\n                                                        }\r\n                                                        setConfirmData(null);\r\n                                                    }\r\n                                                } catch (err: any) {\r\n                                                    onError('Erro', err.message);\r\n                                                }\r\n                                            }\r\n                                        });\r\n                                    }}\r\n                                >\r\n                                    {!navigator.onLine ? 'GERAR VOUCHER OFFLINE' : (selectedItem.type === 'AFFILIATE' ? 'Ver Oferta Parceira' : 'Comprar Agora')}\r\n                                    <ChevronRight size={18} />\r\n                                </button>\r\n                            </div>\r\n\r\n                            {selectedItem.type !== 'AFFILIATE' && (\r\n                                <div className=\"mt-4 pt-4 border-t border-zinc-800 space-y-3\">\r\n                                    <p className=\"text-[10px] text-zinc-500 font-bold uppercase tracking-widest\">Op├º├Áes de Log├¡stica</p>\r\n                                    <div className=\"flex gap-2\">\r\n                                        <button\r\n                                            onClick={() => setDeliveryOption('SELF_PICKUP')}\r\n                                            className={`flex-1 py-3 text-[10px] font-black uppercase tracking-widest rounded-xl border transition ${deliveryOption === 'SELF_PICKUP' ? 'bg-zinc-800 border-zinc-600 text-white' : 'bg-transparent border-zinc-800 text-zinc-500'}`}\r\n                                        >\r\n                                            Vou Retirar\r\n                                        </button>\r\n                                        <button\r\n                                            onClick={() => setDeliveryOption('COURIER_REQUEST')}\r\n                                            className={`flex-1 py-3 text-[10px] font-black uppercase tracking-widest rounded-xl border transition ${deliveryOption === 'COURIER_REQUEST' ? 'bg-indigo-900/40 border-indigo-500/50 text-indigo-300' : 'bg-transparent border-zinc-800 text-zinc-500'}`}\r\n                                        >\r\n                                            Solicitar Colaborador\r\n                                        </button>\r\n                                    </div>\r\n\r\n                                    {deliveryOption === 'COURIER_REQUEST' && (\r\n                                        <div className=\"animate-in slide-in-from-top duration-300\">\r\n                                            <label className=\"text-[9px] text-zinc-500 font-bold uppercase block mb-1\">Oferta de Ajuda de Custo (R$)</label>\r\n                                            <input\r\n                                                type=\"number\"\r\n                                                value={offeredFee}\r\n                                                onChange={(e) => setOfferedFee(e.target.value)}\r\n                                                className=\"w-full bg-zinc-900 border border-zinc-800 rounded-xl px-4 py-2 text-white text-sm focus:border-indigo-500 outline-none\"\r\n                                                placeholder=\"Valor para o entregador (Ex: 10.00)\"\r\n                                            />\r\n                                            <p className=\"text-[9px] text-zinc-600 mt-1 italic\">Este valor ser├í pago integralmente ao membro que realizar a entrega.</p>\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n                            )}\r\n\r\n                            {offlineVoucher && (\r\n                                <div className=\"mt-6 bg-primary-500/10 border border-primary-500/30 p-6 rounded-3xl animate-in zoom-in duration-300\">\r\n                                    <div className=\"text-center space-y-2\">\r\n                                        <p className=\"text-[10px] text-primary-400 font-black uppercase tracking-widest\">C├│digo de Pagamento Offline</p>\r\n                                        <p className=\"text-4xl font-black text-white font-mono tracking-tighter\">{offlineVoucher.code}</p>\r\n                                        <p className=\"text-[11px] text-zinc-400 leading-tight\">O vendedor deve digitar este c├│digo no \"Modo Interior\" do App dele para validar sua compra.</p>\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n                            <div className=\"flex items-center justify-center gap-4 mt-4 text-[10px] text-zinc-500 font-bold uppercase tracking-widest border-t border-zinc-800 pt-4\">\r\n                                <span className=\"flex items-center gap-1\"><CheckCircle2 size={12} className=\"text-emerald-500\" /> Transa├º├úo Segura</span>\r\n                                <span className=\"flex items-center gap-1\"><Truck size={12} /> Entrega Combinada</span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* Modal de Pagamento Externo (PIX/Cart├úo) */}\r\n            {externalPayment && (\r\n                <div className=\"fixed inset-0 z-[110] bg-black/90 backdrop-blur-md flex items-end sm:items-center justify-center p-0 sm:p-4 animate-in fade-in duration-300\">\r\n                    <div className=\"bg-[#0A0A0A] border-t sm:border border-white/5 sm:border-zinc-800 rounded-t-[2.5rem] sm:rounded-[2.5rem] p-8 w-full sm:max-w-sm text-center relative shadow-2xl animate-in slide-in-from-bottom-full sm:slide-in-from-bottom-0 sm:zoom-in-95 duration-500 sm:duration-300\">\r\n                        <div className=\"w-12 h-1.5 bg-zinc-800 rounded-full mx-auto mb-6 sm:hidden opacity-50\" />\r\n\r\n                        <button\r\n                            onClick={() => { setExternalPayment(null); setView('my-orders'); }}\r\n                            className=\"absolute top-4 right-4 text-zinc-500 hover:text-white bg-zinc-900/50 p-2 rounded-full hidden sm:block\"\r\n                        >\r\n                            <XIcon size={20} />\r\n                        </button>\r\n\r\n                        {externalPayment.payment?.encodedImage ? (\r\n                            <div className=\"space-y-6\">\r\n                                <div className=\"w-20 h-20 bg-primary-500/10 rounded-3xl flex items-center justify-center mx-auto mb-2 shadow-xl shadow-primary-900/20 ring-1 ring-primary-500/20\">\r\n                                    <QrCode size={40} className=\"text-primary-500\" strokeWidth={2.5} />\r\n                                </div>\r\n                                <div>\r\n                                    <h3 className=\"text-2xl font-black text-white tracking-tight\">Pagamento PIX</h3>\r\n                                    <p className=\"text-sm text-zinc-500 mt-1 font-medium\">Escaneie ou copie o c├│digo abaixo</p>\r\n                                </div>\r\n\r\n                                <div className=\"bg-white p-6 rounded-3xl mx-auto w-fit shadow-2xl ring-4 ring-primary-500/10\">\r\n                                    <img src={`data:image/png;base64,${externalPayment.payment.encodedImage}`} alt=\"PIX QR Code\" className=\"w-44 h-44\" />\r\n                                </div>\r\n\r\n                                <div className=\"bg-zinc-900/50 border border-white/5 p-5 rounded-2xl group cursor-copy active:bg-zinc-800 transition-all\"\r\n                                    onClick={() => {\r\n                                        navigator.clipboard.writeText(externalPayment.payment.payload);\r\n                                        onSuccess('Copiado!', 'C├│digo PIX copiado com sucesso.');\r\n                                    }}>\r\n                                    <p className=\"text-[10px] text-zinc-600 font-black uppercase tracking-widest mb-2\">Pix Copia e Cola</p>\r\n                                    <p className=\"text-[10px] text-primary-400 font-mono break-all line-clamp-2 font-bold group-hover:text-white transition-colors\">\r\n                                        {externalPayment.payment.payload}\r\n                                    </p>\r\n                                </div>\r\n\r\n                                <button\r\n                                    onClick={() => { setExternalPayment(null); setView('my-orders'); }}\r\n                                    className=\"w-full bg-primary-500 hover:bg-primary-400 text-black font-black py-5 rounded-2xl transition-all uppercase tracking-[0.2em] text-[11px] shadow-lg shadow-primary-500/20 active:scale-95\"\r\n                                >\r\n                                    J├ü REALIZEI O PAGAMENTO\r\n                                </button>\r\n                            </div>\r\n                        ) : (\r\n                            <div className=\"space-y-6 py-4\">\r\n                                <div className=\"w-20 h-20 bg-emerald-500/10 rounded-3xl flex items-center justify-center mx-auto shadow-xl shadow-emerald-900/20 ring-1 ring-emerald-500/20\">\r\n                                    <CheckCircle2 size={40} className=\"text-emerald-500\" strokeWidth={2.5} />\r\n                                </div>\r\n                                <div className=\"space-y-2\">\r\n                                    <h3 className=\"text-2xl font-black text-white tracking-tight\">Pedido Recebido!</h3>\r\n                                    <p className=\"text-sm text-zinc-400 leading-relaxed\">Seu pagamento est├í sendo processado. Em breve seu item estar├í dispon├¡vel.</p>\r\n                                </div>\r\n                                <button\r\n                                    onClick={() => { setExternalPayment(null); setView('my-orders'); }}\r\n                                    className=\"w-full bg-emerald-500 hover:bg-emerald-400 text-black font-black py-5 rounded-2xl transition-all uppercase tracking-widest text-[11px] shadow-lg shadow-emerald-500/20 active:scale-95\"\r\n                                >\r\n                                    VER MEUS PEDIDOS\r\n                                </button>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {confirmData && (\r\n                <ConfirmModal\r\n                    isOpen={confirmData.isOpen}\r\n                    onClose={() => setConfirmData(null)}\r\n                    onConfirm={() => {\r\n                        if (confirmData.showPaymentMethods) {\r\n                            confirmData.onConfirm(paymentMethod, paymentMethod === 'CARD' ? cardData : undefined);\r\n                        } else {\r\n                            confirmData.onConfirm();\r\n                        }\r\n                    }}\r\n                    title={confirmData.title}\r\n                    message={confirmData.message}\r\n                    confirmText={confirmData.confirmText}\r\n                    type={confirmData.type}\r\n                >\r\n                    {confirmData.showPaymentMethods && (\r\n                        <div className=\"space-y-4 mb-6\">\r\n                            <div className=\"space-y-2\">\r\n                                <p className=\"text-[10px] text-zinc-500 font-bold uppercase tracking-widest\">M├®todo de Pagamento</p>\r\n                                <div className=\"grid grid-cols-3 gap-2\">\r\n                                    {['BALANCE', 'PIX', 'CARD'].map(m => (\r\n                                        <button\r\n                                            key={m}\r\n                                            onClick={() => setPaymentMethod(m as any)}\r\n                                            className={`py-2 text-[9px] font-black rounded-lg border transition-all ${paymentMethod === m ? 'bg-primary-500 text-black border-primary-500' : 'bg-zinc-900 text-zinc-500 border-zinc-800'}`}\r\n                                        >\r\n                                            {m === 'BALANCE' ? 'SALDO' : m}\r\n                                        </button>\r\n                                    ))}\r\n                                </div>\r\n                            </div>\r\n\r\n                            {paymentMethod === 'PIX' && (\r\n                                <div className=\"mt-4 animate-in slide-in-from-top-2\">\r\n                                    <label className=\"text-[9px] text-zinc-500 font-bold uppercase block mb-1\">CPF ou CNPJ (Obrigat├│rio)</label>\r\n                                    <input\r\n                                        placeholder=\"CPF ou CNPJ\"\r\n                                        className=\"w-full bg-zinc-900 border border-zinc-800 rounded-xl px-3 py-2 text-xs text-white placeholder-zinc-700 focus:border-indigo-500 outline-none transition-colors\"\r\n                                        value={cardData.cpf}\r\n                                        maxLength={18}\r\n                                        onChange={e => {\r\n                                            const v = e.target.value.replace(/[^0-9./-]/g, '');\r\n                                            setCardData({ ...cardData, cpf: v })\r\n                                        }}\r\n                                    />\r\n                                </div>\r\n                            )}\r\n\r\n                            {paymentMethod === 'CARD' && (\r\n                                <div className=\"grid grid-cols-2 gap-2 animate-in slide-in-from-top-2 mt-2\">\r\n                                    <input\r\n                                        placeholder=\"CPF/CNPJ do Titular\"\r\n                                        className=\"col-span-2 bg-zinc-900 border border-zinc-800 rounded-xl px-3 py-2 text-xs text-white placeholder-zinc-700\"\r\n                                        value={cardData.cpf}\r\n                                        onChange={e => setCardData({ ...cardData, cpf: e.target.value.replace(/[^0-9./-]/g, '') })}\r\n                                    />\r\n                                    <input\r\n                                        placeholder=\"N┬║ do Cart├úo\"\r\n                                        className=\"col-span-2 bg-zinc-900 border border-zinc-800 rounded-xl px-3 py-2 text-xs text-white placeholder-zinc-700\"\r\n                                        value={cardData.number}\r\n                                        onChange={e => setCardData({ ...cardData, number: e.target.value.replace(/\\s/g, '').slice(0, 16) })}\r\n                                    />\r\n                                    <input\r\n                                        placeholder=\"MM/AA\"\r\n                                        className=\"bg-zinc-900 border border-zinc-800 rounded-xl px-3 py-2 text-xs text-white placeholder-zinc-700\"\r\n                                        onChange={e => {\r\n                                            const [m, a] = e.target.value.split('/');\r\n                                            setCardData({ ...cardData, expiryMonth: m || '', expiryYear: a ? '20' + a : '' });\r\n                                        }}\r\n                                    />\r\n                                    <input\r\n                                        placeholder=\"CVV\"\r\n                                        className=\"bg-zinc-900 border border-zinc-800 rounded-xl px-3 py-2 text-xs text-white placeholder-zinc-700\"\r\n                                        value={cardData.ccv}\r\n                                        onChange={e => setCardData({ ...cardData, ccv: e.target.value.replace(/\\D/g, '').slice(0, 4) })}\r\n                                    />\r\n                                    <input\r\n                                        placeholder=\"Nome no Cart├úo\"\r\n                                        className=\"col-span-2 bg-zinc-900 border border-zinc-800 rounded-xl px-3 py-2 text-xs text-white placeholder-zinc-700\"\r\n                                        value={cardData.holderName}\r\n                                        onChange={e => setCardData({ ...cardData, holderName: e.target.value })}\r\n                                    />\r\n                                </div>\r\n                            )}\r\n\r\n                            <div className=\"pt-2 border-t border-zinc-800\">\r\n                                <p className=\"text-[10px] text-zinc-500 font-bold uppercase tracking-widest\">Total a Pagar</p>\r\n                                <p className=\"text-xl font-black text-white\">\r\n                                    {(() => {\r\n                                        const base = confirmData.title.includes('Impulsionar') ? 5.00 : parseFloat(selectedItem?.price || '0');\r\n                                        if (paymentMethod === 'PIX') return formatCurrency(base + 0.99);\r\n                                        if (paymentMethod === 'CARD') return formatCurrency((base + 0.49) / (1 - 0.0299));\r\n                                        return formatCurrency(base);\r\n                                    })()}\r\n                                </p>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                </ConfirmModal>\r\n            )}\r\n\r\n            {/* Modal de Rastreio GPS */}\r\n            {trackingOrder && (\r\n                <OrderTrackingMap\r\n                    orderId={trackingOrder.id}\r\n                    onClose={() => setTrackingOrder(null)}\r\n                    userRole={trackingOrder.courier_id === state.currentUser?.id ? 'courier' : 'buyer'}\r\n                />\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josia\\Desktop\\projetos\\cred30\\packages\\frontend-v2\\src\\presentation\\components\\views\\MyBugReportsView.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","message":"Definition for rule '@typescript-eslint/no-unused-vars' was not found.","line":1,"column":1,"endLine":1,"endColumn":2,"severity":2,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { ArrowLeft, Bug, AlertCircle, Clock, CheckCircle, RefreshCw, ChevronRight, MessageSquare } from 'lucide-react';\r\nimport { apiService } from '../../../application/services/api.service';\r\n\r\ninterface BugReport {\r\n    id: number;\r\n    title: string;\r\n    category: string;\r\n    severity: string;\r\n    status: string;\r\n    created_at: string;\r\n    admin_notes: string | null;\r\n    resolved_at: string | null;\r\n}\r\n\r\ninterface MyBugReportsViewProps {\r\n    onBack: () => void;\r\n    onSuccess: (title: string, message: string) => void;\r\n    onError: (title: string, message: string) => void;\r\n}\r\n\r\nexport const MyBugReportsView: React.FC<MyBugReportsViewProps> = ({ onBack, onSuccess, onError }) => {\r\n    const [reports, setReports] = useState<BugReport[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [selectedReport, setSelectedReport] = useState<BugReport | null>(null);\r\n\r\n    useEffect(() => {\r\n        loadReports();\r\n    }, []);\r\n\r\n    const loadReports = async () => {\r\n        setLoading(true);\r\n        try {\r\n            const data = await apiService.getMyBugReports();\r\n            setReports(data || []);\r\n        } catch (e: any) {\r\n            onError('Erro', e.message || 'N├úo foi poss├¡vel carregar os relat├│rios.');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const getStatusBadge = (status: string) => {\r\n        switch (status) {\r\n            case 'open':\r\n                return <span className=\"bg-yellow-500/20 text-yellow-400 px-2 py-1 rounded-lg text-[10px] font-bold uppercase\">Em Aberto</span>;\r\n            case 'in_progress':\r\n                return <span className=\"bg-blue-500/20 text-blue-400 px-2 py-1 rounded-lg text-[10px] font-bold uppercase\">Em An├ílise</span>;\r\n            case 'resolved':\r\n                return <span className=\"bg-emerald-500/20 text-emerald-400 px-2 py-1 rounded-lg text-[10px] font-bold uppercase\">Resolvido</span>;\r\n            case 'closed':\r\n                return <span className=\"bg-zinc-500/20 text-zinc-400 px-2 py-1 rounded-lg text-[10px] font-bold uppercase\">Fechado</span>;\r\n            default:\r\n                return <span className=\"bg-zinc-500/20 text-zinc-400 px-2 py-1 rounded-lg text-[10px] font-bold uppercase\">{status}</span>;\r\n        }\r\n    };\r\n\r\n    const getSeverityColor = (severity: string) => {\r\n        switch (severity) {\r\n            case 'critical': return 'text-red-500';\r\n            case 'high': return 'text-orange-500';\r\n            case 'medium': return 'text-yellow-500';\r\n            default: return 'text-zinc-500';\r\n        }\r\n    };\r\n\r\n    const getCategoryLabel = (category: string) => {\r\n        const labels: Record<string, string> = {\r\n            'general': 'Geral',\r\n            'payment': 'Pagamentos',\r\n            'ui': 'Interface',\r\n            'performance': 'Performance',\r\n            'other': 'Outro'\r\n        };\r\n        return labels[category] || category;\r\n    };\r\n\r\n    return (\r\n        <div className=\"space-y-6 pb-20\">\r\n            {/* Header */}\r\n            <div className=\"flex items-center gap-3\">\r\n                <button onClick={onBack} className=\"text-zinc-400 hover:text-white transition\">\r\n                    <ArrowLeft size={24} />\r\n                </button>\r\n                <div>\r\n                    <h1 className=\"text-xl font-bold text-white flex items-center gap-2\">\r\n                        <Bug className=\"text-red-400\" />\r\n                        Meus Relat├│rios\r\n                    </h1>\r\n                    <p className=\"text-[10px] text-zinc-500 uppercase tracking-widest font-bold\">Acompanhe seus Bug Reports</p>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Refresh Button */}\r\n            <button\r\n                onClick={loadReports}\r\n                disabled={loading}\r\n                className=\"flex items-center gap-2 text-xs text-zinc-400 hover:text-white transition\"\r\n            >\r\n                <RefreshCw size={14} className={loading ? 'animate-spin' : ''} />\r\n                Atualizar\r\n            </button>\r\n\r\n            {/* Loading */}\r\n            {loading && (\r\n                <div className=\"flex justify-center py-12\">\r\n                    <RefreshCw className=\"animate-spin text-primary-500\" size={32} />\r\n                </div>\r\n            )}\r\n\r\n            {/* Empty State */}\r\n            {!loading && reports.length === 0 && (\r\n                <div className=\"bg-surface border border-surfaceHighlight rounded-2xl p-8 text-center\">\r\n                    <div className=\"w-16 h-16 bg-zinc-800 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n                        <Bug className=\"text-zinc-500\" size={32} />\r\n                    </div>\r\n                    <h3 className=\"text-white font-bold mb-2\">Nenhum Relat├│rio</h3>\r\n                    <p className=\"text-zinc-500 text-sm\">\r\n                        Voc├¬ ainda n├úo reportou nenhum bug. Use o bot├úo de bug no menu para reportar problemas.\r\n                    </p>\r\n                </div>\r\n            )}\r\n\r\n            {/* Reports List */}\r\n            {!loading && reports.length > 0 && (\r\n                <div className=\"space-y-3\">\r\n                    {reports.map(report => (\r\n                        <div\r\n                            key={report.id}\r\n                            onClick={() => setSelectedReport(report)}\r\n                            className=\"bg-surface border border-surfaceHighlight rounded-2xl p-4 cursor-pointer hover:border-primary-500/30 transition-all group\"\r\n                        >\r\n                            <div className=\"flex items-start justify-between gap-3\">\r\n                                <div className=\"flex-1 min-w-0\">\r\n                                    <div className=\"flex items-center gap-2 mb-1\">\r\n                                        <AlertCircle size={14} className={getSeverityColor(report.severity)} />\r\n                                        <span className=\"text-white font-bold text-sm truncate\">{report.title}</span>\r\n                                    </div>\r\n                                    <div className=\"flex items-center gap-2 text-[10px] text-zinc-500\">\r\n                                        <span>{getCategoryLabel(report.category)}</span>\r\n                                        <span>ÔÇó</span>\r\n                                        <span>{new Date(report.created_at).toLocaleDateString()}</span>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"flex items-center gap-2\">\r\n                                    {getStatusBadge(report.status)}\r\n                                    <ChevronRight size={16} className=\"text-zinc-600 group-hover:text-white transition\" />\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            )}\r\n\r\n            {/* Report Detail Modal */}\r\n            {selectedReport && (\r\n                <div\r\n                    className=\"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-end sm:items-center justify-center z-[500] p-0 sm:p-4 animate-in fade-in duration-300\"\r\n                    onClick={() => setSelectedReport(null)}\r\n                >\r\n                    <div\r\n                        className=\"bg-[#0A0A0A] border-t sm:border border-surfaceHighlight rounded-t-[2.5rem] sm:rounded-3xl p-6 w-full sm:max-w-md relative animate-in slide-in-from-bottom-full sm:zoom-in-95 duration-500 sm:duration-300 max-h-[80vh] overflow-y-auto\"\r\n                        onClick={e => e.stopPropagation()}\r\n                    >\r\n                        <div className=\"w-12 h-1.5 bg-zinc-800 rounded-full mx-auto mb-6 sm:hidden opacity-50\" />\r\n\r\n                        <div className=\"space-y-4\">\r\n                            {/* Header */}\r\n                            <div className=\"flex items-start gap-3\">\r\n                                <div className={`w-10 h-10 rounded-xl flex items-center justify-center ${selectedReport.severity === 'critical' ? 'bg-red-500/20 text-red-400' :\r\n                                        selectedReport.severity === 'high' ? 'bg-orange-500/20 text-orange-400' :\r\n                                            selectedReport.severity === 'medium' ? 'bg-yellow-500/20 text-yellow-400' :\r\n                                                'bg-zinc-800 text-zinc-400'\r\n                                    }`}>\r\n                                    <Bug size={20} />\r\n                                </div>\r\n                                <div className=\"flex-1\">\r\n                                    <h3 className=\"text-white font-bold\">{selectedReport.title}</h3>\r\n                                    <p className=\"text-[10px] text-zinc-500 uppercase font-bold\">\r\n                                        #{selectedReport.id} ÔÇó {getCategoryLabel(selectedReport.category)}\r\n                                    </p>\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Status */}\r\n                            <div className=\"bg-zinc-900/50 rounded-xl p-4 space-y-3\">\r\n                                <div className=\"flex justify-between items-center\">\r\n                                    <span className=\"text-[10px] text-zinc-500 uppercase font-bold\">Status</span>\r\n                                    {getStatusBadge(selectedReport.status)}\r\n                                </div>\r\n                                <div className=\"flex justify-between items-center\">\r\n                                    <span className=\"text-[10px] text-zinc-500 uppercase font-bold\">Severidade</span>\r\n                                    <span className={`text-xs font-bold uppercase ${getSeverityColor(selectedReport.severity)}`}>\r\n                                        {selectedReport.severity}\r\n                                    </span>\r\n                                </div>\r\n                                <div className=\"flex justify-between items-center\">\r\n                                    <span className=\"text-[10px] text-zinc-500 uppercase font-bold\">Reportado em</span>\r\n                                    <span className=\"text-xs text-zinc-300 flex items-center gap-1\">\r\n                                        <Clock size={12} />\r\n                                        {new Date(selectedReport.created_at).toLocaleDateString()}\r\n                                    </span>\r\n                                </div>\r\n                                {selectedReport.resolved_at && (\r\n                                    <div className=\"flex justify-between items-center\">\r\n                                        <span className=\"text-[10px] text-zinc-500 uppercase font-bold\">Resolvido em</span>\r\n                                        <span className=\"text-xs text-emerald-400 flex items-center gap-1\">\r\n                                            <CheckCircle size={12} />\r\n                                            {new Date(selectedReport.resolved_at).toLocaleDateString()}\r\n                                        </span>\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n\r\n                            {/* Admin Notes */}\r\n                            {selectedReport.admin_notes && (\r\n                                <div className=\"bg-primary-500/5 border border-primary-500/20 rounded-xl p-4\">\r\n                                    <div className=\"flex items-center gap-2 mb-2\">\r\n                                        <MessageSquare size={14} className=\"text-primary-400\" />\r\n                                        <span className=\"text-[10px] text-primary-400 uppercase font-bold\">Resposta da Equipe</span>\r\n                                    </div>\r\n                                    <p className=\"text-sm text-zinc-300 leading-relaxed\">{selectedReport.admin_notes}</p>\r\n                                </div>\r\n                            )}\r\n\r\n                            {/* Close Button */}\r\n                            <button\r\n                                onClick={() => setSelectedReport(null)}\r\n                                className=\"w-full bg-zinc-800 hover:bg-zinc-700 text-white py-3 rounded-xl font-bold text-sm transition\"\r\n                            >\r\n                                Fechar\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default MyBugReportsView;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josia\\Desktop\\projetos\\cred30\\packages\\frontend-v2\\src\\presentation\\components\\views\\OfflineMarketplaceView.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","message":"Definition for rule '@typescript-eslint/no-unused-vars' was not found.","line":1,"column":1,"endLine":1,"endColumn":2,"severity":2,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport { QRCodeSVG } from 'qrcode.react';\r\nimport { Scanner } from '@yudiel/react-qr-scanner';\r\nimport { CheckCircle2, QrCode, ScanLine, XCircle, ArrowRight, UploadCloud, WifiOff, Smartphone } from 'lucide-react';\r\n\r\ninterface OfflineMarketplaceViewProps {\r\n    user: any;\r\n    pendingSales: any[];\r\n    onSaveSale: (sale: any) => void;\r\n    onSync: () => void;\r\n}\r\n\r\nexport const OfflineMarketplaceView = ({ user, pendingSales, onSaveSale, onSync }: OfflineMarketplaceViewProps) => {\r\n    const [mode, setMode] = useState<'MENU' | 'SELL_CREATE' | 'SELL_SCAN_RECEIPT' | 'BUY_SCAN' | 'BUY_SHOW_RECEIPT'>('MENU');\r\n    const [amount, setAmount] = useState('');\r\n    const [itemTitle, setItemTitle] = useState('');\r\n    const [generatedOffer, setGeneratedOffer] = useState<any>(null);\r\n    const [scannedOffer, setScannedOffer] = useState<any>(null);\r\n    const [generatedReceipt, setGeneratedReceipt] = useState<any>(null);\r\n    const [error, setError] = useState('');\r\n\r\n    const handleCreateOffer = () => {\r\n        if (!amount || !itemTitle) return;\r\n        const offer = {\r\n            type: 'SALE_OFFER',\r\n            id: Math.random().toString(36).substring(2) + Date.now().toString(36),\r\n            sellerId: user.id, // Assuming user has id\r\n            sellerName: user.name, // Assuming user has name\r\n            amount: parseFloat(amount),\r\n            itemTitle,\r\n            timestamp: Date.now()\r\n        };\r\n        setGeneratedOffer(offer);\r\n        setMode('SELL_SCAN_RECEIPT'); // Show QR and Button to Scan Receipt\r\n    };\r\n\r\n    const handleScan = (data: string | null) => {\r\n        if (!data) return;\r\n        try {\r\n            const parsed = JSON.parse(data);\r\n\r\n            // L├│gica do Vendedor: Escaneando Recibo do Comprador\r\n            if (mode === 'SELL_SCAN_RECEIPT') {\r\n                if (parsed.type === 'PAYMENT_RECEIPT') {\r\n                    if (parsed.originalOfferId !== generatedOffer.id) {\r\n                        setError('Recibo n├úo corresponde ├á venda atual.');\r\n                        return;\r\n                    }\r\n                    // Sucesso!\r\n                    onSaveSale({\r\n                        ...generatedOffer,\r\n                        buyerId: parsed.buyerId,\r\n                        buyerName: parsed.buyerName,\r\n                        receiptSignature: parsed.signature,\r\n                        status: 'PENDING_SYNC'\r\n                    });\r\n                    setMode('MENU');\r\n                    setAmount('');\r\n                    setItemTitle('');\r\n                    setGeneratedOffer(null);\r\n                    alert('Venda registrada! Lembre-se de sincronizar quando tiver internet.');\r\n                }\r\n            }\r\n            // L├│gica do Comprador: Escaneando Oferta do Vendedor\r\n            else if (mode === 'BUY_SCAN') {\r\n                if (parsed.type === 'SALE_OFFER') {\r\n                    setScannedOffer(parsed);\r\n                    // Vai para confirma├º├úo\r\n                }\r\n            }\r\n        } catch (e) {\r\n            console.error(e);\r\n            setError('C├│digo inv├ílido.');\r\n        }\r\n    };\r\n\r\n    const handleConfirmPayment = () => {\r\n        if (!scannedOffer) return;\r\n        const receipt = {\r\n            type: 'PAYMENT_RECEIPT',\r\n            originalOfferId: scannedOffer.id,\r\n            buyerId: user.id,\r\n            buyerName: user.name,\r\n            amount: scannedOffer.amount,\r\n            timestamp: Date.now(),\r\n            signature: `SIG_${Math.random().toString(36)}_${user.id}` // Mock signature\r\n        };\r\n        setGeneratedReceipt(receipt);\r\n        setMode('BUY_SHOW_RECEIPT');\r\n    };\r\n\r\n    return (\r\n        <div className=\"space-y-6 animate-in fade-in duration-300\">\r\n            {/* Header */}\r\n            <div className=\"bg-zinc-900 border border-zinc-800 rounded-3xl p-6 text-center\">\r\n                <div className=\"w-12 h-12 bg-primary-500/20 rounded-full flex items-center justify-center mx-auto mb-3\">\r\n                    <WifiOff className=\"text-primary-400\" size={24} />\r\n                </div>\r\n                <h3 className=\"text-xl font-black text-white uppercase tracking-tight\">Modo Offline (Interior)</h3>\r\n                <p className=\"text-xs text-zinc-400 mt-2 max-w-xs mx-auto\">\r\n                    Realize trocas mesmo sem internet. Sincronize quando retomar o sinal.\r\n                </p>\r\n\r\n                {/* Sync Status */}\r\n                {pendingSales.length > 0 && mode === 'MENU' && (\r\n                    <div className=\"mt-4 bg-amber-500/10 border border-amber-500/20 rounded-xl p-3\">\r\n                        <p className=\"text-amber-400 text-xs font-bold mb-2\">\r\n                            {pendingSales.length} venda(s) pendente(s) de envio.\r\n                        </p>\r\n                        <button\r\n                            onClick={onSync}\r\n                            className=\"w-full py-2 bg-amber-500 hover:bg-amber-400 text-black text-xs font-black rounded-lg transition uppercase flex items-center justify-center gap-2\"\r\n                        >\r\n                            <UploadCloud size={14} />\r\n                            Sincronizar Agora\r\n                        </button>\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            {/* ERROR MSG */}\r\n            {error && (\r\n                <div className=\"bg-red-500/10 border border-red-500/20 p-3 rounded-xl text-red-500 text-xs font-bold text-center flex items-center justify-center gap-2\">\r\n                    <XCircle size={14} /> {error}\r\n                    <button onClick={() => setError('')} className=\"ml-2 underline\">OK</button>\r\n                </div>\r\n            )}\r\n\r\n            {/* MAIN MENU */}\r\n            {mode === 'MENU' && (\r\n                <div className=\"grid grid-cols-2 gap-4\">\r\n                    <button\r\n                        onClick={() => setMode('SELL_CREATE')}\r\n                        className=\"p-6 bg-zinc-900 border border-zinc-700 hover:border-primary-500 rounded-2xl flex flex-col items-center gap-3 transition group\"\r\n                    >\r\n                        <div className=\"w-14 h-14 bg-zinc-800 rounded-full flex items-center justify-center group-hover:bg-primary-500 group-hover:text-black transition\">\r\n                            <QrCode size={24} />\r\n                        </div>\r\n                        <span className=\"font-bold text-white text-sm\">VENDER</span>\r\n                        <span className=\"text-[10px] text-zinc-500\">Gerar Cobran├ºa</span>\r\n                    </button>\r\n\r\n                    <button\r\n                        onClick={() => setMode('BUY_SCAN')}\r\n                        className=\"p-6 bg-zinc-900 border border-zinc-700 hover:border-emerald-500 rounded-2xl flex flex-col items-center gap-3 transition group\"\r\n                    >\r\n                        <div className=\"w-14 h-14 bg-zinc-800 rounded-full flex items-center justify-center group-hover:bg-emerald-500 group-hover:text-black transition\">\r\n                            <ScanLine size={24} />\r\n                        </div>\r\n                        <span className=\"font-bold text-white text-sm\">PAGAR</span>\r\n                        <span className=\"text-[10px] text-zinc-500\">Ler Cobran├ºa</span>\r\n                    </button>\r\n                </div>\r\n            )}\r\n\r\n            {/* VENDEDOR: CRIAR OFERTA */}\r\n            {mode === 'SELL_CREATE' && (\r\n                <div className=\"space-y-4\">\r\n                    <div className=\"space-y-2\">\r\n                        <label className=\"text-xs font-bold text-zinc-400 uppercase\">O que voc├¬ est├í vendendo?</label>\r\n                        <input\r\n                            type=\"text\"\r\n                            value={itemTitle}\r\n                            onChange={(e) => setItemTitle(e.target.value)}\r\n                            placeholder=\"Ex: Bolo de Pote\"\r\n                            className=\"w-full bg-zinc-950 border border-zinc-800 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-primary-500 transition\"\r\n                        />\r\n                    </div>\r\n                    <div className=\"space-y-2\">\r\n                        <label className=\"text-xs font-bold text-zinc-400 uppercase\">Valor (R$)</label>\r\n                        <input\r\n                            type=\"number\"\r\n                            value={amount}\r\n                            onChange={(e) => setAmount(e.target.value)}\r\n                            placeholder=\"0.00\"\r\n                            className=\"w-full bg-zinc-950 border border-zinc-800 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-primary-500 transition\"\r\n                        />\r\n                    </div>\r\n                    <button\r\n                        onClick={handleCreateOffer}\r\n                        className=\"w-full py-3 bg-primary-500 text-black font-black rounded-xl uppercase hover:bg-primary-400 transition mb-2\"\r\n                    >\r\n                        Gerar QR de Cobran├ºa\r\n                    </button>\r\n                    <button onClick={() => setMode('MENU')} className=\"w-full py-3 text-zinc-500 text-xs font-bold uppercase\">Cancelar</button>\r\n                </div>\r\n            )}\r\n\r\n            {/* VENDEDOR: MOSTRAR QR E ESPERAR RECIBO */}\r\n            {mode === 'SELL_SCAN_RECEIPT' && generatedOffer && (\r\n                <div className=\"text-center space-y-6\">\r\n                    <div className=\"bg-white p-4 rounded-2xl inline-block mx-auto\">\r\n                        <QRCodeSVG value={JSON.stringify(generatedOffer)} size={200} />\r\n                    </div>\r\n                    <p className=\"text-sm text-zinc-300 font-medium\">\r\n                        Pe├ºa para o cliente escanear este c├│digo.<br />\r\n                        Ap├│s ele confirmar, clique abaixo para ler o comprovante dele.\r\n                    </p>\r\n\r\n                    {/* Scanner Toggle (Fake Toggle logic for simplicity, just show scanner) */}\r\n                    <div className=\"border-t border-zinc-800 pt-4\">\r\n                        <p className=\"text-xs text-zinc-500 mb-2 font-bold uppercase\">Cliente j├í pagou?</p>\r\n                        <div className=\"h-64 bg-black rounded-2xl overflow-hidden relative border border-zinc-700\">\r\n                            <Scanner onScan={(result) => result[0] && handleScan(result[0].rawValue)} />\r\n                            <div className=\"absolute inset-0 border-2 border-primary-500/50 pointer-events-none rounded-2xl animate-pulse\"></div>\r\n                            <div className=\"absolute bottom-2 left-0 right-0 text-center text-[10px] text-white bg-black/50 py-1\">Aponte para o QR do Cliente</div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <button onClick={() => setMode('MENU')} className=\"w-full py-3 text-zinc-500 text-xs font-bold uppercase\">Cancelar Venda</button>\r\n                </div>\r\n            )}\r\n\r\n            {/* COMPRADOR: LER OFERTA */}\r\n            {mode === 'BUY_SCAN' && !scannedOffer && (\r\n                <div className=\"space-y-4 text-center\">\r\n                    <p className=\"text-sm text-zinc-300\">Aponte para o QR Code do Vendedor</p>\r\n                    <div className=\"h-64 bg-black rounded-2xl overflow-hidden relative border border-zinc-700 mx-auto\">\r\n                        <Scanner onScan={(result) => result[0] && handleScan(result[0].rawValue)} />\r\n                        <div className=\"absolute inset-0 border-2 border-primary-500/50 pointer-events-none rounded-2xl animate-pulse\"></div>\r\n                    </div>\r\n                    <button onClick={() => setMode('MENU')} className=\"w-full py-3 text-zinc-500 text-xs font-bold uppercase\">Cancelar</button>\r\n                </div>\r\n            )}\r\n\r\n            {/* COMPRADOR: CONFIRMAR E MOSTRAR RECIBO */}\r\n            {mode === 'BUY_SCAN' && scannedOffer && (\r\n                <div className=\"space-y-6 text-center animate-in zoom-in duration-300\">\r\n                    <div className=\"bg-zinc-800 rounded-2xl p-6 border border-zinc-700\">\r\n                        <p className=\"text-xs text-zinc-400 uppercase font-bold mb-1\">Confirmar Pagamento</p>\r\n                        <h2 className=\"text-3xl font-black text-white mb-2\">R$ {scannedOffer.amount.toFixed(2)}</h2>\r\n                        <p className=\"text-lg text-primary-400 font-bold mb-4\">{scannedOffer.itemTitle}</p>\r\n                        <p className=\"text-xs text-zinc-500\">Vendedor: {scannedOffer.sellerName}</p>\r\n                    </div>\r\n\r\n                    <p className=\"text-xs text-red-400 max-w-xs mx-auto\">\r\n                        Ao confirmar, voc├¬ gera um compromisso de pagamento que ser├í debitado quando houver conex├úo.\r\n                    </p>\r\n\r\n                    <button\r\n                        onClick={handleConfirmPayment}\r\n                        className=\"w-full py-4 bg-emerald-500 hover:bg-emerald-400 text-black font-black rounded-xl uppercase transition shadow-lg shadow-emerald-500/20 flex items-center justify-center gap-2\"\r\n                    >\r\n                        <CheckCircle2 size={18} />\r\n                        Assinar e Pagar\r\n                    </button>\r\n                    <button onClick={() => { setScannedOffer(null); }} className=\"w-full py-3 text-zinc-500 text-xs font-bold uppercase\">Cancelar</button>\r\n                </div>\r\n            )}\r\n\r\n            {/* COMPRADOR: MOSTRAR RECIBO FINAL */}\r\n            {mode === 'BUY_SHOW_RECEIPT' && generatedReceipt && (\r\n                <div className=\"text-center space-y-6\">\r\n                    <div className=\"bg-white p-4 rounded-2xl inline-block mx-auto border-4 border-emerald-500\">\r\n                        <QRCodeSVG value={JSON.stringify(generatedReceipt)} size={200} />\r\n                    </div>\r\n                    <div>\r\n                        <h3 className=\"text-xl font-black text-white uppercase text-emerald-500 mb-2\">Comprovante Gerado!</h3>\r\n                        <p className=\"text-sm text-zinc-300 font-medium\">\r\n                            Mostre este c├│digo para o vendedor<br />para liberar o produto.\r\n                        </p>\r\n                    </div>\r\n                    <button onClick={() => { setMode('MENU'); setScannedOffer(null); setGeneratedReceipt(null); }} className=\"w-full py-3 bg-zinc-800 text-white text-xs font-bold rounded-xl uppercase\">\r\n                        Concluir\r\n                    </button>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josia\\Desktop\\projetos\\cred30\\packages\\frontend-v2\\src\\presentation\\components\\views\\PortfolioView.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","message":"Definition for rule '@typescript-eslint/no-unused-vars' was not found.","line":1,"column":1,"endLine":1,"endColumn":2,"severity":2,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport { TrendingUp, X as XIcon, Lock, DollarSign, Award, Download, ShieldCheck, Info, Repeat } from 'lucide-react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { Quota } from '../../../domain/types/common.types';\r\nimport { apiService } from '../../../application/services/api.service';\r\n\r\ninterface PortfolioViewProps {\r\n    quotas: Quota[];\r\n    hasLoans: boolean;\r\n    onSell: (id: string) => void;\r\n    onSellAll: () => void;\r\n}\r\n\r\nexport const PortfolioView = ({ quotas, hasLoans, onSell, onSellAll }: PortfolioViewProps) => {\r\n    const [selectedQuotaId, setSelectedQuotaId] = useState<string | null>(null);\r\n    const [isSellAll, setIsSellAll] = useState(false);\r\n    const [showConfirm, setShowConfirm] = useState(false);\r\n    const [eligibility, setEligibility] = useState<any>(null);\r\n    const [showCertificate, setShowCertificate] = useState(false);\r\n    const [loadingTitle, setLoadingTitle] = useState(false);\r\n    const [titleInfo, setTitleInfo] = useState<any>(null);\r\n    const navigate = useNavigate();\r\n\r\n    React.useEffect(() => {\r\n        checkEligibility();\r\n    }, []);\r\n\r\n    const checkEligibility = async () => {\r\n        try {\r\n            const res = await apiService.checkTitleEligibility();\r\n            setEligibility(res);\r\n        } catch (error) {\r\n            console.error('Erro ao verificar elegibilidade:', error);\r\n        }\r\n    };\r\n\r\n    const handleDownloadRequest = async () => {\r\n        setLoadingTitle(true);\r\n        try {\r\n            const res = await apiService.downloadTitle();\r\n            if (res.success) {\r\n                setTitleInfo(res.data);\r\n                setShowCertificate(true);\r\n                // Atualizar elegibilidade para ocultar o bot├úo\r\n                setEligibility({ eligible: false, reason: 'T├¡tulo j├í emitido.' });\r\n            }\r\n        } catch (error: any) {\r\n            alert(error.message || 'Erro ao emitir t├¡tulo.');\r\n        } finally {\r\n            setLoadingTitle(false);\r\n        }\r\n    };\r\n\r\n    const handlePrint = () => {\r\n        window.print();\r\n    };\r\n\r\n    // Verifica├º├úo de seguran├ºa para garantir que quotas ├® um array v├ílido\r\n    const safeQuotas = Array.isArray(quotas) ? quotas : [];\r\n\r\n    // Verifica├º├úo adicional para garantir que n├úo ocorram erros durante o c├ílculo\r\n    const totalValue = safeQuotas.reduce((acc: number, q: any) => {\r\n        if (!q || typeof q.purchasePrice !== 'number') return acc;\r\n        return acc + q.purchasePrice;\r\n    }, 0);\r\n\r\n    const totalCurrentValue = safeQuotas.reduce((acc: number, q: any) => {\r\n        if (!q || typeof q.currentValue !== 'number') return acc;\r\n        return acc + q.currentValue;\r\n    }, 0);\r\n\r\n    const totalEarnings = totalCurrentValue - totalValue;\r\n    const earningsPercentage = totalValue > 0 ? (totalEarnings / totalValue) * 100 : 0;\r\n\r\n    const initiateSell = (id: string) => {\r\n        setSelectedQuotaId(id);\r\n        setIsSellAll(false);\r\n        setShowConfirm(true);\r\n    }\r\n\r\n    const initiateSellAll = () => {\r\n        setIsSellAll(true);\r\n        setSelectedQuotaId(null);\r\n        setShowConfirm(true);\r\n    }\r\n\r\n    const handleConfirm = () => {\r\n        if (isSellAll) {\r\n            onSellAll();\r\n        } else if (selectedQuotaId) {\r\n            onSell(selectedQuotaId);\r\n        }\r\n        setShowConfirm(false);\r\n    }\r\n\r\n    // Calculate Data for Modal\r\n    let modalTitle = \"\";\r\n    let originalValue = 0;\r\n    let penaltyValue = 0;\r\n    let netValue = 0;\r\n    let isPenaltyApplied = false;\r\n\r\n    if (showConfirm) {\r\n        if (isSellAll) {\r\n            modalTitle = \"Resgate Total (Venda em Massa)\";\r\n            safeQuotas.forEach(q => {\r\n                if (!q) return;\r\n                const daysHeld = Math.floor((Date.now() - (Number(q.purchaseDate) || 0)) / (1000 * 60 * 60 * 24));\r\n                const isEarly = daysHeld < 365;\r\n                const penalty = isEarly ? (q.purchasePrice || 0) * 0.4 : 0;\r\n                originalValue += q.purchasePrice || 0;\r\n                penaltyValue += penalty;\r\n                if (isEarly) isPenaltyApplied = true;\r\n            });\r\n            netValue = originalValue - penaltyValue;\r\n        } else if (selectedQuotaId) {\r\n            modalTitle = `Resgate Licen├ºa #${typeof selectedQuotaId === 'string' ? selectedQuotaId.substring(0, 4) : 'N/A'}`;\r\n            const quota = safeQuotas.find(q => q?.id === selectedQuotaId);\r\n            if (quota) {\r\n                const daysHeld = Math.floor((Date.now() - (Number(quota.purchaseDate) || 0)) / (1000 * 60 * 60 * 24));\r\n                const isEarly = daysHeld < 365;\r\n                isPenaltyApplied = isEarly;\r\n                originalValue = quota.purchasePrice || 0;\r\n                penaltyValue = isEarly ? (quota.purchasePrice || 0) * 0.4 : 0;\r\n                netValue = originalValue - penaltyValue;\r\n            }\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"space-y-6 pb-24\">\r\n            {/* Portfolio Header with Enhanced Stats */}\r\n            <div className=\"bg-gradient-to-r from-primary-500 to-primary-600 rounded-2xl p-6 text-black\">\r\n                <div className=\"flex justify-between items-end mb-4\">\r\n                    <div>\r\n                        <h2 className=\"text-2xl font-bold\">Resumo Associativo</h2>\r\n                        <p className=\"text-sm opacity-80\">Gest├úo de Apoio ├á Comunidade</p>\r\n                    </div>\r\n                    <div className=\"text-right\">\r\n                        <p className=\"text-sm opacity-80\">Capital em Circula├º├úo</p>\r\n                        <p className=\"text-3xl font-bold\">{totalCurrentValue.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })}</p>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mt-6\">\r\n                    <div className=\"bg-white/20 rounded-xl p-4\">\r\n                        <p className=\"text-sm opacity-80 mb-1\">Total Integralizado</p>\r\n                        <p className=\"text-xl font-bold\">{totalValue.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })}</p>\r\n                    </div>\r\n                    <div className=\"bg-white/20 rounded-xl p-4\">\r\n                        <p className=\"text-sm opacity-80 mb-1\">Excedentes Gerados</p>\r\n                        <p className=\"text-xl font-bold flex items-center gap-1\">\r\n                            {totalEarnings >= 0 ? '+' : ''}{totalEarnings.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })}\r\n                            <span className=\"text-xs bg-black/20 px-1.5 py-0.5 rounded-full\">\r\n                                {earningsPercentage.toFixed(1)}%\r\n                            </span>\r\n                        </p>\r\n                    </div>\r\n                    <div className=\"bg-white/20 rounded-xl p-4\">\r\n                        <p className=\"text-sm opacity-80 mb-1\">Cotas-Parte Ativas</p>\r\n                        <p className=\"text-xl font-bold\">{safeQuotas.length} {safeQuotas.length === 1 ? 'cota' : 'cotas'}</p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {hasLoans && (\r\n                <div className=\"bg-red-500/10 border border-red-500/20 rounded-xl p-4 flex items-center gap-3\">\r\n                    <Lock className=\"text-red-500 shrink-0\" size={24} />\r\n                    <p className=\"text-red-400 text-sm\">\r\n                        <span className=\"font-bold\">Aten├º├úo:</span> Seus resgates est├úo bloqueados devido a um apoio m├║tuo em aberto. Quite seu compromisso para desbloquear essa fun├º├úo.\r\n                    </p>\r\n                </div>\r\n            )}\r\n\r\n            {/* Action Buttons */}\r\n            <div className=\"flex gap-4\">\r\n                <button\r\n                    onClick={initiateSellAll}\r\n                    disabled={safeQuotas.length === 0 || hasLoans}\r\n                    className=\"flex-1 bg-surfaceHighlight hover:bg-zinc-700 disabled:opacity-50 disabled:cursor-not-allowed text-white py-3 rounded-xl font-bold transition flex items-center justify-center gap-2\"\r\n                >\r\n                    <DollarSign size={18} />\r\n                    Resgatar Tudo\r\n                </button>\r\n            </div>\r\n\r\n            {/* T├¡tulo de S├│cio Majorit├írio Recommendation/Claim */}\r\n            {eligibility && (\r\n                <div className={`rounded-2xl p-6 border transition-all duration-500 overflow-hidden relative group ${eligibility.eligible\r\n                    ? 'bg-emerald-500/10 border-emerald-500/30'\r\n                    : 'bg-surface border-surfaceHighlight'\r\n                    }`}>\r\n                    {/* Background Detail */}\r\n                    <div className=\"absolute -right-8 -bottom-8 opacity-5 group-hover:opacity-10 transition-opacity\">\r\n                        <Award size={160} />\r\n                    </div>\r\n\r\n                    <div className=\"flex flex-col sm:flex-row items-center gap-6 relative z-10\">\r\n                        <div className={`w-16 h-16 rounded-2xl flex items-center justify-center shrink-0 shadow-lg ${eligibility.eligible\r\n                            ? 'bg-emerald-500 text-black animate-pulse'\r\n                            : 'bg-zinc-800 text-zinc-500'\r\n                            }`}>\r\n                            <Award size={32} />\r\n                        </div>\r\n\r\n                        <div className=\"flex-1 text-center sm:text-left\">\r\n                            <h3 className={`text-xl font-bold mb-1 ${eligibility.eligible ? 'text-emerald-400' : 'text-white'}`}>\r\n                                T├¡tulo de S├│cio Majorit├írio\r\n                            </h3>\r\n                            <p className=\"text-sm text-zinc-400 max-w-lg\">\r\n                                Reconhecimento exclusivo para membros com mais de 500 participa├º├Áes e 1 ano de compromisso com o clube.\r\n                            </p>\r\n\r\n                            {!eligibility.eligible && eligibility.currentCount !== undefined && (\r\n                                <div className=\"mt-4 space-y-2\">\r\n                                    <div className=\"flex justify-between text-[10px] font-black uppercase tracking-widest text-zinc-500\">\r\n                                        <span>Progresso de Participa├º├úo</span>\r\n                                        <span>{eligibility.currentCount} / {eligibility.neededCount}</span>\r\n                                    </div>\r\n                                    <div className=\"h-1.5 bg-zinc-800 rounded-full overflow-hidden\">\r\n                                        <div\r\n                                            className=\"h-full bg-emerald-500/50 transition-all duration-1000\"\r\n                                            style={{ width: `${Math.min(100, (eligibility.currentCount / eligibility.neededCount) * 100)}%` }}\r\n                                        ></div>\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n\r\n                            {!eligibility.eligible && eligibility.reason && (\r\n                                <div className=\"mt-3 flex items-center gap-2 justify-center sm:justify-start\">\r\n                                    <Info size={14} className=\"text-zinc-500\" />\r\n                                    <p className=\"text-xs text-zinc-500 italic\">{eligibility.reason}</p>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n\r\n                        {eligibility.eligible && (\r\n                            <button\r\n                                onClick={handleDownloadRequest}\r\n                                disabled={loadingTitle}\r\n                                className=\"w-full sm:w-auto bg-emerald-500 hover:bg-emerald-400 text-black font-black py-4 px-8 rounded-xl transition-all shadow-[0_0_30px_rgba(16,185,129,0.3)] flex items-center justify-center gap-2 shrink-0 group\"\r\n                            >\r\n                                {loadingTitle ? (\r\n                                    <div className=\"w-5 h-5 border-2 border-black/30 border-t-black rounded-full animate-spin\"></div>\r\n                                ) : (\r\n                                    <>\r\n                                        <Download size={20} className=\"group-hover:translate-y-0.5 transition-transform\" />\r\n                                        EMITIR T├ìTULO OFICIAL\r\n                                    </>\r\n                                )}\r\n                            </button>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* Quotas List */}\r\n            <div className=\"space-y-4\">\r\n                <h3 className=\"text-lg font-bold text-white pl-1\">Minhas Participa├º├Áes ({safeQuotas.length})</h3>\r\n                {safeQuotas.length === 0 ? (\r\n                    <div className=\"text-center py-12 bg-surface/50 rounded-2xl border border-surfaceHighlight border-dashed\">\r\n                        <TrendingUp size={48} className=\"mx-auto text-zinc-600 mb-4\" />\r\n                        <p className=\"text-zinc-500\">Voc├¬ ainda n├úo possui participa├º├úo no capital social.</p>\r\n                    </div>\r\n                ) : (\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n                        {safeQuotas.map((quota: any) => {\r\n                            const currentValue = quota.currentValue || quota.purchasePrice;\r\n                            const gain = currentValue - quota.purchasePrice;\r\n                            const gainPercent = (gain / quota.purchasePrice) * 100;\r\n                            const purchaseDate = quota.purchaseDate ? new Date(quota.purchaseDate) : new Date();\r\n\r\n                            return (\r\n                                <div key={quota.id} className=\"bg-surface border border-surfaceHighlight rounded-2xl p-5 hover:border-primary-500/30 transition group\">\r\n                                    <div className=\"flex justify-between items-start mb-4\">\r\n                                        <div className=\"bg-surfaceHighlight w-10 h-10 rounded-full flex items-center justify-center text-primary-400\">\r\n                                            <TrendingUp size={20} />\r\n                                        </div>\r\n                                        <span className=\"text-[10px] bg-surfaceHighlight text-zinc-400 px-2 py-1 rounded-full font-mono\">\r\n                                            #{typeof quota.id === 'string' ? quota.id.substring(0, 6) : quota.id}\r\n                                        </span>\r\n                                    </div>\r\n\r\n                                    <div className=\"mb-4\">\r\n                                        <p className=\"text-xs text-zinc-500 mb-1\">Valor Atual</p>\r\n                                        <p className=\"text-2xl font-bold text-white\">{currentValue.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })}</p>\r\n                                        <p className=\"text-xs text-emerald-400 font-medium flex items-center gap-1 mt-1\">\r\n                                            <TrendingUp size={12} />\r\n                                            +{gainPercent.toFixed(1)}% ({gain.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })})\r\n                                        </p>\r\n                                    </div>\r\n\r\n                                    <div className=\"border-t border-surfaceHighlight pt-4 mt-4 text-xs text-zinc-500 flex justify-between items-center\">\r\n                                        <span>Comprado em {purchaseDate.toLocaleDateString('pt-BR')}</span>\r\n                                    </div>\r\n\r\n                                    <button\r\n                                        onClick={() => initiateSell(quota.id)}\r\n                                        disabled={hasLoans}\r\n                                        className=\"w-full mt-4 bg-surfaceHighlight hover:bg-zinc-700 disabled:opacity-50 disabled:cursor-not-allowed text-white py-2 rounded-lg text-sm font-medium transition\"\r\n                                    >\r\n                                        Resgatar Individual\r\n                                    </button>\r\n\r\n                                    <button\r\n                                        onClick={() => navigate('/app/marketplace', {\r\n                                            state: {\r\n                                                view: 'create',\r\n                                                preloadQuota: {\r\n                                                    id: quota.id,\r\n                                                    price: currentValue,\r\n                                                    title: `Cota-Parte #${typeof quota.id === 'string' ? quota.id.substring(0, 6) : quota.id}`\r\n                                                }\r\n                                            }\r\n                                        })}\r\n                                        disabled={hasLoans}\r\n                                        className=\"w-full mt-2 border border-primary-500/30 text-primary-400 hover:bg-primary-500/10 disabled:opacity-50 disabled:cursor-not-allowed py-2 rounded-lg text-sm font-medium transition flex items-center justify-center gap-2\"\r\n                                    >\r\n                                        <Repeat size={14} />\r\n                                        Repassar no Mercado\r\n                                    </button>\r\n                                </div>\r\n                            );\r\n                        })}\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            {/* Confirmation Modal */}\r\n            {showConfirm && (\r\n                <div className=\"fixed inset-0 bg-black/80 flex items-center justify-center z-[120] p-4 animate-in fade-in duration-200\" onClick={(e) => { if (e.target === e.currentTarget) setShowConfirm(false); }}>\r\n                    <div className=\"bg-surface border border-surfaceHighlight rounded-3xl p-6 w-full max-w-sm relative shadow-2xl\">\r\n                        <button title=\"Fechar\" onClick={() => setShowConfirm(false)} className=\"absolute top-4 right-4 text-zinc-400 hover:text-white\"><XIcon size={24} /></button>\r\n\r\n                        <h3 className=\"text-xl font-bold text-white mb-2\">{modalTitle.replace(\"Licen├ºa\", \"Cota-Parte\")}</h3>\r\n                        {isPenaltyApplied && (\r\n                            <div className=\"bg-red-500/10 border border-red-500/20 text-red-400 text-xs p-3 rounded-lg mb-4\">\r\n                                Descontinuidade antecipada (menos de 1 ano). Incide taxa de administra├º├úo compensat├│ria de 40% sobre o capital integralizado.\r\n                            </div>\r\n                        )}\r\n\r\n                        <div className=\"space-y-3 mb-6\">\r\n                            <div className=\"flex justify-between text-zinc-400 text-sm\">\r\n                                <span>Valor Base</span>\r\n                                <span>{originalValue.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })}</span>\r\n                            </div>\r\n                            <div className=\"flex justify-between text-yellow-500 text-sm\">\r\n                                <span>Taxa de Sa├¡da Antecipada {isPenaltyApplied && '(40%)'}</span>\r\n                                <span>- {penaltyValue.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })}</span>\r\n                            </div>\r\n                            <div className=\"border-t border-surfaceHighlight my-2\"></div>\r\n                            <div className=\"flex justify-between text-white font-bold text-lg\">\r\n                                <span>Valor L├¡quido a Receber</span>\r\n                                <span className=\"text-emerald-400\">{netValue.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })}</span>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <button\r\n                            onClick={handleConfirm}\r\n                            className=\"w-full bg-primary-500 hover:bg-primary-400 text-black font-bold py-3 rounded-xl transition shadow-lg shadow-primary-500/20\"\r\n                        >\r\n                            Confirmar Resgate\r\n                        </button>\r\n                        <button\r\n                            onClick={() => setShowConfirm(false)}\r\n                            className=\"w-full mt-2 py-3 text-zinc-500 hover:text-white text-sm transition\"\r\n                        >\r\n                            Cancelar\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* Certificate Modal - Premium Downloadable */}\r\n            {showCertificate && titleInfo && (\r\n                <div className=\"fixed inset-0 bg-black/95 flex items-center justify-center z-[130] p-4 overflow-y-auto no-print\">\r\n                    <div className=\"w-full max-w-2xl relative animate-in zoom-in-95 duration-300\">\r\n                        {/* Modal Header */}\r\n                        <div className=\"flex justify-between items-center mb-6 px-4\">\r\n                            <h4 className=\"text-emerald-400 font-black uppercase tracking-widest text-sm flex items-center gap-2\">\r\n                                <ShieldCheck size={18} /> T├¡tulo Emitido com Sucesso\r\n                            </h4>\r\n                            <div className=\"flex gap-2\">\r\n                                <button\r\n                                    onClick={handlePrint}\r\n                                    className=\"bg-white text-black px-4 py-2 rounded-lg text-sm font-bold flex items-center gap-2 hover:bg-emerald-400 transition\"\r\n                                >\r\n                                    <Download size={16} /> Imprimir T├¡tulo\r\n                                </button>\r\n                                <button onClick={() => setShowCertificate(false)} className=\"text-zinc-500 hover:text-white p-2\">\r\n                                    <XIcon size={24} />\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* DOCUMENTO (CERTIFICADO) */}\r\n                        <div id=\"certificate-print\" className=\"bg-[#fcf8f1] text-[#2c3e50] p-10 sm:p-16 rounded-sm border-[12px] border-[#d4af37] shadow-[0_0_50px_rgba(0,0,0,0.5)] relative overflow-hidden font-serif print:shadow-none print:border-[8px]\">\r\n                            {/* Decorative Gold Inner Border */}\r\n                            <div className=\"absolute inset-4 border border-[#d4af37]/30 pointer-events-none\"></div>\r\n\r\n                            {/* Watermark Logo */}\r\n                            <div className=\"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 opacity-[0.03] rotate-[-30deg] pointer-events-none flex flex-col items-center\">\r\n                                <Award size={400} />\r\n                            </div>\r\n\r\n                            <div className=\"relative z-10 text-center space-y-8\">\r\n                                <div className=\"space-y-2\">\r\n                                    <div className=\"flex justify-center mb-4\">\r\n                                        <Award size={64} className=\"text-[#d4af37]\" />\r\n                                    </div>\r\n                                    <h5 className=\"text-[10px] font-sans font-black tracking-[0.4em] text-[#d4af37] uppercase\">Certificado de Reconhecimento</h5>\r\n                                    <h1 className=\"text-3xl sm:text-4xl font-bold tracking-tight text-[#1a1a1a]\">T├¡tulo de S├│cio Majorit├írio</h1>\r\n                                </div>\r\n\r\n                                <div className=\"h-0.5 w-24 bg-[#d4af37] mx-auto\"></div>\r\n\r\n                                <p className=\"text-lg leading-relaxed italic max-w-md mx-auto\">\r\n                                    Pelo presente instrumento, o Clube Cred30 confere e reconhece a titularidade especial de s├│cio participante ao associado:\r\n                                </p>\r\n\r\n                                <div className=\"py-4\">\r\n                                    <h2 className=\"text-4xl sm:text-5xl font-black text-[#1a1a1a] uppercase underline decoration-[#d4af37]/30 underline-offset-8\">\r\n                                        {titleInfo.userName}\r\n                                    </h2>\r\n                                </div>\r\n\r\n                                <p className=\"text-sm leading-relaxed max-w-lg mx-auto font-sans text-zinc-700\">\r\n                                    Este t├¡tulo ├® outorgado em reconhecimento ao compromisso inabal├ível demonstrado atrav├®s da manuten├º├úo de <strong>{titleInfo.quotaCount} participa├º├Áes sociais</strong> e ades├úo cont├¡nua por per├¡odo superior a <strong>365 dias</strong>, tornando-se parte do corpo consultivo e majorit├írio desta comunidade.\r\n                                </p>\r\n\r\n                                <div className=\"pt-12 grid grid-cols-2 gap-12 text-center font-sans\">\r\n                                    <div>\r\n                                        <div className=\"h-px bg-[#2c3e50]/20 mb-2\"></div>\r\n                                        <p className=\"text-[10px] uppercase font-bold text-zinc-500\">Data de Emiss├úo</p>\r\n                                        <p className=\"text-sm font-bold\">{titleInfo.issueDate}</p>\r\n                                    </div>\r\n                                    <div className=\"flex flex-col items-center\">\r\n                                        <ShieldCheck size={40} className=\"text-emerald-700 mb-1\" />\r\n                                        <p className=\"text-[10px] uppercase font-bold text-zinc-500\">Autenticidade Verificada</p>\r\n                                        <p className=\"text-[8px] font-mono opacity-50\">CRED30-SEC-P2P-{Math.random().toString(36).substring(2, 10).toUpperCase()}</p>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div className=\"pt-8 text-[9px] uppercase tracking-widest text-[#d4af37] font-sans font-black\">\r\n                                    SISTEMA DE GEST├âO ASSOCIATIVA DISTRIBU├ìDA ÔÇó CRED30\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <p className=\"text-center text-zinc-500 text-xs mt-6 italic\">\r\n                            Dica: Voc├¬ pode salvar como PDF na Janela de Impress├úo.\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josia\\Desktop\\projetos\\cred30\\packages\\frontend-v2\\src\\presentation\\components\\views\\PromoVideosView.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","message":"Definition for rule '@typescript-eslint/no-unused-vars' was not found.","line":1,"column":1,"endLine":1,"endColumn":2,"severity":2,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useRef, memo } from 'react';\r\nimport { Play, Pause, DollarSign, Clock, Eye, ChevronRight, Plus, X as XIcon, CheckCircle2, AlertTriangle, Youtube, Film, ExternalLink, Loader2, Wallet, Smartphone, CreditCard, Zap, Trash2 } from 'lucide-react';\r\nimport { QRCodeCanvas } from 'qrcode.react';\r\nimport { apiService } from '../../../application/services/api.service';\r\n\r\ndeclare global {\r\n    interface Window {\r\n        onYouTubeIframeAPIReady: () => void;\r\n        YT: any;\r\n    }\r\n}\r\n\r\ninterface PromoVideo {\r\n    id: string;\r\n    title: string;\r\n    description: string;\r\n    videoUrl: string;\r\n    thumbnailUrl: string;\r\n    platform: string;\r\n    tag: string;\r\n    durationSeconds: number;\r\n    pricePerView: number;\r\n    minWatchSeconds: number;\r\n    promoterName: string;\r\n    totalViews: number;\r\n    completedViews: number;\r\n    targetViews: number;\r\n    viewerEarningPoints: number;\r\n    isOwner?: boolean;\r\n    ranking: number;\r\n}\r\n\r\ninterface MyCampaign {\r\n    id: string;\r\n    title: string;\r\n    videoUrl: string;\r\n    platform: string;\r\n    tag: string;\r\n    pricePerView: number;\r\n    minWatchSeconds: number;\r\n    budget: number;\r\n    spent: number;\r\n    remaining: number;\r\n    totalViews: number;\r\n    completedViews: number;\r\n    targetViews: number;\r\n    status: string;\r\n    isActive: boolean;\r\n    ranking: number | null;\r\n    createdAt: string;\r\n}\r\n\r\ninterface PromoVideosViewProps {\r\n    userBalance: number;\r\n    onRefresh: () => void;\r\n    onSuccess: (title: string, message: string) => void;\r\n    onError: (title: string, message: string) => void;\r\n    onFarm: () => void;\r\n}\r\n\r\n// Componente de modal de sucesso de pagamento (movido para fora para ser acess├¡vel)\r\nconst PaymentSuccessModal: React.FC<{\r\n    data: any;\r\n    onClose: () => void;\r\n}> = ({ data, onClose }) => {\r\n    const totalToPay = data.value || 0;\r\n    const [copied, setCopied] = React.useState(false);\r\n\r\n    const handleCopy = () => {\r\n        if (data.pixCopiaECola) {\r\n            navigator.clipboard.writeText(data.pixCopiaECola);\r\n            setCopied(true);\r\n            setTimeout(() => setCopied(false), 2000);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div\r\n            className=\"fixed inset-0 bg-black/80 backdrop-blur-md z-[500] flex items-end sm:items-center justify-center p-0 sm:p-4 animate-in fade-in duration-300\"\r\n            onClick={onClose}\r\n        >\r\n            <div\r\n                className=\"bg-[#0A0A0A] border-t sm:border border-white/5 sm:border-zinc-800 rounded-t-[2rem] sm:rounded-3xl w-full sm:max-w-md max-h-[90vh] sm:max-h-[85vh] overflow-hidden shadow-2xl animate-in slide-in-from-bottom-full sm:slide-in-from-bottom-0 sm:zoom-in-95 duration-500 sm:duration-300\"\r\n                onClick={e => e.stopPropagation()}\r\n            >\r\n                {/* Handle indicator for mobile */}\r\n                <div className=\"w-12 h-1.5 bg-zinc-700 rounded-full mx-auto mt-3 sm:hidden\" />\r\n\r\n                {/* Scrollable Content */}\r\n                <div className=\"overflow-y-auto max-h-[calc(90vh-1rem)] sm:max-h-[calc(85vh-1rem)] p-5 sm:p-6\">\r\n                    {/* Header */}\r\n                    <div className=\"flex justify-between items-center mb-5\">\r\n                        <h3 className=\"text-lg sm:text-xl font-bold text-white\">Dados da Cobran├ºa</h3>\r\n                        <button\r\n                            onClick={onClose}\r\n                            className=\"text-zinc-400 hover:text-white bg-zinc-800/80 hover:bg-zinc-700 p-2 rounded-xl transition-colors\"\r\n                        >\r\n                            <XIcon size={18} />\r\n                        </button>\r\n                    </div>\r\n\r\n                    <div className=\"space-y-5\">\r\n                        {/* Status Badge */}\r\n                        <div className=\"flex flex-col items-center justify-center p-4 bg-amber-500/10 rounded-2xl border border-amber-500/20\">\r\n                            <span className=\"text-amber-500 font-bold uppercase tracking-widest text-[10px] mb-1\">Situa├º├úo</span>\r\n                            <span className=\"text-white font-black text-base sm:text-lg\">ÔÅ│ Aguardando pagamento</span>\r\n                        </div>\r\n\r\n                        {/* Info Grid */}\r\n                        <div className=\"bg-zinc-900/50 rounded-2xl p-4 space-y-3\">\r\n                            <div className=\"flex justify-between items-center py-2 border-b border-white/5\">\r\n                                <span className=\"text-zinc-500 text-[11px] sm:text-xs font-bold uppercase\">Criada em</span>\r\n                                <span className=\"text-zinc-300 text-sm font-mono\">{new Date().toLocaleDateString('pt-BR')}</span>\r\n                            </div>\r\n\r\n                            <div className=\"flex justify-between items-center py-2 border-b border-white/5\">\r\n                                <span className=\"text-zinc-500 text-[11px] sm:text-xs font-bold uppercase\">Cliente</span>\r\n                                <span className=\"text-zinc-300 text-sm\">Voc├¬</span>\r\n                            </div>\r\n\r\n                            {data.id && (\r\n                                <div className=\"flex justify-between items-center py-2 border-b border-white/5\">\r\n                                    <span className=\"text-zinc-500 text-[11px] sm:text-xs font-bold uppercase\">Fatura</span>\r\n                                    <div className=\"flex flex-col items-end\">\r\n                                        <span className=\"text-zinc-300 text-xs sm:text-sm font-mono\">{data.id?.slice(0, 12)}...</span>\r\n                                        {data.invoiceUrl && (\r\n                                            <a href={data.invoiceUrl} target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-[10px] text-primary-400 hover:underline flex items-center gap-1 mt-1\">\r\n                                                Ver fatura <ExternalLink size={10} />\r\n                                            </a>\r\n                                        )}\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n\r\n                            <div className=\"flex justify-between items-center py-2 border-b border-white/5\">\r\n                                <span className=\"text-zinc-500 text-[11px] sm:text-xs font-bold uppercase\">Valor</span>\r\n                                <span className=\"text-emerald-400 text-lg sm:text-xl font-black\">\r\n                                    {totalToPay.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })}\r\n                                </span>\r\n                            </div>\r\n\r\n                            <div className=\"flex justify-between items-center py-2 border-b border-white/5\">\r\n                                <span className=\"text-zinc-500 text-[11px] sm:text-xs font-bold uppercase\">Vencimento</span>\r\n                                <span className=\"text-zinc-300 text-sm font-mono\">\r\n                                    {data.dueDate ? new Date(data.dueDate).toLocaleDateString('pt-BR') : new Date(Date.now() + 24 * 60 * 60 * 1000).toLocaleDateString('pt-BR')}\r\n                                </span>\r\n                            </div>\r\n\r\n                            <div className=\"flex justify-between items-center py-2\">\r\n                                <span className=\"text-zinc-500 text-[11px] sm:text-xs font-bold uppercase\">Pagamento</span>\r\n                                <div className=\"flex items-center gap-2 text-emerald-400 text-sm font-bold\">\r\n                                    <Smartphone size={14} /> Pix\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* QR Code Section */}\r\n                        {data.pixCopiaECola && (\r\n                            <div className=\"flex flex-col items-center space-y-4\">\r\n                                <div className=\"bg-white p-3 rounded-2xl shadow-lg\">\r\n                                    <QRCodeCanvas\r\n                                        value={data.pixCopiaECola}\r\n                                        size={160}\r\n                                        level={\"H\"}\r\n                                    />\r\n                                </div>\r\n\r\n                                <p className=\"text-center text-xs text-zinc-400 font-medium\">\r\n                                    Escaneie o QR Code ou copie o c├│digo abaixo\r\n                                </p>\r\n\r\n                                {/* Copy Button */}\r\n                                <button\r\n                                    onClick={handleCopy}\r\n                                    className={`w-full flex items-center justify-center gap-2 py-3.5 rounded-xl font-bold text-sm transition-all ${copied\r\n                                        ? 'bg-emerald-500 text-black'\r\n                                        : 'bg-zinc-800 hover:bg-zinc-700 text-white'\r\n                                        }`}\r\n                                >\r\n                                    {copied ? (\r\n                                        <>\r\n                                            <CheckCircle2 size={18} />\r\n                                            C├│digo copiado!\r\n                                        </>\r\n                                    ) : (\r\n                                        <>\r\n                                            ­ƒôï Copiar c├│digo Pix\r\n                                        </>\r\n                                    )}\r\n                                </button>\r\n\r\n                                {/* Pix Code Preview */}\r\n                                <div className=\"w-full bg-zinc-900 border border-white/5 rounded-xl p-3\">\r\n                                    <p className=\"text-[9px] sm:text-[10px] text-zinc-500 font-mono break-all leading-relaxed\">\r\n                                        {data.pixCopiaECola.slice(0, 80)}...\r\n                                    </p>\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n\r\n                        {/* Close Button */}\r\n                        <button\r\n                            onClick={onClose}\r\n                            className=\"w-full bg-zinc-800 hover:bg-zinc-700 text-white font-bold py-4 rounded-2xl transition-all active:scale-[0.98] text-sm mt-2\"\r\n                        >\r\n                            Fechar\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\n\r\nexport const PromoVideosView: React.FC<PromoVideosViewProps> = ({\r\n    userBalance,\r\n    onRefresh,\r\n    onSuccess,\r\n    onError,\r\n    onFarm\r\n}) => {\r\n    const [activeTab, setActiveTab] = useState<'watch' | 'campaigns'>('watch');\r\n    const [videos, setVideos] = useState<PromoVideo[]>([]);\r\n    const [myCampaigns, setMyCampaigns] = useState<MyCampaign[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [watchingVideo, setWatchingVideo] = useState<PromoVideo | null>(null);\r\n    const [watchProgress, setWatchProgress] = useState(0);\r\n    const [showCreateModal, setShowCreateModal] = useState(false);\r\n    const [earnings, setEarnings] = useState<{\r\n        totalEarned: number;\r\n        videosWatched: number;\r\n        currentPoints: number;\r\n        conversionRate: number;\r\n        minConversionPoints: number;\r\n    } | null>(null);\r\n    const [tags, setTags] = useState<string[]>([]);\r\n    const [selectedTag, setSelectedTag] = useState<string>('TODOS');\r\n    const [paymentSuccessData, setPaymentSuccessData] = useState<any>(null);\r\n    const [playerState, setPlayerState] = useState<number>(-1);\r\n\r\n    const watchTimerRef = useRef<NodeJS.Timeout | null>(null);\r\n    const playerRef = useRef<any>(null);\r\n\r\n    // ... (lines 78-530 remain as is, but I can't match huge block)\r\n    // I will target the end of the file where Payment Modal should go and CreateCampaignModal usage.\r\n\r\n    // ...\r\n\r\n    {/* Modal de Criar Campanha */ }\r\n    {\r\n        showCreateModal && (\r\n            <CreateCampaignModal\r\n                userBalance={userBalance}\r\n                onClose={() => setShowCreateModal(false)}\r\n                onSuccess={() => {\r\n                    setShowCreateModal(false);\r\n                    loadData();\r\n                    onRefresh();\r\n                    onSuccess('Sucesso!', 'Campanha criada com sucesso');\r\n                }}\r\n                onError={onError}\r\n                onPaymentSuccess={setPaymentSuccessData}\r\n            />\r\n        )\r\n    }\r\n\r\n    {/* Modal de Sucesso de Pagamento */ }\r\n    {\r\n        paymentSuccessData && (\r\n            <PaymentSuccessModal\r\n                data={paymentSuccessData}\r\n                onClose={() => {\r\n                    setPaymentSuccessData(null);\r\n                    loadData();\r\n                    onRefresh();\r\n                }}\r\n            />\r\n        )\r\n    }\r\n\r\n    useEffect(() => {\r\n        loadData();\r\n\r\n        // Load YouTube API\r\n        if (!window.YT) {\r\n            const tag = document.createElement('script');\r\n            tag.src = \"https://www.youtube.com/iframe_api\";\r\n            const firstScriptTag = document.getElementsByTagName('script')[0];\r\n            firstScriptTag.parentNode?.insertBefore(tag, firstScriptTag);\r\n        }\r\n    }, []);\r\n\r\n    const loadData = async () => {\r\n        setLoading(true);\r\n        try {\r\n            const [feedRes, campaignsRes, earningsRes, tagsRes] = await Promise.all([\r\n                apiService.get<PromoVideo[]>(`/promo-videos/feed${selectedTag !== 'TODOS' ? `?tag=${selectedTag}` : ''}`),\r\n                apiService.get<MyCampaign[]>('/promo-videos/my-campaigns'),\r\n                apiService.get<{\r\n                    totalEarned: number;\r\n                    videosWatched: number;\r\n                    currentPoints: number;\r\n                    conversionRate: number;\r\n                    minConversionPoints: number;\r\n                }>('/promo-videos/my-earnings'),\r\n                apiService.get<string[]>('/promo-videos/tags'),\r\n            ]);\r\n\r\n            if (feedRes.success && feedRes.data) setVideos(feedRes.data);\r\n            if (campaignsRes.success && campaignsRes.data) setMyCampaigns(campaignsRes.data);\r\n            if (earningsRes.success && earningsRes.data) setEarnings(earningsRes.data);\r\n            if (tagsRes.success && tagsRes.data) setTags(['TODOS', ...tagsRes.data]);\r\n        } catch (e) {\r\n            console.error('Erro ao carregar dados:', e);\r\n        }\r\n        setLoading(false);\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (activeTab === 'watch') {\r\n            loadFeed();\r\n        }\r\n    }, [selectedTag]);\r\n\r\n    const loadFeed = async () => {\r\n        try {\r\n            const feedRes = await apiService.get<PromoVideo[]>(`/promo-videos/feed${selectedTag !== 'TODOS' ? `?tag=${selectedTag}` : ''}`);\r\n            if (feedRes.success && feedRes.data) setVideos(feedRes.data);\r\n        } catch (e) {\r\n            console.error('Erro ao carregar feed:', e);\r\n        }\r\n    };\r\n\r\n    const startWatching = async (video: PromoVideo) => {\r\n        try {\r\n            const res = await apiService.post<any>(`/promo-videos/${video.id}/start-view`, {});\r\n            if (!res.success) {\r\n                onError('Erro', res.message);\r\n                return;\r\n            }\r\n\r\n            setWatchingVideo(video);\r\n            setWatchProgress(0);\r\n            setPlayerState(-1);\r\n\r\n        } catch (e: any) {\r\n            onError('Erro', e.message);\r\n        }\r\n    };\r\n\r\n    // Timer Logic sync with playerState\r\n    useEffect(() => {\r\n        if (watchingVideo && playerState === 1 && watchProgress < watchingVideo.minWatchSeconds) {\r\n            if (watchTimerRef.current) clearInterval(watchTimerRef.current);\r\n\r\n            watchTimerRef.current = setInterval(() => {\r\n                setWatchProgress(prev => {\r\n                    if (prev >= watchingVideo.minWatchSeconds) {\r\n                        if (watchTimerRef.current) clearInterval(watchTimerRef.current);\r\n                        return watchingVideo.minWatchSeconds;\r\n                    }\r\n                    return prev + 1;\r\n                });\r\n            }, 1000);\r\n        } else {\r\n            if (watchTimerRef.current) clearInterval(watchTimerRef.current);\r\n        }\r\n\r\n        return () => {\r\n            if (watchTimerRef.current) clearInterval(watchTimerRef.current);\r\n        };\r\n    }, [watchingVideo, playerState, watchProgress]);\r\n\r\n    const completeWatch = async () => {\r\n        if (!watchingVideo) return;\r\n\r\n        try {\r\n            if (watchTimerRef.current) {\r\n                clearInterval(watchTimerRef.current);\r\n            }\r\n\r\n            const res = await apiService.post<any>(`/promo-videos/${watchingVideo.id}/complete-view`, { watchTimeSeconds: watchProgress });\r\n\r\n            if (res.success) {\r\n                onSuccess('Parab├®ns!', res.message);\r\n                onRefresh();\r\n                loadData();\r\n            } else {\r\n                onError('Erro', res.message);\r\n            }\r\n        } catch (e: any) {\r\n            onError('Erro', e.message);\r\n        }\r\n\r\n        setWatchingVideo(null);\r\n        setWatchProgress(0);\r\n    };\r\n\r\n    const cancelWatch = () => {\r\n        if (watchTimerRef.current) {\r\n            clearInterval(watchTimerRef.current);\r\n        }\r\n        setWatchingVideo(null);\r\n        setWatchProgress(0);\r\n    };\r\n\r\n    const getVideoId = (url: string) => {\r\n        const ytMatch = url.match(/(?:youtube\\.com\\/watch\\?v=|youtu\\.be\\/)([\\w-]+)/);\r\n        if (ytMatch) return ytMatch[1];\r\n        return null;\r\n    };\r\n\r\n    const handleConvertPoints = async () => {\r\n        if (!earnings || earnings.currentPoints < earnings.minConversionPoints) return;\r\n\r\n        try {\r\n            setLoading(true);\r\n            const res = await apiService.post<any>('/promo-videos/convert-points', {});\r\n            if (res.success) {\r\n                onSuccess('Sucesso!', res.message);\r\n                onRefresh();\r\n                loadData();\r\n            } else {\r\n                onError('Erro', res.message);\r\n            }\r\n        } catch (e: any) {\r\n            onError('Erro', e.message);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n\r\n    const handleRemoveCampaign = async (campaign: MyCampaign) => {\r\n        const isPending = campaign.status === 'PENDING';\r\n        const msg = isPending\r\n            ? 'Deseja remover esta campanha pendente?'\r\n            : 'ATEN├ç├âO: Deseja cancelar esta campanha ativa? O saldo restante N├âO ser├í reembolsado.';\r\n\r\n        if (!window.confirm(msg)) return;\r\n\r\n        try {\r\n            setLoading(true);\r\n            const res = await apiService.delete<{ success: boolean; message: string }>(`/promo-videos/${campaign.id}`);\r\n            if (res.success) {\r\n                onSuccess('Sucesso', res.message);\r\n                loadData();\r\n            } else {\r\n                onError('Erro', res.message);\r\n            }\r\n        } catch (e: any) {\r\n            onError('Erro', e.message);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"space-y-6 pb-32\">\r\n            {/* Header com estat├¡sticas */}\r\n            <div className=\"bg-gradient-to-r from-purple-600 to-pink-600 rounded-2xl p-6 text-white\">\r\n                <div className=\"flex items-center justify-between mb-4\">\r\n                    <div className=\"flex items-center gap-3\">\r\n                        <div className=\"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center\">\r\n                            <Play size={24} />\r\n                        </div>\r\n                        <div>\r\n                            <h2 className=\"text-xl font-bold\">Cred Views</h2>\r\n                            <p className=\"text-sm opacity-80\">Assista v├¡deos e ganhe dinheiro</p>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <button\r\n                        onClick={onFarm}\r\n                        className=\"bg-white text-purple-600 px-4 py-2 rounded-xl text-xs font-black uppercase tracking-widest hover:scale-105 active:scale-95 transition-all shadow-xl flex items-center gap-2\"\r\n                    >\r\n                        <Zap size={14} className=\"fill-current\" />\r\n                        FARM DE VIEWS\r\n                    </button>\r\n                </div>\r\n\r\n                <div className=\"grid grid-cols-2 gap-4\">\r\n                    <div className=\"bg-white/10 rounded-xl p-3 relative group overflow-hidden flex flex-col justify-between\">\r\n                        <div>\r\n                            <p className=\"text-[10px] opacity-70 font-black uppercase tracking-widest\">Meus Pontos</p>\r\n                            <p className=\"text-2xl font-black\">{earnings?.currentPoints || 0} pts</p>\r\n                        </div>\r\n\r\n                        {earnings && (\r\n                            <div className=\"mt-2 text-[9px] opacity-80\">\r\n                                <div className=\"flex justify-between mb-1\">\r\n                                    <span>Progresso para Convers├úo</span>\r\n                                    <span>{Math.min(100, Math.floor((earnings.currentPoints / earnings.minConversionPoints) * 100))}%</span>\r\n                                </div>\r\n                                <div className=\"w-full h-1 bg-white/20 rounded-full overflow-hidden\">\r\n                                    <div\r\n                                        className=\"h-full bg-white transition-all duration-500\"\r\n                                        style={{ width: `${Math.min(100, (earnings.currentPoints / earnings.minConversionPoints) * 100)}%` }}\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n\r\n                        {earnings && earnings.currentPoints >= earnings.minConversionPoints && (\r\n                            <button\r\n                                onClick={handleConvertPoints}\r\n                                className=\"absolute right-2 top-3 bg-white text-purple-600 px-3 py-1 rounded-full text-[10px] font-black hover:scale-105 active:scale-95 transition-all shadow-lg animate-bounce\"\r\n                            >\r\n                                CONVERTER\r\n                            </button>\r\n                        )}\r\n                    </div>\r\n                    <div className=\"bg-white/10 rounded-xl p-3\">\r\n                        <p className=\"text-[10px] opacity-70 font-black uppercase tracking-widest\">V├¡deos Vistos</p>\r\n                        <p className=\"text-2xl font-black\">{earnings?.videosWatched || 0}</p>\r\n                    </div>\r\n                </div>\r\n\r\n                {earnings && earnings.currentPoints < earnings.minConversionPoints && earnings.currentPoints > 0 && (\r\n                    <div className=\"mt-4 bg-black/20 rounded-xl p-2 text-center\">\r\n                        <p className=\"text-[9px] font-bold uppercase tracking-widest text-white/60\">\r\n                            Faltam {earnings.minConversionPoints - earnings.currentPoints} pontos para converter em R$ 1,00\r\n                        </p>\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            {/* Tabs */}\r\n            <div className=\"flex gap-2 bg-surface rounded-xl p-1 border border-surfaceHighlight\">\r\n                <button\r\n                    onClick={() => setActiveTab('watch')}\r\n                    className={`flex-1 py-3 rounded-lg font-bold text-sm transition ${activeTab === 'watch' ? 'bg-primary-500 text-black' : 'text-zinc-400 hover:text-white'}`}\r\n                >\r\n                    <Eye size={16} className=\"inline mr-2\" />\r\n                    Assistir\r\n                </button>\r\n                <button\r\n                    onClick={() => setActiveTab('campaigns')}\r\n                    className={`flex-1 py-3 rounded-lg font-bold text-sm transition ${activeTab === 'campaigns' ? 'bg-primary-500 text-black' : 'text-zinc-400 hover:text-white'}`}\r\n                >\r\n                    <DollarSign size={16} className=\"inline mr-2\" />\r\n                    Minhas Campanhas\r\n                </button>\r\n            </div>\r\n\r\n            {/* Conte├║do das Tabs */}\r\n            {activeTab === 'watch' ? (\r\n                <div className=\"space-y-4\">\r\n                    <div className=\"flex flex-col gap-4\">\r\n                        <div className=\"flex justify-between items-center\">\r\n                            <h3 className=\"text-lg font-bold text-white\">V├¡deos Dispon├¡veis</h3>\r\n                            <span className=\"text-xs text-emerald-400\">{videos.length} v├¡deos para assistir</span>\r\n                        </div>\r\n\r\n                        {/* Filtros por Tag */}\r\n                        <div className=\"flex gap-2 overflow-x-auto pb-2 scrollbar-hide\">\r\n                            {tags.map(tag => (\r\n                                <button\r\n                                    key={tag}\r\n                                    onClick={() => setSelectedTag(tag)}\r\n                                    className={`px-4 py-1.5 rounded-full text-[10px] font-bold whitespace-nowrap transition-all ${selectedTag === tag ? 'bg-primary-500 text-black shadow-lg shadow-primary-500/20' : 'bg-surface border border-surfaceHighlight text-zinc-400'}`}\r\n                                >\r\n                                    {tag}\r\n                                </button>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n\r\n                    {loading ? (\r\n                        <div className=\"space-y-3\">\r\n                            {[1, 2, 3].map(i => <VideoCardSkeleton key={i} />)}\r\n                        </div>\r\n                    ) : videos.length === 0 ? (\r\n                        <div className=\"bg-surface border border-surfaceHighlight rounded-2xl p-8 text-center\">\r\n                            <Eye size={48} className=\"mx-auto text-zinc-600 mb-4\" />\r\n                            <p className=\"text-zinc-400\">Nenhum v├¡deo dispon├¡vel no momento</p>\r\n                            <p className=\"text-xs text-zinc-500 mt-2\">Volte mais tarde para novos v├¡deos pagos</p>\r\n                        </div>\r\n                    ) : (\r\n                        <div className=\"space-y-3\">\r\n                            {videos.map(video => (\r\n                                <VideoCard key={video.id} video={video} onWatch={startWatching} />\r\n                            ))}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            ) : (\r\n                <div className=\"space-y-4\">\r\n                    <div className=\"flex justify-between items-center\">\r\n                        <h3 className=\"text-lg font-bold text-white\">Minhas Campanhas</h3>\r\n                        <button\r\n                            onClick={() => setShowCreateModal(true)}\r\n                            className=\"bg-primary-500 hover:bg-primary-400 text-black px-4 py-2 rounded-xl text-xs font-bold transition flex items-center gap-2\"\r\n                        >\r\n                            <Plus size={16} /> Nova Campanha\r\n                        </button>\r\n                    </div>\r\n\r\n                    {myCampaigns.length === 0 ? (\r\n                        <div className=\"bg-surface border border-surfaceHighlight rounded-2xl p-8 text-center\">\r\n                            <Film size={48} className=\"mx-auto text-zinc-600 mb-4\" />\r\n                            <p className=\"text-zinc-400\">Voc├¬ ainda n├úo tem campanhas</p>\r\n                            <p className=\"text-xs text-zinc-500 mt-2\">Promova seus v├¡deos e pague por views reais</p>\r\n                        </div>\r\n                    ) : (\r\n                        <div className=\"space-y-3\">\r\n                            {myCampaigns.map(campaign => (\r\n                                <div key={campaign.id} className=\"bg-surface border border-surfaceHighlight rounded-2xl p-4 relative overflow-hidden group\">\r\n                                    {/* Ranking Badge */}\r\n                                    {campaign.ranking && (\r\n                                        <div className=\"absolute top-0 right-0 bg-primary-500 py-1 px-3 text-[10px] font-black italic transform translate-x-[15%] translate-y-[-10%] rotate-[15deg]\">\r\n                                            RANK #{campaign.ranking}\r\n                                        </div>\r\n                                    )}\r\n\r\n                                    <div className=\"flex justify-between items-start mb-4\">\r\n                                        <div>\r\n                                            <div className=\"flex items-center gap-2 mb-1\">\r\n                                                <span className=\"text-[10px] bg-primary-500/10 border border-primary-500/20 text-primary-400 px-1.5 py-0.5 rounded font-bold\">\r\n                                                    {campaign.tag}\r\n                                                </span>\r\n                                                <h4 className=\"font-bold text-white line-clamp-1\">{campaign.title}</h4>\r\n                                            </div>\r\n                                            <p className=\"text-[10px] text-zinc-500 uppercase font-black tracking-widest\">{campaign.platform}</p>\r\n                                        </div>\r\n                                        <div className=\"flex gap-2\">\r\n                                            {campaign.status === 'PENDING' && (\r\n                                                <button\r\n                                                    onClick={async (e) => {\r\n                                                        e.stopPropagation();\r\n                                                        setLoading(true);\r\n                                                        try {\r\n                                                            const res = await apiService.get<any>(`/promo-videos/${campaign.id}/payment`);\r\n                                                            if (res.success) {\r\n                                                                setPaymentSuccessData(res.data);\r\n                                                            } else {\r\n                                                                onError('Erro', res.message);\r\n                                                            }\r\n                                                        } catch (err: any) {\r\n                                                            onError('Erro', err.message);\r\n                                                        }\r\n                                                        setLoading(false);\r\n                                                    }}\r\n                                                    className=\"bg-yellow-500/10 hover:bg-yellow-500/20 text-yellow-500 border border-yellow-500/50 px-2 py-1 rounded-lg text-[10px] font-black uppercase tracking-widest flex items-center gap-1 transition-all\"\r\n                                                >\r\n                                                    <DollarSign size={10} /> PAGAR\r\n                                                </button>\r\n                                            )}\r\n                                            <button\r\n                                                onClick={(e) => {\r\n                                                    e.stopPropagation();\r\n                                                    handleRemoveCampaign(campaign);\r\n                                                }}\r\n                                                className=\"bg-red-500/10 hover:bg-red-500/20 text-red-500 border border-red-500/50 px-2 py-1 rounded-lg text-[10px] font-black uppercase tracking-widest flex items-center gap-1 transition-all\"\r\n                                                title=\"Remover Campanha\"\r\n                                            >\r\n                                                <Trash2 size={10} /> REMOVER\r\n                                            </button>\r\n                                            <span className={`px-2 py-1 rounded-lg text-[10px] font-black uppercase tracking-widest ${campaign.isActive ? 'bg-emerald-500/10 text-emerald-400 border border-emerald-500/20' : 'bg-zinc-800 text-zinc-400'}`}>\r\n                                                {campaign.status}\r\n                                            </span>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <div className=\"grid grid-cols-2 sm:grid-cols-4 gap-2 text-center mb-4\">\r\n                                        <div className=\"bg-background rounded-xl p-2 border border-surfaceHighlight\">\r\n                                            <p className=\"text-[8px] text-zinc-500 font-bold uppercase tracking-tighter\">Views Totais</p>\r\n                                            <p className=\"font-black text-white text-xs\">{campaign.totalViews.toLocaleString()}</p>\r\n                                        </div>\r\n                                        <div className=\"bg-background rounded-xl p-2 border border-surfaceHighlight\">\r\n                                            <p className=\"text-[8px] text-zinc-500 font-bold uppercase tracking-tighter\">Completas</p>\r\n                                            <p className=\"font-black text-emerald-400 text-xs\">{campaign.completedViews.toLocaleString()}</p>\r\n                                        </div>\r\n                                        <div className=\"bg-background rounded-xl p-2 border border-surfaceHighlight\">\r\n                                            <p className=\"text-[8px] text-zinc-500 font-bold uppercase tracking-tighter\">Investido</p>\r\n                                            <p className=\"font-black text-white text-xs\">{campaign.spent.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })}</p>\r\n                                        </div>\r\n                                        <div className=\"bg-background rounded-xl p-2 border border-primary-500/20 bg-primary-500/5\">\r\n                                            <p className=\"text-[8px] text-primary-500/70 font-bold uppercase tracking-tighter\">Restante</p>\r\n                                            <p className=\"font-black text-primary-500 text-xs\">{campaign.remaining.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })}</p>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <div className=\"space-y-1.5\">\r\n                                        <div className=\"flex justify-between text-[8px] font-black text-zinc-500 uppercase tracking-widest\">\r\n                                            <span>Progresso da Campanha</span>\r\n                                            <span>{campaign.completedViews} / {campaign.targetViews}</span>\r\n                                        </div>\r\n                                        <div className=\"w-full bg-background rounded-full h-1.5 overflow-hidden border border-surfaceHighlight\">\r\n                                            <div\r\n                                                className=\"h-full bg-gradient-to-r from-primary-600 to-primary-400\"\r\n                                                style={{ width: `${Math.min(100, (campaign.completedViews / campaign.targetViews) * 100)}%` }}\r\n                                            />\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            )}\r\n\r\n            {/* Modal de Assistir V├¡deo - Bottom Sheet on Mobile */}\r\n            {watchingVideo && (\r\n                <div className=\"fixed inset-0 bg-black/95 backdrop-blur-xl z-[500] flex items-end sm:items-center justify-center p-0 sm:p-4 animate-in fade-in duration-500\">\r\n                    <div className=\"bg-[#0A0A0A] border-t sm:border border-white/5 sm:border-surfaceHighlight rounded-t-[2.5rem] sm:rounded-3xl p-8 w-full sm:max-w-lg relative animate-in slide-in-from-bottom-full sm:slide-in-from-bottom-0 sm:zoom-in-95 duration-500 sm:duration-300 overflow-y-auto max-h-[95vh] custom-scrollbar\">\r\n                        <div className=\"w-12 h-1.5 bg-zinc-800 rounded-full mx-auto mb-6 sm:hidden opacity-50\" />\r\n\r\n                        {/* Header */}\r\n                        <div className=\"flex justify-between items-start mb-6\">\r\n                            <div>\r\n                                <h3 className=\"text-2xl font-black text-white tracking-tighter sm:tracking-tight\">{watchingVideo.title}</h3>\r\n                                <p className=\"text-xs text-zinc-500 font-bold uppercase tracking-widest mt-1\">por {watchingVideo.promoterName}</p>\r\n                            </div>\r\n                            <button onClick={cancelWatch} className=\"text-zinc-500 hover:text-white bg-zinc-900/50 p-2 rounded-full\">\r\n                                <XIcon size={24} />\r\n                            </button>\r\n                        </div>\r\n\r\n                        {/* Video Content */}\r\n                        <div className=\"aspect-video bg-black rounded-2xl overflow-hidden mb-8 shadow-2xl ring-1 ring-white/10 relative group\">\r\n                            {watchingVideo.platform === 'YOUTUBE' && getVideoId(watchingVideo.videoUrl) ? (\r\n                                <div className=\"w-full h-full\">\r\n                                    <div id=\"promo-player\" className=\"w-full h-full\"></div>\r\n                                    <YouTubeInit\r\n                                        videoId={getVideoId(watchingVideo.videoUrl)!}\r\n                                        onStateChange={(state: number) => setPlayerState(state)}\r\n                                        onReady={(player: any) => {\r\n                                            playerRef.current = player;\r\n                                            player.playVideo();\r\n                                        }}\r\n                                        playerId=\"promo-player\"\r\n                                    />\r\n                                </div>\r\n                            ) : (\r\n                                <div className=\"w-full h-full flex flex-col items-center justify-center gap-4 bg-gradient-to-br from-zinc-900 to-black\">\r\n                                    <Play size={48} className=\"text-primary-500 opacity-20\" />\r\n                                    <a\r\n                                        href={watchingVideo.videoUrl}\r\n                                        target=\"_blank\"\r\n                                        rel=\"noopener noreferrer\"\r\n                                        className=\"bg-primary-500 hover:bg-primary-400 text-black px-8 py-4 rounded-2xl font-black uppercase tracking-widest text-xs flex items-center gap-2 shadow-xl shadow-primary-500/20 active:scale-95 transition-all\"\r\n                                    >\r\n                                        <ExternalLink size={18} /> ABRIR V├ìDEO NOVO\r\n                                    </a>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n\r\n                        {/* Progress Monitoring */}\r\n                        <div className=\"bg-zinc-900/50 border border-white/5 rounded-3xl p-6 mb-6\">\r\n                            <div className=\"flex justify-between items-center mb-3\">\r\n                                <span className=\"text-[10px] text-zinc-500 font-black uppercase tracking-widest\">Tempo Assistido</span>\r\n                                <span className=\"text-sm font-black text-white font-mono\">\r\n                                    {watchProgress}s / {watchingVideo.minWatchSeconds}s\r\n                                </span>\r\n                            </div>\r\n                            <div className=\"w-full bg-black rounded-full h-3 overflow-hidden ring-1 ring-white/5\">\r\n                                <div\r\n                                    className={`h-full transition-all duration-500 shadow-[0_0_15px_rgba(34,211,238,0.3)] ${watchProgress >= watchingVideo.minWatchSeconds ? 'bg-emerald-500' : 'bg-primary-500'}`}\r\n                                    style={{ width: `${Math.min(100, (watchProgress / watchingVideo.minWatchSeconds) * 100)}%` }}\r\n                                />\r\n                            </div>\r\n\r\n                            {watchProgress >= watchingVideo.minWatchSeconds ? (\r\n                                <div className=\"mt-8 animate-in zoom-in-95 duration-300\">\r\n                                    {watchingVideo.isOwner ? (\r\n                                        <>\r\n                                            <div className=\"bg-primary-500/10 border border-primary-500/20 rounded-2xl p-4 mb-4 flex items-center gap-3\">\r\n                                                <div className=\"w-10 h-10 bg-primary-500 rounded-xl flex items-center justify-center text-black shrink-0 shadow-lg shadow-primary-500/20\">\r\n                                                    <CheckCircle2 size={24} strokeWidth={3} />\r\n                                                </div>\r\n                                                <p className=\"text-primary-400 text-xs font-black uppercase tracking-tight\">Pr├®via completa! Este ├® seu pr├│prio v├¡deo.</p>\r\n                                            </div>\r\n                                            <button\r\n                                                onClick={cancelWatch}\r\n                                                className=\"w-full bg-zinc-800 hover:bg-zinc-700 text-white font-black uppercase tracking-[0.2em] py-5 rounded-2xl transition-all text-xs\"\r\n                                            >\r\n                                                FECHAR PR├ëVIA\r\n                                            </button>\r\n                                        </>\r\n                                    ) : (\r\n                                        <>\r\n                                            <div className=\"bg-emerald-500/10 border border-emerald-500/20 rounded-2xl p-4 mb-4 flex items-center gap-3\">\r\n                                                <div className=\"w-10 h-10 bg-emerald-500 rounded-xl flex items-center justify-center text-black shrink-0 shadow-lg shadow-emerald-500/20\">\r\n                                                    <CheckCircle2 size={24} strokeWidth={3} />\r\n                                                </div>\r\n                                                <p className=\"text-emerald-400 text-xs font-black uppercase tracking-tight\">Tempo atingido! Voc├¬ j├í pode resgatar seu lucro.</p>\r\n                                            </div>\r\n                                            <button\r\n                                                onClick={completeWatch}\r\n                                                className=\"w-full bg-emerald-500 hover:bg-emerald-400 text-black font-black uppercase tracking-[0.2em] py-5 rounded-2xl transition-all shadow-xl shadow-emerald-500/20 active:scale-[0.98] text-xs\"\r\n                                            >\r\n                                                RESGATAR {watchingVideo.viewerEarningPoints} PONTOS\r\n                                            </button>\r\n                                        </>\r\n                                    )}\r\n                                </div>\r\n                            ) : (\r\n                                <div className=\"flex items-center justify-center gap-2 mt-6 text-zinc-600\">\r\n                                    <Clock size={14} className=\"animate-spin\" />\r\n                                    <p className=\"text-[10px] sm:text-xs font-black uppercase tracking-[0.15em] animate-pulse\">\r\n                                        {watchingVideo.isOwner ? 'Assistindo pr├®via...' : 'Aguarde o tempo m├¡nimo para validar...'}\r\n                                    </p>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n\r\n                        {/* Anti-Fraud Disclaimer */}\r\n                        <div className=\"bg-primary-500/5 border border-primary-500/10 rounded-xl p-4 text-center\">\r\n                            <p className=\"text-[9px] text-zinc-500 font-medium leading-relaxed\">\r\n                                <span className=\"text-primary-400 font-black\">SEGURAN├çA:</span> A visualiza├º├úo ├® validada pelo ID ├║nico da sess├úo. N├úo feche o app ou o v├¡deo antes de completar o tempo m├¡nimo.\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* Modal de Criar Campanha */}\r\n            {showCreateModal && (\r\n                <CreateCampaignModal\r\n                    userBalance={userBalance}\r\n                    onClose={() => setShowCreateModal(false)}\r\n                    onSuccess={() => {\r\n                        setShowCreateModal(false);\r\n                        loadData();\r\n                        onRefresh();\r\n                        onSuccess('Sucesso!', 'Campanha criada com sucesso');\r\n                    }}\r\n                    onError={onError}\r\n                    onPaymentSuccess={setPaymentSuccessData}\r\n                />\r\n            )}\r\n\r\n            {/* Modal de Sucesso de Pagamento */}\r\n            {paymentSuccessData && (\r\n                <PaymentSuccessModal\r\n                    data={paymentSuccessData}\r\n                    onClose={() => {\r\n                        setPaymentSuccessData(null);\r\n                        loadData();\r\n                        onRefresh();\r\n                    }}\r\n                />\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\n// Modal para criar campanha\r\nconst CreateCampaignModal: React.FC<{\r\n    userBalance: number;\r\n    onClose: () => void;\r\n    onSuccess: () => void;\r\n    onError: (title: string, message: string) => void;\r\n    onPaymentSuccess: (data: any) => void;\r\n}> = ({ userBalance, onClose, onSuccess, onError, onPaymentSuccess }) => {\r\n    const [loading, setLoading] = useState(false);\r\n    const [paymentMethod, setPaymentMethod] = useState<'BALANCE' | 'PIX' | 'CARD'>('BALANCE');\r\n    const [payerCpfCnpj, setPayerCpfCnpj] = useState('');\r\n    const [paymentSuccessData, setPaymentSuccessData] = useState<any>(null);\r\n    const [form, setForm] = useState({\r\n        title: '',\r\n        description: '',\r\n        videoUrl: '',\r\n        platform: 'YOUTUBE',\r\n        tag: 'OUTROS',\r\n        durationSeconds: 60,\r\n        pricePerView: 0.10,\r\n        minWatchSeconds: 20,\r\n        budget: 10,\r\n        targetViews: 100,\r\n    });\r\n\r\n    // Taxas do Asaas (mesmas do backend)\r\n    const ASAAS_PIX_FIXED_FEE = 0.99;\r\n    const ASAAS_CARD_FEE_PERCENT = 0.0299;\r\n    const ASAAS_CARD_FIXED_FEE = 0.49;\r\n\r\n    const estimatedViews = Math.floor((form.budget / form.pricePerView) * 1.02); // 2% bonus views\r\n    const viewerEarning = form.pricePerView * 0.60;\r\n    const quotaHoldersShare = form.pricePerView * 0.25;\r\n    const serviceFee = form.pricePerView * 0.15;\r\n\r\n    // Lista de tags para o formul├írio\r\n    const FORM_TAGS = ['ENTRETENIMENTO', 'MUSICA', 'EDUCACAO', 'GAMES', 'LIFESTYLE', 'TECNOLOGIA', 'NEGOCIOS', 'SAUDE', 'HUMOR', 'OUTROS'];\r\n\r\n    // Valor total baseado no m├®todo de pagamento\r\n    const gatewayFee = paymentMethod === 'PIX'\r\n        ? ASAAS_PIX_FIXED_FEE\r\n        : paymentMethod === 'CARD'\r\n            ? (form.budget + ASAAS_CARD_FIXED_FEE) / (1 - ASAAS_CARD_FEE_PERCENT) - form.budget\r\n            : 0;\r\n    const totalToPay = form.budget + gatewayFee;\r\n\r\n    const handleSubmit = async () => {\r\n        if (!form.title || !form.videoUrl) {\r\n            onError('Erro', 'Preencha todos os campos obrigat├│rios');\r\n            return;\r\n        }\r\n\r\n        if (paymentMethod !== 'BALANCE' && !payerCpfCnpj) {\r\n            onError('Erro', 'Informe o CPF ou CNPJ para o pagamento');\r\n            return;\r\n        }\r\n\r\n        // S├│ valida saldo se for pagar com saldo\r\n        if (paymentMethod === 'BALANCE' && form.budget > userBalance) {\r\n            onError('Saldo Insuficiente', `Voc├¬ tem R$ ${userBalance.toFixed(2)} de saldo`);\r\n            return;\r\n        }\r\n\r\n        setLoading(true);\r\n        try {\r\n            const res = await apiService.post<any>('/promo-videos/create', { ...form, paymentMethod, payerCpfCnpj: payerCpfCnpj.replace(/\\D/g, '') });\r\n\r\n            if (res.success) {\r\n                // Se for PIX, mostrar detalhes da cobran├ºa\r\n                if (paymentMethod === 'PIX' && res.data) {\r\n                    onPaymentSuccess(res.data);\r\n                    onClose(); // Close creation modal, success modal will be opened by parent\r\n                } else {\r\n                    onSuccess();\r\n                    onClose();\r\n                }\r\n            } else {\r\n                onError('Erro', res.message || 'Erro ao criar campanha');\r\n            }\r\n        } catch (e: any) {\r\n            onError('Erro', e.message);\r\n        }\r\n        setLoading(false);\r\n    };\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 bg-black/80 backdrop-blur-md z-[500] flex items-end sm:items-center justify-center p-0 sm:p-4 animate-in fade-in duration-300\">\r\n            <div className=\"bg-[#0A0A0A] border-t sm:border border-white/5 sm:border-surfaceHighlight rounded-t-[2.5rem] sm:rounded-3xl p-8 w-full sm:max-w-md relative shadow-2xl animate-in slide-in-from-bottom-full sm:slide-in-from-bottom-0 sm:zoom-in-95 duration-500 sm:duration-300 overflow-y-auto max-h-[90vh] custom-scrollbar\">\r\n                <div className=\"w-12 h-1.5 bg-zinc-800 rounded-full mx-auto mb-6 sm:hidden opacity-50\" />\r\n\r\n                <div className=\"flex justify-between items-center mb-8\">\r\n                    <h3 className=\"text-2xl font-black text-white tracking-tight\">Anunciar V├¡deo</h3>\r\n                    <button onClick={onClose} className=\"text-zinc-500 hover:text-white bg-zinc-900/50 p-2 rounded-full\">\r\n                        <XIcon size={24} />\r\n                    </button>\r\n                </div>\r\n\r\n                <div className=\"space-y-6\">\r\n                    <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\r\n                        <div className=\"sm:col-span-2\">\r\n                            <label className=\"text-[10px] text-zinc-500 font-black uppercase tracking-widest block mb-2 px-1\">T├¡tulo da Campanha</label>\r\n                            <input\r\n                                type=\"text\"\r\n                                value={form.title}\r\n                                onChange={e => setForm({ ...form, title: e.target.value })}\r\n                                placeholder=\"D├¬ um nome atrativo...\"\r\n                                className=\"w-full bg-zinc-900 border border-white/5 rounded-2xl py-4 px-5 text-zinc-100 placeholder:text-zinc-600 outline-none focus:border-primary-500/50 transition-all font-medium\"\r\n                            />\r\n                        </div>\r\n\r\n                        <div className=\"sm:col-span-2\">\r\n                            <label className=\"text-[10px] text-zinc-500 font-black uppercase tracking-widest block mb-2 px-1\">URL do V├¡deo (YouTube, TikTok...)</label>\r\n                            <input\r\n                                type=\"url\"\r\n                                value={form.videoUrl}\r\n                                onChange={e => setForm({ ...form, videoUrl: e.target.value })}\r\n                                placeholder=\"https://...\"\r\n                                className=\"w-full bg-zinc-900 border border-white/5 rounded-2xl py-4 px-5 text-zinc-100 placeholder:text-zinc-600 outline-none focus:border-primary-500/50 transition-all font-medium\"\r\n                            />\r\n                        </div>\r\n\r\n                        <div>\r\n                            <label className=\"text-[10px] text-zinc-500 font-black uppercase tracking-widest block mb-2 px-1\">Plataforma</label>\r\n                            <select\r\n                                value={form.platform}\r\n                                onChange={e => setForm({ ...form, platform: e.target.value })}\r\n                                className=\"w-full bg-zinc-900 border border-white/5 rounded-2xl py-4 px-4 text-zinc-100 outline-none appearance-none font-bold text-xs\"\r\n                            >\r\n                                <option value=\"YOUTUBE\">YouTube</option>\r\n                                <option value=\"TIKTOK\">TikTok</option>\r\n                                <option value=\"INSTAGRAM\">Instagram</option>\r\n                                <option value=\"KWAI\">Kwai</option>\r\n                                <option value=\"OTHER\">Outro</option>\r\n                            </select>\r\n                        </div>\r\n\r\n                        <div>\r\n                            <label className=\"text-[10px] text-zinc-500 font-black uppercase tracking-widest block mb-2 px-1\">Categoria (Tag)</label>\r\n                            <select\r\n                                value={form.tag}\r\n                                onChange={e => setForm({ ...form, tag: e.target.value })}\r\n                                className=\"w-full bg-zinc-900 border border-white/5 rounded-2xl py-4 px-4 text-zinc-100 outline-none appearance-none font-bold text-xs\"\r\n                            >\r\n                                {FORM_TAGS.map(t => (\r\n                                    <option key={t} value={t}>{t}</option>\r\n                                ))}\r\n                            </select>\r\n                        </div>\r\n\r\n                        <div>\r\n                            <label className=\"text-[10px] text-zinc-500 font-black uppercase tracking-widest block mb-2 px-1\">Dura├º├úo (m├¡n 60s)</label>\r\n                            <input\r\n                                type=\"number\"\r\n                                min=\"60\"\r\n                                value={form.durationSeconds}\r\n                                onChange={e => setForm({ ...form, durationSeconds: Math.max(60, Number(e.target.value)) })}\r\n                                className=\"w-full bg-zinc-900 border border-white/5 rounded-2xl py-4 px-5 text-zinc-100 outline-none font-black text-xs\"\r\n                            />\r\n                        </div>\r\n\r\n                        <div>\r\n                            <label className=\"text-[10px] text-zinc-500 font-black uppercase tracking-widest block mb-2 px-1\">Reten├º├úo (m├¡n 20s)</label>\r\n                            <input\r\n                                type=\"number\"\r\n                                min=\"20\"\r\n                                value={form.minWatchSeconds}\r\n                                onChange={e => setForm({ ...form, minWatchSeconds: Math.max(20, Number(e.target.value)) })}\r\n                                className=\"w-full bg-zinc-900 border border-white/5 rounded-2xl py-4 px-5 text-zinc-100 outline-none font-black text-xs\"\r\n                            />\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"p-1 bg-zinc-950 rounded-2xl border border-white/5 grid grid-cols-2 gap-1 font-black\">\r\n                        <div className=\"p-4 bg-zinc-900 rounded-xl\">\r\n                            <label className=\"text-[9px] text-zinc-500 uppercase block mb-1\">Pre├ºo/View</label>\r\n                            <p className=\"text-white text-lg\">R$ {form.pricePerView.toFixed(2)}</p>\r\n                        </div>\r\n                        <div className=\"p-4 bg-zinc-900 rounded-xl\">\r\n                            <label className=\"text-[9px] text-zinc-500 uppercase block mb-1\">Budget Total</label>\r\n                            <input\r\n                                type=\"number\"\r\n                                value={form.budget}\r\n                                onChange={e => setForm({ ...form, budget: Number(e.target.value) })}\r\n                                className=\"bg-transparent text-primary-400 text-lg outline-none w-full font-black\"\r\n                            />\r\n                            <p className=\"text-[8px] text-zinc-500 font-bold mt-1\">Ôëê {estimatedViews} visualiza├º├Áes reais</p>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* M├®todo de Pagamento - Visual Moderno */}\r\n                    <div>\r\n                        <label className=\"text-[10px] text-zinc-500 font-black uppercase tracking-widest block mb-4 px-1\">Forma de Pagamento</label>\r\n                        <div className=\"grid grid-cols-3 gap-3\">\r\n                            {[\r\n                                { id: 'BALANCE', label: 'SALDO', icon: <Wallet size={20} />, color: 'primary' },\r\n                                { id: 'PIX', label: 'PIX', icon: <Smartphone size={20} />, color: 'emerald' },\r\n                                { id: 'CARD', label: 'CARD', icon: <CreditCard size={20} />, color: 'blue' }\r\n                            ].map((m) => (\r\n                                <button\r\n                                    key={m.id}\r\n                                    type=\"button\"\r\n                                    onClick={() => setPaymentMethod(m.id as any)}\r\n                                    className={`flex flex-col items-center gap-2 py-4 rounded-2xl transition-all border-2 ${paymentMethod === m.id\r\n                                        ? `bg-${m.color}-500/10 border-${m.color}-500/50 text-${m.color}-400 shadow-lg shadow-${m.color}-500/10`\r\n                                        : 'bg-zinc-900/50 border-white/5 text-zinc-500 hover:border-zinc-700'}`}\r\n                                >\r\n                                    {m.icon}\r\n                                    <span className=\"text-[10px] font-black tracking-widest\">{m.label}</span>\r\n                                </button>\r\n                            ))}\r\n                        </div>\r\n\r\n                        {(paymentMethod === 'PIX' || paymentMethod === 'CARD') && (\r\n                            <div className=\"mt-4 animate-in slide-in-from-top-2\">\r\n                                <label className=\"text-[10px] text-zinc-500 font-black uppercase tracking-widest block mb-2 px-1\">CPF ou CNPJ (Obrigat├│rio)</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    value={payerCpfCnpj}\r\n                                    onChange={e => setPayerCpfCnpj(e.target.value)}\r\n                                    placeholder=\"000.000.000-00\"\r\n                                    maxLength={18}\r\n                                    className=\"w-full bg-zinc-900 border border-white/5 rounded-2xl py-4 px-5 text-zinc-100 placeholder:text-zinc-600 outline-none focus:border-primary-500/50 transition-all font-medium\"\r\n                                />\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n\r\n                    {/* Detailed Summary Card */}\r\n                    <div className=\"bg-primary-500/5 border border-primary-500/20 rounded-[2rem] p-6 space-y-4\">\r\n                        <div className=\"flex justify-between items-center group\">\r\n                            <div className=\"flex flex-col\">\r\n                                <span className=\"text-xs text-zinc-500 font-bold\">Alcance M├¡nimo</span>\r\n                                <span className=\"text-[10px] text-emerald-400 font-black animate-pulse\">+2% B├öNUS DE ENTREGA</span>\r\n                            </div>\r\n                            <div className=\"text-right\">\r\n                                <span className=\"text-2xl font-black text-white\">{estimatedViews}</span>\r\n                                <span className=\"ml-1 text-[10px] font-black text-zinc-500\">VIEWS</span>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"h-px bg-white/5 w-full\" />\r\n\r\n                        <div className=\"space-y-2\">\r\n                            <div className=\"flex justify-between text-xs\">\r\n                                <span className=\"text-zinc-500 font-semibold\">Custo por View (Net)</span>\r\n                                <span className=\"text-emerald-400 font-black\">{viewerEarning.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })}</span>\r\n                            </div>\r\n                            <div className=\"flex justify-between text-[10px]\">\r\n                                <span className=\"text-zinc-600 font-medium\">Lucro dos S├│cios (40%)</span>\r\n                                <span className=\"text-zinc-500 font-bold\">{(form.budget * 0.4).toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })}</span>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {paymentMethod !== 'BALANCE' && (\r\n                            <div className=\"pt-2 mt-4 border-t border-primary-500/10 flex justify-between items-baseline\">\r\n                                <span className=\"text-xs text-zinc-400 font-black uppercase tracking-widest\">Total L├¡quido</span>\r\n                                <span className=\"text-2xl font-black text-primary-400\">{totalToPay.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })}</span>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n\r\n                    <button\r\n                        onClick={handleSubmit}\r\n                        disabled={loading || (paymentMethod === 'BALANCE' && form.budget > userBalance)}\r\n                        className=\"w-full bg-primary-500 hover:bg-primary-400 disabled:opacity-30 disabled:grayscale text-black font-black uppercase tracking-[0.2em] py-5 rounded-2xl transition-all shadow-[0_20px_40px_-10px_rgba(6,182,212,0.3)] active:scale-[0.98] text-xs\"\r\n                    >\r\n                        {loading ? 'PROCESSANDO...' : 'CONFIRMAR E ATIVAR'}\r\n                    </button>\r\n\r\n                    <p className=\"text-[9px] text-zinc-600 text-center uppercase font-bold tracking-tight\">Campanha verificada ÔÇó Prote├º├úo contra fraudes ativada</p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default PromoVideosView;\r\n// Componente de Card Memoizado para Performance\r\nconst VideoCard = memo(({ video, onWatch }: { video: PromoVideo; onWatch: (v: PromoVideo) => void }) => {\r\n    // Fun├º├Áes auxiliares movidas para dentro ou fora conforme necess├írio\r\n    const getPlatformIcon = (platform: string) => {\r\n        switch (platform) {\r\n            case 'YOUTUBE': return <Youtube size={14} className=\"text-red-500\" />;\r\n            case 'TIKTOK': return <Film size={14} className=\"text-pink-500\" />;\r\n            default: return <Film size={14} className=\"text-zinc-500\" />;\r\n        }\r\n    };\r\n\r\n    const getThumbnail = (video: PromoVideo) => {\r\n        if (video.thumbnailUrl) return video.thumbnailUrl;\r\n        if (video.platform === 'YOUTUBE') {\r\n            const id = video.videoUrl.split('v=')[1]?.split('&')[0] || video.videoUrl.split('/').pop();\r\n            return `https://img.youtube.com/vi/${id}/mqdefault.jpg`;\r\n        }\r\n        return 'https://placehold.co/400x225/111/444?text=PREVIEW';\r\n    };\r\n\r\n    return (\r\n        <div className={`bg-surface border rounded-2xl overflow-hidden transition ${video.isOwner ? 'border-primary-500/30 bg-primary-500/5' : 'border-surfaceHighlight hover:border-primary-500/50'}`}>\r\n            <div className=\"flex\">\r\n                <div className=\"relative w-32 h-24 flex-shrink-0\">\r\n                    <img src={getThumbnail(video)} alt={video.title} className=\"w-full h-full object-cover\" loading=\"lazy\" />\r\n                    <div className=\"absolute inset-0 bg-black/50 flex items-center justify-center\"><Play size={24} className=\"text-white\" /></div>\r\n                    <div className=\"absolute bottom-1 right-1 bg-black/80 text-[10px] text-white px-1 rounded\">\r\n                        {Math.floor(video.durationSeconds / 60)}:{String(video.durationSeconds % 60).padStart(2, '0')}\r\n                    </div>\r\n                    <div className=\"absolute top-1 left-1 flex flex-col gap-1\">\r\n                        {video.isOwner && <div className=\"bg-primary-500 text-black text-[8px] px-1.5 py-0.5 rounded font-bold\">SEU V├ìDEO</div>}\r\n                        <div className=\"bg-zinc-900/80 text-white text-[8px] px-1.5 py-0.5 rounded font-bold border border-white/10 uppercase\">#{video.ranking} TOP</div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"flex-1 p-3 flex flex-col justify-between\">\r\n                    <div>\r\n                        <div className=\"flex items-center justify-between mb-1\">\r\n                            <div className=\"flex items-center gap-2\">\r\n                                {getPlatformIcon(video.platform)}\r\n                                <h4 className=\"text-sm font-bold text-white line-clamp-1\">{video.title}</h4>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"flex items-center gap-2\">\r\n                            <span className=\"text-[10px] bg-white/5 border border-white/10 px-1.5 py-0.2 rounded text-zinc-400 font-medium\">{video.tag}</span>\r\n                            <span className=\"text-[10px] text-zinc-500\">ÔÇó</span>\r\n                            <p className=\"text-[10px] text-zinc-500\">{video.isOwner ? 'Sua campanha' : `por ${video.promoterName}`}</p>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"flex items-center justify-between mt-2\">\r\n                        <div className=\"flex items-center gap-3\">\r\n                            <div className=\"flex flex-col\">\r\n                                <span className=\"text-[8px] text-zinc-500 font-bold uppercase tracking-wider leading-none mb-1\">Total Views</span>\r\n                                <span className=\"text-zinc-300 text-xs font-black leading-none\">{video.totalViews.toLocaleString()}</span>\r\n                            </div>\r\n                            {!video.isOwner && (\r\n                                <div className=\"flex flex-col\">\r\n                                    <span className=\"text-[8px] text-zinc-500 font-bold uppercase tracking-wider leading-none mb-1\">Pontos</span>\r\n                                    <span className=\"text-emerald-400 font-black text-xs leading-none\">+{video.viewerEarningPoints} pts</span>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                        <button onClick={() => onWatch(video)} className={`px-4 py-2 rounded-xl text-xs font-black uppercase tracking-widest transition flex items-center gap-2 ${video.isOwner ? 'bg-zinc-800 text-zinc-400 hover:bg-zinc-700' : 'bg-primary-500 hover:bg-primary-400 text-black shadow-lg shadow-primary-500/20'}`}>\r\n                            {video.isOwner ? 'Ver' : 'Assistir'} <ChevronRight size={14} />\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n});\r\n\r\n// Componente de Skeleton para Carregamento Suave\r\nconst VideoCardSkeleton = () => (\r\n    <div className=\"bg-surface border border-surfaceHighlight rounded-2xl overflow-hidden animate-pulse\">\r\n        <div className=\"flex\">\r\n            <div className=\"w-32 h-24 bg-zinc-900\" />\r\n            <div className=\"flex-1 p-3 space-y-3\">\r\n                <div className=\"h-4 bg-zinc-900 rounded w-3/4\" />\r\n                <div className=\"h-3 bg-zinc-900 rounded w-1/2\" />\r\n                <div className=\"flex justify-between items-center mt-2\">\r\n                    <div className=\"h-8 bg-zinc-900 rounded w-20\" />\r\n                    <div className=\"h-8 bg-zinc-900 rounded w-24\" />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n);\r\n\r\n// Helper component to initialize individual YouTube players\r\nconst YouTubeInit: React.FC<{\r\n    videoId: string;\r\n    onStateChange: (state: number) => void;\r\n    onReady: (player: any) => void;\r\n    playerId?: string;\r\n}> = ({ videoId, onStateChange, onReady, playerId = 'farm-player' }) => {\r\n    useEffect(() => {\r\n        const initPlayer = () => {\r\n            new window.YT.Player(playerId, {\r\n                videoId: videoId,\r\n                playerVars: {\r\n                    autoplay: 1,\r\n                    controls: 1,\r\n                    modestbranding: 1,\r\n                    rel: 0,\r\n                    iv_load_policy: 3\r\n                },\r\n                events: {\r\n                    onReady: (event: any) => onReady(event.target),\r\n                    onStateChange: (event: any) => onStateChange(event.data)\r\n                }\r\n            });\r\n        };\r\n\r\n        if (window.YT && window.YT.Player) {\r\n            initPlayer();\r\n        } else {\r\n            const originalOnReady = window.onYouTubeIframeAPIReady;\r\n            window.onYouTubeIframeAPIReady = () => {\r\n                if (originalOnReady) originalOnReady();\r\n                initPlayer();\r\n            };\r\n        }\r\n    }, [videoId, playerId]);\r\n\r\n    return null;\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josia\\Desktop\\projetos\\cred30\\packages\\frontend-v2\\src\\presentation\\components\\views\\SellerRegistrationView.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","message":"Definition for rule '@typescript-eslint/no-unused-vars' was not found.","line":1,"column":1,"endLine":1,"endColumn":2,"severity":2,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { Store, Phone, MapPin, Building2, CheckCircle, AlertCircle, Loader2, ArrowLeft } from 'lucide-react';\r\nimport { apiService } from '../../../application/services/storage.service';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\ninterface SellerStatus {\r\n    isSeller: boolean;\r\n    status: string | null;\r\n    hasWallet: boolean;\r\n    companyName: string | null;\r\n}\r\n\r\nexport const SellerRegistrationView = () => {\r\n    const navigate = useNavigate();\r\n    const [sellerStatus, setSellerStatus] = useState<SellerStatus | null>(null);\r\n    const [loading, setLoading] = useState(true);\r\n    const [submitting, setSubmitting] = useState(false);\r\n    const [error, setError] = useState<string | null>(null);\r\n    const [success, setSuccess] = useState<string | null>(null);\r\n\r\n    // Formul├írio\r\n    const [formData, setFormData] = useState({\r\n        companyName: '',\r\n        cpfCnpj: '',\r\n        mobilePhone: '',\r\n        address: '',\r\n        addressNumber: '',\r\n        neighborhood: '',\r\n        city: '',\r\n        state: '',\r\n        postalCode: '',\r\n        companyType: 'INDIVIDUAL' as 'INDIVIDUAL' | 'MEI' | 'LIMITED'\r\n    });\r\n\r\n    useEffect(() => {\r\n        fetchSellerStatus();\r\n    }, []);\r\n\r\n    const fetchSellerStatus = async () => {\r\n        try {\r\n            const response = await apiService.get('/seller/status') as any;\r\n            if (response.success) {\r\n                setSellerStatus(response);\r\n            }\r\n        } catch (err) {\r\n            console.error('Erro ao buscar status de vendedor:', err);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        setError(null);\r\n        setSuccess(null);\r\n        setSubmitting(true);\r\n\r\n        try {\r\n            const response = await apiService.post('/seller/register', formData) as any;\r\n            if (response.success) {\r\n                setSuccess('Conta de vendedor criada com sucesso! Agora voc├¬ pode receber pagamentos diretamente.');\r\n                fetchSellerStatus();\r\n            } else {\r\n                setError(response.message || 'Erro ao registrar');\r\n            }\r\n        } catch (err: any) {\r\n            setError(err.message || 'Erro ao processar registro');\r\n        } finally {\r\n            setSubmitting(false);\r\n        }\r\n    };\r\n\r\n    const updateField = (field: string, value: string) => {\r\n        setFormData(prev => ({ ...prev, [field]: value }));\r\n    };\r\n\r\n    if (loading) {\r\n        return (\r\n            <div className=\"flex items-center justify-center min-h-[50vh]\">\r\n                <Loader2 className=\"w-8 h-8 text-primary-500 animate-spin\" />\r\n            </div>\r\n        );\r\n    }\r\n\r\n    // J├í ├® vendedor\r\n    if (sellerStatus?.isSeller && sellerStatus?.hasWallet) {\r\n        return (\r\n            <div className=\"max-w-lg mx-auto p-6\">\r\n                <div className=\"bg-emerald-500/10 border border-emerald-500/20 rounded-3xl p-8 text-center\">\r\n                    <div className=\"w-20 h-20 bg-emerald-500/20 rounded-full flex items-center justify-center mx-auto mb-6\">\r\n                        <CheckCircle className=\"w-10 h-10 text-emerald-500\" />\r\n                    </div>\r\n                    <h1 className=\"text-2xl font-bold text-white mb-2\">Voc├¬ ├® um Vendedor Verificado!</h1>\r\n                    <p className=\"text-zinc-400 mb-4\">\r\n                        {sellerStatus.companyName && <span className=\"text-white font-medium\">{sellerStatus.companyName}</span>}\r\n                    </p>\r\n                    <p className=\"text-sm text-emerald-400\">\r\n                        Seus pagamentos s├úo recebidos diretamente via Asaas com split autom├ítico.\r\n                    </p>\r\n                    <button\r\n                        onClick={() => navigate('/marketplace')}\r\n                        className=\"mt-6 bg-emerald-500 hover:bg-emerald-400 text-black font-bold py-3 px-8 rounded-xl transition-all\"\r\n                    >\r\n                        Ir para o Marketplace\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"max-w-2xl mx-auto p-4 sm:p-6 pb-24\">\r\n            {/* Header */}\r\n            <div className=\"mb-8\">\r\n                <button\r\n                    onClick={() => navigate(-1)}\r\n                    className=\"flex items-center gap-2 text-zinc-400 hover:text-white text-sm mb-4 transition-colors\"\r\n                >\r\n                    <ArrowLeft size={16} />\r\n                    Voltar\r\n                </button>\r\n                <div className=\"flex items-center gap-4\">\r\n                    <div className=\"w-14 h-14 bg-primary-500/10 rounded-2xl flex items-center justify-center\">\r\n                        <Store className=\"w-7 h-7 text-primary-400\" />\r\n                    </div>\r\n                    <div>\r\n                        <h1 className=\"text-2xl font-bold text-white\">Tornar-se Vendedor</h1>\r\n                        <p className=\"text-zinc-400 text-sm\">Receba pagamentos direto na sua conta</p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Alertas */}\r\n            {error && (\r\n                <div className=\"mb-6 bg-red-500/10 border border-red-500/20 rounded-xl p-4 flex items-center gap-3\">\r\n                    <AlertCircle className=\"w-5 h-5 text-red-500 shrink-0\" />\r\n                    <p className=\"text-sm text-red-400\">{error}</p>\r\n                </div>\r\n            )}\r\n\r\n            {success && (\r\n                <div className=\"mb-6 bg-emerald-500/10 border border-emerald-500/20 rounded-xl p-4 flex items-center gap-3\">\r\n                    <CheckCircle className=\"w-5 h-5 text-emerald-500 shrink-0\" />\r\n                    <p className=\"text-sm text-emerald-400\">{success}</p>\r\n                </div>\r\n            )}\r\n\r\n            {/* Info Box */}\r\n            <div className=\"mb-6 bg-zinc-900 border border-white/5 rounded-2xl p-5\">\r\n                <h3 className=\"text-white font-bold mb-2\">Vantagens de ser Vendedor:</h3>\r\n                <ul className=\"space-y-2 text-sm text-zinc-400\">\r\n                    <li className=\"flex items-center gap-2\">\r\n                        <CheckCircle className=\"w-4 h-4 text-emerald-500\" />\r\n                        Receba pagamentos diretamente via Asaas\r\n                    </li>\r\n                    <li className=\"flex items-center gap-2\">\r\n                        <CheckCircle className=\"w-4 h-4 text-emerald-500\" />\r\n                        Split autom├ítico (voc├¬ recebe 95%, plataforma fica com 5%)\r\n                    </li>\r\n                    <li className=\"flex items-center gap-2\">\r\n                        <CheckCircle className=\"w-4 h-4 text-emerald-500\" />\r\n                        Saque para sua conta banc├íria quando quiser\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n\r\n            {/* Formul├írio */}\r\n            <form onSubmit={handleSubmit} className=\"space-y-5\">\r\n                {/* Nome da Empresa/Loja */}\r\n                <div>\r\n                    <label className=\"block text-xs font-bold text-zinc-500 uppercase tracking-wider mb-2\">\r\n                        Nome da Loja / Empresa\r\n                    </label>\r\n                    <div className=\"relative\">\r\n                        <Building2 className=\"absolute left-4 top-1/2 -translate-y-1/2 text-zinc-500\" size={18} />\r\n                        <input\r\n                            type=\"text\"\r\n                            value={formData.companyName}\r\n                            onChange={(e) => updateField('companyName', e.target.value)}\r\n                            placeholder=\"Ex: Loja do Jo├úo\"\r\n                            className=\"w-full bg-zinc-900 border border-white/5 rounded-xl py-3.5 pl-12 pr-4 text-white focus:border-primary-500 outline-none transition\"\r\n                            required\r\n                        />\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Tipo de Conta e CPF/CNPJ */}\r\n                <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\r\n                    <div>\r\n                        <label className=\"block text-xs font-bold text-zinc-500 uppercase tracking-wider mb-2\">\r\n                            Tipo de Conta\r\n                        </label>\r\n                        <select\r\n                            value={formData.companyType}\r\n                            onChange={(e) => updateField('companyType', e.target.value)}\r\n                            className=\"w-full bg-zinc-900 border border-white/5 rounded-xl py-3.5 px-4 text-white focus:border-primary-500 outline-none transition\"\r\n                        >\r\n                            <option value=\"INDIVIDUAL\">Pessoa F├¡sica (CPF)</option>\r\n                            <option value=\"MEI\">MEI</option>\r\n                            <option value=\"LIMITED\">Empresa (CNPJ)</option>\r\n                        </select>\r\n                    </div>\r\n                    <div>\r\n                        <label className=\"block text-xs font-bold text-zinc-500 uppercase tracking-wider mb-2\">\r\n                            CPF ou CNPJ\r\n                        </label>\r\n                        <input\r\n                            type=\"text\"\r\n                            value={formData.cpfCnpj}\r\n                            onChange={(e) => updateField('cpfCnpj', e.target.value.replace(/\\D/g, '').slice(0, 14))}\r\n                            placeholder=\"Apenas n├║meros\"\r\n                            className=\"w-full bg-zinc-900 border border-white/5 rounded-xl py-3.5 px-4 text-white focus:border-primary-500 outline-none transition\"\r\n                            required\r\n                        />\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Telefone */}\r\n                <div>\r\n                    <label className=\"block text-xs font-bold text-zinc-500 uppercase tracking-wider mb-2\">\r\n                        Telefone Celular\r\n                    </label>\r\n                    <div className=\"relative\">\r\n                        <Phone className=\"absolute left-4 top-1/2 -translate-y-1/2 text-zinc-500\" size={18} />\r\n                        <input\r\n                            type=\"tel\"\r\n                            value={formData.mobilePhone}\r\n                            onChange={(e) => updateField('mobilePhone', e.target.value.replace(/\\D/g, '').slice(0, 11))}\r\n                            placeholder=\"11999999999\"\r\n                            className=\"w-full bg-zinc-900 border border-white/5 rounded-xl py-3.5 pl-12 pr-4 text-white focus:border-primary-500 outline-none transition\"\r\n                            required\r\n                        />\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Endere├ºo */}\r\n                <div className=\"space-y-4\">\r\n                    <label className=\"block text-xs font-bold text-zinc-500 uppercase tracking-wider\">\r\n                        <MapPin className=\"inline mr-2\" size={14} />\r\n                        Endere├ºo Comercial\r\n                    </label>\r\n\r\n                    <div className=\"grid grid-cols-3 gap-3\">\r\n                        <input\r\n                            type=\"text\"\r\n                            value={formData.postalCode}\r\n                            onChange={(e) => updateField('postalCode', e.target.value.replace(/\\D/g, '').slice(0, 8))}\r\n                            placeholder=\"CEP\"\r\n                            className=\"col-span-1 bg-zinc-900 border border-white/5 rounded-xl py-3 px-4 text-white focus:border-primary-500 outline-none transition text-sm\"\r\n                            required\r\n                        />\r\n                        <input\r\n                            type=\"text\"\r\n                            value={formData.address}\r\n                            onChange={(e) => updateField('address', e.target.value)}\r\n                            placeholder=\"Rua, Avenida...\"\r\n                            className=\"col-span-2 bg-zinc-900 border border-white/5 rounded-xl py-3 px-4 text-white focus:border-primary-500 outline-none transition text-sm\"\r\n                            required\r\n                        />\r\n                    </div>\r\n\r\n                    <div className=\"grid grid-cols-3 gap-3\">\r\n                        <input\r\n                            type=\"text\"\r\n                            value={formData.addressNumber}\r\n                            onChange={(e) => updateField('addressNumber', e.target.value)}\r\n                            placeholder=\"N┬║\"\r\n                            className=\"bg-zinc-900 border border-white/5 rounded-xl py-3 px-4 text-white focus:border-primary-500 outline-none transition text-sm\"\r\n                        />\r\n                        <input\r\n                            type=\"text\"\r\n                            value={formData.neighborhood}\r\n                            onChange={(e) => updateField('neighborhood', e.target.value)}\r\n                            placeholder=\"Bairro\"\r\n                            className=\"col-span-2 bg-zinc-900 border border-white/5 rounded-xl py-3 px-4 text-white focus:border-primary-500 outline-none transition text-sm\"\r\n                            required\r\n                        />\r\n                    </div>\r\n\r\n                    <div className=\"grid grid-cols-3 gap-3\">\r\n                        <input\r\n                            type=\"text\"\r\n                            value={formData.city}\r\n                            onChange={(e) => updateField('city', e.target.value)}\r\n                            placeholder=\"Cidade\"\r\n                            className=\"col-span-2 bg-zinc-900 border border-white/5 rounded-xl py-3 px-4 text-white focus:border-primary-500 outline-none transition text-sm\"\r\n                            required\r\n                        />\r\n                        <input\r\n                            type=\"text\"\r\n                            value={formData.state}\r\n                            onChange={(e) => updateField('state', e.target.value.toUpperCase().slice(0, 2))}\r\n                            placeholder=\"UF\"\r\n                            maxLength={2}\r\n                            className=\"bg-zinc-900 border border-white/5 rounded-xl py-3 px-4 text-white focus:border-primary-500 outline-none transition text-sm uppercase\"\r\n                            required\r\n                        />\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Bot├úo Submit */}\r\n                <button\r\n                    type=\"submit\"\r\n                    disabled={submitting}\r\n                    className=\"w-full bg-primary-500 hover:bg-primary-400 disabled:opacity-50 disabled:cursor-not-allowed text-black font-bold py-4 rounded-xl transition-all flex items-center justify-center gap-3\"\r\n                >\r\n                    {submitting ? (\r\n                        <>\r\n                            <Loader2 className=\"w-5 h-5 animate-spin\" />\r\n                            Processando...\r\n                        </>\r\n                    ) : (\r\n                        <>\r\n                            <Store className=\"w-5 h-5\" />\r\n                            Criar Conta de Vendedor\r\n                        </>\r\n                    )}\r\n                </button>\r\n\r\n                <p className=\"text-xs text-zinc-500 text-center\">\r\n                    Ao criar sua conta, voc├¬ concorda com os termos de uso do Asaas para subconta digital.\r\n                </p>\r\n            </form>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default SellerRegistrationView;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josia\\Desktop\\projetos\\cred30\\packages\\frontend-v2\\src\\presentation\\components\\views\\SettingsView.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","message":"Definition for rule '@typescript-eslint/no-unused-vars' was not found.","line":1,"column":1,"endLine":1,"endColumn":2,"severity":2,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { Star, Copy, Lock, ChevronRight, LogOut, Trash2, X as XIcon, ShieldCheck, QrCode, AlertCircle, Check, Bug, FileText } from 'lucide-react';\r\nimport { User } from '../../../domain/types/common.types';\r\nimport { ConfirmModal } from '../ui/ConfirmModal';\r\nimport { get2FASetup, verify2FA } from '../../../application/services/storage.service';\r\nimport { apiService } from '../../../application/services/api.service';\r\n\r\nexport const SettingsView = ({ user, onLogout, onDeleteAccount, onChangePassword, onRefresh }: {\r\n    user: User,\r\n    onLogout: () => void,\r\n    onDeleteAccount: (code?: string) => void,\r\n    onChangePassword: (oldPass: string, newPass: string) => Promise<void>,\r\n    onRefresh?: () => void\r\n}) => {\r\n    const [showConfirmDelete, setShowConfirmDelete] = React.useState(false);\r\n    const [showChangePassword, setShowChangePassword] = React.useState(false);\r\n    const [oldPassword, setOldPassword] = React.useState('');\r\n    const [newPassword, setNewPassword] = React.useState('');\r\n    const [confirmPassword, setConfirmPassword] = React.useState('');\r\n    const [isSubmitting, setIsSubmitting] = React.useState(false);\r\n    const [deleteCode, setDeleteCode] = React.useState('');\r\n    const [error, setError] = React.useState('');\r\n\r\n    // CPF State\r\n    const [showCpfModal, setShowCpfModal] = React.useState(false);\r\n    const [cpfInput, setCpfInput] = React.useState('');\r\n    const [cpfError, setCpfError] = React.useState('');\r\n    const [cpfSuccess, setCpfSuccess] = React.useState('');\r\n    const [savingCpf, setSavingCpf] = React.useState(false);\r\n\r\n    // 2FA Setup\r\n    const [show2FASetup, setShow2FASetup] = React.useState(false);\r\n    const [twoFactorData, setTwoFactorData] = React.useState<{ secret: string, qrCode: string, otpUri: string } | null>(null);\r\n    const [verifyCode, setVerifyCode] = React.useState('');\r\n    const [successMessage, setSuccessMessage] = React.useState('');\r\n\r\n    // Format CPF: 000.000.000-00\r\n    const formatCpf = (value: string) => {\r\n        const digits = value.replace(/\\D/g, '').slice(0, 11);\r\n        if (digits.length <= 3) return digits;\r\n        if (digits.length <= 6) return `${digits.slice(0, 3)}.${digits.slice(3)}`;\r\n        if (digits.length <= 9) return `${digits.slice(0, 3)}.${digits.slice(3, 6)}.${digits.slice(6)}`;\r\n        return `${digits.slice(0, 3)}.${digits.slice(3, 6)}.${digits.slice(6, 9)}-${digits.slice(9)}`;\r\n    };\r\n\r\n    const handleSaveCpf = async () => {\r\n        setCpfError('');\r\n        const cleanCpf = cpfInput.replace(/\\D/g, '');\r\n        if (cleanCpf.length !== 11) {\r\n            setCpfError('CPF deve ter 11 d├¡gitos');\r\n            return;\r\n        }\r\n        setSavingCpf(true);\r\n        try {\r\n            const res = await apiService.updateCpf(cleanCpf);\r\n            if (res.success) {\r\n                setCpfSuccess('CPF salvo com sucesso!');\r\n                setTimeout(() => {\r\n                    setShowCpfModal(false);\r\n                    setCpfSuccess('');\r\n                    if (onRefresh) onRefresh();\r\n                }, 1500);\r\n            }\r\n        } catch (err: any) {\r\n            setCpfError(err.message || 'Erro ao salvar CPF');\r\n        } finally {\r\n            setSavingCpf(false);\r\n        }\r\n    };\r\n\r\n    const handle2FASetup = async () => {\r\n        try {\r\n            const data = await get2FASetup();\r\n            setTwoFactorData(data);\r\n            setShow2FASetup(true);\r\n        } catch (err: any) {\r\n            setError(err.message || 'Erro ao carregar dados 2FA');\r\n        }\r\n    };\r\n\r\n    const handleVerify2FA = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        setError('');\r\n        setIsSubmitting(true);\r\n        try {\r\n            const res = await verify2FA(user.email, verifyCode);\r\n            if (res.success) {\r\n                setSuccessMessage('2FA ativado com sucesso!');\r\n                setTimeout(() => {\r\n                    setShow2FASetup(false);\r\n                    setSuccessMessage('');\r\n                    if (onRefresh) onRefresh();\r\n                    else window.location.reload();\r\n                }, 1500);\r\n            }\r\n        } catch (err: any) {\r\n            setError(err.message || 'Erro ao verificar c├│digo');\r\n        } finally {\r\n            setIsSubmitting(false);\r\n        }\r\n    };\r\n\r\n    const handlePasswordChange = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        setError('');\r\n\r\n        if (newPassword !== confirmPassword) {\r\n            setError('As senhas n├úo coincidem');\r\n            return;\r\n        }\r\n\r\n        if (newPassword.length < 6) {\r\n            setError('A nova senha deve ter pelo menos 6 caracteres');\r\n            return;\r\n        }\r\n\r\n        setIsSubmitting(true);\r\n        try {\r\n            await onChangePassword(oldPassword, newPassword);\r\n            setShowChangePassword(false);\r\n            setOldPassword('');\r\n            setNewPassword('');\r\n            setConfirmPassword('');\r\n        } catch (err: any) {\r\n            setError(err.message || 'Erro ao alterar senha');\r\n        } finally {\r\n            setIsSubmitting(false);\r\n        }\r\n    };\r\n\r\n    const navigate = useNavigate();\r\n    const isLocked = user.securityLockUntil ? user.securityLockUntil > Date.now() : false;\r\n    const lockTimeRemaining = user.securityLockUntil ? Math.ceil((user.securityLockUntil - Date.now()) / (1000 * 60 * 60)) : 0;\r\n\r\n    return (\r\n        <div className=\"space-y-6 max-w-xl mx-auto pb-24\">\r\n            {/* Alerta de Seguran├ºa */}\r\n            {isLocked && (\r\n                <div className=\"bg-red-500/10 border border-red-500/20 rounded-2xl p-4 flex items-start gap-4 animate-in fade-in slide-in-from-top-4 duration-500\">\r\n                    <div className=\"w-10 h-10 rounded-full bg-red-500/20 flex items-center justify-center shrink-0\">\r\n                        <ShieldCheck className=\"w-6 h-6 text-red-500\" />\r\n                    </div>\r\n                    <div>\r\n                        <h3 className=\"text-red-500 font-bold text-sm\">Modo de Seguran├ºa Ativo</h3>\r\n                        <p className=\"text-zinc-400 text-[10px] mt-1 leading-relaxed\">\r\n                            Sua conta est├í em modo \"Apenas Visualiza├º├úo\" por mais <strong>{lockTimeRemaining} horas</strong> devido a uma altera├º├úo recente de seguran├ºa.\r\n                            Transa├º├Áes, saques e empr├®stimos ser├úo liberados ap├│s este per├¡odo por sua prote├º├úo.\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            <div className=\"bg-surface border border-surfaceHighlight rounded-2xl p-6\">\r\n                <h3 className=\"text-lg font-bold text-white mb-4\">Perfil</h3>\r\n                <div className=\"space-y-4\">\r\n                    <div>\r\n                        <label className=\"text-xs text-zinc-500\">Nome</label>\r\n                        <p className=\"text-white border-b border-surfaceHighlight pb-2\">{user.name}</p>\r\n                    </div>\r\n                    <div>\r\n                        <label className=\"text-xs text-zinc-500\">Email</label>\r\n                        <p className=\"text-white border-b border-surfaceHighlight pb-2\">{user.email}</p>\r\n                    </div>\r\n                    <div>\r\n                        <label className=\"text-xs text-zinc-500\">Chave PIX</label>\r\n                        <p className=\"text-white border-b border-surfaceHighlight pb-2\">{user.pixKey}</p>\r\n                    </div>\r\n                    <div>\r\n                        <label className=\"text-xs text-zinc-500\">CPF</label>\r\n                        <div className=\"flex items-center justify-between border-b border-surfaceHighlight pb-2\">\r\n                            {user.cpf ? (\r\n                                <p className=\"text-white font-mono\">{formatCpf(user.cpf)}</p>\r\n                            ) : (\r\n                                <div className=\"flex items-center gap-2\">\r\n                                    <AlertCircle size={14} className=\"text-yellow-500\" />\r\n                                    <p className=\"text-yellow-500 text-sm\">N├úo cadastrado</p>\r\n                                </div>\r\n                            )}\r\n                            <button\r\n                                onClick={() => { setCpfInput(user.cpf || ''); setShowCpfModal(true); }}\r\n                                className=\"text-xs text-primary-400 hover:text-primary-300 font-bold\"\r\n                            >\r\n                                {user.cpf ? 'Editar' : 'Adicionar'}\r\n                            </button>\r\n                        </div>\r\n                        {!user.cpf && (\r\n                            <p className=\"text-xs text-yellow-500/70 mt-1 italic\">\r\n                                ÔÜá´©Å CPF obrigat├│rio para realizar saques\r\n                            </p>\r\n                        )}\r\n                    </div>\r\n                    <div>\r\n                        <label className=\"text-xs text-zinc-500\">Score de Confian├ºa</label>\r\n                        <div className=\"flex items-center gap-2 border-b border-surfaceHighlight pb-2\">\r\n                            <Star size={16} className=\"text-primary-400\" fill=\"currentColor\" />\r\n                            <p className=\"text-white font-bold\">{user.score || 0}</p>\r\n                            <span className=\"text-[10px] px-2 py-0.5 rounded bg-surfaceHighlight text-zinc-400\">\r\n                                {(user.score || 0) > 700 ? 'Excelente' : (user.score || 0) > 400 ? 'Bom' : 'Regular'}\r\n                            </span>\r\n                        </div>\r\n                    </div>\r\n                    <div>\r\n                        <label className=\"text-xs text-zinc-500\">C├│digo de Indica├º├úo</label>\r\n                        <div className=\"flex items-center gap-2\">\r\n                            <p className=\"text-primary-400 font-bold text-xl\">{user.referralCode}</p>\r\n                            <button title=\"Copiar\" className=\"text-zinc-500 hover:text-white\" onClick={() => {\r\n                                navigator.clipboard.writeText(user.referralCode);\r\n                            }}><Copy size={16} /></button>\r\n                        </div>\r\n                        <p className=\"text-xs text-zinc-500 mt-1\">Compartilhe e ganhe R$ 5,00 por amigo.</p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"pt-4\">\r\n                <h3 className=\"text-xs font-bold text-zinc-500 uppercase tracking-widest ml-1 mb-4\">Seguran├ºa</h3>\r\n                <div className=\"space-y-3\">\r\n                    <button\r\n                        onClick={() => setShowChangePassword(true)}\r\n                        className=\"w-full bg-surfaceHighlight hover:bg-zinc-800 text-white border border-white/5 py-4 rounded-xl font-bold transition flex items-center justify-between px-4 group\"\r\n                    >\r\n                        <span className=\"flex items-center gap-3\">\r\n                            <Lock size={18} className=\"text-zinc-400 group-hover:text-primary-400 transition-colors\" />\r\n                            Alterar Senha\r\n                        </span>\r\n                        <ChevronRight size={16} className=\"text-zinc-600 group-hover:text-white transition-colors\" />\r\n                    </button>\r\n\r\n                    <button\r\n                        onClick={handle2FASetup}\r\n                        className=\"w-full bg-surfaceHighlight hover:bg-zinc-800 text-white border border-white/5 py-4 rounded-xl font-bold transition flex items-center justify-between px-4 group\"\r\n                    >\r\n                        <span className=\"flex items-center gap-3\">\r\n                            <ShieldCheck size={18} className={`${user.twoFactorEnabled ? 'text-emerald-400' : 'text-zinc-400'} group-hover:text-primary-400 transition-colors`} />\r\n                            Autentica├º├úo 2FA\r\n                        </span>\r\n                        <div className=\"flex items-center gap-2\">\r\n                            {!user.twoFactorEnabled ? (\r\n                                <span className=\"text-[10px] bg-primary-500 text-black px-2 py-1 rounded-full font-extrabold animate-pulse\">\r\n                                    ATIVAR AGORA\r\n                                </span>\r\n                            ) : (\r\n                                <span className=\"text-[10px] text-emerald-500 font-bold uppercase tracking-widest\">Ativo</span>\r\n                            )}\r\n                            <ChevronRight size={16} className=\"text-zinc-600 group-hover:text-white transition-colors\" />\r\n                        </div>\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"pt-8\">\r\n                <h3 className=\"text-xs font-bold text-zinc-500 uppercase tracking-widest ml-1 mb-4\">Conta</h3>\r\n                <div className=\"space-y-3\">\r\n\r\n                    <button onClick={() => window.dispatchEvent(new CustomEvent('open-bug-report'))} className=\"w-full bg-surfaceHighlight hover:bg-zinc-800 text-white border border-white/5 py-4 rounded-xl font-bold transition flex items-center justify-between px-4 group\">\r\n                        <span className=\"flex items-center gap-3\">\r\n                            <Bug size={18} className=\"text-zinc-400 group-hover:text-red-400 transition-colors\" />\r\n                            Reportar Problema\r\n                        </span>\r\n                        <ChevronRight size={16} className=\"text-zinc-600 group-hover:text-white transition-colors\" />\r\n                    </button>\r\n\r\n                    <button onClick={() => navigate('/app/bug-reports')} className=\"w-full bg-surfaceHighlight hover:bg-zinc-800 text-white border border-white/5 py-4 rounded-xl font-bold transition flex items-center justify-between px-4 group\">\r\n                        <span className=\"flex items-center gap-3\">\r\n                            <FileText size={18} className=\"text-zinc-400 group-hover:text-primary-400 transition-colors\" />\r\n                            Meus Relat├│rios\r\n                        </span>\r\n                        <ChevronRight size={16} className=\"text-zinc-600 group-hover:text-white transition-colors\" />\r\n                    </button>\r\n\r\n                    <button onClick={onLogout} className=\"w-full bg-surfaceHighlight hover:bg-zinc-800 text-white border border-white/5 py-4 rounded-xl font-bold transition flex items-center justify-between px-4 group\">\r\n                        <span className=\"flex items-center gap-3\">\r\n                            <LogOut size={18} className=\"text-zinc-400 group-hover:text-white transition-colors\" />\r\n                            Sair do App\r\n                        </span>\r\n                        <ChevronRight size={16} className=\"text-zinc-600 group-hover:text-white transition-colors\" />\r\n                    </button>\r\n\r\n                    <button onClick={() => setShowConfirmDelete(true)} className=\"w-full bg-red-500/10 hover:bg-red-500/20 text-red-500 border border-red-500/20 py-4 rounded-xl font-bold transition flex items-center justify-between px-4 group\">\r\n                        <span className=\"flex items-center gap-3\">\r\n                            <Trash2 size={18} className=\"text-red-500/60 group-hover:text-red-500 transition-colors\" />\r\n                            Encerrar Conta\r\n                        </span>\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            <ConfirmModal\r\n                isOpen={showConfirmDelete}\r\n                onClose={() => { setShowConfirmDelete(false); setDeleteCode(''); }}\r\n                onConfirm={() => onDeleteAccount(deleteCode)}\r\n                title=\"Encerrar Conta\"\r\n                message=\"Tem certeza? Essa a├º├úo n├úo pode ser desfeita e todos os seus dados ser├úo anonimizados.\"\r\n                confirmText=\"Sim, Encerrar Conta\"\r\n                type=\"danger\"\r\n            >\r\n                {user.twoFactorEnabled && (\r\n                    <div className=\"mb-6 animate-in slide-in-from-top-2\">\r\n                        <label className=\"text-xs text-zinc-500 mb-2 block font-bold uppercase tracking-widest\">C├│digo 2FA para Confirmar</label>\r\n                        <div className=\"relative\">\r\n                            <ShieldCheck className=\"absolute left-3 top-3 text-zinc-500\" size={18} />\r\n                            <input\r\n                                type=\"text\"\r\n                                inputMode=\"numeric\"\r\n                                autoComplete=\"one-time-code\"\r\n                                placeholder=\"000 000\"\r\n                                value={deleteCode}\r\n                                onChange={e => setDeleteCode(e.target.value.replace(/\\D/g, '').slice(0, 6))}\r\n                                className=\"w-full bg-background border border-surfaceHighlight rounded-xl py-3 pl-10 text-white focus:border-red-500 outline-none transition text-lg tracking-[0.3em] font-mono\"\r\n                                autoFocus\r\n                            />\r\n                        </div>\r\n                        <p className=\"text-[10px] text-zinc-500 mt-2\">Por seguran├ºa, insira o c├│digo do seu autenticador.</p>\r\n                    </div>\r\n                )}\r\n            </ConfirmModal>\r\n\r\n            {/* Change Password Modal */}\r\n            {showChangePassword && (\r\n                <div className=\"fixed inset-0 bg-black/80 flex items-center justify-center z-[100] p-4\" onClick={(e) => { if (e.target === e.currentTarget) setShowChangePassword(false); }}>\r\n                    <div className=\"bg-surface border border-surfaceHighlight rounded-3xl p-6 w-full max-w-sm relative animate-fade-in shadow-2xl\">\r\n                        <button title=\"Fechar\" onClick={() => setShowChangePassword(false)} className=\"absolute top-4 right-4 text-zinc-400 hover:text-white bg-zinc-800 p-1.5 rounded-full z-10\"><XIcon size={24} /></button>\r\n\r\n                        <h3 className=\"text-xl font-bold text-white mb-4\">Alterar Senha</h3>\r\n\r\n                        <form onSubmit={handlePasswordChange} className=\"space-y-4\">\r\n                            <div>\r\n                                <label className=\"text-xs text-zinc-400 font-medium mb-1.5 block\">Senha Atual</label>\r\n                                <input\r\n                                    type=\"password\"\r\n                                    required\r\n                                    value={oldPassword}\r\n                                    onChange={(e) => setOldPassword(e.target.value)}\r\n                                    className=\"w-full bg-background border border-surfaceHighlight rounded-xl py-3 px-4 text-white focus:border-primary-500 outline-none transition\"\r\n                                />\r\n                            </div>\r\n                            <div>\r\n                                <label className=\"text-xs text-zinc-400 font-medium mb-1.5 block\">Nova Senha</label>\r\n                                <input\r\n                                    type=\"password\"\r\n                                    required\r\n                                    value={newPassword}\r\n                                    onChange={(e) => setNewPassword(e.target.value)}\r\n                                    className=\"w-full bg-background border border-surfaceHighlight rounded-xl py-3 px-4 text-white focus:border-primary-500 outline-none transition\"\r\n                                />\r\n                            </div>\r\n                            <div>\r\n                                <label className=\"text-xs text-zinc-400 font-medium mb-1.5 block\">Confirmar Nova Senha</label>\r\n                                <input\r\n                                    type=\"password\"\r\n                                    required\r\n                                    value={confirmPassword}\r\n                                    onChange={(e) => setConfirmPassword(e.target.value)}\r\n                                    className=\"w-full bg-background border border-surfaceHighlight rounded-xl py-3 px-4 text-white focus:border-primary-500 outline-none transition\"\r\n                                />\r\n                            </div>\r\n\r\n                            {error && (\r\n                                <div className=\"bg-red-500/10 border border-red-500/20 text-red-400 text-xs p-3 rounded-lg\">\r\n                                    {error}\r\n                                </div>\r\n                            )}\r\n\r\n                            <button\r\n                                type=\"submit\"\r\n                                disabled={isSubmitting}\r\n                                className=\"w-full bg-primary-500 hover:bg-primary-400 disabled:opacity-50 text-black font-bold py-3 rounded-xl mt-2 transition\"\r\n                            >\r\n                                {isSubmitting ? 'Alterando...' : 'Alterar Senha'}\r\n                            </button>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* 2FA Setup Modal */}\r\n            {show2FASetup && (\r\n                <div className=\"fixed inset-0 bg-black/95 flex items-center justify-center z-[110] p-4 animate-in fade-in duration-300 backdrop-blur-md\">\r\n                    <div className=\"bg-zinc-950 border border-zinc-800 rounded-[2.5rem] p-6 md:p-8 w-full max-w-md relative shadow-2xl max-h-[90vh] overflow-y-auto custom-scrollbar\">\r\n                        <button onClick={() => setShow2FASetup(false)} className=\"absolute top-4 right-4 text-zinc-400 hover:text-white transition-colors z-10\"><XIcon size={24} /></button>\r\n\r\n                        <div className=\"text-center mb-8\">\r\n                            <div className=\"w-16 h-16 bg-primary-500/20 rounded-2xl flex items-center justify-center mx-auto mb-4\">\r\n                                <ShieldCheck size={32} className=\"text-primary-500\" />\r\n                            </div>\r\n                            <h3 className=\"text-2xl font-bold text-white mb-2\">Seguran├ºa 2FA</h3>\r\n                            <p className=\"text-zinc-400 text-sm\">Escaneie o QR Code abaixo no seu app de autentica├º├úo.</p>\r\n                        </div>\r\n\r\n                        {twoFactorData?.qrCode && (\r\n                            <div className=\"space-y-4 mb-6\">\r\n                                <div className=\"bg-white p-3 rounded-2xl mx-auto w-fit shadow-lg\">\r\n                                    <img src={twoFactorData.qrCode} alt=\"2FA QR Code\" className=\"w-40 h-40\" />\r\n                                </div>\r\n                                {twoFactorData?.otpUri && (\r\n                                    <a\r\n                                        href={twoFactorData.otpUri}\r\n                                        className=\"w-full bg-primary-500/10 hover:bg-primary-500/20 text-primary-400 border border-primary-500/30 py-3 rounded-xl flex items-center justify-center gap-2 text-xs font-bold transition-all group\"\r\n                                    >\r\n                                        <QrCode size={16} className=\"group-hover:rotate-12 transition-transform\" />\r\n                                        Configurar no Navegador\r\n                                    </a>\r\n                                )}\r\n                            </div>\r\n                        )}\r\n\r\n                        <div className=\"bg-zinc-900/50 border border-zinc-800 rounded-2xl p-4 mb-6 space-y-4\">\r\n                            <div className=\"flex justify-between items-start border-b border-white/5 pb-3\">\r\n                                <div>\r\n                                    <p className=\"text-[10px] text-zinc-500 uppercase font-bold mb-1\">Emissor</p>\r\n                                    <p className=\"text-white font-medium\">Cred30</p>\r\n                                </div>\r\n                                <div className=\"text-right\">\r\n                                    <p className=\"text-[10px] text-zinc-500 uppercase font-bold mb-1\">Conta</p>\r\n                                    <p className=\"text-white font-medium truncate max-w-[120px]\">{user.email}</p>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div>\r\n                                <p className=\"text-[10px] text-zinc-500 uppercase font-bold mb-2\">Chave Secreta</p>\r\n                                <div className=\"flex items-center gap-2\">\r\n                                    <div className=\"flex-1 bg-black/40 border border-white/10 rounded-xl px-3 py-2 font-mono text-primary-400 text-sm font-bold tracking-wider overflow-x-auto whitespace-nowrap hide-scrollbar\">\r\n                                        {twoFactorData?.secret}\r\n                                    </div>\r\n                                    <button\r\n                                        onClick={() => {\r\n                                            navigator.clipboard.writeText(twoFactorData?.secret || '');\r\n                                            setSuccessMessage('Copiado!');\r\n                                            setTimeout(() => setSuccessMessage(''), 2000);\r\n                                        }}\r\n                                        className=\"h-10 w-10 bg-primary-500/10 hover:bg-primary-500/20 text-primary-400 border border-primary-500/30 rounded-xl flex items-center justify-center transition-all active:scale-90\"\r\n                                    >\r\n                                        <Copy size={16} />\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {error && <div className=\"mb-4 text-red-500 text-center text-xs\">{error}</div>}\r\n                        {successMessage && <div className=\"mb-4 text-emerald-500 text-center text-xs font-bold animate-pulse\">{successMessage}</div>}\r\n\r\n                        <form onSubmit={handleVerify2FA} className=\"space-y-4\">\r\n                            <input\r\n                                type=\"text\"\r\n                                inputMode=\"numeric\"\r\n                                autoComplete=\"one-time-code\"\r\n                                placeholder=\"000000\"\r\n                                value={verifyCode}\r\n                                onChange={e => setVerifyCode(e.target.value.replace(/\\D/g, '').slice(0, 6))}\r\n                                className=\"w-full bg-background border border-surfaceHighlight rounded-xl py-4 text-center text-white text-3xl tracking-[0.3em] font-mono focus:border-primary-500 outline-none\"\r\n                                required\r\n                            />\r\n                            <button\r\n                                type=\"submit\"\r\n                                disabled={isSubmitting}\r\n                                className=\"w-full bg-primary-500 hover:bg-primary-400 text-black font-bold py-4 rounded-xl transition shadow-lg shadow-primary-500/20\"\r\n                            >\r\n                                {isSubmitting ? 'Verificando...' : 'Ativar 2FA Agora'}\r\n                            </button>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            )}\r\n            {/* CPF Edit Modal */}\r\n            {showCpfModal && (\r\n                <div className=\"fixed inset-0 bg-black/80 flex items-center justify-center z-[100] p-4\" onClick={(e) => { if (e.target === e.currentTarget) setShowCpfModal(false); }}>\r\n                    <div className=\"bg-surface border border-surfaceHighlight rounded-3xl p-6 w-full max-w-sm relative animate-fade-in shadow-2xl\">\r\n                        <button title=\"Fechar\" onClick={() => setShowCpfModal(false)} className=\"absolute top-4 right-4 text-zinc-400 hover:text-white bg-zinc-800 p-1.5 rounded-full z-10\"><XIcon size={24} /></button>\r\n\r\n                        <h3 className=\"text-xl font-bold text-white mb-2\">{user.cpf ? 'Editar CPF' : 'Adicionar CPF'}</h3>\r\n                        <p className=\"text-zinc-400 text-sm mb-6\">Seu CPF ├® necess├írio para realizar saques via PIX.</p>\r\n\r\n                        <div className=\"space-y-4\">\r\n                            <div>\r\n                                <label className=\"text-xs text-zinc-400 font-medium mb-1.5 block\">CPF</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    inputMode=\"numeric\"\r\n                                    placeholder=\"000.000.000-00\"\r\n                                    value={formatCpf(cpfInput)}\r\n                                    onChange={(e) => setCpfInput(e.target.value.replace(/\\D/g, '').slice(0, 11))}\r\n                                    className=\"w-full bg-background border border-surfaceHighlight rounded-xl py-3 px-4 text-white text-lg font-mono tracking-wider focus:border-primary-500 outline-none transition\"\r\n                                />\r\n                            </div>\r\n\r\n                            {cpfError && (\r\n                                <div className=\"bg-red-500/10 border border-red-500/20 text-red-400 text-xs p-3 rounded-lg flex items-center gap-2\">\r\n                                    <AlertCircle size={14} />\r\n                                    {cpfError}\r\n                                </div>\r\n                            )}\r\n\r\n                            {cpfSuccess && (\r\n                                <div className=\"bg-emerald-500/10 border border-emerald-500/20 text-emerald-400 text-xs p-3 rounded-lg flex items-center gap-2\">\r\n                                    <Check size={14} />\r\n                                    {cpfSuccess}\r\n                                </div>\r\n                            )}\r\n\r\n                            <button\r\n                                onClick={handleSaveCpf}\r\n                                disabled={savingCpf || cpfInput.length !== 11}\r\n                                className=\"w-full bg-primary-500 hover:bg-primary-400 disabled:opacity-50 text-black font-bold py-3 rounded-xl transition\"\r\n                            >\r\n                                {savingCpf ? 'Salvando...' : 'Salvar CPF'}\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            <div className=\"pt-8 text-center\">\r\n                <p className=\"text-zinc-600 text-xs font-mono\">Vers├úo 2.1.0 ÔÇó Cred30</p>\r\n            </div>\r\n        </div >\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josia\\Desktop\\projetos\\cred30\\packages\\frontend-v2\\src\\presentation\\components\\views\\SupportAdminView.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","message":"Definition for rule '@typescript-eslint/no-unused-vars' was not found.","line":1,"column":1,"endLine":1,"endColumn":2,"severity":2,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useRef } from 'react';\r\nimport { apiService } from '../../../application/services/api.service';\r\nimport { MessageSquare, User, Clock, Send, CheckCircle, RefreshCw, XCircle, Star, BarChart3 } from 'lucide-react';\r\n\r\ninterface SupportChat {\r\n    id: number;\r\n    user_id: number;\r\n    user_name: string;\r\n    user_email: string;\r\n    status: 'AI_ONLY' | 'PENDING_HUMAN' | 'ACTIVE_HUMAN' | 'CLOSED';\r\n    last_message_at: string;\r\n    created_at: string;\r\n    rating?: number;\r\n    feedback_comment?: string;\r\n}\r\n\r\ninterface ChatMessage {\r\n    id: number;\r\n    chat_id: number;\r\n    role: 'user' | 'assistant' | 'admin';\r\n    content: string;\r\n    created_at: string;\r\n}\r\n\r\nexport const SupportAdminView = () => {\r\n    const [viewMode, setViewMode] = useState<'chats' | 'feedback'>('chats');\r\n    const [chats, setChats] = useState<SupportChat[]>([]);\r\n    const [feedbacks, setFeedbacks] = useState<SupportChat[]>([]);\r\n    const [selectedChat, setSelectedChat] = useState<SupportChat | null>(null);\r\n    const [messages, setMessages] = useState<ChatMessage[]>([]);\r\n    const [newMessage, setNewMessage] = useState('');\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [isSending, setIsSending] = useState(false);\r\n    const messagesEndRef = useRef<HTMLDivElement>(null);\r\n\r\n    useEffect(() => {\r\n        if (viewMode === 'chats') {\r\n            loadPendingChats();\r\n            const interval = setInterval(loadPendingChats, 10000);\r\n            return () => clearInterval(interval);\r\n        } else {\r\n            loadFeedbacks();\r\n        }\r\n    }, [viewMode]);\r\n\r\n    useEffect(() => {\r\n        if (selectedChat && viewMode === 'chats') {\r\n            loadMessages(selectedChat.id);\r\n            const interval = setInterval(() => loadMessages(selectedChat.id), 5000);\r\n            return () => clearInterval(interval);\r\n        }\r\n    }, [selectedChat?.id, viewMode]);\r\n\r\n    useEffect(() => {\r\n        messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n    }, [messages]);\r\n\r\n    const loadPendingChats = async () => {\r\n        try {\r\n            setIsLoading(true);\r\n            const data = await apiService.getPendingSupportChats();\r\n            setChats(data.chats || []);\r\n        } catch (error) {\r\n            console.error('Erro ao carregar chats:', error);\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    const loadFeedbacks = async () => {\r\n        try {\r\n            setIsLoading(true);\r\n            const data = await apiService.getSupportFeedbacks();\r\n            setFeedbacks(data.feedbacks || []);\r\n        } catch (error) {\r\n            console.error('Erro ao carregar feedbacks:', error);\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    const loadMessages = async (chatId: number) => {\r\n        try {\r\n            const data = await apiService.getAdminChatHistory(chatId);\r\n            if (data && data.messages) {\r\n                setMessages(data.messages);\r\n            }\r\n        } catch (error) {\r\n            console.error('Erro ao carregar mensagens:', error);\r\n        }\r\n    };\r\n\r\n    const handleSendMessage = async () => {\r\n        if (!selectedChat || !newMessage.trim() || isSending) return;\r\n\r\n        try {\r\n            setIsSending(true);\r\n            await apiService.respondSupportChat(selectedChat.id, newMessage);\r\n            setNewMessage('');\r\n            await loadMessages(selectedChat.id);\r\n            await loadPendingChats();\r\n        } catch (error) {\r\n            console.error('Erro ao enviar resposta:', error);\r\n        } finally {\r\n            setIsSending(false);\r\n        }\r\n    };\r\n\r\n    const handleCloseChat = async () => {\r\n        if (!selectedChat || !window.confirm('Deseja realmente encerrar este atendimento? O cliente ser├í notificado para avaliar.')) return;\r\n\r\n        try {\r\n            setIsLoading(true);\r\n            await apiService.closeSupportChat(selectedChat.id);\r\n            setSelectedChat(null);\r\n            await loadPendingChats();\r\n        } catch (error) {\r\n            console.error('Erro ao encerrar chat:', error);\r\n            alert('Erro ao encerrar atendimento.');\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    const getStatusColor = (status: string) => {\r\n        switch (status) {\r\n            case 'PENDING_HUMAN': return 'bg-orange-500/10 text-orange-400 border-orange-500/20';\r\n            case 'ACTIVE_HUMAN': return 'bg-emerald-500/10 text-emerald-400 border-emerald-500/20';\r\n            default: return 'bg-zinc-800 text-zinc-400 border-zinc-700';\r\n        }\r\n    };\r\n\r\n    const getStatusLabel = (status: string) => {\r\n        switch (status) {\r\n            case 'PENDING_HUMAN': return 'AGUARDANDO';\r\n            case 'ACTIVE_HUMAN': return 'EM ATENDIMENTO';\r\n            case 'AI_ONLY': return 'IA';\r\n            case 'CLOSED': return 'FECHADO';\r\n            default: return status;\r\n        }\r\n    };\r\n\r\n    const averageRating = feedbacks.length > 0\r\n        ? (feedbacks.reduce((acc, curr) => acc + (curr.rating || 0), 0) / feedbacks.length).toFixed(1)\r\n        : \"0.0\";\r\n\r\n    return (\r\n        <div className=\"flex flex-col gap-6 h-[800px] animate-in fade-in duration-700\">\r\n            {/* Tabs */}\r\n            <div className=\"flex gap-2 p-1 bg-zinc-900 border border-zinc-800 rounded-2xl w-fit\">\r\n                <button\r\n                    onClick={() => setViewMode('chats')}\r\n                    className={`flex items-center gap-2 px-4 py-2 rounded-xl text-xs font-bold transition ${viewMode === 'chats' ? 'bg-primary-500 text-black' : 'text-zinc-500 hover:text-white'}`}\r\n                >\r\n                    <MessageSquare size={16} />\r\n                    Atendimentos Ativos\r\n                </button>\r\n                <button\r\n                    onClick={() => setViewMode('feedback')}\r\n                    className={`flex items-center gap-2 px-4 py-2 rounded-xl text-xs font-bold transition ${viewMode === 'feedback' ? 'bg-primary-500 text-black' : 'text-zinc-500 hover:text-white'}`}\r\n                >\r\n                    <BarChart3 size={16} />\r\n                    Relat├│rio de Feedback ({averageRating} Ôÿà)\r\n                </button>\r\n            </div>\r\n\r\n            {viewMode === 'chats' ? (\r\n                <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8 flex-1 min-h-0\">\r\n                    {/* Lista de Chats */}\r\n                    <div className=\"lg:col-span-1 bg-zinc-900/50 border border-zinc-800 rounded-3xl flex flex-col overflow-hidden shadow-2xl\">\r\n                        <div className=\"p-6 border-b border-zinc-800 flex justify-between items-center bg-zinc-800/20\">\r\n                            <h3 className=\"text-lg font-bold text-white flex items-center gap-3\">\r\n                                <MessageSquare className=\"text-primary-400\" size={20} />\r\n                                Chamados\r\n                            </h3>\r\n                            <button onClick={loadPendingChats} className=\"p-2 hover:bg-zinc-800 rounded-lg transition text-zinc-400\">\r\n                                <RefreshCw size={16} className={isLoading ? \"animate-spin\" : \"\"} />\r\n                            </button>\r\n                        </div>\r\n                        <div className=\"flex-1 overflow-y-auto custom-scrollbar\">\r\n                            {chats.length === 0 ? (\r\n                                <div className=\"p-12 text-center text-zinc-500\">\r\n                                    <CheckCircle size={40} className=\"mx-auto mb-4 opacity-20\" />\r\n                                    <p className=\"font-medium\">Nenhum chamado pendente.</p>\r\n                                </div>\r\n                            ) : (\r\n                                chats.map((chat) => (\r\n                                    <button\r\n                                        key={chat.id}\r\n                                        onClick={() => setSelectedChat(chat)}\r\n                                        className={`w-full p-6 border-b border-zinc-800/50 flex flex-col gap-2 transition-all text-left ${selectedChat?.id === chat.id ? 'bg-primary-500/5 border-l-4 border-l-primary-500' : 'hover:bg-zinc-800/30'}`}\r\n                                    >\r\n                                        <div className=\"flex justify-between items-start\">\r\n                                            <span className=\"text-white font-bold text-sm truncate max-w-[150px]\">{chat.user_name}</span>\r\n                                            <span className={`text-[9px] font-black px-2 py-0.5 rounded border ${getStatusColor(chat.status)}`}>\r\n                                                {getStatusLabel(chat.status)}\r\n                                            </span>\r\n                                        </div>\r\n                                        <p className=\"text-[10px] text-zinc-500 truncate\">{chat.user_email}</p>\r\n                                        <div className=\"flex items-center gap-1.5 text-[9px] text-zinc-600 font-bold uppercase mt-1\">\r\n                                            <Clock size={10} />\r\n                                            {new Date(chat.last_message_at).toLocaleTimeString()}\r\n                                        </div>\r\n                                    </button>\r\n                                ))\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Janela de Chat */}\r\n                    <div className=\"lg:col-span-2 bg-zinc-900/50 border border-zinc-800 rounded-3xl flex flex-col overflow-hidden shadow-2xl relative\">\r\n                        {!selectedChat ? (\r\n                            <div className=\"flex-1 flex flex-col items-center justify-center p-12 text-center\">\r\n                                <div className=\"w-20 h-20 bg-zinc-800 rounded-full flex items-center justify-center mb-6\">\r\n                                    <MessageSquare size={40} className=\"text-zinc-600\" />\r\n                                </div>\r\n                                <h4 className=\"text-white font-bold text-xl mb-2\">Selecione um Atendimento</h4>\r\n                                <p className=\"text-zinc-500 text-sm max-w-sm\">Escolha um chamado na lista ao lado para come├ºar a responder aos associados.</p>\r\n                            </div>\r\n                        ) : (\r\n                            <>\r\n                                <div className=\"p-6 border-b border-zinc-800 bg-zinc-800/20 flex justify-between items-center\">\r\n                                    <div className=\"flex gap-4 items-center\">\r\n                                        <div className=\"w-12 h-12 bg-primary-500/10 rounded-2xl flex items-center justify-center text-primary-400 border border-primary-500/20\">\r\n                                            <User size={24} />\r\n                                        </div>\r\n                                        <div>\r\n                                            <h4 className=\"text-white font-bold leading-tight\">{selectedChat.user_name}</h4>\r\n                                            <p className=\"text-xs text-zinc-500\">{selectedChat.user_email}</p>\r\n                                        </div>\r\n                                    </div>\r\n                                    <button\r\n                                        onClick={handleCloseChat}\r\n                                        className=\"flex items-center gap-2 bg-red-500/10 hover:bg-red-500/20 text-red-500 border border-red-500/20 px-4 py-2 rounded-xl text-xs font-bold transition\"\r\n                                    >\r\n                                        <XCircle size={16} />\r\n                                        Encerrar\r\n                                    </button>\r\n                                </div>\r\n\r\n                                <div className=\"flex-1 overflow-y-auto p-6 space-y-4 bg-black/20 custom-scrollbar\">\r\n                                    {messages.map((msg) => (\r\n                                        <div key={msg.id} className={`flex ${msg.role === 'admin' ? 'justify-end' : 'justify-start'}`}>\r\n                                            <div className={`max-w-[70%] space-y-1`}>\r\n                                                <div className={`p-4 rounded-2xl text-sm ${msg.role === 'admin'\r\n                                                    ? 'bg-primary-500 text-black rounded-tr-none'\r\n                                                    : msg.role === 'assistant'\r\n                                                        ? 'bg-zinc-800 text-zinc-400 italic rounded-tl-none border border-zinc-700'\r\n                                                        : 'bg-zinc-800 text-white rounded-tl-none border border-zinc-700'\r\n                                                    }`}>\r\n                                                    {msg.content}\r\n                                                </div>\r\n                                                <p className={`text-[9px] text-zinc-600 font-bold uppercase ${msg.role === 'admin' ? 'text-right' : 'text-left'}`}>\r\n                                                    {msg.role === 'admin' ? 'VOC├è' : msg.role === 'assistant' ? 'IA' : 'ASSOCIADO'} ÔÇó {new Date(msg.created_at).toLocaleTimeString()}\r\n                                                </p>\r\n                                            </div>\r\n                                        </div>\r\n                                    ))}\r\n                                    <div ref={messagesEndRef} />\r\n                                </div>\r\n\r\n                                <div className=\"p-6 border-t border-zinc-800 bg-zinc-900\">\r\n                                    <div className=\"flex gap-4\">\r\n                                        <textarea\r\n                                            value={newMessage}\r\n                                            onChange={(e) => setNewMessage(e.target.value)}\r\n                                            onKeyPress={(e) => {\r\n                                                if (e.key === 'Enter' && !e.shiftKey) {\r\n                                                    e.preventDefault();\r\n                                                    handleSendMessage();\r\n                                                }\r\n                                            }}\r\n                                            placeholder=\"Digite sua resposta...\"\r\n                                            className=\"flex-1 bg-black/40 border border-zinc-800 rounded-2xl px-5 py-4 text-white text-sm outline-none focus:border-primary-500/50 transition-all resize-none h-14\"\r\n                                            disabled={isSending}\r\n                                        />\r\n                                        <button\r\n                                            onClick={handleSendMessage}\r\n                                            disabled={isSending || !newMessage.trim()}\r\n                                            className=\"bg-primary-500 hover:bg-primary-400 disabled:opacity-50 text-black p-4 rounded-2xl transition shadow-lg shrink-0\"\r\n                                        >\r\n                                            <Send size={20} />\r\n                                        </button>\r\n                                    </div>\r\n                                </div>\r\n                            </>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            ) : (\r\n                <div className=\"bg-zinc-900/50 border border-zinc-800 rounded-3xl overflow-hidden shadow-2xl flex flex-col flex-1 min-h-0\">\r\n                    <div className=\"p-8 border-b border-zinc-800 bg-zinc-800/20 flex justify-between items-center\">\r\n                        <div>\r\n                            <h3 className=\"text-xl font-bold text-white mb-1\">Satisfa├º├úo dos Associados</h3>\r\n                            <p className=\"text-sm text-zinc-500\">M├®dia geral baseada em {feedbacks.length} avalia├º├Áes.</p>\r\n                        </div>\r\n                        <div className=\"text-right\">\r\n                            <div className=\"text-4xl font-black text-primary-500 flex items-center gap-2 justify-end\">\r\n                                {averageRating}\r\n                                <Star size={32} fill=\"currentColor\" />\r\n                            </div>\r\n                            <p className=\"text-[10px] text-zinc-600 font-bold uppercase tracking-widest mt-1\">META: 4.8 OU SUPERIOR</p>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"flex-1 overflow-y-auto p-8 custom-scrollbar\">\r\n                        {feedbacks.length === 0 ? (\r\n                            <div className=\"p-12 text-center text-zinc-500\">\r\n                                <Star size={60} className=\"mx-auto mb-4 opacity-10\" />\r\n                                <p className=\"font-medium text-lg text-zinc-400\">Nenhuma avalia├º├úo recebida ainda.</p>\r\n                                <p className=\"text-sm\">Encerre atendimentos para come├ºar a coletar satisfa├º├úo.</p>\r\n                            </div>\r\n                        ) : (\r\n                            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                                {feedbacks.map((f) => (\r\n                                    <div key={f.id} className=\"bg-zinc-800/30 border border-zinc-700/50 p-6 rounded-3xl flex flex-col gap-4\">\r\n                                        <div className=\"flex justify-between items-start\">\r\n                                            <div className=\"flex items-center gap-3\">\r\n                                                <div className=\"w-10 h-10 bg-zinc-700 rounded-xl flex items-center justify-center text-zinc-400 font-bold\">\r\n                                                    {f.user_name?.[0] || 'U'}\r\n                                                </div>\r\n                                                <div>\r\n                                                    <h4 className=\"text-white font-bold text-sm\">{f.user_name}</h4>\r\n                                                    <p className=\"text-[10px] text-zinc-500\">{new Date(f.last_message_at).toLocaleDateString()}</p>\r\n                                                </div>\r\n                                            </div>\r\n                                            <div className=\"flex text-yellow-500\">\r\n                                                {[...Array(5)].map((_, i) => (\r\n                                                    <Star key={i} size={14} fill={i < (f.rating || 0) ? \"currentColor\" : \"none\"} />\r\n                                                ))}\r\n                                            </div>\r\n                                        </div>\r\n                                        {f.feedback_comment && (\r\n                                            <div className=\"bg-black/20 p-4 rounded-2xl border border-zinc-700/30\">\r\n                                                <p className=\"text-xs text-zinc-300 italic\">\"{f.feedback_comment}\"</p>\r\n                                            </div>\r\n                                        )}\r\n                                        <div className=\"flex items-center gap-1.5 text-[9px] text-zinc-600 font-bold uppercase mt-auto\">\r\n                                            <Clock size={10} />\r\n                                            ID DO CHAT: #{f.id}\r\n                                        </div>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josia\\Desktop\\projetos\\cred30\\packages\\frontend-v2\\src\\presentation\\components\\views\\ViewFarmView.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","message":"Definition for rule '@typescript-eslint/no-unused-vars' was not found.","line":1,"column":1,"endLine":1,"endColumn":2,"severity":2,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useRef } from 'react';\r\nimport { Play, ChevronRight, X, Clock, Trophy, Zap, AlertTriangle, Loader2 } from 'lucide-react';\r\nimport { apiService } from '../../../application/services/api.service';\r\n\r\ndeclare global {\r\n    interface Window {\r\n        onYouTubeIframeAPIReady: () => void;\r\n        YT: any;\r\n    }\r\n}\r\n\r\ninterface VideoToWatch {\r\n    id: string;\r\n    title: string;\r\n    videoUrl: string;\r\n    platform: string;\r\n    minWatchSeconds: number;\r\n    viewerEarningPoints: number;\r\n    promoterName: string;\r\n    thumbnailUrl?: string; // Para o preview antes de come├ºar\r\n}\r\n\r\ninterface ViewFarmViewProps {\r\n    onBack: () => void;\r\n    onSuccess: (title: string, message: string) => void;\r\n    onError: (title: string, message: string) => void;\r\n    onRefresh: () => void;\r\n}\r\n\r\nexport const ViewFarmView: React.FC<ViewFarmViewProps> = ({ onBack, onSuccess, onError, onRefresh }) => {\r\n    const [currentVideo, setCurrentVideo] = useState<VideoToWatch | null>(null);\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const [isWatching, setIsWatching] = useState(false);\r\n    const [progress, setProgress] = useState(0);\r\n    const [isComplete, setIsComplete] = useState(false);\r\n    const [dailyGoal, setDailyGoal] = useState({ current: 0, target: 10 });\r\n    const [isSubmitting, setIsSubmitting] = useState(false);\r\n    const [playerState, setPlayerState] = useState<number>(-1); // -1: unstarted, 0: ended, 1: playing, 2: paused\r\n    const timerRef = useRef<NodeJS.Timeout | null>(null);\r\n    const playerRef = useRef<any>(null);\r\n\r\n    const loadNextVideo = async () => {\r\n        setIsLoading(true);\r\n        setCurrentVideo(null);\r\n        setIsComplete(false);\r\n        setIsWatching(false);\r\n        setProgress(0);\r\n\r\n        try {\r\n            const res = await apiService.get<VideoToWatch>('/promo-videos/farm/next');\r\n            if (res.success && res.data) {\r\n                setCurrentVideo(res.data);\r\n            } else if ((res as any).code === 'NO_VIDEOS_AVAILABLE') {\r\n                onError('Esgotado', res.message);\r\n                onBack(); // Retorna se n├úo houver v├¡deos\r\n            } else {\r\n                onError('Erro', res.message || 'Erro ao carregar pr├│ximo v├¡deo');\r\n            }\r\n        } catch (error) {\r\n            console.error('[FARM] Erro ao carregar v├¡deo:', error);\r\n            onError('Erro', 'Falha na conex├úo com o servidor');\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        loadNextVideo();\r\n\r\n        // Load YouTube API\r\n        if (!window.YT) {\r\n            const tag = document.createElement('script');\r\n            tag.src = \"https://www.youtube.com/iframe_api\";\r\n            const firstScriptTag = document.getElementsByTagName('script')[0];\r\n            firstScriptTag.parentNode?.insertBefore(tag, firstScriptTag);\r\n        }\r\n\r\n        return () => {\r\n            if (timerRef.current) clearInterval(timerRef.current);\r\n            if (playerRef.current) {\r\n                try {\r\n                    playerRef.current.destroy();\r\n                } catch (e) { }\r\n            }\r\n        };\r\n    }, []);\r\n\r\n    // Timer Logic adjusted for playback state\r\n    useEffect(() => {\r\n        if (isWatching && playerState === 1 && !isComplete) {\r\n            if (timerRef.current) clearInterval(timerRef.current);\r\n\r\n            timerRef.current = setInterval(() => {\r\n                setProgress(prev => {\r\n                    if (prev >= (currentVideo?.minWatchSeconds || 0)) {\r\n                        if (timerRef.current) clearInterval(timerRef.current);\r\n                        setIsComplete(true);\r\n                        return currentVideo?.minWatchSeconds || 0;\r\n                    }\r\n                    return prev + 1;\r\n                });\r\n            }, 1000);\r\n        } else {\r\n            if (timerRef.current) clearInterval(timerRef.current);\r\n        }\r\n\r\n        return () => {\r\n            if (timerRef.current) clearInterval(timerRef.current);\r\n        };\r\n    }, [isWatching, playerState, isComplete, currentVideo]);\r\n\r\n    const startWatching = async () => {\r\n        if (!currentVideo) return;\r\n\r\n        try {\r\n            const res = await apiService.post<any>(`/promo-videos/${currentVideo.id}/start-view`, {});\r\n            if (!res.success) {\r\n                onError('Erro', res.message);\r\n                return;\r\n            }\r\n\r\n            setIsWatching(true);\r\n            setProgress(0);\r\n            setIsComplete(false);\r\n        } catch (error: any) {\r\n            onError('Erro', error.message || 'Erro ao iniciar visualiza├º├úo');\r\n        }\r\n    };\r\n\r\n    const claimReward = async () => {\r\n        if (!currentVideo || isSubmitting) return;\r\n\r\n        setIsSubmitting(true);\r\n        try {\r\n            const res = await apiService.post<any>(`/promo-videos/${currentVideo.id}/complete-view`, {\r\n                watchTimeSeconds: progress\r\n            });\r\n\r\n            if (res.success) {\r\n                onSuccess('Parab├®ns!', `Voc├¬ ganhou ${currentVideo.viewerEarningPoints} pontos!`);\r\n                setDailyGoal(prev => ({ ...prev, current: prev.current + 1 }));\r\n                onRefresh();\r\n\r\n                // Auto carregamento do pr├│ximo ap├│s 2 segundos\r\n                setTimeout(() => {\r\n                    loadNextVideo();\r\n                    setIsSubmitting(false);\r\n                }, 1500);\r\n            } else {\r\n                onError('Erro', res.message);\r\n                setIsSubmitting(false);\r\n            }\r\n        } catch (error: any) {\r\n            onError('Erro', error.message || 'Erro ao finalizar visualiza├º├úo');\r\n            setIsSubmitting(false);\r\n        }\r\n    };\r\n\r\n    const getVideoId = (url: string) => {\r\n        const ytMatch = url.match(/(?:youtube\\.com\\/watch\\?v=|youtu\\.be\\/)([\\w-]+)/);\r\n        return ytMatch ? ytMatch[1] : null;\r\n    };\r\n\r\n    const renderPlayer = () => {\r\n        if (!currentVideo) return null;\r\n\r\n        const ytId = getVideoId(currentVideo.videoUrl);\r\n        if (currentVideo.platform === 'YOUTUBE' && ytId) {\r\n            return (\r\n                <div className=\"w-full h-full rounded-2xl overflow-hidden bg-black\">\r\n                    <div id=\"farm-player\" className=\"w-full h-full\"></div>\r\n                    <YouTubeInit\r\n                        videoId={ytId}\r\n                        onStateChange={(state: number) => setPlayerState(state)}\r\n                        onReady={(player: any) => {\r\n                            playerRef.current = player;\r\n                            player.playVideo();\r\n                        }}\r\n                    />\r\n                </div>\r\n            );\r\n        }\r\n\r\n        return (\r\n            <div className=\"w-full h-full bg-zinc-900 flex flex-col items-center justify-center rounded-2xl p-6 text-center\">\r\n                <AlertTriangle size={48} className=\"text-amber-500 mb-4\" />\r\n                <p className=\"text-white font-bold mb-4\">Esta plataforma requer visualiza├º├úo externa.</p>\r\n                <a\r\n                    href={currentVideo.videoUrl}\r\n                    target=\"_blank\"\r\n                    rel=\"noopener noreferrer\"\r\n                    className=\"bg-primary-500 text-black px-6 py-3 rounded-full font-black uppercase tracking-widest text-xs\"\r\n                    onClick={() => {\r\n                        if (!isWatching) startWatching();\r\n                    }}\r\n                >\r\n                    ABRIR V├ìDEO NO {currentVideo.platform}\r\n                </a>\r\n                <p className=\"mt-4 text-[10px] text-zinc-500 uppercase tracking-widest\">\r\n                    Ap├│s abrir, volte aqui e aguarde o contador para ganhar os pontos.\r\n                </p>\r\n            </div>\r\n        );\r\n    };\r\n\r\n    if (isLoading && !currentVideo) {\r\n        return (\r\n            <div className=\"min-h-[80vh] flex flex-col items-center justify-center space-y-4\">\r\n                <Loader2 className=\"text-primary-500 animate-spin\" size={48} />\r\n                <p className=\"text-zinc-500 font-black uppercase tracking-widest animate-pulse\">Buscando pr├│ximo v├¡deo dispon├¡vel...</p>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"min-h-screen pb-32 pt-4\">\r\n            {/* Header Fixo de Farm */}\r\n            <div className=\"flex items-center justify-between mb-8 px-2\">\r\n                <button onClick={onBack} className=\"p-3 bg-surface border border-surfaceHighlight rounded-2xl text-zinc-400 hover:text-white transition\">\r\n                    <X size={20} />\r\n                </button>\r\n                <div className=\"flex flex-col items-center\">\r\n                    <h2 className=\"text-lg font-black text-white italic tracking-tighter flex items-center gap-2\">\r\n                        <Zap size={20} className=\"text-yellow-400 fill-yellow-400\" />\r\n                        FARM DE VIEWS\r\n                    </h2>\r\n                    <p className=\"text-[10px] text-zinc-500 font-bold uppercase tracking-widest\">Modo Cont├¡nuo Ativado</p>\r\n                </div>\r\n                <div className=\"w-11\" /> {/* Spacer */}\r\n            </div>\r\n\r\n            {/* Daily Goal */}\r\n            <div className=\"bg-zinc-900/50 border border-zinc-800 rounded-3xl p-6 mb-8 relative overflow-hidden group\">\r\n                <div className=\"absolute top-0 right-0 p-4 opacity-5 group-hover:opacity-10 transition-opacity\">\r\n                    <Trophy size={80} />\r\n                </div>\r\n\r\n                <div className=\"flex justify-between items-end mb-3\">\r\n                    <div>\r\n                        <p className=\"text-[10px] text-zinc-500 font-black uppercase tracking-widest mb-1\">Meta Di├íria</p>\r\n                        <h3 className=\"text-xl font-black text-white\">{dailyGoal.current} / {dailyGoal.target}</h3>\r\n                    </div>\r\n                    <div className=\"text-right\">\r\n                        <p className=\"text-[10px] text-emerald-500 font-black uppercase tracking-widest\">Recompensa Extra</p>\r\n                        <p className=\"text-xs font-bold text-zinc-400\">+500 pts ao completar</p>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"w-full bg-zinc-800 h-2 rounded-full overflow-hidden\">\r\n                    <div\r\n                        className=\"h-full bg-gradient-to-r from-emerald-600 to-emerald-400 shadow-[0_0_10px_rgba(52,211,153,0.3)] transition-all duration-1000\"\r\n                        style={{ width: `${Math.min(100, (dailyGoal.current / dailyGoal.target) * 100)}%` }}\r\n                    />\r\n                </div>\r\n            </div>\r\n\r\n            {/* Video Player Section */}\r\n            <div className=\"space-y-6\">\r\n                <div className=\"aspect-video bg-black rounded-3xl overflow-hidden shadow-2xl ring-1 ring-white/10 relative\">\r\n                    {isWatching ? renderPlayer() : (\r\n                        <div className=\"absolute inset-0 flex flex-col items-center justify-center p-8 bg-gradient-to-b from-zinc-900 to-black\">\r\n                            <img\r\n                                src={currentVideo?.thumbnailUrl || `https://img.youtube.com/vi/${getVideoId(currentVideo?.videoUrl || '')}/mqdefault.jpg`}\r\n                                className=\"absolute inset-0 w-full h-full object-cover opacity-20 blur-sm\"\r\n                                alt=\"\"\r\n                            />\r\n                            <div className=\"relative z-10 text-center\">\r\n                                <p className=\"text-[10px] text-primary-400 font-black uppercase tracking-[0.2em] mb-4\">Novo V├¡deo Dispon├¡vel</p>\r\n                                <h3 className=\"text-xl font-bold text-white mb-6 line-clamp-2 max-w-xs\">{currentVideo?.title}</h3>\r\n                                <button\r\n                                    onClick={startWatching}\r\n                                    className=\"bg-primary-500 hover:bg-primary-400 text-black w-20 h-20 rounded-full flex items-center justify-center shadow-[0_0_30px_rgba(6,182,212,0.4)] transition-all hover:scale-110 active:scale-95 group\"\r\n                                >\r\n                                    <Play size={32} className=\"fill-current transform translate-x-1\" />\r\n                                </button>\r\n                                <p className=\"mt-6 text-[10px] text-zinc-500 font-bold uppercase tracking-widest\">\r\n                                    Assista por {currentVideo?.minWatchSeconds}s para ganhar {currentVideo?.viewerEarningPoints} pts\r\n                                </p>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Progress & Controls */}\r\n                <div className=\"bg-zinc-900/50 border border-zinc-800 rounded-3xl p-6\">\r\n                    <div className=\"flex items-center justify-between mb-6\">\r\n                        <div className=\"flex items-center gap-3\">\r\n                            <div className=\"w-10 h-10 bg-zinc-800 rounded-xl flex items-center justify-center text-zinc-400\">\r\n                                <Clock size={20} />\r\n                            </div>\r\n                            <div>\r\n                                <p className=\"text-[10px] text-zinc-500 font-black uppercase tracking-widest\">Tempo Restante</p>\r\n                                <p className=\"text-lg font-black text-white\">\r\n                                    {Math.max(0, (currentVideo?.minWatchSeconds || 0) - progress)}s\r\n                                </p>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"text-right\">\r\n                            <p className=\"text-[10px] text-zinc-500 font-black uppercase tracking-widest\">Recompensa</p>\r\n                            <p className=\"text-xl font-black text-emerald-400\">+{currentVideo?.viewerEarningPoints} PTS</p>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"w-full bg-zinc-800 h-1.5 rounded-full overflow-hidden mb-8\">\r\n                        <div\r\n                            className={`h-full transition-all duration-300 ${isComplete ? 'bg-emerald-500' : 'bg-primary-500 animate-pulse'}`}\r\n                            style={{ width: `${Math.min(100, (progress / (currentVideo?.minWatchSeconds || 1)) * 100)}%` }}\r\n                        />\r\n                    </div>\r\n\r\n                    <button\r\n                        onClick={claimReward}\r\n                        disabled={!isComplete || isSubmitting}\r\n                        className={`w-full py-5 rounded-2xl font-black uppercase tracking-[0.2em] transition-all flex items-center justify-center gap-2 group ${isComplete\r\n                            ? 'bg-emerald-500 hover:bg-emerald-400 text-black shadow-[0_15px_30px_-5px_rgba(16,185,129,0.3)]'\r\n                            : 'bg-zinc-800 text-zinc-500 cursor-not-allowed opacity-50'\r\n                            }`}\r\n                    >\r\n                        {isSubmitting ? (\r\n                            <Loader2 className=\"animate-spin\" size={20} />\r\n                        ) : isComplete ? (\r\n                            <>RESGATAR RECOMPENSA <ChevronRight size={18} /></>\r\n                        ) : (\r\n                            'AGUARDE COMPLETAR...'\r\n                        )}\r\n                    </button>\r\n\r\n                    {isComplete && !isSubmitting && (\r\n                        <p className=\"text-center mt-4 text-[9px] text-emerald-500/80 font-black uppercase tracking-widest animate-bounce\">\r\n                            Tempo m├¡nimo atingido! Clique para ganhar.\r\n                        </p>\r\n                    )}\r\n                </div>\r\n            </div>\r\n\r\n            {/* Bottom Info */}\r\n            <div className=\"mt-12 text-center space-y-2\">\r\n                <p className=\"text-[10px] text-zinc-600 font-bold uppercase tracking-widest\">Promovido por: <span className=\"text-zinc-400\">{currentVideo?.promoterName}</span></p>\r\n                <div className=\"flex items-center justify-center gap-2 text-[9px] text-zinc-700 font-bold uppercase tracking-tighter\">\r\n                    <div className=\"w-1.5 h-1.5 bg-zinc-700 rounded-full\" />\r\n                    Valida├º├úo em Tempo Real Ativa\r\n                    <div className=\"w-1.5 h-1.5 bg-zinc-700 rounded-full\" />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\n// Helper component to initialize individual YouTube players\r\nconst YouTubeInit: React.FC<{\r\n    videoId: string;\r\n    onStateChange: (state: number) => void;\r\n    onReady: (player: any) => void;\r\n}> = ({ videoId, onStateChange, onReady }) => {\r\n    useEffect(() => {\r\n        const initPlayer = () => {\r\n            new window.YT.Player('farm-player', {\r\n                videoId: videoId,\r\n                playerVars: {\r\n                    autoplay: 1,\r\n                    controls: 0,\r\n                    modestbranding: 1,\r\n                    rel: 0,\r\n                    iv_load_policy: 3,\r\n                    fs: 0\r\n                },\r\n                events: {\r\n                    onReady: (event: any) => onReady(event.target),\r\n                    onStateChange: (event: any) => onStateChange(event.data)\r\n                }\r\n            });\r\n        };\r\n\r\n        if (window.YT && window.YT.Player) {\r\n            initPlayer();\r\n        } else {\r\n            const originalOnReady = window.onYouTubeIframeAPIReady;\r\n            window.onYouTubeIframeAPIReady = () => {\r\n                if (originalOnReady) originalOnReady();\r\n                initPlayer();\r\n            };\r\n        }\r\n    }, [videoId]);\r\n\r\n    return null;\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josia\\Desktop\\projetos\\cred30\\packages\\frontend-v2\\src\\presentation\\components\\views\\VotingView.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","message":"Definition for rule '@typescript-eslint/no-unused-vars' was not found.","line":1,"column":1,"endLine":1,"endColumn":2,"severity":2,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { CheckCircle2, XCircle, Info, Trophy, BarChart3, Clock, AlertTriangle, FileText, Download, Users, ShieldCheck, Zap, Gavel } from 'lucide-react';\r\nimport { apiService } from '../../../application/services/api.service';\r\nimport jsPDF from 'jspdf';\r\nimport { AppState } from '../../../domain/types/common.types';\r\nimport { LoadingScreen } from '../ui/LoadingScreen';\r\nimport { LoadingButton } from '../ui/LoadingButton';\r\n\r\ninterface VotingViewProps {\r\n    appState: AppState;\r\n    onBack: () => void;\r\n    onRefresh: () => Promise<void>;\r\n    onSuccess: (title: string, msg: string) => void;\r\n    onError: (title: string, msg: string) => void;\r\n}\r\n\r\nexport const VotingView: React.FC<VotingViewProps> = ({ appState, onBack, onRefresh, onSuccess, onError }) => {\r\n    const [proposals, setProposals] = useState<any[]>([]);\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const [votingInProgress, setVotingInProgress] = useState<number | null>(null);\r\n    const [userCurrentPower, setUserCurrentPower] = useState<number>(0);\r\n\r\n    const user = appState?.currentUser;\r\n    const activeQuotas = appState?.quotas?.filter(q => q.userId === user?.id && q.status === 'ACTIVE').length ?? 0;\r\n    const totalCommunityMembers = appState?.users?.length ?? 0;\r\n\r\n    // Guard clause: prevent crash if appState or user is not loaded yet\r\n    if (!appState || !user) {\r\n        return <LoadingScreen fullScreen message=\"Carregando Governan├ºa...\" />;\r\n    }\r\n\r\n    if (isLoading && proposals.length === 0) {\r\n        return <LoadingScreen message=\"Buscando Propostas Ativas...\" />;\r\n    }\r\n\r\n    const fetchProposals = async () => {\r\n        try {\r\n            const res = await apiService.get('/voting/proposals');\r\n            if (res.success) {\r\n                setProposals(res.data as any[]);\r\n                if ((res as any).userCurrentPower) {\r\n                    setUserCurrentPower((res as any).userCurrentPower);\r\n                }\r\n            }\r\n        } catch (e: any) {\r\n            console.error(e);\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchProposals();\r\n        // Polling para atualiza├º├úo em tempo real (a cada 15s)\r\n        const interval = setInterval(fetchProposals, 15000);\r\n        return () => clearInterval(interval);\r\n    }, []);\r\n\r\n    const handleVote = async (proposalId: number, choice: 'yes' | 'no') => {\r\n        setVotingInProgress(proposalId);\r\n        try {\r\n            const res = await apiService.post('/voting/vote', { proposalId, choice });\r\n            if (res.success) {\r\n                onSuccess(\"Voto Registrado\", res.message);\r\n                fetchProposals();\r\n                onRefresh(); // Sincroniza o score no app todo\r\n                generateReceipt(proposalId, choice, (res as any).powerApplied);\r\n            } else {\r\n                onError(\"Erro\", res.message);\r\n            }\r\n        } catch (e: any) {\r\n            onError(\"Erro\", e.message);\r\n        } finally {\r\n            setVotingInProgress(null);\r\n        }\r\n    };\r\n\r\n    const generateReceipt = (proposalId: number, choice: 'yes' | 'no', power: number) => {\r\n        const proposal = proposals.find(p => p.id === proposalId);\r\n        const doc = new jsPDF();\r\n\r\n        doc.setFillColor(5, 5, 5);\r\n        doc.rect(0, 0, 210, 297, 'F');\r\n\r\n        doc.setTextColor(34, 211, 238);\r\n        doc.setFontSize(22);\r\n        doc.text(\"CRED30 - COMPROVANTE DE VOTA├ç├âO V2\", 20, 30);\r\n\r\n        doc.setTextColor(255, 255, 255);\r\n        doc.setFontSize(12);\r\n        doc.text(`Protocolo: VOTE-DEMO-${proposalId}-${Date.now()}`, 20, 45);\r\n        doc.text(`Data: ${new Date().toLocaleString('pt-BR')}`, 20, 52);\r\n\r\n        doc.setDrawColor(34, 211, 238);\r\n        doc.line(20, 60, 190, 60);\r\n\r\n        doc.setFontSize(14);\r\n        doc.text(\"DETALHES DA PROPOSTA:\", 20, 75);\r\n        doc.setFontSize(12);\r\n        doc.text(`T├¡tulo: ${proposal?.title || 'N/A'}`, 20, 85);\r\n\r\n        doc.setFontSize(14);\r\n        doc.text(\"SEU IMPACTO DEMOCR├üTICO:\", 20, 105);\r\n        doc.setTextColor(choice === 'yes' ? 52 : 239, choice === 'yes' ? 211 : 68, choice === 'yes' ? 153 : 68);\r\n        doc.setFontSize(16);\r\n        doc.text(choice === 'yes' ? \"SIM (APROVO)\" : \"N├âO (REJEITO)\", 20, 115);\r\n\r\n        doc.setTextColor(255, 255, 255);\r\n        doc.setFontSize(12);\r\n        doc.text(`Peso exercido nesta decis├úo: ${power.toFixed(2)} pontos de poder.`, 20, 125);\r\n\r\n        doc.setTextColor(150, 150, 150);\r\n        doc.setFontSize(10);\r\n        const footerText = \"Sua participa├º├úo foi registrada usando o modelo de Voto Quadr├ítico + Multiplicador de Reputa├º├úo. Esse sistema protege a comunidade de abusos por capital e valoriza quem contribui para o ecossistema.\";\r\n        doc.text(footerText, 20, 150, { maxWidth: 170 });\r\n\r\n        doc.save(`voto-cred30-prop-${proposalId}.pdf`);\r\n    };\r\n\r\n    const generateResultReport = (proposal: any) => {\r\n        const doc = new jsPDF();\r\n\r\n        doc.setFillColor(5, 5, 5);\r\n        doc.rect(0, 0, 210, 297, 'F');\r\n\r\n        doc.setTextColor(34, 211, 238);\r\n        doc.setFontSize(22);\r\n        doc.text(\"RELAT├ôRIO DE RESULTADO - GOVERNAN├çA\", 20, 30);\r\n\r\n        doc.setTextColor(255, 255, 255);\r\n        doc.setFontSize(12);\r\n        doc.text(`Proposta #${proposal.id}`, 20, 45);\r\n        doc.text(`T├¡tulo: ${proposal.title}`, 20, 52);\r\n        doc.text(`Status: ${proposal.status === 'active' ? 'EM ANDAMENTO' : 'ENCERRADA'}`, 20, 59);\r\n\r\n        doc.setDrawColor(34, 211, 238);\r\n        doc.line(20, 70, 190, 70);\r\n\r\n        const total = parseFloat(proposal.yes_votes_power) + parseFloat(proposal.no_votes_power);\r\n        const yesPerc = total > 0 ? (parseFloat(proposal.yes_votes_power) / total) * 100 : 0;\r\n        const noPerc = total > 0 ? (parseFloat(proposal.no_votes_power) / total) * 100 : 0;\r\n\r\n        doc.setFontSize(14);\r\n        doc.text(\"DISTRIBUI├ç├âO DE PODER:\", 20, 85);\r\n\r\n        doc.setTextColor(52, 211, 153);\r\n        doc.text(`SIM: ${parseFloat(proposal.yes_votes_power).toFixed(2)} (${yesPerc.toFixed(1)}%)`, 30, 95);\r\n\r\n        doc.setTextColor(239, 68, 68);\r\n        doc.text(`N├âO: ${parseFloat(proposal.no_votes_power).toFixed(2)} (${noPerc.toFixed(1)}%)`, 30, 105);\r\n\r\n        doc.setTextColor(255, 255, 255);\r\n        doc.text(`Poder Total Exercido: ${total.toFixed(2)}`, 20, 120);\r\n\r\n        const win = yesPerc > noPerc ? \"APROVADA\" : noPerc > yesPerc ? \"REJEITADA\" : \"EMPATE\";\r\n        doc.setFontSize(18);\r\n        doc.text(`RESULTADO: ${win}`, 20, 140);\r\n\r\n        doc.save(`resultado-democracia-prop-${proposal.id}.pdf`);\r\n    };\r\n\r\n    // F├│rmulas para explicar o poder ao usu├írio\r\n    const repMultiplier = 1 + (user.score / 1000);\r\n\r\n    return (\r\n        <div className=\"space-y-6 pb-20 animate-in fade-in slide-in-from-bottom duration-500\">\r\n            <div className=\"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-8\">\r\n                <div>\r\n                    <h1 className=\"text-3xl font-black text-white flex items-center gap-3\">\r\n                        <BarChart3 className=\"text-primary-400\" size={32} />\r\n                        GOVERNAN├çA V2\r\n                    </h1>\r\n                    <p className=\"text-zinc-500 text-sm\">Democracia Direta: Voto Quadr├ítico + Multiplicador de Reputa├º├úo.</p>\r\n                </div>\r\n                <div className=\"flex items-center gap-4 w-full sm:w-auto\">\r\n                    <div className=\"flex-1 sm:flex-initial bg-zinc-900 border border-zinc-800 p-3 rounded-2xl flex items-center gap-3\">\r\n                        <div className=\"w-10 h-10 bg-primary-500/10 rounded-xl flex items-center justify-center text-primary-400\">\r\n                            <ShieldCheck size={20} />\r\n                        </div>\r\n                        <div>\r\n                            <p className=\"text-[10px] text-zinc-500 uppercase font-bold text-nowrap\">Seu Poder Atual</p>\r\n                            <p className=\"text-sm font-bold text-white\">\r\n                                {userCurrentPower} Impacto\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Quadro de Reputa├º├úo e Impacto */}\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8\">\r\n                <div className=\"bg-zinc-900/40 border border-white/5 p-4 rounded-2xl flex items-center gap-4\">\r\n                    <div className=\"w-12 h-12 bg-zinc-800 rounded-xl flex items-center justify-center text-zinc-400\">\r\n                        <Users size={24} />\r\n                    </div>\r\n                    <div>\r\n                        <p className=\"text-[10px] text-zinc-500 uppercase font-bold\">Base de Capital</p>\r\n                        <p className=\"text-sm font-black text-white\">{activeQuotas} Cotas</p>\r\n                        <p className=\"text-[9px] text-zinc-600 font-bold uppercase mt-0.5\">Influ├¬ncia: +{Math.sqrt(activeQuotas).toFixed(2)}</p>\r\n                    </div>\r\n                </div>\r\n                <div className=\"bg-zinc-900/40 border border-white/5 p-4 rounded-2xl flex items-center gap-4\">\r\n                    <div className=\"w-12 h-12 bg-primary-500/10 rounded-xl flex items-center justify-center text-primary-400\">\r\n                        <Zap size={24} />\r\n                    </div>\r\n                    <div>\r\n                        <p className=\"text-[10px] text-zinc-500 uppercase font-bold\">Reputa├º├úo (Score)</p>\r\n                        <p className=\"text-sm font-black text-white\">{user.score} Pontos</p>\r\n                        <p className=\"text-[9px] text-primary-500/60 font-black uppercase mt-0.5\">Peso: x{repMultiplier.toFixed(2)}</p>\r\n                    </div>\r\n                </div>\r\n                <div className=\"bg-primary-500/5 border border-primary-500/20 p-4 rounded-2xl flex items-center gap-4\">\r\n                    <div className=\"w-12 h-12 bg-primary-500 rounded-xl flex items-center justify-center text-black\">\r\n                        <Gavel size={24} />\r\n                    </div>\r\n                    <div>\r\n                        <p className=\"text-[10px] text-primary-400 uppercase font-black\">Voto Quadr├ítico</p>\r\n                        <p className=\"text-base font-black text-white\">{userCurrentPower} Pontos</p>\r\n                        <p className=\"text-[9px] text-zinc-500 font-bold uppercase mt-0.5\">Seu impacto total no clube</p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 gap-6\">\r\n                {isLoading ? (\r\n                    <div className=\"py-20 text-center text-zinc-500 animate-pulse font-black uppercase tracking-widest\">Carregando vota├º├Áes democr├íticas...</div>\r\n                ) : proposals.length === 0 ? (\r\n                    <div className=\"py-20 text-center bg-zinc-900/30 rounded-3xl border border-dashed border-zinc-800\">\r\n                        <Info className=\"mx-auto mb-4 text-zinc-600\" size={48} />\r\n                        <h3 className=\"text-white font-bold\">Nenhuma Vota├º├úo Aberta</h3>\r\n                        <p className=\"text-zinc-500 text-sm\">Fique atento ├ás notifica├º├Áes para novas propostas.</p>\r\n                    </div>\r\n                ) : (\r\n                    proposals.map(prop => {\r\n                        const totalPowerDirect = parseFloat(prop.yes_votes_power) + parseFloat(prop.no_votes_power);\r\n                        const yesPerc = totalPowerDirect > 0 ? (parseFloat(prop.yes_votes_power) / totalPowerDirect) * 100 : 0;\r\n                        const noPerc = totalPowerDirect > 0 ? (parseFloat(prop.no_votes_power) / totalPowerDirect) * 100 : 0;\r\n\r\n                        return (\r\n                            <div key={prop.id} className=\"bg-zinc-900 border border-zinc-800 rounded-3xl overflow-hidden group\">\r\n                                <div className=\"p-8\">\r\n                                    <div className=\"flex justify-between items-start mb-4\">\r\n                                        <div>\r\n                                            <span className={`text-[10px] px-2 py-0.5 rounded-full font-bold uppercase ${prop.status === 'active' ? 'bg-emerald-500/10 text-emerald-500 border border-emerald-500/20' : 'bg-red-500/10 text-red-500 border border-red-500/20'}`}>\r\n                                                {prop.status === 'active' ? 'Em Vota├º├úo' : 'Encerrada'}\r\n                                            </span>\r\n                                            <h3 className=\"text-2xl font-black text-white mt-2 tracking-tight uppercase\">{prop.title}</h3>\r\n                                            <p className=\"text-[10px] text-zinc-600 font-black uppercase tracking-widest mt-1\">\r\n                                                Iniciada por: <span className=\"text-zinc-400\">{prop.creator_name || 'Conselho Adm'}</span>\r\n                                            </p>\r\n                                        </div>\r\n                                        <div className=\"text-right\">\r\n                                            <div className=\"flex items-center gap-2 text-primary-400 font-black\">\r\n                                                <Trophy size={16} />\r\n                                                <span className=\"text-xs uppercase\">+10 SCORE</span>\r\n                                            </div>\r\n                                            <p className=\"text-[9px] text-zinc-600 font-bold uppercase mt-1\">Pr├¬mio de Participa├º├úo</p>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <p className=\"text-zinc-400 mb-8 leading-relaxed max-w-2xl\">\r\n                                        {prop.description}\r\n                                    </p>\r\n\r\n                                    {/* Placar de Poder (Vis├¡vel ap├│s votar ou encerrada) */}\r\n                                    {(prop.user_choice || prop.status !== 'active') ? (\r\n                                        <div className=\"bg-black/60 rounded-[2rem] p-8 mb-8 animate-in fade-in zoom-in duration-500 border border-white/5\">\r\n                                            <div className=\"flex justify-between text-[11px] font-black uppercase text-zinc-500 mb-4 tracking-widest\">\r\n                                                <span className=\"flex items-center gap-2\"><div className=\"w-2 h-2 rounded-full bg-emerald-500\" /> Poder Sim: {parseFloat(prop.yes_votes_power).toFixed(0)}</span>\r\n                                                <span className=\"flex items-center gap-2\"><div className=\"w-2 h-2 rounded-full bg-red-500\" /> Poder N├úo: {parseFloat(prop.no_votes_power).toFixed(0)}</span>\r\n                                            </div>\r\n                                            <div className=\"h-4 w-full bg-zinc-800 rounded-full overflow-hidden flex shadow-inner\">\r\n                                                <div className=\"h-full bg-gradient-to-r from-emerald-600 to-emerald-400 transition-all duration-1000 shadow-[0_0_20px_rgba(16,185,129,0.3)]\" style={{ width: `${yesPerc}%` }}></div>\r\n                                                <div className=\"h-full bg-gradient-to-r from-red-600 to-red-400 transition-all duration-1000 shadow-[0_0_20px_rgba(239,68,68,0.3)]\" style={{ width: `${noPerc}%` }}></div>\r\n                                            </div>\r\n                                            <div className=\"flex justify-between mt-4\">\r\n                                                <p className=\"text-[10px] text-emerald-500 font-black uppercase tracking-widest\">{yesPerc.toFixed(1)}%</p>\r\n                                                <p className=\"text-[10px] text-red-500 font-black uppercase tracking-widest\">{noPerc.toFixed(1)}%</p>\r\n                                            </div>\r\n                                        </div>\r\n                                    ) : (\r\n                                        <div className=\"bg-zinc-950 border border-dashed border-zinc-800 rounded-[2rem] p-10 mb-8 flex flex-col items-center justify-center gap-4\">\r\n                                            <div className=\"w-16 h-16 bg-zinc-900 rounded-2xl flex items-center justify-center text-zinc-800\">\r\n                                                <ShieldCheck size={32} />\r\n                                            </div>\r\n                                            <div className=\"text-center\">\r\n                                                <p className=\"text-[10px] text-zinc-500 uppercase font-black tracking-[0.2em] mb-1\">Voto Secreto Habilitado</p>\r\n                                                <p className=\"text-xs text-zinc-600 font-medium\">O impacto das decis├Áes da comunidade ser├í revelado ap├│s o seu voto.</p>\r\n                                            </div>\r\n                                        </div>\r\n                                    )}\r\n\r\n                                    <div className=\"flex flex-col sm:flex-row gap-4\">\r\n                                        {!prop.user_choice && prop.status === 'active' ? (\r\n                                            <>\r\n                                                <LoadingButton\r\n                                                    onClick={() => handleVote(prop.id, 'yes')}\r\n                                                    isLoading={votingInProgress === prop.id}\r\n                                                    loadingText=\"REGISTRANDO...\"\r\n                                                    disabled={userCurrentPower <= 0}\r\n                                                    className=\"flex-1 bg-emerald-600 hover:bg-emerald-500 disabled:opacity-50 text-white font-black py-5 rounded-[1.5rem] transition-all active:scale-95 flex items-center justify-center gap-3 shadow-xl shadow-emerald-900/20 uppercase tracking-widest text-xs\"\r\n                                                >\r\n                                                    <CheckCircle2 size={24} /> VOTAR NO SIM\r\n                                                </LoadingButton>\r\n                                                <LoadingButton\r\n                                                    onClick={() => handleVote(prop.id, 'no')}\r\n                                                    isLoading={votingInProgress === prop.id}\r\n                                                    loadingText=\"REGISTRANDO...\"\r\n                                                    disabled={userCurrentPower <= 0}\r\n                                                    className=\"flex-1 bg-red-600 hover:bg-red-500 disabled:opacity-50 text-white font-black py-5 rounded-[1.5rem] transition-all active:scale-95 flex items-center justify-center gap-3 shadow-xl shadow-red-900/20 uppercase tracking-widest text-xs\"\r\n                                                >\r\n                                                    <XCircle size={24} /> VOTAR NO N├âO\r\n                                                </LoadingButton>\r\n                                            </>\r\n                                        ) : (\r\n                                            <div className=\"flex-1 flex flex-col sm:flex-row gap-4\">\r\n                                                <div className=\"flex-1 bg-black/40 border border-zinc-800 p-5 rounded-[1.5rem] flex items-center justify-center gap-4\">\r\n                                                    <div className={prop.user_choice === 'yes' ? 'text-emerald-400' : prop.user_choice === 'no' ? 'text-red-400' : 'text-zinc-500'}>\r\n                                                        {prop.user_choice === 'yes' ? <CheckCircle2 size={24} /> : prop.user_choice === 'no' ? <XCircle size={24} /> : null}\r\n                                                    </div>\r\n                                                    <div>\r\n                                                        <p className=\"text-zinc-300 text-sm font-black uppercase tracking-tight\">\r\n                                                            {prop.user_choice ? `Impacto registrado: ${userCurrentPower} Poder` : 'Vota├º├úo Encerrada'}\r\n                                                        </p>\r\n                                                        <p className=\"text-[10px] text-zinc-600 font-bold uppercase\">Sua participa├º├úo foi computada</p>\r\n                                                    </div>\r\n                                                </div>\r\n                                                {prop.user_choice && (\r\n                                                    <button\r\n                                                        onClick={() => generateReceipt(prop.id, prop.user_choice, userCurrentPower)}\r\n                                                        className=\"px-8 py-5 bg-zinc-800 hover:bg-zinc-700 text-white rounded-[1.5rem] border border-zinc-700 transition-all flex items-center justify-center gap-3 active:scale-95 shadow-xl\"\r\n                                                    >\r\n                                                        <FileText size={20} /> PDF\r\n                                                    </button>\r\n                                                )}\r\n                                                {user.isAdmin && (\r\n                                                    <button\r\n                                                        onClick={() => generateResultReport(prop)}\r\n                                                        className=\"px-8 py-5 bg-primary-600 hover:bg-primary-500 text-black rounded-[1.5rem] transition-all active:scale-95 flex items-center justify-center gap-3 shadow-xl shadow-primary-900/40 font-black\"\r\n                                                    >\r\n                                                        <BarChart3 size={20} /> RELAT├ôRIO\r\n                                                    </button>\r\n                                                )}\r\n                                            </div>\r\n                                        )}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        );\r\n                    })\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josia\\Desktop\\projetos\\cred30\\packages\\frontend-v2\\src\\presentation\\components\\views\\WithdrawView.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","message":"Definition for rule '@typescript-eslint/no-unused-vars' was not found.","line":1,"column":1,"endLine":1,"endColumn":2,"severity":2,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useMemo, useEffect } from 'react';\r\nimport { ArrowUpFromLine, ShieldCheck, Clock, XCircle, TrendingUp } from 'lucide-react';\r\n// import packageJson from '../../../../package.json';\r\nimport { User } from '../../../domain/types/common.types';\r\nimport { apiService } from '../../../application/services/api.service';\r\nimport { confirmWithdrawal } from '../../../application/services/storage.service';\r\nimport { WITHDRAWAL_FEE_FIXED, WELCOME_WITHDRAWAL_FIXED_FEE, WITHDRAWAL_MIN_AMOUNT } from '../../../shared/constants/app.constants';\r\n\r\ninterface WithdrawViewProps {\r\n    balance: number;\r\n    currentUser: User | null;\r\n    totalQuotaValue: number;\r\n    onSuccess: (title: string, message: string) => void;\r\n    onError: (title: string, message: string) => void;\r\n    onRefresh: () => void;\r\n}\r\n\r\nexport const WithdrawView = ({ balance, currentUser, totalQuotaValue, onSuccess, onError, onRefresh }: WithdrawViewProps) => {\r\n    const [val, setVal] = useState('');\r\n    const [confirmModal, setConfirmModal] = useState<{ isOpen: boolean, transactionId: number | null, code: string }>({ isOpen: false, transactionId: null, code: '' });\r\n    const [showAd, setShowAd] = useState(false);\r\n    const [adTimer, setAdTimer] = useState(5);\r\n\r\n    // Quick amount options\r\n    const quickAmounts = [50, 100, 200, 500];\r\n\r\n    const { isValidAmount, withdrawalAmount, isFree, fee, netAmount } = useMemo(() => {\r\n        const amount = parseFloat(val) || 0;\r\n        const valid = val !== '' && amount >= WITHDRAWAL_MIN_AMOUNT && amount <= balance;\r\n        const free = totalQuotaValue >= amount;\r\n\r\n        // Verifica se o usu├írio tem benef├¡cio de boas-vindas ativo\r\n        const hasWelcomeBenefit = (currentUser as any)?.welcomeBenefit?.hasDiscount;\r\n        const baseFee = hasWelcomeBenefit ? WELCOME_WITHDRAWAL_FIXED_FEE : WITHDRAWAL_FEE_FIXED;\r\n\r\n        const f = (valid && !free) ? baseFee : 0;\r\n        const net = valid ? Math.max(0, amount - f) : 0;\r\n        return { isValidAmount: valid, withdrawalAmount: amount, isFree: free, fee: f, netAmount: net };\r\n    }, [val, balance, totalQuotaValue, currentUser]);\r\n\r\n\r\n    const [twoFactorData, setTwoFactorData] = useState<{ otpUri: string } | null>(null);\r\n\r\n    useEffect(() => {\r\n        if (confirmModal.isOpen) {\r\n            fetch2FASetup();\r\n        }\r\n    }, [confirmModal.isOpen]);\r\n\r\n    useEffect(() => {\r\n        let interval: any;\r\n        if (showAd && adTimer > 0) {\r\n            interval = setInterval(() => {\r\n                setAdTimer(prev => prev - 1);\r\n            }, 1000);\r\n        } else if (showAd && adTimer === 0) {\r\n            // Quando o timer acaba, podemos permitir fechar ou fechar automaticamente\r\n            // Vamos deixar o bot├úo de fechar aparecer\r\n        }\r\n        return () => clearInterval(interval);\r\n    }, [showAd, adTimer]);\r\n\r\n    const fetch2FASetup = async () => {\r\n        try {\r\n            const data = await apiService.get2FASetup();\r\n            setTwoFactorData(data);\r\n        } catch (e) {\r\n            console.error('Erro ao buscar setup 2FA:', e);\r\n        }\r\n    };\r\n\r\n    const handleConfirmWithCode = async () => {\r\n        if (!confirmModal.transactionId) return;\r\n        try {\r\n            const res = await confirmWithdrawal(confirmModal.transactionId, confirmModal.code);\r\n            if (res.success) {\r\n                onSuccess('Resgate Confirmado!', 'Seu resgate foi processado com sucesso.');\r\n                setConfirmModal({ ...confirmModal, isOpen: false });\r\n                setVal('');\r\n                onRefresh();\r\n            } else {\r\n                onError('Erro na Confirma├º├úo', res.message);\r\n            }\r\n        } catch (e: any) {\r\n            onError('Erro na Confirma├º├úo', e.message);\r\n        }\r\n    };\r\n\r\n    const handleRequestWithdrawal = async () => {\r\n        const amount = parseFloat(val);\r\n        // Regra de an├║ncio: mostrar sempre ao solicitar saque\r\n        setShowAd(true);\r\n        setAdTimer(5);\r\n    };\r\n\r\n    const processWithdrawal = async () => {\r\n        setShowAd(false);\r\n        const amount = parseFloat(val);\r\n        try {\r\n            const res = await apiService.requestWithdrawal(amount, currentUser?.pixKey || '');\r\n\r\n            if (res.success && res.data?.requiresConfirmation) {\r\n                setConfirmModal({ isOpen: true, transactionId: res.data.transactionId, code: '' });\r\n            } else if (res.success) {\r\n                onSuccess('Solicita├º├úo Enviada', 'Solicita├º├úo de resgate enviada! Aguarde processamento.');\r\n                setVal('');\r\n                onRefresh();\r\n            } else {\r\n                onError('Erro no Resgate', res.message);\r\n            }\r\n        } catch (e: any) {\r\n            onError('Erro no Resgate', e.message);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"max-w-xl mx-auto space-y-6\">\r\n            {/* Balance Overview Card */}\r\n            <div className=\"bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-2xl p-6 text-black\">\r\n                <div className=\"text-center\">\r\n                    <div className=\"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n                        <ArrowUpFromLine size={32} className=\"text-white\" />\r\n                    </div>\r\n                    <h2 className=\"text-2xl font-bold mb-2\">Solicitar Resgate</h2>\r\n                    <p className=\"text-sm opacity-80\">Transfira seu saldo dispon├¡vel para sua chave PIX cadastrada</p>\r\n                </div>\r\n\r\n                <div className=\"bg-white/20 rounded-xl p-4 mt-6\">\r\n                    <p className=\"text-sm opacity-80 mb-1\">Saldo Dispon├¡vel</p>\r\n                    <p className=\"text-3xl font-bold\">{balance.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })}</p>\r\n                    <p className=\"text-xs opacity-70 mt-1\">Seu saldo atual na conta</p>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Withdrawal Form */}\r\n            <div className=\"bg-surface border border-surfaceHighlight rounded-3xl p-6\">\r\n                <div className=\"space-y-6\">\r\n                    <div>\r\n                        <label className=\"text-xs text-zinc-400 block mb-3\">Valor do Resgate</label>\r\n\r\n                        {/* Quick Amount Buttons */}\r\n                        <div className=\"grid grid-cols-4 gap-2 mb-4\">\r\n                            {quickAmounts.map(amount => (\r\n                                <button\r\n                                    key={amount}\r\n                                    onClick={() => setVal(Math.min(amount, balance).toString())}\r\n                                    disabled={amount > balance}\r\n                                    className={`py-2 rounded-lg text-sm font-bold border transition ${amount > balance\r\n                                        ? 'bg-zinc-800 text-zinc-600 border-zinc-700 cursor-not-allowed'\r\n                                        : 'bg-surfaceHighlight text-zinc-300 border-zinc-600 hover:bg-primary-900/30 hover:border-primary-500/50'\r\n                                        }`}\r\n                                >\r\n                                    R$ {amount}\r\n                                </button>\r\n                            ))}\r\n                        </div>\r\n\r\n                        <div className=\"relative\">\r\n                            <span className=\"absolute left-3 top-3 text-zinc-500\">R$</span>\r\n                            <input\r\n                                type=\"number\"\r\n                                value={val}\r\n                                onChange={e => setVal(e.target.value)}\r\n                                className=\"w-full bg-background border border-surfaceHighlight rounded-xl py-3 pl-10 pr-16 text-white outline-none focus:border-primary-500 transition\"\r\n                                placeholder=\"0.00\"\r\n                            />\r\n                            <button\r\n                                onClick={() => setVal(balance.toString())}\r\n                                className=\"absolute right-2 top-2 text-xs text-primary-400 hover:bg-primary-900/30 px-2 py-1.5 rounded transition\"\r\n                            >\r\n                                Tudo\r\n                            </button>\r\n                        </div>\r\n\r\n                        {val !== '' && parseFloat(val) < WITHDRAWAL_MIN_AMOUNT && (\r\n                            <p className=\"text-red-400 text-[10px] mt-2 font-medium\">\r\n                                * O valor m├¡nimo para resgate ├® de {WITHDRAWAL_MIN_AMOUNT.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })}.\r\n                            </p>\r\n                        )}\r\n\r\n                        {/* Fee Information */}\r\n                        {isValidAmount && (\r\n                            <div className=\"mt-3 p-3 bg-zinc-800/50 rounded-lg text-xs space-y-1\">\r\n                                <div className=\"flex justify-between\">\r\n                                    <span className=\"text-zinc-400\">Taxa de resgate ({isFree ? 'Gr├ítis' : 'Taxa Fixa'})</span>\r\n                                    <span className={isFree ? 'text-emerald-400' : 'text-zinc-300'}>\r\n                                        {isFree ? 'R$ 0,00' : fee.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })}\r\n                                    </span>\r\n                                </div>\r\n                                <div className=\"flex justify-between font-bold\">\r\n                                    <span className=\"text-white\">Voc├¬ receber├í</span>\r\n                                    <span className=\"text-emerald-400\">{netAmount.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })}</span>\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n\r\n                    <div className=\"bg-emerald-500/10 border border-emerald-500/20 rounded-xl p-4\">\r\n                        <label className=\"text-xs text-emerald-400 block mb-1 font-medium italic\">Dep├│sito autom├ítico via PIX</label>\r\n                        <p className=\"text-white text-sm font-mono break-all line-clamp-1\">{currentUser?.pixKey || 'Chave n├úo cadastrada'}</p>\r\n                        <p className=\"text-emerald-500/60 text-[10px] mt-1 line-clamp-2 leading-tight\">O valor ser├í enviado para sua chave principal cadastrada no perfil.</p>\r\n                    </div>\r\n                </div>\r\n\r\n                <button\r\n                    onClick={handleRequestWithdrawal}\r\n                    disabled={!isValidAmount || !currentUser?.pixKey}\r\n                    className=\"w-full bg-primary-500 hover:bg-primary-400 disabled:opacity-50 disabled:cursor-not-allowed text-black font-bold py-4 rounded-xl transition-all shadow-[0_0_20px_rgba(6,182,212,0.3)] mt-6\"\r\n                >\r\n                    Confirmar Resgate\r\n                </button>\r\n\r\n                {confirmModal.isOpen && (\r\n                    <div className=\"fixed inset-0 bg-black/80 flex items-end sm:items-center justify-center z-[500] p-0 sm:p-4 backdrop-blur-md animate-in fade-in duration-300\">\r\n                        <div className=\"bg-[#0A0A0A] border-t sm:border border-white/5 sm:border-surfaceHighlight rounded-t-[2.5rem] sm:rounded-3xl p-8 w-full sm:max-w-sm relative shadow-2xl animate-in slide-in-from-bottom-full sm:slide-in-from-bottom-0 duration-500 sm:duration-300\">\r\n                            <div className=\"w-12 h-1.5 bg-zinc-800 rounded-full mx-auto mb-6 sm:hidden opacity-50\" />\r\n\r\n                            <button onClick={() => setConfirmModal({ ...confirmModal, isOpen: false })} className=\"absolute top-4 right-4 text-zinc-500 hover:text-white transition hidden sm:block\">\r\n                                <XCircle size={24} />\r\n                            </button>\r\n\r\n                            <div className=\"text-center mb-8\">\r\n                                <div className=\"w-20 h-20 bg-primary-500/10 rounded-3xl flex items-center justify-center mx-auto mb-4 shadow-xl shadow-primary-900/20 ring-1 ring-primary-500/20\">\r\n                                    <ShieldCheck size={40} className=\"text-primary-500\" strokeWidth={2.5} />\r\n                                </div>\r\n                                <h3 className=\"text-2xl font-black text-white tracking-tight\">Autentica├º├úo 2FA</h3>\r\n                                <p className=\"text-zinc-500 text-sm mt-2 font-medium\">Insira o c├│digo do seu autenticador</p>\r\n                            </div>\r\n\r\n                            <input\r\n                                type=\"text\"\r\n                                inputMode=\"numeric\"\r\n                                autoComplete=\"one-time-code\"\r\n                                placeholder=\"000 000\"\r\n                                value={confirmModal.code}\r\n                                onChange={e => setConfirmModal({ ...confirmModal, code: e.target.value.replace(/\\D/g, '').slice(0, 6) })}\r\n                                className=\"w-full bg-zinc-900/50 border border-white/5 rounded-2xl py-5 text-center text-4xl tracking-[0.2em] text-white focus:border-primary-500/50 outline-none mb-8 font-black font-mono transition-all\"\r\n                                autoFocus\r\n                            />\r\n\r\n                            <div className=\"space-y-4\">\r\n                                <button\r\n                                    onClick={handleConfirmWithCode}\r\n                                    className=\"w-full bg-primary-500 hover:bg-primary-400 text-black font-black uppercase tracking-widest py-5 rounded-2xl transition-all shadow-2xl shadow-primary-500/20 active:scale-[0.98]\"\r\n                                >\r\n                                    CONFIRMAR RESGATE\r\n                                </button>\r\n\r\n                                {twoFactorData?.otpUri && (\r\n                                    <a\r\n                                        href={twoFactorData.otpUri}\r\n                                        className=\"w-full bg-white/5 hover:bg-white/10 text-zinc-400 py-4 rounded-xl flex items-center justify-center gap-2 text-[10px] font-black uppercase tracking-widest transition-all\"\r\n                                    >\r\n                                        <ShieldCheck size={14} /> Abrir Autenticador\r\n                                    </a>\r\n                                )}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            <div className=\"p-4 bg-blue-900/20 border border-blue-500/30 rounded-xl\">\r\n                <p className=\"text-xs text-blue-300 flex items-center gap-2\">\r\n                    <Clock size={14} />\r\n                    <span>Processamento em at├® 24h ├║teis</span>\r\n                </p>\r\n                <p className=\"text-xs text-zinc-400 mt-2\">\r\n                    Taxa fixa de manuten├º├úo por saque de {WITHDRAWAL_FEE_FIXED.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })}.\r\n                </p>\r\n                <p className=\"text-xs text-emerald-400/80 mt-2\">\r\n                    ­ƒÆí <strong>Benef├¡cio VIP:</strong> Se o valor das suas participa├º├Áes (cotas) for maior ou igual ao resgate, a taxa ├® <strong>ZERO</strong>!\r\n                </p>\r\n                <p className=\"text-xs text-zinc-400 mt-2\">\r\n                    <strong>Importante:</strong> Voc├¬ est├í resgatando do seu saldo dispon├¡vel na conta.\r\n                </p>\r\n            </div>\r\n\r\n            {/* Legal Disclaimer */}\r\n            <div className=\"px-4 text-[10px] text-zinc-600 text-center leading-relaxed\">\r\n                <p>O resgate ser├í processado via PIX pelo gateway Asaas. O Cred30 n├úo armazena dados banc├írios. O prazo de processamento pode variar em feriados ou fins de semana. Resgates acima de R$ 2.000,00 podem exigir comprova├º├úo de origem dos fundos conforme pol├¡tica anti-lavagem (AML).</p>\r\n            </div>\r\n\r\n            {/* An├║ncio Intersticial Premium */}\r\n            {showAd && (\r\n                <div className=\"fixed inset-0 bg-black/95 z-[600] flex flex-col items-center justify-center p-6 animate-in fade-in duration-500 backdrop-blur-2xl\">\r\n                    <div className=\"w-full max-w-md relative flex flex-col h-[80vh] sm:h-auto\">\r\n                        {/* Status Bar */}\r\n                        <div className=\"flex justify-between items-center mb-8 px-2 animate-in slide-in-from-top-4 duration-700\">\r\n                            <div className=\"flex items-center gap-2\">\r\n                                <div className=\"w-2 h-2 bg-primary-500 rounded-full animate-pulse\" />\r\n                                <span className=\"text-[10px] text-zinc-500 font-black uppercase tracking-[0.2em]\">Resgate Seguro Cred30</span>\r\n                            </div>\r\n\r\n                            {adTimer > 0 ? (\r\n                                <div className=\"bg-white/5 border border-white/10 px-4 py-2 rounded-full backdrop-blur-md\">\r\n                                    <span className=\"text-[10px] text-zinc-400 font-bold\">Pular em <span className=\"text-primary-400 font-black\">{adTimer}s</span></span>\r\n                                </div>\r\n                            ) : (\r\n                                <button\r\n                                    onClick={processWithdrawal}\r\n                                    className=\"bg-primary-500 text-black px-6 py-2.5 rounded-full font-black text-[10px] uppercase tracking-widest flex items-center gap-2 transition-all shadow-[0_0_30px_rgba(6,182,212,0.5)] active:scale-95\"\r\n                                >\r\n                                    PULAR <ArrowUpFromLine size={14} />\r\n                                </button>\r\n                            )}\r\n                        </div>\r\n\r\n                        {/* Ad Card */}\r\n                        <div className=\"bg-[#0A0A0A] border border-white/5 rounded-[3rem] overflow-hidden shadow-2xl flex-1 flex flex-col animate-in zoom-in-95 duration-500\">\r\n                            <div className=\"relative flex-1 overflow-hidden group\">\r\n                                <img\r\n                                    src=\"/ad-banner.png\"\r\n                                    alt=\"Oferta Especial\"\r\n                                    className=\"w-full h-full object-cover transition-transform duration-700 group-hover:scale-110\"\r\n                                />\r\n                                <div className=\"absolute inset-0 bg-gradient-to-t from-[#0A0A0A] via-[#0A0A0A]/20 to-transparent\"></div>\r\n\r\n                                <div className=\"absolute bottom-8 left-8 right-8\">\r\n                                    <span className=\"bg-primary-500 text-black text-[10px] font-black px-3 py-1 rounded-full uppercase tracking-widest mb-4 inline-block shadow-lg\">Oferta VIP</span>\r\n                                    <h4 className=\"text-3xl font-black text-white leading-tight tracking-tighter\">Multiplique seus ganhos com o VIP!</h4>\r\n                                    <p className=\"text-zinc-400 text-sm mt-3 font-medium leading-relaxed\">Membros do clube aproveitam taxas zero em todos os resgates acima de R$ 50,00.</p>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"p-8 bg-zinc-900/30 flex items-center justify-between border-t border-white/5\">\r\n                                <div className=\"flex items-center gap-4\">\r\n                                    <div className=\"w-14 h-14 bg-primary-500/10 rounded-2xl flex items-center justify-center text-primary-400 ring-1 ring-primary-500/20\">\r\n                                        <TrendingUp size={28} />\r\n                                    </div>\r\n                                    <div>\r\n                                        <p className=\"text-sm font-black text-white uppercase tracking-tight\">Clube Cred30</p>\r\n                                        <p className=\"text-xs text-zinc-500 font-bold\">Aproveite agora</p>\r\n                                    </div>\r\n                                </div>\r\n                                <button\r\n                                    onClick={() => window.open('https://www.effectivegatecpm.com/ec4mxdzvs?key=a9eefff1a8aa7769523373a66ff484aa', '_blank')}\r\n                                    className=\"bg-white/10 hover:bg-white/20 text-white px-6 py-4 rounded-2xl font-black text-[10px] uppercase tracking-widest transition-all\"\r\n                                >\r\n                                    CONHECER\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"mt-8 text-center animate-in fade-in duration-1000 delay-500\">\r\n                            <p className=\"text-[9px] text-zinc-600 uppercase font-black tracking-[0.3em]\">Patrocinado por Cred30 Network</p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josia\\Desktop\\projetos\\cred30\\packages\\frontend-v2\\src\\presentation\\hooks\\use-online-status.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","message":"Definition for rule '@typescript-eslint/no-unused-vars' was not found.","line":1,"column":1,"endLine":1,"endColumn":2,"severity":2,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\r\n\r\nexport function useOnlineStatus() {\r\n    const [isOnline, setIsOnline] = useState(navigator.onLine);\r\n\r\n    useEffect(() => {\r\n        const handleOnline = () => setIsOnline(true);\r\n        const handleOffline = () => setIsOnline(false);\r\n\r\n        window.addEventListener('online', handleOnline);\r\n        window.addEventListener('offline', handleOffline);\r\n\r\n        return () => {\r\n            window.removeEventListener('online', handleOnline);\r\n            window.removeEventListener('offline', handleOffline);\r\n        };\r\n    }, []);\r\n\r\n    return isOnline;\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josia\\Desktop\\projetos\\cred30\\packages\\frontend-v2\\src\\presentation\\hooks\\use-performance.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","message":"Definition for rule '@typescript-eslint/no-unused-vars' was not found.","line":1,"column":1,"endLine":1,"endColumn":2,"severity":2,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect, useCallback, useMemo, useRef } from 'react';\r\n\r\n/**\r\n * Hook para debounce de valores\r\n * ├Ütil para evitar requisi├º├Áes excessivas ao digitar\r\n */\r\nexport function useDebounce<T>(value: T, delay: number = 300): T {\r\n    const [debouncedValue, setDebouncedValue] = useState<T>(value);\r\n\r\n    useEffect(() => {\r\n        const timer = setTimeout(() => {\r\n            setDebouncedValue(value);\r\n        }, delay);\r\n\r\n        return () => {\r\n            clearTimeout(timer);\r\n        };\r\n    }, [value, delay]);\r\n\r\n    return debouncedValue;\r\n}\r\n\r\n/**\r\n * Hook para debounce de callbacks\r\n * ├Ütil para handlers de eventos\r\n */\r\nexport function useDebouncedCallback<T extends (...args: any[]) => any>(\r\n    callback: T,\r\n    delay: number = 300\r\n): T {\r\n    const callbackRef = useRef(callback);\r\n    const timeoutRef = useRef<NodeJS.Timeout | null>(null);\r\n\r\n    // Atualizar ref quando callback mudar\r\n    useEffect(() => {\r\n        callbackRef.current = callback;\r\n    }, [callback]);\r\n\r\n    const debouncedCallback = useCallback(\r\n        (...args: Parameters<T>) => {\r\n            if (timeoutRef.current) {\r\n                clearTimeout(timeoutRef.current);\r\n            }\r\n\r\n            timeoutRef.current = setTimeout(() => {\r\n                callbackRef.current(...args);\r\n            }, delay);\r\n        },\r\n        [delay]\r\n    ) as T;\r\n\r\n    // Cleanup no unmount\r\n    useEffect(() => {\r\n        return () => {\r\n            if (timeoutRef.current) {\r\n                clearTimeout(timeoutRef.current);\r\n            }\r\n        };\r\n    }, []);\r\n\r\n    return debouncedCallback;\r\n}\r\n\r\n/**\r\n * Hook para throttle de callbacks\r\n * ├Ütil para scroll handlers e resize\r\n */\r\nexport function useThrottledCallback<T extends (...args: any[]) => any>(\r\n    callback: T,\r\n    delay: number = 100\r\n): T {\r\n    const lastRunRef = useRef<number>(0);\r\n    const callbackRef = useRef(callback);\r\n\r\n    useEffect(() => {\r\n        callbackRef.current = callback;\r\n    }, [callback]);\r\n\r\n    const throttledCallback = useCallback(\r\n        (...args: Parameters<T>) => {\r\n            const now = Date.now();\r\n            if (now - lastRunRef.current >= delay) {\r\n                lastRunRef.current = now;\r\n                callbackRef.current(...args);\r\n            }\r\n        },\r\n        [delay]\r\n    ) as T;\r\n\r\n    return throttledCallback;\r\n}\r\n\r\n/**\r\n * Hook para memoiza├º├úo de objetos pesados\r\n * Evita re-renders desnecess├írios\r\n */\r\nexport function useDeepMemo<T>(value: T, deps: React.DependencyList): T {\r\n    const ref = useRef<T>(value);\r\n    const depsRef = useRef<React.DependencyList>(deps);\r\n\r\n    const depsChanged = deps.some((dep, i) => {\r\n        return !Object.is(dep, depsRef.current[i]);\r\n    });\r\n\r\n    if (depsChanged) {\r\n        ref.current = value;\r\n        depsRef.current = deps;\r\n    }\r\n\r\n    return ref.current;\r\n}\r\n\r\n/**\r\n * Hook para executar callback apenas uma vez (mount)\r\n */\r\nexport function useOnMount(callback: () => void | (() => void)) {\r\n    const hasRun = useRef(false);\r\n\r\n    useEffect(() => {\r\n        if (!hasRun.current) {\r\n            hasRun.current = true;\r\n            return callback();\r\n        }\r\n    }, []);\r\n}\r\n\r\n/**\r\n * Hook para preload de rotas cr├¡ticas\r\n * Carrega componentes no idle time\r\n */\r\nexport function usePrefetch(importFn: () => Promise<any>) {\r\n    useEffect(() => {\r\n        if ('requestIdleCallback' in window) {\r\n            const id = (window as any).requestIdleCallback(() => {\r\n                importFn();\r\n            });\r\n            return () => (window as any).cancelIdleCallback(id);\r\n        } else {\r\n            // Fallback para browsers sem requestIdleCallback\r\n            const timer = setTimeout(() => {\r\n                importFn();\r\n            }, 2000);\r\n            return () => clearTimeout(timer);\r\n        }\r\n    }, [importFn]);\r\n}\r\n\r\n/**\r\n * Hook para local storage com sync entre tabs\r\n */\r\nexport function useLocalStorage<T>(\r\n    key: string,\r\n    initialValue: T\r\n): [T, (value: T | ((prev: T) => T)) => void] {\r\n    const [storedValue, setStoredValue] = useState<T>(() => {\r\n        try {\r\n            const item = window.localStorage.getItem(key);\r\n            return item ? JSON.parse(item) : initialValue;\r\n        } catch {\r\n            return initialValue;\r\n        }\r\n    });\r\n\r\n    const setValue = useCallback(\r\n        (value: T | ((prev: T) => T)) => {\r\n            try {\r\n                const valueToStore = value instanceof Function ? value(storedValue) : value;\r\n                setStoredValue(valueToStore);\r\n                window.localStorage.setItem(key, JSON.stringify(valueToStore));\r\n            } catch (error) {\r\n                console.warn(`Error setting localStorage key \"${key}\":`, error);\r\n            }\r\n        },\r\n        [key, storedValue]\r\n    );\r\n\r\n    // Sync entre tabs\r\n    useEffect(() => {\r\n        const handleStorageChange = (e: StorageEvent) => {\r\n            if (e.key === key && e.newValue) {\r\n                setStoredValue(JSON.parse(e.newValue));\r\n            }\r\n        };\r\n\r\n        window.addEventListener('storage', handleStorageChange);\r\n        return () => window.removeEventListener('storage', handleStorageChange);\r\n    }, [key]);\r\n\r\n    return [storedValue, setValue];\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josia\\Desktop\\projetos\\cred30\\packages\\frontend-v2\\src\\presentation\\pages\\admin\\financial-dashboard.page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","message":"Definition for rule '@typescript-eslint/no-unused-vars' was not found.","line":1,"column":1,"endLine":1,"endColumn":2,"severity":2,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport { MetricCard } from '../../components/ui/MetricCard';\r\nimport { formatCurrency } from '../../../shared/utils/format.utils';\r\nimport { FINANCIAL_CONSTANTS } from '../../../shared/constants/app.constants';\r\n\r\ninterface FinancialDashboardProps {\r\n  systemBalance: number;\r\n  profitPool: number;\r\n  quotasCount: number;\r\n  totalLoaned: number;\r\n  totalToReceive: number;\r\n  onUpdateBalance: (newBalance: number) => void;\r\n  onAddProfit: (amount: number) => void;\r\n  onDistributeProfits: () => void;\r\n}\r\n\r\nexport const FinancialDashboard: React.FC<FinancialDashboardProps> = ({\r\n  systemBalance,\r\n  profitPool,\r\n  quotasCount,\r\n  totalLoaned,\r\n  totalToReceive,\r\n  onUpdateBalance,\r\n  onAddProfit,\r\n  onDistributeProfits\r\n}) => {\r\n  const [balanceInput, setBalanceInput] = useState('');\r\n  const [profitInput, setProfitInput] = useState('');\r\n  const [showBalanceModal, setShowBalanceModal] = useState(false);\r\n  const [showProfitModal, setShowProfitModal] = useState(false);\r\n\r\n  const handleUpdateBalance = () => {\r\n    const amount = parseFloat(balanceInput);\r\n    if (!isNaN(amount) && amount >= 0) {\r\n      onUpdateBalance(amount);\r\n      setBalanceInput('');\r\n      setShowBalanceModal(false);\r\n    }\r\n  };\r\n\r\n  const handleAddProfit = () => {\r\n    const amount = parseFloat(profitInput);\r\n    if (!isNaN(amount) && amount > 0) {\r\n      onAddProfit(amount);\r\n      setProfitInput('');\r\n      setShowProfitModal(false);\r\n    }\r\n  };\r\n\r\n  const profitPerQuota = quotasCount > 0 ? (profitPool * FINANCIAL_CONSTANTS.PROFIT_DISTRIBUTION_RATE) / quotasCount : 0;\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* M├®tricas Principais */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\r\n        <MetricCard\r\n          title=\"Caixa Operacional\"\r\n          value={formatCurrency(systemBalance)}\r\n          subtitle=\"Capital de giro dispon├¡vel\"\r\n          color=\"blue\"\r\n        />\r\n        <MetricCard\r\n          title=\"B├┤nus de Encargos\"\r\n          value={formatCurrency(profitPool)}\r\n          subtitle=\"Juros acumulados\"\r\n          color=\"green\"\r\n        />\r\n        <MetricCard\r\n          title=\"Total Emprestado\"\r\n          value={formatCurrency(totalLoaned)}\r\n          subtitle=\"Valor em empr├®stimos ativos\"\r\n          color=\"yellow\"\r\n        />\r\n        <MetricCard\r\n          title=\"A Receber\"\r\n          value={formatCurrency(totalToReceive)}\r\n          subtitle=\"Principal + juros a receber\"\r\n          color=\"purple\"\r\n        />\r\n      </div>\r\n\r\n      {/* Gest├úo de B├┤nus */}\r\n      <div className=\"bg-white rounded-lg shadow p-6\">\r\n        <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Gest├úo de B├┤nus</h3>\r\n\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n          <div className=\"space-y-4\">\r\n            <div className=\"bg-gray-50 rounded-lg p-4\">\r\n              <h4 className=\"font-medium text-gray-900 mb-2\">Resumo de Distribui├º├úo</h4>\r\n              <div className=\"space-y-2\">\r\n                <div className=\"flex justify-between\">\r\n                  <span className=\"text-sm text-gray-600\">Total de B├┤nus:</span>\r\n                  <span className=\"font-medium\">{formatCurrency(profitPool)}</span>\r\n                </div>\r\n                <div className=\"flex justify-between\">\r\n                  <span className=\"text-sm text-gray-600\">Licen├ºas Ativas:</span>\r\n                  <span className=\"font-medium\">{quotasCount}</span>\r\n                </div>\r\n                <div className=\"flex justify-between\">\r\n                  <span className=\"text-sm text-gray-600\">B├┤nus por Licen├ºa (85%):</span>\r\n                  <span className=\"font-medium text-green-600\">{formatCurrency(profitPerQuota)}</span>\r\n                </div>\r\n                <div className=\"flex justify-between\">\r\n                  <span className=\"text-sm text-gray-600\">Taxa da Plataforma (15%):</span>\r\n                  <span className=\"font-medium text-blue-600\">\r\n                    {formatCurrency(profitPool * 0.15)}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"flex space-x-3\">\r\n              <button\r\n                onClick={() => setShowProfitModal(true)}\r\n                className=\"flex-1 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors\"\r\n              >\r\n                Adicionar B├┤nus\r\n              </button>\r\n              <button\r\n                onClick={onDistributeProfits}\r\n                disabled={profitPool <= 0 || quotasCount === 0}\r\n                className=\"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed\"\r\n              >\r\n                Distribuir B├┤nus\r\n              </button>\r\n            </div>\r\n\r\n            {quotasCount === 0 && (\r\n              <div className=\"bg-yellow-50 border border-yellow-200 rounded-lg p-3\">\r\n                <p className=\"text-sm text-yellow-800\">\r\n                  ÔÜá´©Å N├úo h├í licen├ºas ativas para distribuir b├┤nus\r\n                </p>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"space-y-4\">\r\n            <div className=\"bg-gray-50 rounded-lg p-4\">\r\n              <h4 className=\"font-medium text-gray-900 mb-2\">Informa├º├Áes do Sistema</h4>\r\n              <div className=\"space-y-2\">\r\n                <div className=\"flex justify-between\">\r\n                  <span className=\"text-sm text-gray-600\">Pre├ºo da Licen├ºa:</span>\r\n                  <span className=\"font-medium\">{formatCurrency(FINANCIAL_CONSTANTS.QUOTA_PRICE)}</span>\r\n                </div>\r\n                <div className=\"flex justify-between\">\r\n                  <span className=\"text-sm text-gray-600\">Taxa de Juros:</span>\r\n                  <span className=\"font-medium\">{(FINANCIAL_CONSTANTS.LOAN_INTEREST_RATE * 100).toFixed(0)}%</span>\r\n                </div>\r\n                <div className=\"flex justify-between\">\r\n                  <span className=\"text-sm text-gray-600\">Taxa de Multa:</span>\r\n                  <span className=\"font-medium\">{(FINANCIAL_CONSTANTS.PENALTY_RATE * 100).toFixed(0)}%</span>\r\n                </div>\r\n                <div className=\"flex justify-between\">\r\n                  <span className=\"text-sm text-gray-600\">Per├¡odo de Car├¬ncia:</span>\r\n                  <span className=\"font-medium\">{FINANCIAL_CONSTANTS.VESTING_PERIOD_DAYS} dias</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <button\r\n              onClick={() => setShowBalanceModal(true)}\r\n              className=\"w-full bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors\"\r\n            >\r\n              Atualizar Caixa Operacional\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Modal para atualizar caixa */}\r\n      {showBalanceModal && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\r\n          <div className=\"bg-white rounded-lg p-6 w-full max-w-md\">\r\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">\r\n              Atualizar Caixa Operacional\r\n            </h3>\r\n            <div className=\"space-y-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                  Novo valor do caixa\r\n                </label>\r\n                <input\r\n                  type=\"number\"\r\n                  value={balanceInput}\r\n                  onChange={(e) => setBalanceInput(e.target.value)}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n                  placeholder=\"Digite o valor...\"\r\n                  step=\"0.01\"\r\n                  min=\"0\"\r\n                />\r\n              </div>\r\n              <div className=\"flex space-x-3\">\r\n                <button\r\n                  onClick={handleUpdateBalance}\r\n                  className=\"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors\"\r\n                >\r\n                  Atualizar\r\n                </button>\r\n                <button\r\n                  onClick={() => {\r\n                    setShowBalanceModal(false);\r\n                    setBalanceInput('');\r\n                  }}\r\n                  className=\"flex-1 bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition-colors\"\r\n                >\r\n                  Cancelar\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Modal para adicionar b├┤nus */}\r\n      {showProfitModal && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\r\n          <div className=\"bg-white rounded-lg p-6 w-full max-w-md\">\r\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">\r\n              Adicionar B├┤nus de Encargos\r\n            </h3>\r\n            <div className=\"space-y-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                  Valor do b├┤nus\r\n                </label>\r\n                <input\r\n                  type=\"number\"\r\n                  value={profitInput}\r\n                  onChange={(e) => setProfitInput(e.target.value)}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500\"\r\n                  placeholder=\"Digite o valor...\"\r\n                  step=\"0.01\"\r\n                  min=\"0.01\"\r\n                />\r\n              </div>\r\n              <div className=\"flex space-x-3\">\r\n                <button\r\n                  onClick={handleAddProfit}\r\n                  className=\"flex-1 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors\"\r\n                >\r\n                  Adicionar\r\n                </button>\r\n                <button\r\n                  onClick={() => {\r\n                    setShowProfitModal(false);\r\n                    setProfitInput('');\r\n                  }}\r\n                  className=\"flex-1 bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition-colors\"\r\n                >\r\n                  Cancelar\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josia\\Desktop\\projetos\\cred30\\packages\\frontend-v2\\src\\presentation\\pages\\app.page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","message":"Definition for rule '@typescript-eslint/no-unused-vars' was not found.","line":1,"column":1,"endLine":1,"endColumn":2,"severity":2,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, lazy, Suspense } from 'react';\r\nimport { Routes, Route, Navigate, useNavigate, useLocation } from 'react-router-dom';\r\nimport { Layout } from '../components/layout/main-layout.component';\r\nimport { UpdateNotification } from '../components/ui/update-notification.component';\r\nimport { loadState, logoutUser, buyQuota, sellQuota, sellAllQuotas, requestLoan, repayLoan, repayInstallment, changePassword, upgradePro, claimAdReward, apiService } from '../../application/services/storage.service';\r\nimport { syncService } from '../../application/services/sync.service';\r\nimport { AppState, Quota, Loan, Transaction, User } from '../../domain/types/common.types';\r\nimport { QUOTA_PRICE } from '../../shared/constants/app.constants';\r\nimport { calculateTotalToPay } from '../../shared/utils/financial.utils';\r\nimport { Check, X as XIcon, RefreshCw, AlertTriangle, Users, Copy, Wallet, TrendingUp, ArrowUpFromLine } from 'lucide-react';\r\nimport { PIXModal } from '../components/ui/pix-modal.component';\r\nimport { CardModal } from '../components/ui/card-modal.component';\r\nimport { AuthScreen } from '../components/views/AuthScreen';\r\nimport { ConfirmModal } from '../components/ui/ConfirmModal';\r\nimport { ReviewModal } from '../components/ui/ReviewModal';\r\nimport { BugReportModal } from '../components/ui/BugReportModal';\r\nimport { AIAssistant } from '../components/AIAssistant';\r\nimport { OfflineNotice } from '../components/ui/offline-notice.component';\r\nimport { useOnlineStatus } from '../hooks/use-online-status';\r\n\r\n// Helper para lidar com erro de carregamento de chunks (comum ap├│s deploys)\r\nconst lazyWithRetry = (componentImport: () => Promise<any>) =>\r\n  lazy(async () => {\r\n    const pageHasAlreadyBeenForceRefreshed = JSON.parse(\r\n      window.localStorage.getItem('page-has-been-force-refreshed') || 'false'\r\n    );\r\n\r\n    try {\r\n      const component = await componentImport();\r\n      window.localStorage.setItem('page-has-been-force-refreshed', 'false');\r\n      return component;\r\n    } catch (error) {\r\n      if (!pageHasAlreadyBeenForceRefreshed) {\r\n        window.localStorage.setItem('page-has-been-force-refreshed', 'true');\r\n        return window.location.reload();\r\n      }\r\n      throw error;\r\n    }\r\n  });\r\n\r\n// Lazy imports for views\r\nconst WelcomePage = lazyWithRetry(() => import('./welcome.page'));\r\nconst TermsPage = lazyWithRetry(() => import('./terms.page'));\r\nconst PrivacyPage = lazyWithRetry(() => import('./privacy.page'));\r\nconst SecurityPage = lazyWithRetry(() => import('./security.page'));\r\nconst Dashboard = lazyWithRetry(() => import('../components/views/Dashboard').then(m => ({ default: m.Dashboard })));\r\nconst SettingsView = lazyWithRetry(() => import('../components/views/SettingsView').then(m => ({ default: m.SettingsView })));\r\nconst InvestView = lazyWithRetry(() => import('../components/views/InvestView').then(m => ({ default: m.InvestView })));\r\nconst PortfolioView = lazyWithRetry(() => import('../components/views/PortfolioView').then(m => ({ default: m.PortfolioView })));\r\nconst LoansView = lazyWithRetry(() => import('../components/views/LoansView').then(m => ({ default: m.LoansView })));\r\nconst WithdrawView = lazyWithRetry(() => import('../components/views/WithdrawView').then(m => ({ default: m.WithdrawView })));\r\nconst AdminView = lazyWithRetry(() => import('../components/views/AdminView').then(m => ({ default: m.AdminView })));\r\nconst HistoryView = lazyWithRetry(() => import('../components/views/HistoryView').then(m => ({ default: m.HistoryView })));\r\nconst MarketplaceView = lazyWithRetry(() => import('../components/views/MarketplaceView').then(m => ({ default: m.MarketplaceView })));\r\nconst EarnView = lazyWithRetry(() => import('../components/views/EarnView').then(m => ({ default: m.EarnView })));\r\nconst GamesView = lazyWithRetry(() => import('../components/views/GamesView').then(m => ({ default: m.GamesView })));\r\nconst EducationView = lazyWithRetry(() => import('../components/views/EducationView').then(m => ({ default: m.EducationView })));\r\nconst FaqView = lazyWithRetry(() => import('../components/views/FaqView').then(m => ({ default: m.FaqView })));\r\nconst VotingView = lazyWithRetry(() => import('../components/views/VotingView').then(m => ({ default: m.VotingView })));\r\nconst PromoVideosView = lazyWithRetry(() => import('../components/views/PromoVideosView').then(m => ({ default: m.PromoVideosView })));\r\nconst ViewFarmView = lazyWithRetry(() => import('../components/views/ViewFarmView').then(m => ({ default: m.ViewFarmView })));\r\nconst SellerRegistrationView = lazyWithRetry(() => import('../components/views/SellerRegistrationView'));\r\nconst MyBugReportsView = lazyWithRetry(() => import('../components/views/MyBugReportsView').then(m => ({ default: m.MyBugReportsView })));\r\n\r\nexport default function App() {\r\n  const [state, setState] = useState<AppState>({\r\n    currentUser: null,\r\n    users: [],\r\n    quotas: [],\r\n    loans: [],\r\n    transactions: [],\r\n    isLoading: true,\r\n    profitPool: 0,\r\n    systemBalance: 0,\r\n    lastDividendDistribution: null,\r\n    serverTime: Date.now()\r\n  });\r\n\r\n  const location = useLocation();\r\n  const navigate = useNavigate();\r\n  const currentView = location.pathname.split('/').pop() || 'dashboard';\r\n  const isOnline = useOnlineStatus();\r\n  const [showReferral, setShowReferral] = useState(false);\r\n  const [showVip, setShowVip] = useState(false);\r\n\r\n  const [pixModalData, setPixModalData] = useState<{\r\n    isOpen: boolean,\r\n    qrCode: string,\r\n    qrCodeBase64: string,\r\n    amount: number,\r\n    description: string\r\n  }>({\r\n    isOpen: false, qrCode: '', qrCodeBase64: '', amount: 0, description: ''\r\n  });\r\n\r\n  const [cardModalData, setCardModalData] = useState<{\r\n    isOpen: boolean,\r\n    amount: number,\r\n    type: 'QUOTA' | 'LOAN' | 'INSTALLMENT' | 'PRO',\r\n    details: any\r\n  }>({\r\n    isOpen: false, amount: 0, type: 'QUOTA', details: {}\r\n  });\r\n\r\n  const [showSuccess, setShowSuccess] = useState<{ isOpen: boolean, title: string, message: string }>({\r\n    isOpen: false, title: '', message: ''\r\n  });\r\n\r\n  const [showError, setShowError] = useState<{ isOpen: boolean, title: string, message: string }>({\r\n    isOpen: false, title: '', message: ''\r\n  });\r\n\r\n  // Auto-dismiss notifications after 4 seconds\r\n  useEffect(() => {\r\n    if (showSuccess.isOpen) {\r\n      const timer = setTimeout(() => setShowSuccess(prev => ({ ...prev, isOpen: false })), 4000);\r\n      return () => clearTimeout(timer);\r\n    }\r\n  }, [showSuccess.isOpen, showSuccess.title]);\r\n\r\n  useEffect(() => {\r\n    if (showError.isOpen) {\r\n      const timer = setTimeout(() => setShowError(prev => ({ ...prev, isOpen: false })), 5000);\r\n      return () => clearTimeout(timer);\r\n    }\r\n  }, [showError.isOpen, showError.title]);\r\n\r\n  const [confirmState, setConfirmState] = useState<{ id?: string, type: 'SELL' | 'SELL_ALL' } | null>(null);\r\n\r\n  const [reviewModalData, setReviewModalData] = useState<{\r\n    isOpen: boolean;\r\n    transactionId: number;\r\n    amount: number;\r\n  }>({ isOpen: false, transactionId: 0, amount: 0 });\r\n\r\n  const [showBugReport, setShowBugReport] = useState(false);\r\n\r\n  const isStaff = React.useMemo(() => {\r\n    if (!state.currentUser) return false;\r\n    return state.currentUser.isAdmin || state.currentUser.role === 'ADMIN' || state.currentUser.role === 'ATTENDANT';\r\n  }, [state.currentUser?.isAdmin, state.currentUser?.role]);\r\n\r\n  const totalQuotaValue = React.useMemo(() => {\r\n    if (!state.currentUser) return 0;\r\n    return state.quotas\r\n      .filter(q => q.userId === state.currentUser.id)\r\n      .reduce((acc, q) => acc + (q.currentValue || 0), 0);\r\n  }, [state.quotas, state.currentUser?.id]);\r\n\r\n  useEffect(() => {\r\n    loadData();\r\n    const interval = setInterval(() => {\r\n      if (state.currentUser && !document.hidden && isOnline) {\r\n        refreshState();\r\n      }\r\n    }, 15000);\r\n\r\n    const handleAuthExpired = () => setState(prev => ({ ...prev, currentUser: null }));\r\n    window.addEventListener('auth-expired', handleAuthExpired);\r\n\r\n    const handleActionQueued = (e: any) => {\r\n      setShowSuccess({\r\n        isOpen: true,\r\n        title: 'Modo Offline',\r\n        message: 'Voc├¬ est├í offline. Sua a├º├úo foi agendada e ser├í processada assim que a internet voltar.'\r\n      });\r\n    };\r\n\r\n    const handleSyncCompleted = (e: any) => {\r\n      const results = e.detail;\r\n      const successCount = results.filter((r: any) => r.success).length;\r\n      if (successCount > 0) {\r\n        setShowSuccess({\r\n          isOpen: true,\r\n          title: 'Sincroniza├º├úo Conclu├¡da',\r\n          message: `${successCount} a├º├Áes offline foram processadas com sucesso!`\r\n        });\r\n        refreshState();\r\n      }\r\n    };\r\n\r\n    window.addEventListener('offline-action-queued', handleActionQueued);\r\n    window.addEventListener('offline-sync-completed', handleSyncCompleted);\r\n\r\n    const handleOpenBugReport = () => setShowBugReport(true);\r\n    window.addEventListener('open-bug-report', handleOpenBugReport);\r\n\r\n    let cleanupNotifications: (() => void) | undefined;\r\n    if (state.currentUser && isOnline) {\r\n      cleanupNotifications = apiService.listenToNotifications((notif) => {\r\n        if (notif.type === 'PAYOUT_COMPLETED' && notif.metadata?.requiresReview) {\r\n          setReviewModalData({\r\n            isOpen: true,\r\n            transactionId: notif.metadata.transactionId,\r\n            amount: notif.metadata.amount\r\n          });\r\n        }\r\n\r\n        setShowSuccess({\r\n          isOpen: true,\r\n          title: notif.title || 'Notifica├º├úo',\r\n          message: notif.message || 'Status atualizado!'\r\n        });\r\n        refreshState();\r\n      });\r\n    }\r\n\r\n    return () => {\r\n      clearInterval(interval);\r\n      window.removeEventListener('auth-expired', handleAuthExpired);\r\n      window.removeEventListener('offline-action-queued', handleActionQueued);\r\n      window.removeEventListener('offline-sync-completed', handleSyncCompleted);\r\n      window.removeEventListener('open-bug-report', handleOpenBugReport);\r\n      if (cleanupNotifications) cleanupNotifications();\r\n    };\r\n  }, [state.currentUser?.id, isOnline, state.currentUser?.isAdmin, state.currentUser?.role]);\r\n\r\n  useEffect(() => {\r\n    if (isOnline) {\r\n      syncService.processQueue();\r\n    }\r\n  }, [isOnline]);\r\n\r\n  const loadData = async () => {\r\n    try {\r\n      await refreshState();\r\n    } catch {\r\n      setState(prev => ({ ...prev, isLoading: false }));\r\n    }\r\n  };\r\n  const refreshState = async () => {\r\n    try {\r\n      const newState = await loadState();\r\n      setState(prev => ({ ...prev, ...newState, isLoading: false }));\r\n    } catch (e) {\r\n      console.error(e);\r\n      setState(prev => ({ ...prev, isLoading: false }));\r\n    }\r\n  };\r\n\r\n  const handleLogout = async () => {\r\n    await logoutUser();\r\n    setState(prev => ({ ...prev, currentUser: null }));\r\n    navigate('/');\r\n  };\r\n\r\n  const handleBuyQuota = async (qty: number, method: 'PIX' | 'BALANCE' | 'CARD') => {\r\n    try {\r\n      const { total } = calculateTotalToPay(qty * QUOTA_PRICE, method.toLowerCase() as any);\r\n\r\n      if (method === 'CARD') {\r\n        setCardModalData({\r\n          isOpen: true,\r\n          amount: total,\r\n          type: 'QUOTA',\r\n          details: { qty }\r\n        });\r\n        return;\r\n      }\r\n\r\n      const pm = method.toLowerCase() as any;\r\n      const response = await buyQuota(qty, method === 'BALANCE', pm !== 'balance' ? pm : undefined);\r\n      await refreshState();\r\n\r\n      if (response && (response.pixData || response.data?.pixData)) {\r\n        const pixData = response.pixData || response.data?.pixData;\r\n        setPixModalData({\r\n          isOpen: true,\r\n          qrCode: pixData.qr_code,\r\n          qrCodeBase64: pixData.qr_code_base64,\r\n          amount: total,\r\n          description: `Aquisi├º├úo de ${qty} licen├ºa(s)`\r\n        });\r\n        return;\r\n      }\r\n\r\n      setShowSuccess({ isOpen: true, title: 'Sucesso!', message: 'Licen├ºas ativadas com sucesso!' });\r\n      navigate('/app/portfolio');\r\n    } catch (error: any) {\r\n      setShowError({ isOpen: true, title: 'Erro na Compra', message: error.message });\r\n    }\r\n  };\r\n\r\n  const handleSellQuota = (quotaId: string) => {\r\n    setConfirmState({ id: quotaId, type: 'SELL' });\r\n  };\r\n\r\n  const handleSellAll = () => {\r\n    setConfirmState({ type: 'SELL_ALL' });\r\n  };\r\n\r\n  const executeConfirmedSell = async () => {\r\n    if (!confirmState) return;\r\n    try {\r\n      if (confirmState.type === 'SELL' && confirmState.id) {\r\n        await sellQuota(confirmState.id);\r\n        setShowSuccess({ isOpen: true, title: 'Resgate Realizado', message: 'Valor creditado.' });\r\n      } else if (confirmState.type === 'SELL_ALL') {\r\n        await sellAllQuotas();\r\n        setShowSuccess({ isOpen: true, title: 'Sucesso', message: 'Todas as licen├ºas resgatadas!' });\r\n      }\r\n      await refreshState();\r\n    } catch (error: any) {\r\n      setShowError({ isOpen: true, title: 'Erro', message: error.message });\r\n    } finally {\r\n      setConfirmState(null);\r\n    }\r\n  };\r\n\r\n  const handleReinvest = async () => {\r\n    try {\r\n      await buyQuota(1, true);\r\n      await refreshState();\r\n      setShowSuccess({ isOpen: true, title: 'Sucesso', message: 'Aporte realizado com sucesso!' });\r\n    } catch (error: any) { setShowError({ isOpen: true, title: 'Erro', message: error.message }); }\r\n  };\r\n\r\n  const handleRequestLoan = async (amount: number, installments: number) => {\r\n    try {\r\n      await requestLoan(amount, installments);\r\n      await refreshState();\r\n      setShowSuccess({ isOpen: true, title: 'Sucesso!', message: 'Apoio solicitado com sucesso!' });\r\n    } catch (e: any) { setShowError({ isOpen: true, title: 'Erro', message: e.message }); }\r\n  };\r\n\r\n  const handlePayLoan = async (loanId: string, useBalance: boolean, method?: 'pix' | 'card') => {\r\n    try {\r\n      const loan = state.loans.find(l => l.id === loanId);\r\n      if (!loan) return;\r\n      const { total } = calculateTotalToPay(parseFloat(loan.totalRepayment as any), method || 'pix');\r\n\r\n      if (method === 'card') {\r\n        setCardModalData({\r\n          isOpen: true,\r\n          amount: total,\r\n          type: 'LOAN',\r\n          details: { loanId }\r\n        });\r\n        return;\r\n      }\r\n\r\n      const response = await repayLoan(loanId, useBalance, method);\r\n      await refreshState();\r\n\r\n      if (response && (response.pixData || response.data?.pixData)) {\r\n        const pixData = response.pixData || response.data?.pixData;\r\n        setPixModalData({\r\n          isOpen: true,\r\n          qrCode: pixData.qr_code,\r\n          qrCodeBase64: pixData.qr_code_base64,\r\n          amount: total,\r\n          description: `Reposi├º├úo de Apoio M├║tuo`\r\n        });\r\n      } else {\r\n        setShowSuccess({ isOpen: true, title: 'Pagamento OK!', message: 'Apoio atualizado.' });\r\n      }\r\n    } catch (e: any) { setShowError({ isOpen: true, title: 'Erro', message: e.message }); }\r\n  };\r\n\r\n  const handlePayInstallment = async (id: string, amount: number, useBalance: boolean, method?: 'pix' | 'card') => {\r\n    try {\r\n      const { total } = calculateTotalToPay(amount, method || 'pix');\r\n\r\n      if (method === 'card') {\r\n        setCardModalData({\r\n          isOpen: true,\r\n          amount: total,\r\n          type: 'INSTALLMENT',\r\n          details: { loanId: id, amount }\r\n        });\r\n        return;\r\n      }\r\n\r\n      const response = await repayInstallment(id, amount, useBalance, method);\r\n      await refreshState();\r\n\r\n      if (response && (response.pixData || response.data?.pixData)) {\r\n        const pixData = response.pixData || response.data?.pixData;\r\n        setPixModalData({\r\n          isOpen: true,\r\n          qrCode: pixData.qr_code,\r\n          qrCodeBase64: pixData.qr_code_base64,\r\n          amount: total,\r\n          description: `Pagamento de Parcela`\r\n        });\r\n      } else {\r\n        setShowSuccess({ isOpen: true, title: 'Parcela Paga!', message: 'Reposi├º├úo registrada.' });\r\n      }\r\n    } catch (e: any) { setShowError({ isOpen: true, title: 'Erro', message: e.message }); }\r\n  };\r\n\r\n  const handleClaimAdReward = async () => {\r\n    try {\r\n      await claimAdReward();\r\n      await refreshState();\r\n      setShowSuccess({ isOpen: true, title: 'Sucesso', message: 'Recompensa creditada!' });\r\n    } catch (e: any) { setShowError({ isOpen: true, title: 'Erro', message: e.message }); }\r\n  };\r\n\r\n  const handleUpgradeProClick = async (method: 'pix' | 'card') => {\r\n    try {\r\n      const { total } = calculateTotalToPay(29.90, method);\r\n\r\n      if (method === 'card') {\r\n        setCardModalData({\r\n          isOpen: true,\r\n          amount: total,\r\n          type: 'PRO',\r\n          details: {}\r\n        });\r\n        return;\r\n      }\r\n\r\n      const response = await upgradePro(method);\r\n      await refreshState();\r\n\r\n      if (response && (response.pixData || response.data?.pixData)) {\r\n        const pixData = response.pixData || response.data?.pixData;\r\n        setPixModalData({\r\n          isOpen: true,\r\n          qrCode: pixData.qr_code,\r\n          qrCodeBase64: pixData.qr_code_base64,\r\n          amount: total,\r\n          description: `Assinatura Cred30 PRO`\r\n        });\r\n      } else {\r\n        setShowSuccess({ isOpen: true, title: 'Sucesso!', message: 'Voc├¬ agora ├® PRO!' });\r\n      }\r\n    } catch (e: any) {\r\n      setShowError({ isOpen: true, title: 'Erro', message: e.message });\r\n    }\r\n  };\r\n\r\n  if (state.isLoading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-black flex flex-col items-center justify-center p-6 text-center\">\r\n        <div className=\"relative\">\r\n          <div className=\"w-24 h-24 bg-primary-500/10 rounded-[2rem] border border-primary-500/20 flex items-center justify-center shadow-[0_0_50px_rgba(6,182,212,0.15)] animate-pulse\">\r\n            <img src=\"/pwa-192x192.png\" alt=\"Cred30\" className=\"w-16 h-16 rounded-2xl\" />\r\n          </div>\r\n          <div className=\"absolute inset-0 w-24 h-24 border-2 border-primary-500 border-t-transparent rounded-[2rem] animate-spin\" />\r\n        </div>\r\n        <div className=\"mt-8 space-y-2\">\r\n          <h1 className=\"text-2xl font-black text-white tracking-tighter\">Cred<span className=\"text-primary-400\">30</span></h1>\r\n          <p className=\"text-[10px] text-zinc-500 font-bold uppercase tracking-[0.4em] animate-pulse\">Sincronizando Dados...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!state.currentUser) {\r\n    return (\r\n      <Suspense fallback={<div className=\"min-h-screen bg-black flex items-center justify-center\"><RefreshCw className=\"animate-spin text-primary-500\" /></div>}>\r\n        <Routes>\r\n          <Route path=\"/\" element={<WelcomePage />} />\r\n          <Route path=\"/auth\" element={<AuthScreen onLogin={refreshState} />} />\r\n          <Route path=\"/terms\" element={<TermsPage />} />\r\n          <Route path=\"/privacy\" element={<PrivacyPage />} />\r\n          <Route path=\"/security\" element={<SecurityPage />} />\r\n          <Route path=\"*\" element={<Navigate to=\"/\" replace />} />\r\n        </Routes>\r\n      </Suspense>\r\n    );\r\n  }\r\n\r\n  if (isStaff) {\r\n    return (\r\n      <Suspense fallback={<div className=\"min-h-screen bg-black flex items-center justify-center\"><RefreshCw className=\"animate-spin text-primary-500\" /></div>}>\r\n        <Routes>\r\n          <Route path=\"/admin\" element={<AdminView state={state} onRefresh={refreshState} onLogout={handleLogout} onSuccess={(title, msg) => { setShowSuccess({ isOpen: true, title, message: msg }); }} onError={(title, msg) => { setShowError({ isOpen: true, title, message: msg }); }} />} />\r\n          <Route path=\"*\" element={<Navigate to=\"/admin\" replace />} />\r\n        </Routes>\r\n      </Suspense>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <OfflineNotice isOnline={isOnline} />\r\n      <UpdateNotification />\r\n      <Routes>\r\n        <Route path=\"/\" element={<Navigate to=\"/app/dashboard\" replace />} />\r\n        <Route path=\"/auth\" element={<Navigate to=\"/app/dashboard\" replace />} />\r\n        <Route path=\"/app/*\" element={\r\n          <>\r\n            <Layout user={state.currentUser} currentView={currentView} onChangeView={(v) => navigate(`/app/${v}`)} onLogout={handleLogout}>\r\n              <Routes>\r\n                <Route path=\"dashboard\" element={\r\n                  <Suspense fallback={<div className=\"flex justify-center p-12\"><RefreshCw className=\"animate-spin text-primary-500\" /></div>}>\r\n                    <Dashboard\r\n                      state={state}\r\n                      onBuyQuota={() => navigate('/app/invest')}\r\n                      onGames={() => navigate('/app/games')}\r\n                      onLoans={() => navigate('/app/loans')}\r\n                      onWithdraw={() => navigate('/app/withdraw')}\r\n                      onRefer={() => setShowReferral(true)}\r\n                      onSuccess={(title, message) => setShowSuccess({ isOpen: true, title, message })}\r\n                      onError={(title, message) => setShowError({ isOpen: true, title, message })}\r\n                      onEducation={() => navigate('/app/education')}\r\n                      onVoting={() => navigate('/app/voting')}\r\n                    />\r\n                  </Suspense>\r\n                } />\r\n                <Route path=\"settings\" element={\r\n                  <Suspense fallback={null}>\r\n                    <SettingsView\r\n                      user={state.currentUser!}\r\n                      onLogout={handleLogout}\r\n                      onDeleteAccount={() => { }}\r\n                      onChangePassword={changePassword}\r\n                      onRefresh={refreshState}\r\n                    />\r\n                  </Suspense>\r\n                } />\r\n                <Route path=\"invest\" element={<Suspense fallback={null}><InvestView onBuy={handleBuyQuota} isPro={state.currentUser?.membership_type === 'PRO'} /></Suspense>} />\r\n                <Route path=\"portfolio\" element={\r\n                  <Suspense fallback={null}>\r\n                    <PortfolioView\r\n                      quotas={state.quotas.filter(q => q.userId === state.currentUser?.id)}\r\n                      hasLoans={state.loans.some(l => l.userId === state.currentUser?.id && l.status === 'APPROVED' && !l.isFullyPaid)}\r\n                      onSell={handleSellQuota}\r\n                      onSellAll={handleSellAll}\r\n                    />\r\n                  </Suspense>\r\n                } />\r\n                <Route path=\"loans\" element={\r\n                  <Suspense fallback={null}>\r\n                    <LoansView\r\n                      loans={state.loans}\r\n                      onRequest={handleRequestLoan}\r\n                      onPay={handlePayLoan}\r\n                      onPayInstallment={handlePayInstallment}\r\n                      userBalance={state.currentUser.balance}\r\n                      currentUser={state.currentUser}\r\n                    />\r\n                  </Suspense>\r\n                } />\r\n                <Route path=\"withdraw\" element={\r\n                  <Suspense fallback={null}>\r\n                    <WithdrawView\r\n                      balance={state.currentUser.balance}\r\n                      currentUser={state.currentUser}\r\n                      onSuccess={(title, message) => setShowSuccess({ isOpen: true, title, message })}\r\n                      onError={(title, message) => setShowError({ isOpen: true, title, message })}\r\n                      onRefresh={refreshState}\r\n                      totalQuotaValue={totalQuotaValue}\r\n                    />\r\n                  </Suspense>\r\n                } />\r\n                <Route path=\"marketplace\" element={<Suspense fallback={null}><MarketplaceView state={state} onBack={() => navigate('/app/dashboard')} onSuccess={(title, message) => setShowSuccess({ isOpen: true, title, message })} onError={(title, message) => setShowError({ isOpen: true, title, message })} onRefresh={refreshState} /></Suspense>} />\r\n                <Route path=\"earn\" element={<Suspense fallback={null}><EarnView state={state} onBack={() => navigate('/app/dashboard')} onSuccess={(title, message) => setShowSuccess({ isOpen: true, title, message })} onError={(title, message) => setShowError({ isOpen: true, title, message })} onRefresh={refreshState} onUpgrade={handleUpgradeProClick} /></Suspense>} />\r\n                <Route path=\"games\" element={<Suspense fallback={null}><GamesView onBack={() => navigate('/app/dashboard')} /></Suspense>} />\r\n                <Route path=\"education\" element={<Suspense fallback={null}><EducationView onBack={() => navigate('/app/dashboard')} onSuccess={(title, message) => setShowSuccess({ isOpen: true, title, message })} /></Suspense>} />\r\n                <Route path=\"faq\" element={<Suspense fallback={null}><FaqView /></Suspense>} />\r\n                <Route path=\"voting\" element={<Suspense fallback={null}><VotingView appState={state} onBack={() => navigate('/app/dashboard')} onRefresh={refreshState} onSuccess={(title, message) => setShowSuccess({ isOpen: true, title, message })} onError={(title, message) => setShowError({ isOpen: true, title, message })} /></Suspense>} />\r\n                <Route path=\"promo-videos\" element={<Suspense fallback={null}><PromoVideosView userBalance={state.currentUser.balance} onRefresh={refreshState} onSuccess={(title, message) => setShowSuccess({ isOpen: true, title, message })} onError={(title, message) => setShowError({ isOpen: true, title, message })} onFarm={() => navigate('/app/promo-videos/farm')} /></Suspense>} />\r\n                <Route path=\"promo-videos/farm\" element={<Suspense fallback={null}><ViewFarmView onBack={() => navigate('/app/promo-videos')} onSuccess={(title, message) => setShowSuccess({ isOpen: true, title, message })} onError={(title, message) => setShowError({ isOpen: true, title, message })} onRefresh={refreshState} /></Suspense>} />\r\n                <Route path=\"history\" element={<Suspense fallback={null}><HistoryView transactions={state.transactions.filter(t => t.userId === state.currentUser!.id)} isPro={state.currentUser?.membership_type === 'PRO'} /></Suspense>} />\r\n                <Route path=\"seller\" element={<Suspense fallback={null}><SellerRegistrationView /></Suspense>} />\r\n                <Route path=\"bug-reports\" element={<Suspense fallback={null}><MyBugReportsView onBack={() => navigate('/app/settings')} onSuccess={(title, message) => setShowSuccess({ isOpen: true, title, message })} onError={(title, message) => setShowError({ isOpen: true, title, message })} /></Suspense>} />\r\n                <Route path=\"*\" element={<Navigate to=\"/app/dashboard\" replace />} />\r\n              </Routes>\r\n\r\n              {showReferral && (\r\n                <div className=\"fixed inset-0 bg-black/80 backdrop-blur-md flex items-end sm:items-center justify-center z-[500] p-0 sm:p-4 animate-in fade-in duration-300\" onClick={() => setShowReferral(false)}>\r\n                  <div className=\"bg-[#0A0A0A] border-t sm:border border-white/5 sm:border-surfaceHighlight rounded-t-[2.5rem] sm:rounded-3xl p-8 w-full sm:max-w-sm relative animate-in slide-in-from-bottom-full sm:zoom-in-95 duration-500 sm:duration-300\" onClick={e => e.stopPropagation()}>\r\n                    <div className=\"w-12 h-1.5 bg-zinc-800 rounded-full mx-auto mb-6 sm:hidden opacity-50\" />\r\n\r\n                    <button title=\"Fechar\" onClick={() => setShowReferral(false)} className=\"absolute top-4 right-4 text-zinc-500 hover:text-white hidden sm:block\">Ô£ò</button>\r\n\r\n                    <div className=\"text-center mb-8\">\r\n                      <div className=\"w-20 h-20 bg-primary-500/10 rounded-3xl flex items-center justify-center text-primary-400 mx-auto mb-4 shadow-xl shadow-primary-900/20 ring-1 ring-primary-500/20\">\r\n                        <Users size={40} strokeWidth={2.5} />\r\n                      </div>\r\n                      <h3 className=\"text-2xl font-black text-white mb-2 tracking-tight\">Convidar Membro</h3>\r\n                      <p className=\"text-zinc-400 text-sm font-medium leading-relaxed\">O Cred30 ├® um clube exclusivo. Use seu link para convidar pessoas de confian├ºa.</p>\r\n                    </div>\r\n\r\n                    <div className=\"space-y-6\">\r\n                      <div className=\"bg-zinc-900/50 border border-zinc-800 rounded-2xl p-5 text-center group cursor-copy active:bg-zinc-800 transition-colors\" onClick={() => {\r\n                        const link = `${window.location.origin}/auth?ref=${state.currentUser!.referralCode}`;\r\n                        navigator.clipboard.writeText(link);\r\n                        setShowSuccess({ isOpen: true, title: 'Copiado!', message: 'Link de convite pronto para enviar!' });\r\n                      }}>\r\n                        <p className=\"text-[10px] text-zinc-500 uppercase font-black tracking-widest mb-1\">Seu C├│digo de Acesso</p>\r\n                        <p className=\"text-white font-mono text-2xl font-black tracking-[0.2em] group-hover:text-primary-400 transition-colors\">{state.currentUser!.referralCode}</p>\r\n                      </div>\r\n\r\n                      <button\r\n                        onClick={() => {\r\n                          const link = `${window.location.origin}/auth?ref=${state.currentUser!.referralCode}`;\r\n                          navigator.clipboard.writeText(link);\r\n                          setShowSuccess({ isOpen: true, title: 'Copiado!', message: 'Link de convite pronto para enviar!' });\r\n                        }}\r\n                        className=\"w-full bg-primary-500 hover:bg-primary-400 text-black font-black uppercase tracking-widest py-5 rounded-2xl transition-all flex items-center justify-center gap-3 shadow-2xl shadow-primary-500/20 active:scale-95\"\r\n                      >\r\n                        <Copy size={20} /> COPIAR LINK\r\n                      </button>\r\n\r\n                      <div className=\"bg-emerald-500/5 border border-emerald-500/10 rounded-xl p-4\">\r\n                        <div className=\"flex items-start gap-3\">\r\n                          <div className=\"w-10 h-10 rounded-lg bg-emerald-500/20 flex items-center justify-center text-emerald-400 shrink-0\">\r\n                            ­ƒÄü\r\n                          </div>\r\n                          <div>\r\n                            <p className=\"text-xs text-emerald-400 font-bold mb-1\">Benef├¡cio de Boas-Vindas!</p>\r\n                            <p className=\"text-[10px] sm:text-xs text-zinc-400 leading-relaxed\">\r\n                              Quem voc├¬ indicar ganha <span className=\"text-emerald-400 font-bold\">taxas especiais</span> por at├® <span className=\"text-emerald-400 font-bold\">3 usos</span>:\r\n                            </p>\r\n                            <ul className=\"text-[10px] text-zinc-500 mt-2 space-y-1\">\r\n                              <li>ÔÇó Juros de <span className=\"text-emerald-400\">3,5%</span> (ao inv├®s de 20%)</li>\r\n                              <li>ÔÇó Taxa de saque de <span className=\"text-emerald-400\">R$ 1,00</span> (50% off)</li>\r\n                              <li>ÔÇó Marketplace com <span className=\"text-emerald-400\">2,5%</span> de taxa (50% off)</li>\r\n                            </ul>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n\r\n                      <div className=\"bg-primary-500/5 border border-primary-500/10 rounded-xl p-3 flex items-center gap-3\">\r\n                        <div className=\"w-8 h-8 rounded-lg bg-primary-500/20 flex items-center justify-center text-primary-400 shrink-0\">\r\n                          <TrendingUp size={16} />\r\n                        </div>\r\n                        <p className=\"text-[10px] sm:text-xs text-zinc-400 leading-tight\">Voc├¬ ganha <span className=\"text-primary-400 font-black\">+50 Score</span> por cada novo membro ativo que indicar.</p>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              <PIXModal\r\n                isOpen={pixModalData.isOpen}\r\n                onClose={() => setPixModalData(prev => ({ ...prev, isOpen: false }))}\r\n                qrCode={pixModalData.qrCode}\r\n                qrCodeBase64={pixModalData.qrCodeBase64}\r\n                amount={pixModalData.amount}\r\n                description={pixModalData.description}\r\n              />\r\n\r\n              <CardModal\r\n                isOpen={cardModalData.isOpen}\r\n                onClose={() => setCardModalData(prev => ({ ...prev, isOpen: false }))}\r\n                amount={cardModalData.amount}\r\n                userEmail={state.currentUser?.email || ''}\r\n                currentUser={state.currentUser}\r\n                onSubmit={async (formData) => {\r\n                  try {\r\n                    if (cardModalData.type === 'QUOTA') {\r\n                      await buyQuota(cardModalData.details.qty, false, 'card', formData);\r\n                    } else if (cardModalData.type === 'LOAN') {\r\n                      await repayLoan(cardModalData.details.loanId, false, 'card', formData);\r\n                    } else if (cardModalData.type === 'INSTALLMENT') {\r\n                      await repayInstallment(cardModalData.details.loanId, cardModalData.details.amount, false, 'card', formData);\r\n                    } else if (cardModalData.type === 'PRO') {\r\n                      await upgradePro('card', formData);\r\n                    }\r\n                    await refreshState();\r\n                    setCardModalData(prev => ({ ...prev, isOpen: false }));\r\n                    setShowSuccess({ isOpen: true, title: 'Processando...', message: 'Pagamento sendo analisado.' });\r\n                  } catch (e: any) {\r\n                    setShowError({ isOpen: true, title: 'Erro no Cart├úo', message: e.message });\r\n                  }\r\n                }}\r\n              />\r\n\r\n              {showSuccess.isOpen && (\r\n                <div className=\"fixed top-6 left-1/2 -translate-x-1/2 w-[90%] sm:w-auto sm:min-w-[400px] z-[9999] animate-in slide-in-from-top-10 duration-500\">\r\n                  <div className=\"bg-[#050505]/90 backdrop-blur-xl border border-emerald-500/30 rounded-3xl p-4 flex items-center gap-4 shadow-[0_20px_50px_rgba(16,185,129,0.2)] ring-1 ring-emerald-500/20\">\r\n                    <div className=\"w-11 h-11 bg-emerald-500 rounded-2xl flex items-center justify-center text-black shrink-0 shadow-lg shadow-emerald-500/30\">\r\n                      <Check size={24} strokeWidth={4} />\r\n                    </div>\r\n                    <div className=\"flex-1\">\r\n                      <h4 className=\"text-white font-black text-[10px] tracking-widest uppercase mb-0.5\">{showSuccess.title}</h4>\r\n                      <p className=\"text-zinc-400 text-xs font-bold leading-tight\">{showSuccess.message}</p>\r\n                    </div>\r\n                    <button onClick={() => setShowSuccess({ ...showSuccess, isOpen: false })} className=\"text-zinc-500 hover:text-white transition-colors bg-white/5 p-2 rounded-xl\">\r\n                      <XIcon size={16} />\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {showError.isOpen && (\r\n                <div className=\"fixed top-6 left-1/2 -translate-x-1/2 w-[90%] sm:w-auto sm:min-w-[400px] z-[9999] animate-in slide-in-from-top-10 duration-500\">\r\n                  <div className=\"bg-[#050505]/90 backdrop-blur-xl border border-red-500/30 rounded-3xl p-4 flex items-center gap-4 shadow-[0_20px_50px_rgba(239,68,68,0.2)] ring-1 ring-red-500/20\">\r\n                    <div className=\"w-11 h-11 bg-red-500 rounded-2xl flex items-center justify-center text-white shrink-0 shadow-lg shadow-red-500/30\">\r\n                      <AlertTriangle size={24} strokeWidth={3} />\r\n                    </div>\r\n                    <div className=\"flex-1\">\r\n                      <h4 className=\"text-white font-black text-[10px] tracking-widest uppercase mb-0.5\">{showError.title}</h4>\r\n                      <p className=\"text-zinc-400 text-xs font-bold leading-tight\">{showError.message}</p>\r\n                    </div>\r\n                    <button onClick={() => setShowError({ ...showError, isOpen: false })} className=\"text-zinc-500 hover:text-white transition-colors bg-white/5 p-2 rounded-xl\">\r\n                      <XIcon size={16} />\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {confirmState && (\r\n                <ConfirmModal\r\n                  isOpen={!!confirmState}\r\n                  onClose={() => setConfirmState(null)}\r\n                  onConfirm={executeConfirmedSell}\r\n                  title={confirmState.type === 'SELL_ALL' ? 'Resgatar Tudo?' : 'Confirmar Resgate?'}\r\n                  message={confirmState.type === 'SELL_ALL' ? 'Deseja resgatar todas as licen├ºas?' : 'Deseja resgatar esta participa├º├úo?'}\r\n                  confirmText=\"Resgatar\"\r\n                  type=\"danger\"\r\n                />\r\n              )}\r\n\r\n              <ReviewModal\r\n                isOpen={reviewModalData.isOpen}\r\n                onClose={() => setReviewModalData({ isOpen: false, transactionId: 0, amount: 0 })}\r\n                onSubmit={async (rating, comment, isPublic) => {\r\n                  await apiService.submitReview(reviewModalData.transactionId, rating, comment, isPublic);\r\n                }}\r\n                transactionId={reviewModalData.transactionId}\r\n                amount={reviewModalData.amount}\r\n              />\r\n            </Layout>\r\n            {state.currentUser && (\r\n              <BugReportModal\r\n                isOpen={showBugReport}\r\n                onClose={() => setShowBugReport(false)}\r\n                onSuccess={(t, m) => { setShowBugReport(false); setShowSuccess({ isOpen: true, title: t, message: m }); }}\r\n                onError={(t, m) => setShowError({ isOpen: true, title: t, message: m })}\r\n              />\r\n            )}\r\n            <AIAssistant appState={state} />\r\n          </>\r\n        } />\r\n      </Routes>\r\n    </>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josia\\Desktop\\projetos\\cred30\\packages\\frontend-v2\\src\\presentation\\pages\\dashboard\\client-dashboard.page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","message":"Definition for rule '@typescript-eslint/no-unused-vars' was not found.","line":1,"column":1,"endLine":1,"endColumn":2,"severity":2,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { MetricCard } from '../../components/ui/MetricCard';\r\nimport { User, Quota, Loan } from '../../../domain/types/common.types';\r\n\r\ninterface ClientDashboardProps {\r\n  user: User;\r\n  quotas: Quota[];\r\n  loans: Loan[];\r\n  onDeposit: () => void;\r\n  onWithdraw: () => void;\r\n  onBuyQuota: () => void;\r\n  onSellQuota: () => void;\r\n  onRequestLoan: () => void;\r\n}\r\n\r\nexport const ClientDashboard: React.FC<ClientDashboardProps> = ({\r\n  user,\r\n  quotas,\r\n  loans,\r\n  onDeposit,\r\n  onWithdraw,\r\n  onBuyQuota,\r\n  onSellQuota,\r\n  onRequestLoan\r\n}) => {\r\n  const totalQuotaValue = quotas.reduce((sum, quota) => sum + quota.currentValue, 0);\r\n  const totalQuotaProfit = quotas.reduce((sum, quota) => sum + (quota.currentValue - quota.purchasePrice), 0);\r\n  const activeLoans = loans.filter(loan => loan.status === 'APPROVED' || loan.status === 'PAYMENT_PENDING');\r\n  const pendingLoans = loans.filter(loan => loan.status === 'PENDING');\r\n  const totalLoanDebt = activeLoans.reduce((sum, loan) => sum + (loan.remainingAmount || loan.totalRepayment), 0);\r\n\r\n  // Helper formatting (injected or local)\r\n  const formatCurrency = (val: number) => val.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });\r\n  const formatPercent = (val: number) => (val * 100).toFixed(2) + '%';\r\n\r\n  const netWorth = user.balance + totalQuotaValue - totalLoanDebt;\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Resumo Financeiro */}\r\n      <div className=\"bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg shadow-lg p-6 text-white\">\r\n        <h2 className=\"text-2xl font-bold mb-2\">Ol├í, {user.name}!</h2>\r\n        <p className=\"text-blue-100\">Seu patrim├┤nio l├¡quido total</p>\r\n        <p className=\"text-4xl font-bold mt-2\">{formatCurrency(netWorth)}</p>\r\n      </div>\r\n\r\n      {/* M├®tricas Principais */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\r\n        <MetricCard\r\n          title=\"Saldo Dispon├¡vel\"\r\n          value={formatCurrency(user.balance)}\r\n          subtitle=\"Para resgates ou novos aportes\"\r\n          color=\"blue\"\r\n        />\r\n        <MetricCard\r\n          title=\"Valor em Licen├ºas\"\r\n          value={formatCurrency(totalQuotaValue)}\r\n          subtitle={`${quotas.length} licen├ºa(s)`}\r\n          color=\"green\"\r\n          trend={totalQuotaProfit !== 0 ? {\r\n            value: Math.abs((totalQuotaProfit / (totalQuotaValue - totalQuotaProfit)) * 100),\r\n            isPositive: totalQuotaProfit > 0\r\n          } : undefined}\r\n        />\r\n        <MetricCard\r\n          title=\"Compromissos Ativos\"\r\n          value={formatCurrency(totalLoanDebt)}\r\n          subtitle={`${activeLoans.length} apoio(s) em aberto`}\r\n          color=\"red\"\r\n        />\r\n        <MetricCard\r\n          title=\"Excedentes das Licen├ºas\"\r\n          value={formatCurrency(totalQuotaProfit)}\r\n          subtitle={totalQuotaProfit >= 0 ? 'Resultado positivo' : 'Resultado negativo'}\r\n          color={totalQuotaProfit >= 0 ? 'green' : 'red'}\r\n        />\r\n      </div>\r\n\r\n      {/* A├º├Áes R├ípidas */}\r\n      <div className=\"bg-white rounded-lg shadow p-6\">\r\n        <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">A├º├Áes R├ípidas</h3>\r\n        <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4\">\r\n          <button\r\n            onClick={onDeposit}\r\n            className=\"flex flex-col items-center p-4 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors\"\r\n          >\r\n            <div className=\"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center text-white font-bold mb-2\">\r\n              +\r\n            </div>\r\n            <span className=\"text-sm font-medium text-gray-900\">Depositar</span>\r\n          </button>\r\n\r\n          <button\r\n            onClick={onWithdraw}\r\n            className=\"flex flex-col items-center p-4 bg-red-50 rounded-lg hover:bg-red-100 transition-colors\"\r\n          >\r\n            <div className=\"w-8 h-8 bg-red-600 rounded-full flex items-center justify-center text-white font-bold mb-2\">\r\n              -\r\n            </div>\r\n            <span className=\"text-sm font-medium text-gray-900\">Sacar</span>\r\n          </button>\r\n\r\n          <button\r\n            onClick={onBuyQuota}\r\n            className=\"flex flex-col items-center p-4 bg-green-50 rounded-lg hover:bg-green-100 transition-colors\"\r\n          >\r\n            <div className=\"w-8 h-8 bg-green-600 rounded-full flex items-center justify-center text-white font-bold mb-2\">\r\n              Ôåæ\r\n            </div>\r\n            <span className=\"text-sm font-medium text-gray-900\">Aportar Licen├ºas</span>\r\n          </button>\r\n\r\n          <button\r\n            onClick={onSellQuota}\r\n            disabled={quotas.length === 0}\r\n            className=\"flex flex-col items-center p-4 bg-yellow-50 rounded-lg hover:bg-yellow-100 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\r\n          >\r\n            <div className=\"w-8 h-8 bg-yellow-600 rounded-full flex items-center justify-center text-white font-bold mb-2\">\r\n              Ôåô\r\n            </div>\r\n            <span className=\"text-sm font-medium text-gray-900\">Resgatar Licen├ºa</span>\r\n          </button>\r\n\r\n          <button\r\n            onClick={onRequestLoan}\r\n            className=\"flex flex-col items-center p-4 bg-purple-50 rounded-lg hover:bg-purple-100 transition-colors\"\r\n          >\r\n            <div className=\"w-8 h-8 bg-purple-600 rounded-full flex items-center justify-center text-white font-bold mb-2\">\r\n              Ôé┐\r\n            </div>\r\n            <span className=\"text-sm font-medium text-gray-900\">Pedir Apoio</span>\r\n          </button>\r\n\r\n          <button\r\n            className=\"flex flex-col items-center p-4 bg-indigo-50 rounded-lg hover:bg-indigo-100 transition-colors\"\r\n          >\r\n            <div className=\"w-8 h-8 bg-indigo-600 rounded-full flex items-center justify-center text-white font-bold mb-2\">\r\n              ­ƒôè\r\n            </div>\r\n            <span className=\"text-sm font-medium text-gray-900\">Ver Relat├│rios</span>\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Resumo de Aportes e Apoio */}\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n        <div className=\"bg-white rounded-lg shadow p-6\">\r\n          <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Minhas Licen├ºas</h3>\r\n          {quotas.length === 0 ? (\r\n            <div className=\"text-center py-8 text-gray-500\">\r\n              <p className=\"mb-4\">Voc├¬ ainda n├úo possui licen├ºas</p>\r\n              <button\r\n                onClick={onBuyQuota}\r\n                className=\"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors\"\r\n              >\r\n                Adquirir Primeira Licen├ºa\r\n              </button>\r\n            </div>\r\n          ) : (\r\n            <div className=\"space-y-3\">\r\n              {quotas.map((quota, index) => (\r\n                <div key={quota.id} className=\"border rounded-lg p-4\">\r\n                  <div className=\"flex justify-between items-center\">\r\n                    <div>\r\n                      <p className=\"font-medium text-gray-900\">Licen├ºa #{index + 1}</p>\r\n                      <p className=\"text-sm text-gray-500\">\r\n                        Comprada em {new Date(quota.purchaseDate).toLocaleDateString('pt-BR')}\r\n                      </p>\r\n                    </div>\r\n                    <div className=\"text-right\">\r\n                      <p className=\"font-semibold text-gray-900\">\r\n                        {formatCurrency(quota.currentValue)}\r\n                      </p>\r\n                      <p className={`text-sm ${quota.currentValue >= quota.purchasePrice ? 'text-green-600' : 'text-red-600'}`}>\r\n                        {quota.currentValue >= quota.purchasePrice ? '+' : ''}\r\n                        {formatPercent((quota.currentValue - quota.purchasePrice) / quota.purchasePrice)}\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"bg-white rounded-lg shadow p-6\">\r\n          <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Meus Apoios M├║tuos</h3>\r\n          {loans.length === 0 ? (\r\n            <div className=\"text-center py-8 text-gray-500\">\r\n              <p className=\"mb-4\">Voc├¬ ainda n├úo solicitou apoios</p>\r\n              <button\r\n                onClick={onRequestLoan}\r\n                className=\"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors\"\r\n              >\r\n                Solicitar Apoio M├║tuo\r\n              </button>\r\n            </div>\r\n          ) : (\r\n            <div className=\"space-y-3\">\r\n              {pendingLoans.length > 0 && (\r\n                <div className=\"bg-yellow-50 border border-yellow-200 rounded-lg p-3 mb-4\">\r\n                  <p className=\"text-sm text-yellow-800\">\r\n                    ÔÜá´©Å Voc├¬ tem {pendingLoans.length} empr├®stimo(s) pendente(s) de aprova├º├úo\r\n                  </p>\r\n                </div>\r\n              )}\r\n              {loans.slice(0, 3).map((loan) => (\r\n                <div key={loan.id} className=\"border rounded-lg p-4\">\r\n                  <div className=\"flex justify-between items-center\">\r\n                    <div>\r\n                      <p className=\"font-medium text-gray-900\">\r\n                        {formatCurrency(loan.amount)}\r\n                      </p>\r\n                      <p className=\"text-sm text-gray-500\">\r\n                        {loan.installments}x ÔÇó {new Date(loan.requestDate).toLocaleDateString('pt-BR')}\r\n                      </p>\r\n                    </div>\r\n                    <div className=\"text-right\">\r\n                      <span className={`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${loan.status === 'APPROVED' ? 'bg-green-100 text-green-800' :\r\n                        loan.status === 'PENDING' ? 'bg-yellow-100 text-yellow-800' :\r\n                          loan.status === 'REJECTED' ? 'bg-red-100 text-red-800' :\r\n                            loan.status === 'PAID' ? 'bg-blue-100 text-blue-800' :\r\n                              'bg-gray-100 text-gray-800'\r\n                        }`}>\r\n                        {loan.status === 'APPROVED' ? 'Aprovado' :\r\n                          loan.status === 'PENDING' ? 'Pendente' :\r\n                            loan.status === 'REJECTED' ? 'Rejeitado' :\r\n                              loan.status === 'PAID' ? 'Pago' : loan.status}\r\n                      </span>\r\n                      {loan.remainingAmount !== undefined && loan.remainingAmount < loan.totalRepayment && (\r\n                        <p className=\"text-sm text-green-600 mt-1\">\r\n                          {formatCurrency(loan.remainingAmount)} restantes\r\n                        </p>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n              {loans.length > 3 && (\r\n                <p className=\"text-sm text-gray-500 text-center\">\r\n                  E mais {loans.length - 3} empr├®stimo(s)...\r\n                </p>\r\n              )}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josia\\Desktop\\projetos\\cred30\\packages\\frontend-v2\\src\\presentation\\pages\\landing\\landing.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","message":"Definition for rule '@typescript-eslint/no-unused-vars' was not found.","line":1,"column":1,"endLine":1,"endColumn":2,"severity":2,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport {\r\n    ArrowRight, Shield, PiggyBank, CreditCard, Download,\r\n    Smartphone, X as XIcon, ChevronDown, Rocket,\r\n    Star, Zap, Users, ShieldCheck, TrendingUp, Globe\r\n} from 'lucide-react';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nconst LandingPage = () => {\r\n    const [isVisible, setIsVisible] = useState(false);\r\n    const [activeTab, setActiveTab] = useState(0);\r\n    const navigate = useNavigate();\r\n\r\n    useEffect(() => {\r\n        setIsVisible(true);\r\n    }, []);\r\n\r\n    const features = [\r\n        {\r\n            icon: <Zap className=\"text-yellow-400\" size={24} />,\r\n            title: \"R├ípido & ├ügil\",\r\n            description: \"Acesso imediato a recursos financeiros quando voc├¬ mais precisa.\"\r\n        },\r\n        {\r\n            icon: <ShieldCheck className=\"text-emerald-400\" size={24} />,\r\n            title: \"100% Seguro\",\r\n            description: \"Tecnologia de ponta para garantir a seguran├ºa dos seus dados.\"\r\n        },\r\n        {\r\n            icon: <TrendingUp className=\"text-cyan-400\" size={24} />,\r\n            title: \"Crescimento M├║tuo\",\r\n            description: \"Participe de uma rede que valoriza o crescimento coletivo.\"\r\n        }\r\n    ];\r\n\r\n    const testimonials = [\r\n        {\r\n            name: \"Jo├úo Silva\",\r\n            role: \"Empreendedor\",\r\n            content: \"O Cred30 mudou a forma como eu gerencio meu capital de giro. ├ë r├ípido e transparente.\",\r\n            rating: 5\r\n        },\r\n        {\r\n            name: \"Maria Oliveira\",\r\n            role: \"Freelancer\",\r\n            content: \"A melhor plataforma de apoio financeiro que j├í utilizei. O sistema de convites ├® excelente.\",\r\n            rating: 5\r\n        }\r\n    ];\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-[#050505] text-white selection:bg-primary-500/30 overflow-x-hidden\">\r\n            {/* Background Effects */}\r\n            <div className=\"fixed inset-0 pointer-events-none\">\r\n                <div className=\"absolute top-[-10%] right-[-10%] w-[50%] h-[50%] bg-primary-500/10 blur-[120px] rounded-full animate-pulse\" />\r\n                <div className=\"absolute bottom-[-10%] left-[-10%] w-[50%] h-[50%] bg-blue-600/5 blur-[120px] rounded-full\" />\r\n            </div>\r\n\r\n            {/* Navigation */}\r\n            <nav className={`fixed top-0 inset-x-0 z-50 px-6 py-6 transition-all duration-1000 ${isVisible ? 'translate-y-0 opacity-100' : '-translate-y-10 opacity-0'}`}>\r\n                <div className=\"max-w-7xl mx-auto flex justify-between items-center bg-zinc-900/50 backdrop-blur-xl border border-white/5 p-4 rounded-3xl shadow-2xl\">\r\n                    <div className=\"flex items-center gap-3\">\r\n                        <div className=\"w-10 h-10 bg-primary-500 rounded-xl flex items-center justify-center shadow-lg shadow-primary-500/20\">\r\n                            <img src=\"/pwa-192x192.png\" alt=\"Cred30\" className=\"w-8 h-8 rounded-lg\" />\r\n                        </div>\r\n                        <span className=\"text-2xl font-black tracking-tighter\">Cred<span className=\"text-primary-400\">30</span></span>\r\n                    </div>\r\n\r\n                    <div className=\"hidden md:flex items-center gap-8\">\r\n                        <a href=\"#features\" className=\"text-sm font-bold text-zinc-400 hover:text-white transition-colors\">Funcionalidades</a>\r\n                        <a href=\"#how-it-works\" className=\"text-sm font-bold text-zinc-400 hover:text-white transition-colors\">Como Funciona</a>\r\n                        <a href=\"#testimonials\" className=\"text-sm font-bold text-zinc-400 hover:text-white transition-colors\">Depoimentos</a>\r\n                    </div>\r\n\r\n                    <div className=\"flex items-center gap-3\">\r\n                        <button onClick={() => navigate('/auth')} className=\"text-sm font-bold text-zinc-400 hover:text-white transition-colors px-4\">\r\n                            Login\r\n                        </button>\r\n                        <button\r\n                            onClick={() => navigate('/auth')}\r\n                            className=\"bg-primary-500 text-black font-black px-6 py-3 rounded-2xl transition-all hover:scale-105 active:scale-95 shadow-lg shadow-primary-500/20 text-sm uppercase tracking-wider\"\r\n                        >\r\n                            Come├ºar Agora\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </nav>\r\n\r\n            {/* Hero Section */}\r\n            <section className=\"relative pt-40 pb-20 px-6\">\r\n                <div className=\"max-w-7xl mx-auto grid grid-cols-1 lg:grid-cols-2 gap-16 items-center\">\r\n                    <div className={`space-y-8 transition-all duration-1000 delay-300 ${isVisible ? 'translate-x-0 opacity-100' : '-translate-x-20 opacity-0'}`}>\r\n                        <div className=\"inline-flex items-center gap-2 bg-primary-500/10 border border-primary-500/20 px-4 py-2 rounded-full text-primary-400 text-xs font-black uppercase tracking-widest\">\r\n                            <Star size={14} className=\"fill-primary-400\" /> O Futuro do Microcr├®dito\r\n                        </div>\r\n\r\n                        <h1 className=\"text-6xl md:text-8xl font-black tracking-tight leading-[0.9] text-white\">\r\n                            Sua <span className=\"text-primary-400\">Liberdade</span> <br />\r\n                            Financeira Come├ºa <br />\r\n                            <span className=\"relative\">\r\n                                Aqui.\r\n                                <div className=\"absolute bottom-2 left-0 w-full h-3 bg-primary-500/30 -z-10\" />\r\n                            </span>\r\n                        </h1>\r\n\r\n                        <p className=\"text-xl text-zinc-400 max-w-xl leading-relaxed\">\r\n                            Junte-se ├á maior comunidade de apoio m├║tuo do Brasil. Tecnologia, transpar├¬ncia e agilidade para voc├¬ crescer.\r\n                        </p>\r\n\r\n                        <div className=\"flex flex-col sm:flex-row gap-4\">\r\n                            <button\r\n                                onClick={() => navigate('/auth')}\r\n                                className=\"group bg-white text-black font-black py-5 px-10 rounded-3xl transition-all hover:scale-105 active:scale-95 flex items-center justify-center gap-3 text-lg\"\r\n                            >\r\n                                Criar Conta Gr├ítis\r\n                                <ArrowRight className=\"group-hover:translate-x-1 transition-transform\" />\r\n                            </button>\r\n\r\n                            <button className=\"bg-zinc-900 border border-white/5 text-white font-bold py-5 px-10 rounded-3xl transition-all hover:bg-zinc-800 flex items-center justify-center gap-3 text-lg\">\r\n                                <Download size={20} className=\"text-primary-400\" />\r\n                                Baixar App\r\n                            </button>\r\n                        </div>\r\n\r\n                        <div className=\"flex items-center gap-6 pt-4\">\r\n                            <div className=\"flex -space-x-3\">\r\n                                {[1, 2, 3, 4].map(i => (\r\n                                    <div key={i} className=\"w-10 h-10 rounded-full border-2 border-[#050505] bg-zinc-800\" />\r\n                                ))}\r\n                            </div>\r\n                            <p className=\"text-sm text-zinc-500 font-medium\">\r\n                                <span className=\"text-white font-bold\">+10k membros</span> ativos em todo o Brasil\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className={`relative transition-all duration-1000 delay-500 ${isVisible ? 'translate-x-0 opacity-100' : 'translate-x-20 opacity-0'}`}>\r\n                        <div className=\"relative z-10 bg-gradient-to-br from-zinc-800 to-zinc-950 p-4 rounded-[3rem] border border-white/10 shadow-3xl\">\r\n                            <div className=\"aspect-[9/16] bg-zinc-900 rounded-[2.5rem] overflow-hidden border border-white/5 relative\">\r\n                                {/* Mock UI */}\r\n                                <div className=\"absolute inset-0 p-6 space-y-6\">\r\n                                    <div className=\"flex justify-between items-center\">\r\n                                        <div className=\"w-12 h-1.5 bg-zinc-800 rounded-full\" />\r\n                                        <div className=\"w-8 h-8 bg-primary-500/20 rounded-xl\" />\r\n                                    </div>\r\n                                    <div className=\"h-32 bg-primary-500 rounded-3xl p-6 flex flex-col justify-end\">\r\n                                        <p className=\"text-[10px] uppercase font-black opacity-60\">Meu Saldo</p>\r\n                                        <p className=\"text-2xl font-black italic\">R$ 15.250,00</p>\r\n                                    </div>\r\n                                    <div className=\"grid grid-cols-2 gap-4\">\r\n                                        <div className=\"h-24 bg-zinc-800/50 rounded-2xl border border-white/5\" />\r\n                                        <div className=\"h-24 bg-zinc-800/50 rounded-2xl border border-white/5\" />\r\n                                    </div>\r\n                                    <div className=\"space-y-4\">\r\n                                        <div className=\"h-4 w-1/2 bg-zinc-800 rounded-full\" />\r\n                                        <div className=\"h-20 bg-zinc-800/30 rounded-2xl\" />\r\n                                        <div className=\"h-20 bg-zinc-800/30 rounded-2xl\" />\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Decoration */}\r\n                        <div className=\"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[140%] h-[140%] bg-primary-500/5 blur-[100px] -z-10 rounded-full\" />\r\n                    </div>\r\n                </div>\r\n            </section>\r\n\r\n            {/* Features Section */}\r\n            <section id=\"features\" className=\"py-20 px-6 bg-zinc-900/30\">\r\n                <div className=\"max-w-7xl mx-auto\">\r\n                    <div className=\"text-center max-w-2xl mx-auto mb-16\">\r\n                        <h2 className=\"text-4xl md:text-5xl font-black mb-6\">Tudo que voc├¬ precisa em um s├│ <span className=\"text-primary-400\">lugar</span>.</h2>\r\n                        <p className=\"text-zinc-400 text-lg\">Desenvolvido para oferecer a melhor experi├¬ncia financeira digital para comunidades.</p>\r\n                    </div>\r\n\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-3 gap-8\">\r\n                        {features.map((feature, idx) => (\r\n                            <div key={idx} className=\"bg-zinc-900/50 border border-white/5 p-8 rounded-[2rem] hover:border-primary-500/30 transition-all duration-500 group\">\r\n                                <div className=\"w-14 h-14 bg-zinc-800 rounded-2xl flex items-center justify-center mb-6 group-hover:scale-110 transition-transform\">\r\n                                    {feature.icon}\r\n                                </div>\r\n                                <h3 className=\"text-xl font-bold mb-4\">{feature.title}</h3>\r\n                                <p className=\"text-zinc-400 leading-relaxed font-medium\">\r\n                                    {feature.description}\r\n                                </p>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n            </section>\r\n\r\n            {/* Testimonials */}\r\n            <section id=\"testimonials\" className=\"py-20 px-6\">\r\n                <div className=\"max-w-7xl mx-auto\">\r\n                    <div className=\"flex flex-col md:flex-row justify-between items-end gap-8 mb-16\">\r\n                        <div className=\"max-w-2xl\">\r\n                            <h2 className=\"text-4xl md:text-5xl font-black mb-6\">A confian├ºa de quem j├í faz parte do <span className=\"text-primary-400\">clube</span>.</h2>\r\n                        </div>\r\n                        <div className=\"flex gap-4\">\r\n                            <div className=\"w-12 h-12 bg-zinc-900 rounded-full border border-white/5\" />\r\n                            <div className=\"w-12 h-12 bg-zinc-900 rounded-full border border-white/5\" />\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8\">\r\n                        {testimonials.map((t, idx) => (\r\n                            <div key={idx} className=\"bg-gradient-to-br from-zinc-900 to-black p-10 rounded-[2.5rem] border border-white/5 relative overflow-hidden\">\r\n                                <div className=\"absolute top-0 right-0 p-8 opacity-5\">\r\n                                    <Star size={100} />\r\n                                </div>\r\n                                <div className=\"flex gap-1 mb-6 text-yellow-500\">\r\n                                    {[...Array(t.rating)].map((_, i) => <Star key={i} size={16} fill=\"currentColor\" />)}\r\n                                </div>\r\n                                <p className=\"text-xl text-zinc-300 italic mb-8 relative z-10\">\"{t.content}\"</p>\r\n                                <div className=\"flex items-center gap-4\">\r\n                                    <div className=\"w-12 h-12 bg-zinc-800 rounded-full\" />\r\n                                    <div>\r\n                                        <h4 className=\"font-bold\">{t.name}</h4>\r\n                                        <p className=\"text-xs text-zinc-500 uppercase tracking-widest font-black\">{t.role}</p>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n            </section>\r\n\r\n            {/* CTA Section */}\r\n            <section className=\"py-20 px-6\">\r\n                <div className=\"max-w-7xl mx-auto\">\r\n                    <div className=\"bg-primary-500 rounded-[3rem] p-12 md:p-20 text-center relative overflow-hidden shadow-2xl shadow-primary-500/20\">\r\n                        <div className=\"absolute top-0 left-0 w-full h-full bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-white/20 to-transparent opacity-50\" />\r\n\r\n                        <h2 className=\"text-4xl md:text-6xl font-black text-black mb-8 relative z-10\">\r\n                            Pronto para transformar sua vida <br className=\"hidden md:block\" /> financeira hoje?\r\n                        </h2>\r\n\r\n                        <div className=\"flex flex-col sm:flex-row gap-4 justify-center relative z-10\">\r\n                            <button\r\n                                onClick={() => navigate('/auth')}\r\n                                className=\"bg-black text-white font-black py-5 px-10 rounded-2xl transition-all hover:scale-105 active:scale-95 text-xl\"\r\n                            >\r\n                                Criar Minha Conta\r\n                            </button>\r\n                            <button className=\"bg-white/20 backdrop-blur-md border border-white/30 text-black font-bold py-5 px-10 rounded-2xl transition-all hover:bg-white/30 text-xl\">\r\n                                Falar com Especialista\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n\r\n            {/* Footer */}\r\n            <footer className=\"py-20 px-6 border-t border-white/5\">\r\n                <div className=\"max-w-7xl mx-auto grid grid-cols-1 md:grid-cols-4 gap-12\">\r\n                    <div className=\"col-span-1 md:col-span-2 space-y-6\">\r\n                        <div className=\"flex items-center gap-3\">\r\n                            <div className=\"w-8 h-8 bg-primary-500 rounded-lg flex items-center justify-center text-black\">\r\n                                <Rocket size={16} />\r\n                            </div>\r\n                            <span className=\"text-xl font-black tracking-tighter\">Cred<span className=\"text-primary-400\">30</span></span>\r\n                        </div>\r\n                        <p className=\"text-zinc-500 max-w-sm font-medium\">\r\n                            Transformando o acesso ao cr├®dito no Brasil atrav├®s da tecnologia e uni├úo comunit├íria.\r\n                        </p>\r\n                    </div>\r\n\r\n                    <div className=\"space-y-4\">\r\n                        <h4 className=\"font-bold text-sm uppercase tracking-widest text-zinc-400\">Legal</h4>\r\n                        <ul className=\"space-y-2 text-zinc-500 font-medium\">\r\n                            <li><button onClick={() => navigate('/terms')} className=\"hover:text-primary-400 transition-colors\">Termos de Uso</button></li>\r\n                            <li><button onClick={() => navigate('/privacy')} className=\"hover:text-primary-400 transition-colors\">Privacidade</button></li>\r\n                            <li><button onClick={() => navigate('/security')} className=\"hover:text-primary-400 transition-colors\">Seguran├ºa</button></li>\r\n                        </ul>\r\n                    </div>\r\n\r\n                    <div className=\"space-y-4\">\r\n                        <h4 className=\"font-bold text-sm uppercase tracking-widest text-zinc-400\">Social</h4>\r\n                        <div className=\"flex gap-4\">\r\n                            <div className=\"w-10 h-10 bg-zinc-900 border border-white/5 rounded-xl flex items-center justify-center text-zinc-400 hover:text-primary-400 transition-colors cursor-pointer\">\r\n                                <Globe size={18} />\r\n                            </div>\r\n                            <div className=\"w-10 h-10 bg-zinc-900 border border-white/5 rounded-xl flex items-center justify-center text-zinc-400 hover:text-primary-400 transition-colors cursor-pointer\">\r\n                                <Users size={18} />\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"max-w-7xl mx-auto mt-20 pt-8 border-t border-white/5 flex flex-col md:flex-row justify-between items-center gap-4\">\r\n                    <p className=\"text-zinc-600 text-xs font-bold uppercase tracking-[0.2em]\">\r\n                        ┬® 2025 Cred30 Tecnologia S.A.\r\n                    </p>\r\n                    <div className=\"flex items-center gap-2 text-zinc-600 text-[10px] font-black uppercase tracking-widest\">\r\n                        <Shield size={12} /> Prote├º├úo de dados garantida\r\n                    </div>\r\n                </div>\r\n            </footer>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default LandingPage;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josia\\Desktop\\projetos\\cred30\\packages\\frontend-v2\\src\\presentation\\pages\\privacy.page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","message":"Definition for rule '@typescript-eslint/no-unused-vars' was not found.","line":1,"column":1,"endLine":1,"endColumn":2,"severity":2,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { ArrowLeft, Lock, EyeOff, ShieldCheck, Database, Fingerprint, Trash2, FileCheck, Globe, AlertTriangle } from 'lucide-react';\r\n\r\nconst PrivacyPage = () => {\r\n    const navigate = useNavigate();\r\n\r\n    useEffect(() => {\r\n        window.scrollTo(0, 0);\r\n    }, []);\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-zinc-950 text-white selection:bg-purple-500/30\">\r\n            {/* Navigation */}\r\n            <nav className=\"fixed top-0 left-0 w-full z-50 bg-zinc-950/50 backdrop-blur-xl border-b border-white/5 px-4 sm:px-6 py-3 sm:py-4\">\r\n                <div className=\"max-w-4xl mx-auto flex justify-between items-center\">\r\n                    <button\r\n                        onClick={() => navigate(-1)}\r\n                        className=\"text-zinc-500 hover:text-white transition-colors flex items-center gap-2 text-sm font-bold group\"\r\n                    >\r\n                        <ArrowLeft size={18} className=\"group-hover:-translate-x-1 transition-transform\" />\r\n                        Voltar\r\n                    </button>\r\n                    <div className=\"flex items-center gap-2\">\r\n                        <div className=\"w-8 h-8 bg-zinc-800 rounded-lg flex items-center justify-center text-white font-bold text-sm border border-white/10\">\r\n                            C\r\n                        </div>\r\n                        <span className=\"text-lg font-bold tracking-tight\">Cred<span className=\"text-cyan-400\">30</span></span>\r\n                    </div>\r\n                </div>\r\n            </nav>\r\n\r\n            <main className=\"max-w-4xl mx-auto px-4 sm:px-6 pt-24 sm:pt-32 pb-20\">\r\n                <div className=\"mb-8 sm:mb-12\">\r\n                    <div className=\"inline-flex items-center gap-2 bg-purple-500/10 border border-purple-500/20 px-3 sm:px-4 py-1.5 sm:py-2 rounded-full text-purple-400 text-xs sm:text-sm font-bold mb-4 sm:mb-6\">\r\n                        <Lock size={14} /> Conforme LGPD\r\n                    </div>\r\n                    <h1 className=\"text-3xl sm:text-4xl md:text-5xl font-extrabold mb-3 sm:mb-4 tracking-tight\">Pol├¡tica de Privacidade</h1>\r\n                    <p className=\"text-zinc-400 text-sm sm:text-lg\">├Ültima atualiza├º├úo: 23 de Dezembro de 2025</p>\r\n                </div>\r\n\r\n                <div className=\"space-y-8 sm:space-y-12\">\r\n                    {/* Introdu├º├úo */}\r\n                    <section className=\"bg-purple-500/5 border border-purple-500/20 p-5 sm:p-8 rounded-2xl sm:rounded-3xl\">\r\n                        <p className=\"text-zinc-300 text-sm sm:text-base leading-relaxed\">\r\n                            Esta Pol├¡tica de Privacidade descreve como a Cred30 coleta, usa, armazena e protege suas informa├º├Áes pessoais, em conformidade com a <strong className=\"text-purple-400\">Lei Geral de Prote├º├úo de Dados (LGPD - Lei n┬║ 13.709/2018)</strong>.\r\n                        </p>\r\n                    </section>\r\n\r\n                    {/* Se├º├úo 1 */}\r\n                    <section className=\"bg-zinc-900/30 border border-white/5 p-5 sm:p-8 rounded-2xl sm:rounded-3xl\">\r\n                        <h2 className=\"text-xl sm:text-2xl font-bold mb-3 sm:mb-4 flex items-center gap-3 text-purple-400\">\r\n                            <EyeOff size={22} /> 1. Dados Coletados\r\n                        </h2>\r\n                        <p className=\"text-zinc-300 text-sm sm:text-base leading-relaxed mb-4\">\r\n                            Coletamos apenas os dados estritamente necess├írios para o funcionamento da plataforma e a seguran├ºa da sua conta:\r\n                        </p>\r\n                        <div className=\"grid sm:grid-cols-2 gap-4\">\r\n                            <div className=\"bg-zinc-800/50 p-4 rounded-xl\">\r\n                                <h3 className=\"font-bold text-white text-sm mb-2\">Dados de Cadastro</h3>\r\n                                <ul className=\"text-zinc-400 text-xs space-y-1\">\r\n                                    <li>ÔÇó Nome completo</li>\r\n                                    <li>ÔÇó Endere├ºo de e-mail</li>\r\n                                    <li>ÔÇó Chave PIX</li>\r\n                                    <li>ÔÇó Senha (criptografada)</li>\r\n                                    <li>ÔÇó Frase secreta (criptografada)</li>\r\n                                </ul>\r\n                            </div>\r\n                            <div className=\"bg-zinc-800/50 p-4 rounded-xl\">\r\n                                <h3 className=\"font-bold text-white text-sm mb-2\">Dados de Uso</h3>\r\n                                <ul className=\"text-zinc-400 text-xs space-y-1\">\r\n                                    <li>ÔÇó Hist├│rico de transa├º├Áes</li>\r\n                                    <li>ÔÇó Pontua├º├úo de engajamento</li>\r\n                                    <li>ÔÇó Logs de acesso (IP, data/hora)</li>\r\n                                    <li>ÔÇó Prefer├¬ncias de configura├º├úo</li>\r\n                                </ul>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"mt-4 bg-green-500/10 border border-green-500/20 p-3 rounded-xl\">\r\n                            <p className=\"text-green-300 text-xs sm:text-sm\">\r\n                                <strong>Ô£ô N├úo coletamos:</strong> Contatos, localiza├º├úo, galeria de fotos, biometria ou dados sens├¡veis.\r\n                            </p>\r\n                        </div>\r\n                    </section>\r\n\r\n                    {/* Se├º├úo 2 */}\r\n                    <section className=\"space-y-4 sm:space-y-6\">\r\n                        <h2 className=\"text-xl sm:text-2xl font-bold flex items-center gap-3\">\r\n                            <Database size={22} className=\"text-purple-400\" /> 2. Armazenamento e Seguran├ºa\r\n                        </h2>\r\n                        <div className=\"grid sm:grid-cols-2 gap-4 sm:gap-6\">\r\n                            <div className=\"bg-zinc-900/50 p-5 sm:p-6 rounded-xl sm:rounded-2xl border border-white/5\">\r\n                                <h3 className=\"font-bold mb-2 text-white\">Criptografia</h3>\r\n                                <p className=\"text-zinc-400 text-xs sm:text-sm\">Senhas e frases secretas s├úo armazenadas utilizando bcrypt, um algoritmo de hashing irrevers├¡vel considerado padr├úo de mercado.</p>\r\n                            </div>\r\n                            <div className=\"bg-zinc-900/50 p-5 sm:p-6 rounded-xl sm:rounded-2xl border border-white/5\">\r\n                                <h3 className=\"font-bold mb-2 text-white\">HTTPS/TLS</h3>\r\n                                <p className=\"text-zinc-400 text-xs sm:text-sm\">Toda comunica├º├úo entre seu dispositivo e nossos servidores ├® criptografada via protocolo TLS 1.3.</p>\r\n                            </div>\r\n                            <div className=\"bg-zinc-900/50 p-5 sm:p-6 rounded-xl sm:rounded-2xl border border-white/5\">\r\n                                <h3 className=\"font-bold mb-2 text-white\">Autentica├º├úo 2FA</h3>\r\n                                <p className=\"text-zinc-400 text-xs sm:text-sm\">Opera├º├Áes sens├¡veis (retiradas, altera├º├úo de dados) exigem autentica├º├úo de dois fatores via app autenticador (TOTP).</p>\r\n                            </div>\r\n                            <div className=\"bg-zinc-900/50 p-5 sm:p-6 rounded-xl sm:rounded-2xl border border-white/5\">\r\n                                <h3 className=\"font-bold mb-2 text-white\">Backups</h3>\r\n                                <p className=\"text-zinc-400 text-xs sm:text-sm\">Backups di├írios autom├íticos garantem a integridade dos dados em caso de falhas t├®cnicas.</p>\r\n                            </div>\r\n                        </div>\r\n                    </section>\r\n\r\n                    {/* Se├º├úo 3 */}\r\n                    <section className=\"bg-zinc-900/30 border border-white/5 p-5 sm:p-8 rounded-2xl sm:rounded-3xl\">\r\n                        <h2 className=\"text-xl sm:text-2xl font-bold mb-3 sm:mb-4 flex items-center gap-3 text-purple-400\">\r\n                            <Globe size={22} /> 3. Compartilhamento de Dados\r\n                        </h2>\r\n                        <p className=\"text-zinc-300 text-sm sm:text-base leading-relaxed mb-4\">\r\n                            A Cred30 <strong className=\"text-white\">N├âO vende, aluga ou compartilha</strong> seus dados pessoais com terceiros para fins de marketing. O compartilhamento ocorre apenas nos seguintes casos:\r\n                        </p>\r\n                        <ul className=\"text-zinc-400 text-xs sm:text-sm space-y-2 ml-2\">\r\n                            <li><strong className=\"text-white\">ÔÇó Entre Membros (Mercado):</strong> Ao realizar uma compra ou venda no Mercado Cred30, seu nome e status do pedido ser├úo compartilhados com a outra parte da transa├º├úo para viabilizar a entrega e comunica├º├úo.</li>\r\n                            <li><strong className=\"text-white\">ÔÇó Gateway de Pagamento:</strong> Dados necess├írios para processar pagamentos s├úo transmitidos ao Asaas de forma segura.</li>\r\n                            <li><strong className=\"text-white\">ÔÇó Parceiros de Publicidade:</strong> Informa├º├Áes t├®cnicas n├úo identific├íveis (como IP e tipo de dispositivo) podem ser compartilhadas com parceiros de m├¡dia para exibi├º├úo de an├║ncios.</li>\r\n                            <li><strong className=\"text-white\">ÔÇó Obriga├º├úo Legal:</strong> Mediante ordem judicial ou requisi├º├úo de autoridades competentes.</li>\r\n                        </ul>\r\n                    </section>\r\n\r\n                    {/* Se├º├úo 4 */}\r\n                    <section className=\"bg-zinc-900/30 border border-white/5 p-5 sm:p-8 rounded-2xl sm:rounded-3xl\">\r\n                        <h2 className=\"text-xl sm:text-2xl font-bold mb-3 sm:mb-4 flex items-center gap-3 text-purple-400\">\r\n                            <Fingerprint size={22} /> 4. Pontua├º├úo Interna\r\n                        </h2>\r\n                        <p className=\"text-zinc-300 text-sm sm:text-base leading-relaxed mb-4\">\r\n                            O score ├® uma pontua├º├úo interna baseada no seu comportamento na plataforma. Ele ├® <strong className=\"text-white\">privado</strong> e utilizado exclusivamente para:\r\n                        </p>\r\n                        <ul className=\"list-disc list-inside text-zinc-400 text-xs sm:text-sm space-y-2 ml-2 sm:ml-4\">\r\n                            <li>Calcular seu limite de apoio m├║tuo dispon├¡vel para solicita├º├úo.</li>\r\n                            <li>Definir elegibilidade para distribui├º├úo de b├┤nus ou excedentes.</li>\r\n                            <li>Identificar e prevenir atividades fraudulentas.</li>\r\n                        </ul>\r\n                        <div className=\"mt-4 bg-blue-500/10 border border-blue-500/20 p-3 rounded-xl\">\r\n                            <p className=\"text-blue-300 text-xs sm:text-sm\">\r\n                                Sua pontua├º├úo n├úo ├® compartilhada com bureaus de cr├®dito externos (SPC, Serasa, etc.).\r\n                            </p>\r\n                        </div>\r\n                    </section>\r\n\r\n                    {/* Se├º├úo 5 */}\r\n                    <section className=\"space-y-4 sm:space-y-6\">\r\n                        <h2 className=\"text-xl sm:text-2xl font-bold flex items-center gap-3\">\r\n                            <ShieldCheck size={22} className=\"text-purple-400\" /> 5. Seus Direitos (LGPD)\r\n                        </h2>\r\n                        <p className=\"text-zinc-300 text-sm sm:text-base leading-relaxed\">\r\n                            Conforme a Lei Geral de Prote├º├úo de Dados, voc├¬ tem os seguintes direitos:\r\n                        </p>\r\n                        <div className=\"grid sm:grid-cols-2 gap-4\">\r\n                            <div className=\"bg-zinc-800/50 p-4 rounded-xl border-l-4 border-purple-500\">\r\n                                <h3 className=\"font-bold text-white text-sm mb-1\">Acesso</h3>\r\n                                <p className=\"text-zinc-400 text-xs\">Solicitar uma c├│pia de todos os seus dados armazenados.</p>\r\n                            </div>\r\n                            <div className=\"bg-zinc-800/50 p-4 rounded-xl border-l-4 border-purple-500\">\r\n                                <h3 className=\"font-bold text-white text-sm mb-1\">Corre├º├úo</h3>\r\n                                <p className=\"text-zinc-400 text-xs\">Atualizar ou corrigir dados incorretos ou incompletos.</p>\r\n                            </div>\r\n                            <div className=\"bg-zinc-800/50 p-4 rounded-xl border-l-4 border-purple-500\">\r\n                                <h3 className=\"font-bold text-white text-sm mb-1\">Exclus├úo</h3>\r\n                                <p className=\"text-zinc-400 text-xs\">Solicitar a exclus├úo definitiva de todos os seus dados.</p>\r\n                            </div>\r\n                            <div className=\"bg-zinc-800/50 p-4 rounded-xl border-l-4 border-purple-500\">\r\n                                <h3 className=\"font-bold text-white text-sm mb-1\">Portabilidade</h3>\r\n                                <p className=\"text-zinc-400 text-xs\">Receber seus dados em formato estruturado.</p>\r\n                            </div>\r\n                        </div>\r\n                    </section>\r\n\r\n                    {/* Se├º├úo 6 */}\r\n                    <section className=\"bg-zinc-900/30 border border-white/5 p-5 sm:p-8 rounded-2xl sm:rounded-3xl\">\r\n                        <h2 className=\"text-xl sm:text-2xl font-bold mb-3 sm:mb-4 flex items-center gap-3 text-purple-400\">\r\n                            <Trash2 size={22} /> 6. Exclus├úo de Conta\r\n                        </h2>\r\n                        <p className=\"text-zinc-300 text-sm sm:text-base leading-relaxed mb-4\">\r\n                            Voc├¬ pode solicitar a exclus├úo definitiva da sua conta e de todos os dados associados a qualquer momento atrav├®s das <strong className=\"text-white\">Configura├º├Áes</strong> do seu perfil.\r\n                        </p>\r\n                        <div className=\"bg-yellow-500/10 border border-yellow-500/20 p-4 rounded-xl\">\r\n                            <div className=\"flex items-start gap-3\">\r\n                                <AlertTriangle className=\"text-yellow-400 shrink-0 mt-0.5\" size={20} />\r\n                                <p className=\"text-yellow-200 text-xs sm:text-sm\">\r\n                                    <strong>Aten├º├úo:</strong> A exclus├úo ├® irrevers├¡vel. Cotas ativas, saldo em conta e hist├│rico ser├úo permanentemente apagados.\r\n                                </p>\r\n                            </div>\r\n                        </div>\r\n                    </section>\r\n\r\n                    {/* Se├º├úo 7 */}\r\n                    <section className=\"bg-zinc-900/30 border border-white/5 p-5 sm:p-8 rounded-2xl sm:rounded-3xl\">\r\n                        <h2 className=\"text-xl sm:text-2xl font-bold mb-3 sm:mb-4 flex items-center gap-3 text-purple-400\">\r\n                            <FileCheck size={22} /> 7. Cookies e Publicidade\r\n                        </h2>\r\n                        <p className=\"text-zinc-300 text-sm sm:text-base leading-relaxed mb-4\">\r\n                            A Cred30 utiliza cookies essenciais para o funcionamento do sistema e cookies de terceiros para fins de publicidade:\r\n                        </p>\r\n                        <ul className=\"text-zinc-400 text-xs sm:text-sm space-y-2 ml-2\">\r\n                            <li><strong className=\"text-white\">ÔÇó Cookies Essenciais:</strong> Necess├írios para manter sua sess├úo ativa e segura.</li>\r\n                            <li><strong className=\"text-white\">ÔÇó Cookies de Terceiros:</strong> Nossos parceiros de publicidade (ex: Adsterra) podem utilizar cookies e tecnologias similares para coletar informa├º├Áes t├®cnicas e exibir an├║ncios relevantes.</li>\r\n                        </ul>\r\n                        <p className=\"text-zinc-500 text-[10px] mt-4 italic\">Voc├¬ pode gerenciar ou desabilitar cookies diretamente nas configura├º├Áes do seu navegador.</p>\r\n                    </section>\r\n                </div>\r\n\r\n                <footer className=\"mt-12 sm:mt-20 pt-8 sm:pt-10 border-t border-white/5 text-center\">\r\n                    <p className=\"text-zinc-500 text-xs sm:text-sm\">\r\n                        D├║vidas sobre seus dados? Entre em contato com nossa equipe de suporte.\r\n                    </p>\r\n                    <p className=\"text-zinc-600 text-xs mt-4\">\r\n                        Cred30 ┬® 2025 - Todos os direitos reservados.\r\n                    </p>\r\n                </footer>\r\n            </main>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default PrivacyPage;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josia\\Desktop\\projetos\\cred30\\packages\\frontend-v2\\src\\presentation\\pages\\security.page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","message":"Definition for rule '@typescript-eslint/no-unused-vars' was not found.","line":1,"column":1,"endLine":1,"endColumn":2,"severity":2,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { ArrowLeft, ShieldCheck, Key, Server, Cpu, Activity, Globe } from 'lucide-react';\r\n\r\nconst SecurityPage = () => {\r\n    const navigate = useNavigate();\r\n\r\n    useEffect(() => {\r\n        window.scrollTo(0, 0);\r\n    }, []);\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-zinc-950 text-white selection:bg-cyan-500/30\">\r\n            {/* Navigation */}\r\n            <nav className=\"fixed top-0 left-0 w-full z-50 bg-zinc-950/50 backdrop-blur-xl border-b border-white/5 px-6 py-4\">\r\n                <div className=\"max-w-4xl mx-auto flex justify-between items-center\">\r\n                    <button\r\n                        onClick={() => navigate('/')}\r\n                        className=\"text-zinc-500 hover:text-white transition-colors flex items-center gap-2 text-sm font-bold group\"\r\n                    >\r\n                        <ArrowLeft size={18} className=\"group-hover:-translate-x-1 transition-transform\" />\r\n                        Voltar\r\n                    </button>\r\n                    <div className=\"flex items-center gap-2\">\r\n                        <div className=\"w-8 h-8 bg-zinc-800 rounded-lg flex items-center justify-center text-white font-bold text-sm border border-white/10\">\r\n                            C\r\n                        </div>\r\n                        <span className=\"text-lg font-bold tracking-tight\">Cred<span className=\"text-cyan-400\">30</span></span>\r\n                    </div>\r\n                </div>\r\n            </nav>\r\n\r\n            <main className=\"max-w-4xl mx-auto px-6 pt-32 pb-20\">\r\n                <div className=\"mb-12\">\r\n                    <div className=\"inline-flex items-center gap-2 bg-emerald-500/10 border border-emerald-500/20 px-4 py-2 rounded-full text-emerald-400 text-sm font-bold mb-6\">\r\n                        <ShieldCheck size={16} /> Seguran├ºa de N├¡vel Corporativo\r\n                    </div>\r\n                    <h1 className=\"text-4xl md:text-5xl font-extrabold mb-4 tracking-tight\">Seguran├ºa do Sistema</h1>\r\n                    <p className=\"text-zinc-400 text-lg\">Tecnologia avan├ºada para proteger seu patrim├┤nio.</p>\r\n                </div>\r\n\r\n                <div className=\"space-y-10\">\r\n                    <div className=\"grid md:grid-cols-2 gap-8\">\r\n                        <section className=\"bg-zinc-900/30 border border-white/5 p-8 rounded-3xl hover:bg-zinc-900/50 transition-colors group\">\r\n                            <div className=\"w-12 h-12 bg-emerald-500/10 rounded-2xl flex items-center justify-center text-emerald-400 mb-6 group-hover:bg-emerald-500 group-hover:text-black transition-all\">\r\n                                <Key size={24} />\r\n                            </div>\r\n                            <h2 className=\"text-xl font-bold mb-3\">Frase Secreta (2FA)</h2>\r\n                            <p className=\"text-zinc-400 text-sm leading-relaxed\">\r\n                                Al├®m da sua senha, cada transa├º├úo importante exige sua frase secreta ├║nica. Isso garante que, mesmo em caso de perda da senha, seu dinheiro permane├ºa inating├¡vel por terceiros.\r\n                            </p>\r\n                        </section>\r\n\r\n                        <section className=\"bg-zinc-900/30 border border-white/5 p-8 rounded-3xl hover:bg-zinc-900/50 transition-colors group\">\r\n                            <div className=\"w-12 h-12 bg-blue-500/10 rounded-2xl flex items-center justify-center text-blue-400 mb-6 group-hover:bg-blue-500 group-hover:text-black transition-all\">\r\n                                <Globe size={24} />\r\n                            </div>\r\n                            <h2 className=\"text-xl font-bold mb-3\">Criptografia SSL</h2>\r\n                            <p className=\"text-zinc-400 text-sm leading-relaxed\">\r\n                                Todos os dados que trafegam entre seu dispositivo e nossos servidores s├úo protegidos por criptografia SSL de 256 bits, o mesmo padr├úo utilizado pelos maiores bancos do mundo.\r\n                            </p>\r\n                        </section>\r\n                    </div>\r\n\r\n                    <section className=\"bg-gradient-to-br from-zinc-900 to-zinc-950 border border-white/5 p-10 rounded-[3rem] relative overflow-hidden\">\r\n                        <div className=\"relative z-10\">\r\n                            <h2 className=\"text-2xl font-bold mb-6 flex items-center gap-3\">\r\n                                <Server size={24} className=\"text-emerald-400\" /> Infraestrutura Resiliente\r\n                            </h2>\r\n                            <div className=\"space-y-6\">\r\n                                <div className=\"flex gap-4\">\r\n                                    <Cpu className=\"text-zinc-500 flex-shrink-0\" size={20} />\r\n                                    <div>\r\n                                        <h3 className=\"font-bold\">Backup em Tempo Real</h3>\r\n                                        <p className=\"text-zinc-400 text-sm italic\">O registro de cada cota e transa├º├úo ├® replicado em m├║ltiplos servidores simultaneamente, evitando qualquer perda de dados.</p>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"flex gap-4\">\r\n                                    <Activity className=\"text-zinc-500 flex-shrink-0\" size={20} />\r\n                                    <div>\r\n                                        <h3 className=\"font-bold\">Monitoramento Anti-Fraude</h3>\r\n                                        <p className=\"text-zinc-400 text-sm italic\">Algoritmos de IA analisam padr├Áes de movimenta├º├úo 24/7 para detectar e bloquear tentativas de acesso suspeitas.</p>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        {/* Background Glow */}\r\n                        <div className=\"absolute -bottom-20 -right-20 w-64 h-64 bg-emerald-500/5 rounded-full blur-[100px]\"></div>\r\n                    </section>\r\n\r\n                    <section className=\"text-center py-10\">\r\n                        <p className=\"text-zinc-500 text-sm max-w-2xl mx-auto\">\r\n                            Nossa seguran├ºa baseia-se no trip├®:\r\n                            <span className=\"text-emerald-400 font-bold\"> Criptografia Robusta</span>,\r\n                            <span className=\"text-emerald-400 font-bold\"> Lastro Real</span> e\r\n                            <span className=\"text-emerald-400 font-bold\"> Verifica├º├úo de Identidade</span>.\r\n                        </p>\r\n                    </section>\r\n                </div>\r\n            </main>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default SecurityPage;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josia\\Desktop\\projetos\\cred30\\packages\\frontend-v2\\src\\presentation\\pages\\terms.page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","message":"Definition for rule '@typescript-eslint/no-unused-vars' was not found.","line":1,"column":1,"endLine":1,"endColumn":2,"severity":2,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { ArrowLeft, ScrollText, ShieldCheck, Scale, Users, Gavel, AlertTriangle, CreditCard, ClockIcon, FileText, Zap, ShoppingBag, Tag, Lock, CheckCircle2 } from 'lucide-react';\r\n\r\nconst TermsPage = () => {\r\n    const navigate = useNavigate();\r\n\r\n    useEffect(() => {\r\n        window.scrollTo(0, 0);\r\n    }, []);\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-zinc-950 text-white selection:bg-cyan-500/30\">\r\n            {/* Navigation */}\r\n            <nav className=\"fixed top-0 left-0 w-full z-50 bg-zinc-950/50 backdrop-blur-xl border-b border-white/5 px-4 sm:px-6 py-3 sm:py-4\">\r\n                <div className=\"max-w-4xl mx-auto flex justify-between items-center\">\r\n                    <button\r\n                        onClick={() => navigate(-1)}\r\n                        className=\"text-zinc-500 hover:text-white transition-colors flex items-center gap-2 text-sm font-bold group\"\r\n                    >\r\n                        <ArrowLeft size={18} className=\"group-hover:-translate-x-1 transition-transform\" />\r\n                        Voltar\r\n                    </button>\r\n                    <div className=\"flex items-center gap-2\">\r\n                        <div className=\"w-8 h-8 bg-zinc-800 rounded-lg flex items-center justify-center text-white font-bold text-sm border border-white/10\">\r\n                            C\r\n                        </div>\r\n                        <span className=\"text-lg font-bold tracking-tight\">Cred<span className=\"text-cyan-400\">30</span></span>\r\n                    </div>\r\n                </div>\r\n            </nav>\r\n\r\n            <main className=\"max-w-4xl mx-auto px-4 sm:px-6 pt-24 sm:pt-32 pb-20\">\r\n                <div className=\"mb-8 sm:mb-12\">\r\n                    <div className=\"inline-flex items-center gap-2 bg-emerald-500/10 border border-emerald-500/20 px-3 sm:px-4 py-1.5 sm:py-2 rounded-full text-emerald-400 text-xs sm:text-sm font-bold mb-4 sm:mb-6\">\r\n                        <ShieldCheck size={14} /> Estatuto Social e Blindagem Jur├¡dica\r\n                    </div>\r\n                    <h1 className=\"text-3xl sm:text-4xl md:text-5xl font-extrabold mb-3 sm:mb-4 tracking-tight\">Regulamento Interno</h1>\r\n                    <p className=\"text-zinc-400 text-sm sm:text-base leading-relaxed max-w-2xl\">\r\n                        A Cred30 N├âO ├® um banco, N├âO ├® uma fintech e N├âO ├® uma institui├º├úo financeira.\r\n                        Este software gere um <strong>Clube de Benef├¡cios Privado</strong> baseado em ajuda m├║tua e troca comunit├íria.\r\n                    </p>\r\n                </div>\r\n\r\n                <div className=\"space-y-8 sm:space-y-12\">\r\n                    {/* AVISO CRITICAL */}\r\n                    <section className=\"bg-red-500/5 border border-red-500/20 p-6 rounded-3xl\">\r\n                        <div className=\"flex items-start gap-4\">\r\n                            <div className=\"bg-red-500/20 p-2 rounded-xl text-red-400 animate-pulse\">\r\n                                <AlertTriangle size={24} />\r\n                            </div>\r\n                            <div className=\"space-y-2\">\r\n                                <h3 className=\"text-red-400 font-black uppercase text-sm tracking-widest\">Aviso de Limita├º├úo de Responsabilidade</h3>\r\n                                <p className=\"text-zinc-400 text-xs sm:text-sm leading-relaxed\">\r\n                                    Ao ingressar, o membro declara ci├¬ncia de que a plataforma atua apenas como facilitadora tecnol├│gica. Todas as opera├º├Áes de ajuda m├║tua ocorrem entre os membros (P2P), sob o risco integral dos participantes, sem garantia de rentabilidade ou fundo garantidor de cr├®dito.\r\n                                </p>\r\n                            </div>\r\n                        </div>\r\n                    </section>\r\n\r\n                    {/* Natureza Jur├¡dica Detalhada */}\r\n                    <section className=\"bg-zinc-900/30 border border-white/5 p-8 rounded-3xl\">\r\n                        <h2 className=\"text-xl sm:text-2xl font-bold mb-6 flex items-center gap-3 text-emerald-400\">\r\n                            <Scale size={24} /> 1. Estrutura de Blindagem (SCP)\r\n                        </h2>\r\n                        <div className=\"space-y-6\">\r\n                            <div className=\"flex gap-4\">\r\n                                <div className=\"text-zinc-600 font-black text-2xl italic select-none\">01</div>\r\n                                <div>\r\n                                    <h4 className=\"text-white font-bold mb-1 uppercase text-xs tracking-widest\">Sociedade em Conta de Participa├º├úo</h4>\r\n                                    <p className=\"text-zinc-400 text-sm leading-relaxed\">\r\n                                        O modelo jur├¡dico adotado ├® o de <strong>SCP (Art. 991 CC)</strong>. O ingresso do membro ocorre como \"S├│cio Participante\". N├úo h├í presta├º├úo de servi├ºos financeiros ao p├║blico em geral, mas sim uma uni├úo de capital privado para objetivo comum.\r\n                                    </p>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"flex gap-4\">\r\n                                <div className=\"text-zinc-600 font-black text-2xl italic select-none\">02</div>\r\n                                <div>\r\n                                    <h4 className=\"text-white font-bold mb-1 uppercase text-xs tracking-widest\">Inexist├¬ncia de Oferta P├║blica</h4>\r\n                                    <p className=\"text-zinc-400 text-sm leading-relaxed\">\r\n                                        A Cred30 N├âO realiza oferta p├║blica de investimentos. O acesso ├® restrito a convidados e membros aprovados pelo comit├¬ de score. Isso nos exclui da regula├º├úo da CVM (Comiss├úo de Valores Mobili├írios) quanto ├á oferta de t├¡tulos financeiros.\r\n                                    </p>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"flex gap-4\">\r\n                                <div className=\"text-zinc-600 font-black text-2xl italic select-none\">03</div>\r\n                                <div>\r\n                                    <h4 className=\"text-white font-bold mb-1 uppercase text-xs tracking-widest\">M├║tuo Social e Privado</h4>\r\n                                    <p className=\"text-zinc-400 text-sm leading-relaxed\">\r\n                                        Os apoios liberados no sistema s├úo contratos civis de <strong>M├║tuo Privado</strong> entre membros. As taxas cobradas visam a manuten├º├úo da infraestrutura e a prote├º├úo do lastro, sem configurar agiotagem ou atividade banc├íria il├¡cita.\r\n                                    </p>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Identifica├º├úo do S├│cio Ostensivo */}\r\n                        <div className=\"mt-8 pt-6 border-t border-white/5\">\r\n                            <h4 className=\"text-white font-bold mb-3 uppercase text-xs tracking-widest flex items-center gap-2\">\r\n                                <Users size={14} className=\"text-emerald-400\" />\r\n                                S├│cio Ostensivo (Respons├ível Legal)\r\n                            </h4>\r\n                            <div className=\"bg-black/30 p-4 rounded-xl border border-white/5 text-sm\">\r\n                                <p className=\"text-zinc-300\"><strong className=\"text-white\">Nome:</strong> Josias da Silva Concei├º├úo</p>\r\n                                <p className=\"text-zinc-300\"><strong className=\"text-white\">CPF:</strong> 064.XXX.XXX-XX</p>\r\n                                <p className=\"text-zinc-300\"><strong className=\"text-white\">Endere├ºo:</strong> Brasil</p>\r\n                                <p className=\"text-zinc-500 text-xs mt-2 italic\">\r\n                                    Conforme Art. 991 do C├│digo Civil, o S├│cio Ostensivo ├® o ├║nico respons├ível perante terceiros pelas obriga├º├Áes da sociedade.\r\n                                </p>\r\n                            </div>\r\n                        </div>\r\n                    </section>\r\n\r\n                    {/* O Mercado como Prova de Valor */}\r\n                    <section className=\"bg-cyan-900/10 border border-cyan-500/20 p-8 rounded-3xl relative overflow-hidden\">\r\n                        <div className=\"absolute top-0 right-0 p-10 opacity-5\">\r\n                            <ShoppingBag size={150} />\r\n                        </div>\r\n                        <h2 className=\"text-xl sm:text-2xl font-bold mb-4 flex items-center gap-3 text-cyan-400 relative z-10\">\r\n                            <ShoppingBag size={24} /> 2. O Ecossistema de Trocas\r\n                        </h2>\r\n                        <p className=\"text-zinc-300 text-sm leading-relaxed mb-6 relative z-10\">\r\n                            A Cred30 fundamenta sua exist├¬ncia jur├¡dica na opera├º├úo de um <strong>Marketplace de Bens e Servi├ºos</strong>. O saldo circulante no sistema ├® um cr├®dito de troca comunit├íria (\"Pontos de Troca\"), lastreado pelos produtos reais anunciados por outros membros.\r\n                        </p>\r\n                        <div className=\"bg-black/40 p-5 rounded-2xl border border-white/5 relative z-10\">\r\n                            <h4 className=\"text-[10px] font-black text-cyan-500 uppercase tracking-[0.2em] mb-3\">Compromisso de Transpar├¬ncia</h4>\r\n                            <p className=\"text-xs text-zinc-500 italic\">\"Nossa prioridade ├® o com├®rcio entre associados. O apoio financeiro ├® apenas um recurso secund├írio de fomento ├á economia do clube.\"</p>\r\n                        </div>\r\n                    </section>\r\n\r\n                    {/* Preven├º├úo de Crimes e Fraudes */}\r\n                    <section className=\"bg-zinc-900/30 border border-white/5 p-8 rounded-3xl\">\r\n                        <h2 className=\"text-xl sm:text-2xl font-bold mb-6 flex items-center gap-3 text-red-500\">\r\n                            <Lock size={24} /> 3. Toler├óncia Zero a Fraudes\r\n                        </h2>\r\n                        <p className=\"text-zinc-400 text-sm leading-relaxed mb-6\">\r\n                            Embora preguemos a privacidade, reservamo-nos o direito de agir preventivamente contra crimes financeiros:\r\n                        </p>\r\n                        <ul className=\"space-y-4\">\r\n                            <li className=\"flex gap-3\">\r\n                                <CheckCircle2 size={16} className=\"text-emerald-500 mt-1 shrink-0\" />\r\n                                <span className=\"text-zinc-300 text-sm italic\">O sistema monitora padr├Áes de movimenta├º├úo e pode bloquear contas suspeitas de lavagem de dinheiro ou origem il├¡cita sem aviso pr├®vio.</span>\r\n                            </li>\r\n                            <li className=\"flex gap-3\">\r\n                                <CheckCircle2 size={16} className=\"text-emerald-500 mt-1 shrink-0\" />\r\n                                <span className=\"text-zinc-300 text-sm italic\">Para retiradas acima de R$ 2.000,00, o clube poder├í solicitar comprova├º├úo de origem dos recursos ou identifica├º├úo adicional para prote├º├úo do associado ostensivo.</span>\r\n                            </li>\r\n                            <li className=\"flex gap-3\">\r\n                                <CheckCircle2 size={16} className=\"text-emerald-500 mt-1 shrink-0\" />\r\n                                <span className=\"text-zinc-300 text-sm italic\">Tentativas de fraude no sistema de Score resultam em banimento imediato e reten├º├úo de multas administrativas.</span>\r\n                            </li>\r\n                        </ul>\r\n                    </section>\r\n\r\n                    {/* AVISO DE RISCO - CR├ìTICO */}\r\n                    <section className=\"bg-red-500/10 border-2 border-red-500/30 p-6 sm:p-8 rounded-3xl\">\r\n                        <h2 className=\"text-xl sm:text-2xl font-bold mb-4 flex items-center gap-3 text-red-500\">\r\n                            <AlertTriangle size={24} /> 4. Aviso de Risco de Perda\r\n                        </h2>\r\n                        <div className=\"space-y-4\">\r\n                            <p className=\"text-red-300 text-sm sm:text-base font-bold leading-relaxed\">\r\n                                ÔÜá´©Å VOC├è PODE PERDER TODO O CAPITAL APORTADO.\r\n                            </p>\r\n                            <p className=\"text-zinc-400 text-sm leading-relaxed\">\r\n                                O sistema de apoio m├║tuo <strong className=\"text-white\">N├âO GARANTE</strong> retorno do investimento.\r\n                                Os rendimentos passados n├úo garantem rendimentos futuros.\r\n                                N├úo invista recursos que voc├¬ n├úo pode perder.\r\n                            </p>\r\n                            <p className=\"text-zinc-500 text-xs italic\">\r\n                                Ao aceitar estes termos, voc├¬ declara ci├¬ncia de que assume integralmente os riscos\r\n                                de perdas financeiras decorrentes da participa├º├úo neste sistema de ajuda m├║tua.\r\n                            </p>\r\n                        </div>\r\n                    </section>\r\n\r\n                    {/* Elegibilidade e Capacidade */}\r\n                    <section className=\"bg-zinc-900/30 border border-white/5 p-6 sm:p-8 rounded-3xl\">\r\n                        <h2 className=\"text-xl sm:text-2xl font-bold mb-4 flex items-center gap-3 text-purple-400\">\r\n                            <Users size={24} /> 5. Elegibilidade e Capacidade\r\n                        </h2>\r\n                        <ul className=\"space-y-3 text-zinc-400 text-sm\">\r\n                            <li className=\"flex gap-3\">\r\n                                <CheckCircle2 size={16} className=\"text-emerald-500 mt-1 shrink-0\" />\r\n                                <span>├ë necess├írio ter <strong className=\"text-white\">18 anos ou mais</strong> e plena capacidade civil para participar.</span>\r\n                            </li>\r\n                            <li className=\"flex gap-3\">\r\n                                <CheckCircle2 size={16} className=\"text-emerald-500 mt-1 shrink-0\" />\r\n                                <span>O cadastro ├® pessoal e intransfer├¡vel. Cada CPF pode ter apenas uma conta.</span>\r\n                            </li>\r\n                            <li className=\"flex gap-3\">\r\n                                <CheckCircle2 size={16} className=\"text-emerald-500 mt-1 shrink-0\" />\r\n                                <span>├ë obrigat├│rio possuir um <strong className=\"text-white\">c├│digo de indica├º├úo</strong> v├ílido de membro ativo.</span>\r\n                            </li>\r\n                            <li className=\"flex gap-3\">\r\n                                <CheckCircle2 size={16} className=\"text-emerald-500 mt-1 shrink-0\" />\r\n                                <span>A Cred30 reserva-se o direito de recusar ou encerrar cadastros a seu exclusivo crit├®rio.</span>\r\n                            </li>\r\n                        </ul>\r\n                    </section>\r\n\r\n                    {/* Vig├¬ncia e Rescis├úo */}\r\n                    <section className=\"bg-zinc-900/30 border border-white/5 p-6 sm:p-8 rounded-3xl\">\r\n                        <h2 className=\"text-xl sm:text-2xl font-bold mb-4 flex items-center gap-3 text-amber-400\">\r\n                            <ClockIcon size={24} /> 6. Vig├¬ncia e Rescis├úo\r\n                        </h2>\r\n                        <p className=\"text-zinc-400 text-sm leading-relaxed mb-4\">\r\n                            A associa├º├úo se encerra nas seguintes situa├º├Áes:\r\n                        </p>\r\n                        <ul className=\"space-y-3 text-zinc-400 text-sm\">\r\n                            <li className=\"flex gap-3\">\r\n                                <span className=\"text-amber-500 font-bold\">ÔÇó</span>\r\n                                <span><strong className=\"text-white\">Por vontade do membro:</strong> Mediante solicita├º├úo de exclus├úo de conta nas configura├º├Áes.</span>\r\n                            </li>\r\n                            <li className=\"flex gap-3\">\r\n                                <span className=\"text-amber-500 font-bold\">ÔÇó</span>\r\n                                <span><strong className=\"text-white\">Por inadimpl├¬ncia:</strong> Ap├│s liquida├º├úo autom├ítica de licen├ºas para quita├º├úo de d├®bitos.</span>\r\n                            </li>\r\n                            <li className=\"flex gap-3\">\r\n                                <span className=\"text-amber-500 font-bold\">ÔÇó</span>\r\n                                <span><strong className=\"text-white\">Por viola├º├úo:</strong> Tentativas de fraude, uso de m├║ltiplas contas ou comportamento abusivo.</span>\r\n                            </li>\r\n                            <li className=\"flex gap-3\">\r\n                                <span className=\"text-amber-500 font-bold\">ÔÇó</span>\r\n                                <span><strong className=\"text-white\">Por decis├úo administrativa:</strong> A crit├®rio exclusivo do S├│cio Ostensivo, sem necessidade de justificativa.</span>\r\n                            </li>\r\n                        </ul>\r\n                    </section>\r\n\r\n                    {/* Modifica├º├úo dos Termos */}\r\n                    <section className=\"bg-zinc-900/30 border border-white/5 p-6 sm:p-8 rounded-3xl\">\r\n                        <h2 className=\"text-xl sm:text-2xl font-bold mb-4 flex items-center gap-3 text-blue-400\">\r\n                            <FileText size={24} /> 7. Modifica├º├úo dos Termos\r\n                        </h2>\r\n                        <p className=\"text-zinc-400 text-sm leading-relaxed\">\r\n                            Os presentes termos podem ser alterados a qualquer momento, a crit├®rio exclusivo da administra├º├úo.\r\n                            O uso continuado da plataforma ap├│s altera├º├Áes implica <strong className=\"text-white\">aceite autom├ítico</strong> das novas condi├º├Áes.\r\n                            Membros ser├úo notificados por email sobre mudan├ºas relevantes.\r\n                        </p>\r\n                    </section>\r\n\r\n                    {/* Foro e Arbitragem */}\r\n                    <section className=\"bg-zinc-900/30 border border-white/5 p-6 sm:p-8 rounded-3xl\">\r\n                        <h2 className=\"text-xl sm:text-2xl font-bold mb-4 flex items-center gap-3 text-cyan-400\">\r\n                            <Gavel size={24} /> 8. Resolu├º├úo de Conflitos\r\n                        </h2>\r\n                        <p className=\"text-zinc-400 text-sm leading-relaxed mb-4\">\r\n                            Qualquer disputa oriunda deste contrato ser├í resolvida preferencialmente por:\r\n                        </p>\r\n                        <ol className=\"space-y-3 text-zinc-400 text-sm list-decimal list-inside\">\r\n                            <li><strong className=\"text-white\">Negocia├º├úo direta</strong> atrav├®s do suporte ao cliente.</li>\r\n                            <li><strong className=\"text-white\">Media├º├úo/Arbitragem</strong> conforme Lei 9.307/96, em c├ómara a ser definida pelo S├│cio Ostensivo.</li>\r\n                            <li>Caso necess├írio, o <strong className=\"text-white\">Foro da Comarca de S├úo Paulo/SP</strong> ├® eleito para dirimir quest├Áes n├úo resolvidas.</li>\r\n                        </ol>\r\n                        <p className=\"text-zinc-500 text-xs italic mt-4\">\r\n                            As partes renunciam a qualquer outro foro, por mais privilegiado que seja.\r\n                        </p>\r\n                    </section>\r\n\r\n                    {/* Rodap├® Jur├¡dico */}\r\n                    <section className=\"text-center space-y-4 pt-10\">\r\n                        <div className=\"w-16 h-1 bg-zinc-800 mx-auto rounded-full\"></div>\r\n                        <p className=\"text-[10px] text-zinc-600 uppercase tracking-widest font-bold\">\r\n                            Este regulamento tem for├ºa de CONTRATO SOCIAL PRIVADO entre as partes.\r\n                        </p>\r\n                        <p className=\"text-[9px] text-zinc-700 max-w-lg mx-auto leading-relaxed\">\r\n                            O uso continuado da plataforma implica na assinatura digital irrevog├ível deste estatuto.\r\n                            Qualquer d├║vida deve ser sanada via suporte administrativo antes da realiza├º├úo de qualquer contribui├º├úo.\r\n                        </p>\r\n                        <p className=\"text-[10px] text-emerald-600 font-bold mt-4\">\r\n                            Vers├úo 2.0 ÔÇó Vigente a partir de 25/12/2024\r\n                        </p>\r\n                    </section>\r\n                </div>\r\n\r\n                <footer className=\"mt-20 pt-10 border-t border-white/5 text-center\">\r\n                    <p className=\"text-zinc-600 text-[10px] uppercase font-black tracking-widest\">\r\n                        Cred30 ┬® 2025 - Sistema de Gest├úo Associativa Distribu├¡da\r\n                    </p>\r\n                </footer>\r\n            </main>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default TermsPage;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josia\\Desktop\\projetos\\cred30\\packages\\frontend-v2\\src\\presentation\\pages\\welcome.page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","message":"Definition for rule '@typescript-eslint/no-unused-vars' was not found.","line":1,"column":1,"endLine":1,"endColumn":2,"severity":2,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { ArrowRight, Shield, PiggyBank, CreditCard, Download, Smartphone, X as XIcon, ChevronDown } from 'lucide-react';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\n// Interface para o evento de instala├º├úo do PWA\r\ninterface BeforeInstallPromptEvent extends Event {\r\n  prompt: () => Promise<void>;\r\n  userChoice: Promise<{ outcome: 'accepted' | 'dismissed' }>;\r\n}\r\n\r\nconst WelcomePage = () => {\r\n  const [isLoaded, setIsLoaded] = useState(false);\r\n  const [deferredPrompt, setDeferredPrompt] = useState<BeforeInstallPromptEvent | null>(null);\r\n  const [isInstalled, setIsInstalled] = useState(false);\r\n  const [downloadProgress, setDownloadProgress] = useState(0);\r\n  const [isDownloading, setIsDownloading] = useState(false);\r\n  const [showIosGuide, setShowIosGuide] = useState(false);\r\n  const navigate = useNavigate();\r\n\r\n  // Detectar iOS\r\n  const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !(window as any).MSStream;\r\n\r\n  useEffect(() => {\r\n    setIsLoaded(true);\r\n\r\n    if (window.matchMedia('(display-mode: standalone)').matches || (window.navigator as any).standalone === true) {\r\n      setIsInstalled(true);\r\n    }\r\n\r\n    const handleBeforeInstallPrompt = (e: Event) => {\r\n      e.preventDefault();\r\n      setDeferredPrompt(e as BeforeInstallPromptEvent);\r\n    };\r\n\r\n    window.addEventListener('beforeinstallprompt', handleBeforeInstallPrompt);\r\n    window.addEventListener('appinstalled', () => {\r\n      setIsInstalled(true);\r\n      setDeferredPrompt(null);\r\n      setIsDownloading(false);\r\n    });\r\n\r\n    return () => window.removeEventListener('beforeinstallprompt', handleBeforeInstallPrompt);\r\n  }, []);\r\n\r\n  const handleInstallClick = async () => {\r\n    setIsDownloading(true);\r\n    setDownloadProgress(0);\r\n\r\n    // Chamada direta para evitar bloqueio de popup do navegador (Edge/Chrome exigem evento de clique s├¡ncrono)\r\n    if (deferredPrompt) {\r\n      deferredPrompt.prompt();\r\n      const { outcome } = await deferredPrompt.userChoice;\r\n      if (outcome === 'accepted') setDeferredPrompt(null);\r\n      setIsDownloading(false);\r\n    } else if (isIOS) {\r\n      setShowIosGuide(true);\r\n      setIsDownloading(false);\r\n    } else {\r\n      // Fallback simples se o navegador n├úo suportar ou bloquear o prompt\r\n      // Como o usu├írio pediu \"download direto\", se n├úo der, avisamos o b├ísico.\r\n      alert('A instala├º├úo autom├ítica n├úo est├í dispon├¡vel neste navegador. Tente instalar pelo menu de op├º├Áes.');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <main className=\"min-h-screen bg-zinc-950 text-white selection:bg-cyan-500/30 font-sans\">\r\n      {/* Background Aurora */}\r\n      <div className=\"fixed inset-0 overflow-hidden pointer-events-none\">\r\n        <div className=\"absolute -top-[10%] -left-[10%] w-[40%] h-[40%] bg-cyan-500/10 rounded-full blur-[120px] animate-pulse\"></div>\r\n        <div className=\"absolute top-[20%] -right-[10%] w-[30%] h-[50%] bg-blue-600/5 rounded-full blur-[100px]\"></div>\r\n      </div>\r\n\r\n      {/* Nav */}\r\n      <nav className={`relative z-10 px-6 py-8 transition-all duration-1000 ${isLoaded ? 'opacity-100' : 'opacity-0'}`}>\r\n        <div className=\"max-w-6xl mx-auto flex justify-between items-center bg-zinc-900/40 backdrop-blur-xl border border-white/5 p-4 rounded-2xl\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <img src=\"/pwa-192x192.png\" alt=\"Cred30 Logo\" width=\"40\" height=\"40\" className=\"w-10 h-10 rounded-xl shadow-[0_0_15px_rgba(34,211,238,0.4)]\" />\r\n            <span className=\"text-xl font-bold tracking-tighter\">Cred<span className=\"text-cyan-400\">30</span></span>\r\n          </div>\r\n          <button onClick={() => navigate('/auth')} className=\"bg-white text-black font-bold px-6 py-2.5 rounded-xl transition-all hover:scale-105 active:scale-95 shadow-lg shadow-white/10 text-sm\">\r\n            Entrar\r\n          </button>\r\n        </div>\r\n      </nav>\r\n\r\n      {/* Hero */}\r\n      <section className=\"relative z-10 px-6 pt-12 pb-16\">\r\n        <div className=\"max-w-4xl mx-auto text-center\">\r\n          <div className=\"inline-flex items-center gap-2 bg-emerald-500/10 border border-emerald-500/20 px-4 py-2 rounded-full text-emerald-400 text-xs font-bold mb-8\">\r\n            <Shield size={14} /> Clube de Benef├¡cios 100% Transparente\r\n          </div>\r\n          <h1 className=\"text-5xl md:text-7xl font-black mb-6 tracking-tight leading-[1] text-white\">\r\n            Cred<span className=\"text-cyan-400\">30</span>: A comunidade que <br />\r\n            <span className=\"bg-gradient-to-r from-cyan-400 to-blue-500 bg-clip-text text-transparent italic\">valoriza</span> seu tempo.\r\n          </h1>\r\n          <p className=\"text-lg text-zinc-300 mb-10 max-w-xl mx-auto leading-relaxed\">\r\n            Torne-se membro em minutos e tenha acesso a recompensas exclusivas hoje com total seguran├ºa.\r\n          </p>\r\n\r\n          <div className=\"flex flex-col gap-4 max-w-md mx-auto\">\r\n            <button\r\n              onClick={() => navigate('/auth')}\r\n              className=\"bg-cyan-500 hover:bg-cyan-400 text-black font-black py-5 px-10 rounded-2xl transition-all hover:scale-[1.02] active:scale-[0.98] flex items-center justify-center gap-3 text-lg shadow-xl shadow-cyan-500/20\"\r\n            >\r\n              Entrar no Clube\r\n              <ArrowRight className=\"w-5 h-5\" />\r\n            </button>\r\n\r\n            {/* BOT├âO DE DOWNLOAD DIRETO COM PROGRESSO */}\r\n            {!isInstalled && (\r\n              <button\r\n                onClick={handleInstallClick}\r\n                disabled={isDownloading}\r\n                className=\"relative overflow-hidden bg-zinc-900 hover:bg-zinc-800 text-white font-bold py-5 px-10 rounded-2xl transition-all hover:scale-[1.02] active:scale-[0.98] flex items-center justify-center gap-3 text-lg border border-zinc-700 disabled:opacity-90\"\r\n              >\r\n                {/* Barra de Progresso Interna */}\r\n                {isDownloading && (\r\n                  <div\r\n                    className=\"absolute inset-y-0 left-0 bg-cyan-500/20 transition-all duration-75\"\r\n                    style={{ width: `${downloadProgress}%` }}\r\n                  />\r\n                )}\r\n\r\n                <div className=\"relative z-10 flex items-center gap-3\">\r\n                  {isDownloading ? (\r\n                    <>\r\n                      <div className=\"w-5 h-5 border-2 border-cyan-400/30 border-t-cyan-400 rounded-full animate-spin\"></div>\r\n                      <span>Baixando {downloadProgress}%...</span>\r\n                    </>\r\n                  ) : (\r\n                    <>\r\n                      <Download className=\"w-6 h-6 text-cyan-400\" />\r\n                      <span>Baixar App Gr├ítis</span>\r\n                    </>\r\n                  )}\r\n                </div>\r\n              </button>\r\n            )}\r\n\r\n            {/* Pedir Convite Button */}\r\n            <a\r\n              href=\"https://wa.me/5591980177874?text=Ol%C3%A1%2C%20quero%20um%20convite%20para%20o%20Cred30!\"\r\n              target=\"_blank\"\r\n              rel=\"noopener noreferrer\"\r\n              className=\"text-center text-cyan-400 hover:text-cyan-300 font-bold text-sm py-2 hover:underline transition-all\"\r\n            >\r\n              N├úo tem convite? Pe├ºa o seu aqui\r\n            </a>\r\n\r\n            {isInstalled && (\r\n              <div className=\"flex items-center justify-center gap-2 bg-emerald-500/10 border border-emerald-500/20 px-6 py-4 rounded-2xl text-emerald-400 font-bold\">\r\n                <Smartphone className=\"w-5 h-5\" />\r\n                App Instalado com Sucesso Ô£ô\r\n              </div>\r\n            )}\r\n\r\n            <p className=\"text-zinc-400 text-xs font-medium\">Download r├ípido ÔÇó 0.5 MB ÔÇó 100% Seguro</p>\r\n          </div>\r\n        </div>\r\n      </section>\r\n\r\n      {/* Footer Minimal */}\r\n      <footer className=\"relative z-10 px-6 py-12\">\r\n        <div className=\"max-w-6xl mx-auto text-center border-t border-white/5 pt-8\">\r\n          <p className=\"text-zinc-500 text-[10px] uppercase tracking-widest mb-4\">┬® 2024 Cred30 Plataforma Digital</p>\r\n          <div className=\"flex justify-center gap-6 text-zinc-400 text-xs font-bold uppercase transition-colors\">\r\n            <button onClick={() => navigate('/terms')} className=\"hover:text-white\">Termos</button>\r\n            <button onClick={() => navigate('/privacy')} className=\"hover:text-white\">Privacidade</button>\r\n          </div>\r\n        </div>\r\n      </footer>\r\n\r\n      {/* GUIA IOS (APENAS SETA E DOWNLOAD) */}\r\n      {showIosGuide && (\r\n        <div className=\"fixed inset-0 bg-black/90 backdrop-blur-md z-[100] flex flex-col items-center justify-end pb-20 px-6\" onClick={() => setShowIosGuide(false)}>\r\n          <div className=\"w-full max-w-xs text-center animate-bounce mb-8\">\r\n            <Download size={48} className=\"text-cyan-400 mx-auto mb-4\" />\r\n            <h3 className=\"text-xl font-black text-white mb-2\">DOWNLOAD INICIADO!</h3>\r\n            <p className=\"text-zinc-400 text-sm\">Toque no ├¡cone de <span className=\"text-white font-bold\">compartilhar</span> abaixo e depois em <span className=\"text-white font-bold\">\"Adicionar ├á Tela de In├¡cio\"</span></p>\r\n          </div>\r\n\r\n          <div className=\"text-cyan-500 animate-pulse\">\r\n            <ChevronDown size={64} />\r\n          </div>\r\n\r\n          <button onClick={() => setShowIosGuide(false)} className=\"mt-12 bg-zinc-800 text-white px-8 py-3 rounded-full font-bold text-sm\">\r\n            Fechar\r\n          </button>\r\n        </div>\r\n      )}\r\n\r\n\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default WelcomePage;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josia\\Desktop\\projetos\\cred30\\packages\\frontend-v2\\src\\shared\\constants\\api.constants.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","message":"Definition for rule '@typescript-eslint/no-unused-vars' was not found.","line":1,"column":1,"endLine":1,"endColumn":2,"severity":2,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Constantes utilizadas no frontend\r\n */\r\n\r\nexport const API_BASE_URL = import.meta.env.VITE_API_URL || '/api';\r\n\r\nexport const CACHE_DURATION = {\r\n  SHORT: 5000,      // 5 segundos para dados cr├¡ticos\r\n  MEDIUM: 10000,    // 10 segundos para itens pendentes\r\n  LONG: 15000       // 15 segundos para dashboard\r\n};\r\n\r\nexport const TRANSACTION_TYPES = {\r\n  DEPOSIT: 'DEPOSIT',\r\n  WITHDRAWAL: 'WITHDRAWAL',\r\n  BUY_QUOTA: 'BUY_QUOTA',\r\n  SELL_QUOTA: 'SELL_QUOTA',\r\n  LOAN_RECEIVED: 'LOAN_RECEIVED',\r\n  LOAN_PAYMENT: 'LOAN_PAYMENT',\r\n  REFERRAL_BONUS: 'REFERRAL_BONUS'\r\n} as const;\r\n\r\nexport const TRANSACTION_STATUS = {\r\n  PENDING: 'PENDING',\r\n  APPROVED: 'APPROVED',\r\n  REJECTED: 'REJECTED'\r\n} as const;\r\n\r\nexport const LOAN_STATUS = {\r\n  PENDING: 'PENDING',\r\n  APPROVED: 'APPROVED',\r\n  PAID: 'PAID',\r\n  DEFAULTED: 'DEFAULTED',\r\n  REJECTED: 'REJECTED',\r\n  PAYMENT_PENDING: 'PAYMENT_PENDING'\r\n} as const;\r\n\r\nexport const FINANCIAL_CONSTANTS = {\r\n  QUOTA_PRICE: 50,\r\n  LOAN_INTEREST_RATE: 0.2,\r\n  PENALTY_RATE: 0.4,\r\n  VESTING_PERIOD_DAYS: 365,\r\n  PROFIT_DISTRIBUTION_RATE: 0.85 // 85% para cotistas\r\n} as const;\r\n\r\nexport const STATUS_COLORS = {\r\n  APPROVED: 'text-green-600',\r\n  REJECTED: 'text-red-600',\r\n  PENDING: 'text-yellow-600',\r\n  PAID: 'text-green-600',\r\n  DEFAULTED: 'text-red-600',\r\n  PAYMENT_PENDING: 'text-blue-600'\r\n} as const;\r\n\r\nexport const STATUS_BADGES = {\r\n  APPROVED: 'bg-green-100 text-green-800',\r\n  REJECTED: 'bg-red-100 text-red-800',\r\n  PENDING: 'bg-yellow-100 text-yellow-800',\r\n  PAID: 'bg-green-100 text-green-800',\r\n  DEFAULTED: 'bg-red-100 text-red-800',\r\n  PAYMENT_PENDING: 'bg-blue-100 text-blue-800'\r\n} as const;","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josia\\Desktop\\projetos\\cred30\\packages\\frontend-v2\\src\\shared\\constants\\app.constants.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","message":"Definition for rule '@typescript-eslint/no-unused-vars' was not found.","line":1,"column":1,"endLine":1,"endColumn":2,"severity":2,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"export const MP_PUBLIC_KEY = (import.meta as any).env.VITE_MP_PUBLIC_KEY || 'TEST-2c2e7204-2706-4caa-8c8d-9241534bd123';\r\nexport const QUOTA_PRICE = 50;\r\nexport const QUOTA_SHARE_VALUE = 42;\r\nexport const QUOTA_ADM_FEE = 8;\r\nexport const VESTING_PERIOD_MS = 365 * 24 * 60 * 60 * 1000;\r\n\r\n// API Constants\r\nexport const API_BASE_URL = import.meta.env.VITE_API_URL || '/api';\r\n\r\n// Status Constants\r\nexport const TRANSACTION_STATUS = {\r\n  PENDING: 'PENDING',\r\n  APPROVED: 'APPROVED',\r\n  REJECTED: 'REJECTED',\r\n  COMPLETED: 'COMPLETED'\r\n} as const;\r\n\r\nexport const LOAN_STATUS = {\r\n  PENDING: 'PENDING',\r\n  APPROVED: 'APPROVED',\r\n  REJECTED: 'REJECTED',\r\n  PAID: 'PAID',\r\n  PAYMENT_PENDING: 'PAYMENT_PENDING'\r\n} as const;\r\n\r\nexport const QUOTA_STATUS = {\r\n  ACTIVE: 'ACTIVE',\r\n  SOLD: 'SOLD',\r\n  PENDING: 'PENDING'\r\n} as const;\r\n\r\n// Fee Constants (Sincronizado com Asaas / business.constants.ts)\r\nexport const WITHDRAWAL_FEE_PERCENTAGE = 0; // Taxa percentual removida (Asaas ├® fixo)\r\nexport const WITHDRAWAL_FEE_FIXED = 2.00;   // Taxa de manuten├º├úo da cooperativa por saque\r\nexport const WELCOME_WITHDRAWAL_FIXED_FEE = 1.00; // Taxa reduzida para indicados (Boas-vindas)\r\nexport const WITHDRAWAL_MIN_AMOUNT = 50.00; // Valor m├¡nimo para saque\r\nexport const LOAN_INTEREST_RATE = 0.20;\r\nexport const PENALTY_RATE = 0.40;\r\nexport const MARKETPLACE_ESCROW_FEE_RATE = 0.05;\r\nexport const MARKET_CREDIT_INTEREST_RATE = 0.015;\r\nexport const MARKET_CREDIT_MAX_INSTALLMENTS = 24;\r\nexport const MARKET_CREDIT_MIN_SCORE = 450;\r\n\r\n// VIP Levels\r\nexport const VIP_LEVELS = {\r\n  BRONZE: { name: 'Bronze', minQuotas: 0, color: 'orange' },\r\n  PRATA: { name: 'Prata', minQuotas: 10, color: 'gray' },\r\n  OURO: { name: 'Ouro', minQuotas: 50, color: 'yellow' }\r\n} as const;\r\n\r\nexport const FINANCIAL_CONSTANTS = {\r\n  QUOTA_PRICE,\r\n  LOAN_INTEREST_RATE,\r\n  PENALTY_RATE,\r\n  VESTING_PERIOD_DAYS: 365,\r\n  PROFIT_DISTRIBUTION_RATE: 0.85,\r\n  QUOTA_SHARE_VALUE,\r\n  QUOTA_ADM_FEE\r\n};","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josia\\Desktop\\projetos\\cred30\\packages\\frontend-v2\\src\\shared\\constants\\legal.constants.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","message":"Definition for rule '@typescript-eslint/no-unused-vars' was not found.","line":1,"column":1,"endLine":1,"endColumn":2,"severity":2,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * CONSTANTES JUR├ìDICAS - BLINDAGEM LEGAL CRED30\r\n * ===============================================\r\n * Este arquivo centraliza todos os textos legais do sistema.\r\n * Atualizado em: Dezembro 2024\r\n * \r\n * IMPORTANTE: Qualquer altera├º├úo neste arquivo deve ser revisada\r\n * por um advogado especializado em Direito Digital e Financeiro.\r\n */\r\n\r\n// Natureza Jur├¡dica Principal\r\nexport const LEGAL_ENTITY_TYPE = 'SOCIEDADE EM CONTA DE PARTICIPA├ç├âO (SCP)';\r\nexport const LEGAL_BASE = 'Art. 991 a 996 do C├│digo Civil Brasileiro';\r\n\r\n// Disclaimers Padr├úo\r\nexport const DISCLAIMERS = {\r\n    NOT_A_BANK: 'A Cred30 N├âO ├® um banco, N├âO ├® uma fintech regulada pelo Banco Central, N├âO ├® uma cooperativa de cr├®dito (Lei 5.764/71) e N├âO ├® uma institui├º├úo financeira. Trata-se de um clube privado de benef├¡cios operando sob o regime de Sociedade em Conta de Participa├º├úo (Art. 991 CC).',\r\n\r\n    NO_INVESTMENT: 'As participa├º├Áes (cotas) adquiridas N├âO configuram oferta de investimento, N├âO s├úo valores mobili├írios (Lei 6.385/76), N├âO t├¬m garantia de rentabilidade e N├âO s├úo reguladas pela CVM. Trata-se de contribui├º├úo associativa para participa├º├úo em clube fechado.',\r\n\r\n    MUTUAL_AID: 'Os apoios financeiros disponibilizados N├âO s├úo empr├®stimos banc├írios. S├úo opera├º├Áes de m├║tuo civil privado (Art. 586 CC) entre membros da comunidade, sujeitos a disponibilidade de caixa e an├ílise de score interno.',\r\n\r\n    RISK_DISCLOSURE: 'O membro declara ci├¬ncia de que: (i) n├úo h├í fundo garantidor de cr├®dito; (ii) os valores aportados est├úo sujeitos a riscos inerentes a opera├º├Áes entre particulares; (iii) a plataforma atua apenas como facilitadora tecnol├│gica, sem assumir obriga├º├Áes financeiras pr├│prias.',\r\n\r\n    NOT_INTEREST_RATE: 'A \"Taxa de Manuten├º├úo\" cobrada sobre apoios m├║tuos N├âO configura juros banc├írios (Art. 591 CC). Trata-se de contribui├º├úo para manuten├º├úo da infraestrutura tecnol├│gica e forma├º├úo de reserva de prote├º├úo ao lastro comum.',\r\n\r\n    SCORE_INTERNAL: 'O Score Cred30 ├® uma m├®trica interna e privada, utilizada exclusivamente para gest├úo de limites dentro do clube. N├âO ├® compartilhado com bureaus de cr├®dito externos (SPC, Serasa, Boa Vista) e N├âO afeta a vida financeira do membro fora da plataforma.',\r\n\r\n    AML_KYC: 'Em conformidade com a Lei 9.613/98 (Preven├º├úo ├á Lavagem de Dinheiro), a Cred30 reserva-se o direito de solicitar documenta├º├úo comprobat├│ria de origem de recursos e bloquear contas com movimenta├º├úo at├¡pica, reportando ├ás autoridades competentes quando necess├írio.',\r\n\r\n    LGPD_COMPLIANCE: 'O tratamento de dados pessoais segue a Lei Geral de Prote├º├úo de Dados (Lei 13.709/2018). O membro pode exercer seus direitos de acesso, corre├º├úo, exclus├úo e portabilidade a qualquer momento via configura├º├Áes da conta.',\r\n\r\n    ARBITRATION: 'Eventuais conflitos ser├úo resolvidos preferencialmente por media├º├úo entre as partes. Persistindo o impasse, fica eleito o foro da comarca de Bel├®m/PA para dirimir quest├Áes relativas a este regulamento.',\r\n\r\n    FOOTER_LEGAL: '┬® 2024 Cred30 - Clube de Benef├¡cios Privado. CNPJ em processo de formaliza├º├úo. Opera├º├úo sob regime de SCP (Art. 991 CC). Esta plataforma n├úo realiza opera├º├Áes privativas de institui├º├Áes financeiras. D├║vidas: suporte@cred30.site'\r\n};\r\n\r\n// Termos Espec├¡ficos para Substitui├º├úo (evitar palavras proibidas)\r\nexport const LEGAL_TERMINOLOGY = {\r\n    // NUNCA USE                    // USE SEMPRE\r\n    'empr├®stimo': 'Apoio M├║tuo',\r\n    'empr├®stimos': 'Apoios M├║tuos',\r\n    'emprestar': 'solicitar apoio',\r\n    'juros': 'Taxa de Manuten├º├úo',\r\n    'taxa de juros': 'contribui├º├úo de manuten├º├úo',\r\n    'investimento': 'participa├º├úo',\r\n    'investir': 'participar',\r\n    'investidor': 'membro participante',\r\n    'rendimento': 'benef├¡cio',\r\n    'rentabilidade': 'valoriza├º├úo de participa├º├úo',\r\n    'dividendos': 'distribui├º├úo de excedentes',\r\n    'lucro': 'excedente operacional',\r\n    'cliente': 'membro',\r\n    'clientes': 'membros',\r\n    'banco': 'clube',\r\n    'conta banc├íria': 'conta de membro',\r\n    'saldo banc├írio': 'saldo de participa├º├úo',\r\n    'cr├®dito': 'apoio m├║tuo',\r\n    'financiamento': 'apoio programado',\r\n    'parcela': 'reposi├º├úo',\r\n    'parcelas': 'reposi├º├Áes',\r\n    'd├¡vida': 'compromisso social',\r\n    'devedor': 'membro em reposi├º├úo',\r\n    'cobran├ºa': 'lembrete de reposi├º├úo',\r\n    'inadimpl├¬ncia': 'atraso de reposi├º├úo',\r\n    'garantia': 'lastro',\r\n    'colateral': 'lastro em participa├º├Áes'\r\n};\r\n\r\n// Cl├íusulas Obrigat├│rias no Contrato de Apoio M├║tuo\r\nexport const MUTUAL_AID_CONTRACT_CLAUSES = {\r\n    OBJECT: 'DO OBJETO: O presente instrumento particular de m├║tuo civil fener├¡cio, regido pelo Art. 586 e seguintes do C├│digo Civil Brasileiro, tem por objeto a transfer├¬ncia tempor├íria de recursos entre MEMBROS PARTICIPANTES do clube de benef├¡cios Cred30, operando sob o regime de Sociedade em Conta de Participa├º├úo (SCP) conforme Art. 991 CC.',\r\n\r\n    NATURE: 'DA NATUREZA JUR├ìDICA: As partes reconhecem expressamente que esta opera├º├úo N├âO configura atividade privativa de institui├º├úo financeira (Art. 17 Lei 4.595/64), tratando-se de opera├º├úo civil entre particulares, com lastro em participa├º├Áes ativas no clube.',\r\n\r\n    MAINTENANCE_FEE: 'DA TAXA DE MANUTEN├ç├âO: A contribui├º├úo adicional de 20% (vinte por cento) sobre o valor principal destina-se exclusivamente ├á manuten├º├úo da infraestrutura tecnol├│gica da plataforma, forma├º├úo de reserva de prote├º├úo coletiva e custos operacionais, n├úo configurando juros banc├írios.',\r\n\r\n    GUARANTEE: 'DO LASTRO E EXECU├ç├âO: O membro mutu├írio autoriza expressamente que, em caso de atraso superior a 5 (cinco) dias na reposi├º├úo, suas participa├º├Áes ativas no clube sejam executadas para satisfa├º├úo do compromisso, sem necessidade de notifica├º├úo pr├®via adicional.',\r\n\r\n    WAIVER: 'DA ISEN├ç├âO DE RESPONSABILIDADE: O membro declara ci├¬ncia de que a plataforma Cred30 atua exclusivamente como facilitadora tecnol├│gica, n├úo assumindo qualquer responsabilidade por inadimplemento entre as partes ou por eventuais perdas decorrentes da opera├º├úo.',\r\n\r\n    VOLUNTARY: 'DA VOLUNTARIEDADE: O membro declara que est├í solicitando este apoio por livre e espont├ónea vontade, sem coa├º├úo, estando ciente de todas as condi├º├Áes, taxas e prazos envolvidos.',\r\n\r\n    JURISDICTION: 'DO FORO: As partes elegem o foro da comarca de Bel├®m/PA para dirimir quaisquer controv├®rsias oriundas do presente instrumento, com ren├║ncia expressa a qualquer outro, por mais privilegiado que seja.'\r\n};\r\n\r\n// Texto do Aceite de Termos (exibido no cadastro)\r\nexport const TERMS_ACCEPTANCE_TEXT = `\r\nAo criar minha conta na Cred30, declaro que:\r\n\r\n1. TENHO CI├èNCIA de que a Cred30 N├âO ├® um banco, N├âO ├® uma fintech regulada e N├âO ├® uma institui├º├úo financeira.\r\n\r\n2. COMPREENDO que estou ingressando como S├ôCIO PARTICIPANTE em uma Sociedade em Conta de Participa├º├úo (Art. 991 CC) com objetivo de ajuda m├║tua entre membros.\r\n\r\n3. ACEITO que os apoios financeiros s├úo opera├º├Áes de m├║tuo civil privado, sujeitas a disponibilidade de caixa e an├ílise de score interno, sem garantia de aprova├º├úo.\r\n\r\n4. DECLARO que os recursos aportados s├úo de origem l├¡cita e autorizo a Cred30 a solicitar comprova├º├úo quando necess├írio.\r\n\r\n5. RECONHE├çO que n├úo h├í fundo garantidor de cr├®dito e que assumo integralmente os riscos inerentes ├ás opera├º├Áes do clube.\r\n\r\n6. AUTORIZO o tratamento dos meus dados pessoais nos termos da LGPD (Lei 13.709/2018) conforme Pol├¡tica de Privacidade.\r\n\r\n7. CONCORDO que eventuais conflitos sejam resolvidos preferencialmente por media├º├úo, elegendo o foro de Bel├®m/PA.\r\n\r\nLi e aceito integralmente o Regulamento Interno e a Pol├¡tica de Privacidade da Cred30.\r\n`;\r\n\r\n// Aviso de Risco para tela de Apoio M├║tuo\r\nexport const MUTUAL_AID_RISK_WARNING = 'Ao solicitar um apoio m├║tuo, voc├¬ est├í firmando um contrato de m├║tuo civil privado (Art. 586 CC) com lastro em suas participa├º├Áes ativas. Em caso de atraso na reposi├º├úo, suas participa├º├Áes poder├úo ser executadas automaticamente. A disponibilidade est├í sujeita ao caixa do clube.';\r\n\r\n// Cl├íusulas Adicionais Recomendadas\r\nexport const TERMINATION_CLAUSE = `\r\nDA RESCIS├âO: O membro poder├í solicitar a rescis├úo de sua participa├º├úo no clube a qualquer momento mediante notifica├º├úo pr├®via de 30 dias. Neste caso:\r\n- O saldo dispon├¡vel ser├í devolvido em at├® 15 dias ├║teis;\r\n- As participa├º├Áes ativas ser├úo liquidadas pelo valor de aquisi├º├úo;\r\n- O membro renuncia a quaisquer reivindica├º├Áes futuras sobre excedentes operacionais.\r\n`;\r\n\r\nexport const TERMS_MODIFICATION_CLAUSE = `\r\nDAS ALTERA├ç├òES: A Cred30 reserva-se o direito de alterar este regulamento a qualquer momento, mediante comunica├º├úo pr├®via de 30 dias aos membros. O uso continuado da plataforma ap├│s as altera├º├Áes constitui aceita├º├úo t├ícita dos novos termos.\r\n`;\r\n\r\nexport const DATA_RETENTION_CLAUSE = `\r\nDA RETEN├ç├âO DE DADOS: Ap├│s a exclus├úo da conta, a Cred30 manter├í os dados por per├¡odo de 5 (cinco) anos para cumprimento de obriga├º├Áes legais, fiscais e cont├íbeis, conforme Art. 12, ┬º 1┬║ da LGPD.\r\n`;\r\n\r\n// Footer Legal Padr├úo\r\nexport const LEGAL_FOOTER = `\r\nCred30 - Clube de Benef├¡cios Privado e Apoio M├║tuo\r\nOpera├º├úo sob regime de Sociedade em Conta de Participa├º├úo (Art. 991 CC)\r\nN├âO somos banco. N├âO somos fintech regulada. N├âO somos cooperativa de cr├®dito.\r\n┬® ${new Date().getFullYear()} Todos os direitos reservados.\r\n`;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josia\\Desktop\\projetos\\cred30\\packages\\frontend-v2\\src\\shared\\utils\\financial.utils.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","message":"Definition for rule '@typescript-eslint/no-unused-vars' was not found.","line":1,"column":1,"endLine":1,"endColumn":2,"severity":2,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { MARKETPLACE_ESCROW_FEE_RATE } from '../constants/app.constants';\r\n\r\n// Taxas do Asaas (Gateway de Pagamento) - Sincronizadas com o Backend\r\nexport const MERCADO_PAGO_PIX_FEE_PERCENT = 0.0099; // 0.99% para PIX\r\nexport const MERCADO_PAGO_FIXED_FEE = 0.00; // R$ 0,00 fixo\r\n\r\n// Cart├úo de Cr├®dito: 2.99% + R$ 0.49 (Asaas - mais barato que MP)\r\nexport const MERCADO_PAGO_CARD_FEE_PERCENT = 0.0299; // 2.99% para Cart├úo (Asaas)\r\nexport const MERCADO_PAGO_CARD_FIXED_FEE = 0.49; // R$ 0,49 fixo (Asaas)\r\n\r\nexport type PaymentMethod = 'pix' | 'card' | 'balance';\r\n\r\n/**\r\n * Calcula o valor total que o usu├írio deve pagar com repasse de taxas (Gross-up)\r\n * Sincronizado com a l├│gica de prote├º├úo do caixa da cooperativa.\r\n */\r\nexport const calculateTotalToPay = (amount: number, method: PaymentMethod = 'pix'): {\r\n    baseAmount: number;\r\n    fee: number;\r\n    total: number;\r\n} => {\r\n    if (method === 'balance') {\r\n        return {\r\n            baseAmount: amount,\r\n            fee: 0,\r\n            total: amount\r\n        };\r\n    }\r\n\r\n    // Para m├®todos externos (PIX e Cart├úo), usamos a f├│rmula de Gross-up \r\n    // para que o valor L├ìQUIDO recebido seja exatamente o amount.\r\n    // F├│rmula: Total = (Valor + TaxaFixa) / (1 - TaxaPercentual)\r\n\r\n    const percent = method === 'pix' ? MERCADO_PAGO_PIX_FEE_PERCENT : MERCADO_PAGO_CARD_FEE_PERCENT;\r\n    const fixed = method === 'pix' ? MERCADO_PAGO_FIXED_FEE : MERCADO_PAGO_CARD_FIXED_FEE;\r\n\r\n    const total = (amount + fixed) / (1 - percent);\r\n    const fee = total - amount;\r\n\r\n    return {\r\n        baseAmount: amount,\r\n        fee: Number(fee.toFixed(2)),\r\n        total: Number(total.toFixed(2))\r\n    };\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josia\\Desktop\\projetos\\cred30\\packages\\frontend-v2\\src\\shared\\utils\\format.utils.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","message":"Definition for rule '@typescript-eslint/no-unused-vars' was not found.","line":1,"column":1,"endLine":1,"endColumn":2,"severity":2,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Utilit├írios de formata├º├úo para valores monet├írios e datas\r\n */\r\n\r\nexport const formatCurrency = (value: number): string => {\r\n  return new Intl.NumberFormat('pt-BR', {\r\n    style: 'currency',\r\n    currency: 'BRL'\r\n  }).format(value);\r\n};\r\n\r\nexport const formatDateTime = (timestamp: number): string => {\r\n  return new Intl.DateTimeFormat('pt-BR', {\r\n    dateStyle: 'short',\r\n    timeStyle: 'short',\r\n    timeZone: 'America/Sao_Paulo'\r\n  }).format(new Date(timestamp));\r\n};\r\n\r\nexport const formatDate = (timestamp: number): string => {\r\n  return new Intl.DateTimeFormat('pt-BR', {\r\n    dateStyle: 'short',\r\n    timeZone: 'America/Sao_Paulo'\r\n  }).format(new Date(timestamp));\r\n};\r\n\r\nexport const formatPercent = (value: number): string => {\r\n  return new Intl.NumberFormat('pt-BR', {\r\n    style: 'percent',\r\n    minimumFractionDigits: 1,\r\n    maximumFractionDigits: 2\r\n  }).format(value);\r\n};","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josia\\Desktop\\projetos\\cred30\\packages\\frontend-v2\\src\\shared\\utils\\sound.utils.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","message":"Definition for rule '@typescript-eslint/no-unused-vars' was not found.","line":1,"column":1,"endLine":1,"endColumn":2,"severity":2,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Classe utilit├íria para gerar efeitos sonoros usando Web Audio API\r\nclass SoundManager {\r\n    private ctx: AudioContext | null = null;\r\n    private isMuted: boolean = false;\r\n\r\n    constructor() {\r\n        // Inicializar contexto de ├íudio apenas na intera├º├úo do usu├írio\r\n        try {\r\n            const AudioContext = (window as any).AudioContext || (window as any).webkitAudioContext;\r\n            if (AudioContext) {\r\n                this.ctx = new AudioContext();\r\n            }\r\n        } catch (e) {\r\n            console.error('Web Audio API n├úo suportada');\r\n        }\r\n    }\r\n\r\n    private init() {\r\n        if (!this.ctx) {\r\n            const AudioContext = (window as any).AudioContext || (window as any).webkitAudioContext;\r\n            if (AudioContext) this.ctx = new AudioContext();\r\n        }\r\n        if (this.ctx && this.ctx.state === 'suspended') {\r\n            this.ctx.resume();\r\n        }\r\n    }\r\n\r\n    public toggleMute() {\r\n        this.isMuted = !this.isMuted;\r\n        return this.isMuted;\r\n    }\r\n\r\n    // Som de Giro (Ru├¡do mec├ónico / Tictictic)\r\n    public playSpin() {\r\n        if (this.isMuted || !this.ctx) return;\r\n        this.init();\r\n\r\n        const oscillator = this.ctx.createOscillator();\r\n        const gainNode = this.ctx.createGain();\r\n\r\n        oscillator.type = 'square';\r\n        oscillator.frequency.setValueAtTime(100, this.ctx.currentTime);\r\n        oscillator.frequency.exponentialRampToValueAtTime(600, this.ctx.currentTime + 0.1);\r\n\r\n        gainNode.gain.setValueAtTime(0.05, this.ctx.currentTime);\r\n        gainNode.gain.exponentialRampToValueAtTime(0.01, this.ctx.currentTime + 0.1);\r\n\r\n        oscillator.connect(gainNode);\r\n        gainNode.connect(this.ctx.destination);\r\n\r\n        oscillator.start();\r\n        oscillator.stop(this.ctx.currentTime + 0.1);\r\n    }\r\n\r\n    // Som de Vit├│ria (Arpejo)\r\n    public playWin() {\r\n        if (this.isMuted || !this.ctx) return;\r\n        this.init();\r\n\r\n        const now = this.ctx.currentTime;\r\n\r\n        // Notas: C4, E4, G4, C5 (D├│ Maior)\r\n        const notes = [261.63, 329.63, 392.00, 523.25, 523.25, 523.25];\r\n\r\n        notes.forEach((freq, i) => {\r\n            const osc = this.ctx!.createOscillator();\r\n            const gain = this.ctx!.createGain();\r\n\r\n            osc.type = i === notes.length - 1 ? 'square' : 'triangle';\r\n            osc.frequency.setValueAtTime(freq, now + i * 0.1);\r\n\r\n            gain.gain.setValueAtTime(0, now + i * 0.1);\r\n            gain.gain.linearRampToValueAtTime(0.1, now + i * 0.1 + 0.05);\r\n            gain.gain.exponentialRampToValueAtTime(0.001, now + i * 0.1 + 0.3);\r\n\r\n            osc.connect(gain);\r\n            gain.connect(this.ctx!.destination);\r\n\r\n            osc.start(now + i * 0.1);\r\n            osc.stop(now + i * 0.1 + 0.3);\r\n        });\r\n    }\r\n\r\n    // Som de Moeda (Insert Coin)\r\n    public playCoin() {\r\n        if (this.isMuted || !this.ctx) return;\r\n        this.init();\r\n\r\n        const osc = this.ctx.createOscillator();\r\n        const gain = this.ctx.createGain();\r\n\r\n        osc.type = 'sine';\r\n        osc.frequency.setValueAtTime(1000, this.ctx.currentTime);\r\n        osc.frequency.linearRampToValueAtTime(1500, this.ctx.currentTime + 0.1);\r\n\r\n        gain.gain.setValueAtTime(0.05, this.ctx.currentTime);\r\n        gain.gain.exponentialRampToValueAtTime(0.01, this.ctx.currentTime + 0.1);\r\n\r\n        osc.connect(gain);\r\n        gain.connect(this.ctx.destination);\r\n\r\n        osc.start();\r\n        osc.stop(this.ctx.currentTime + 0.1);\r\n    }\r\n\r\n    // Som de Jackpot (Mais longo e vibrante)\r\n    public playJackpot() {\r\n        if (this.isMuted || !this.ctx) return;\r\n        this.init();\r\n\r\n        const now = this.ctx.currentTime;\r\n        // Sequ├¬ncia r├ípida\r\n        for (let i = 0; i < 10; i++) {\r\n            const osc = this.ctx.createOscillator();\r\n            const gain = this.ctx.createGain();\r\n            osc.type = 'sawtooth';\r\n            osc.frequency.setValueAtTime(200 + (i * 50), now + i * 0.1);\r\n            gain.gain.setValueAtTime(0.1, now + i * 0.1);\r\n            gain.gain.exponentialRampToValueAtTime(0.01, now + i * 0.1 + 0.1);\r\n            osc.connect(gain);\r\n            gain.connect(this.ctx.destination);\r\n            osc.start(now + i * 0.1);\r\n            osc.stop(now + i * 0.1 + 0.1);\r\n        }\r\n    }\r\n\r\n    // Som de Erro (Buzzer)\r\n    public playError() {\r\n        if (this.isMuted || !this.ctx) return;\r\n        this.init();\r\n\r\n        const osc = this.ctx.createOscillator();\r\n        const gain = this.ctx.createGain();\r\n\r\n        osc.type = 'sawtooth';\r\n        osc.frequency.setValueAtTime(150, this.ctx.currentTime);\r\n        osc.frequency.linearRampToValueAtTime(100, this.ctx.currentTime + 0.3);\r\n\r\n        gain.gain.setValueAtTime(0.1, this.ctx.currentTime);\r\n        gain.gain.linearRampToValueAtTime(0.01, this.ctx.currentTime + 0.3);\r\n\r\n        osc.connect(gain);\r\n        gain.connect(this.ctx.destination);\r\n\r\n        osc.start();\r\n        osc.stop(this.ctx.currentTime + 0.3);\r\n    }\r\n}\r\n\r\nexport const soundManager = new SoundManager();\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\josia\\Desktop\\projetos\\cred30\\packages\\frontend-v2\\src\\vite-env.d.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","message":"Definition for rule '@typescript-eslint/no-unused-vars' was not found.","line":1,"column":1,"endLine":1,"endColumn":2,"severity":2,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/// <reference types=\"vite/client\" />\r\n/// <reference types=\"vite-plugin-pwa/client\" />\r\n","usedDeprecatedRules":[]}]
