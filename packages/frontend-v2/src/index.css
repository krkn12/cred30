@import "tailwindcss/base";
@import "tailwindcss/components";
@import "tailwindcss/utilities";

@layer base {

    :root {
        --safe-top: env(safe-area-inset-top, 0px);
        --safe-bottom: env(safe-area-inset-bottom, 0px);
        --safe-left: env(safe-area-inset-left, 0px);
        --safe-right: env(safe-area-inset-right, 0px);
        --header-height: 72px;
        --dock-height: 80px;
    }

    html,
    body,
    #root {
        height: 100%;
        min-height: 100dvh;
        overflow-x: hidden;
        -webkit-overflow-scrolling: touch;
    }

    body {
        @apply bg-background text-white select-none;
        -webkit-tap-highlight-color: transparent;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        overscroll-behavior-y: none;
        /* Garante que o conteúdo não fique escondido sob a status bar em PWAs instalados */
        padding-top: var(--safe-top); 
        padding-left: var(--safe-left);
        padding-right: var(--safe-right);
    }

    /* Evitar zoom automático em inputs no iOS (font-size < 16px causa zoom) */
    input,
    select,
    textarea {
        font-size: 16px !important;
        @apply bg-surface border-surfaceHighlight focus:ring-2 focus:ring-primary-500/50 transition-all;
    }

    /* Safe area Helpers */
    .pt-safe { padding-top: var(--safe-top); }
    .pb-safe { padding-bottom: calc(var(--safe-bottom) + 1rem); }
    .mb-safe { margin-bottom: var(--safe-bottom); }
    .mt-safe { margin-top: var(--safe-top); }
}

@layer utilities {

    /* Container responsivo personalizado */
    .container-responsive {
        @apply w-full px-4 sm:px-6 md:px-8 max-w-7xl mx-auto;
    }

    /* Texto responsivo */
    .text-responsive-sm {
        @apply text-sm sm:text-base;
    }

    .text-responsive-lg {
        @apply text-lg sm:text-xl md:text-2xl;
    }

    .text-responsive-xl {
        @apply text-xl sm:text-2xl md:text-3xl;
    }

    /* Cards responsivos */
    .card-responsive {
        @apply rounded-xl sm:rounded-2xl md:rounded-3xl p-4 sm:p-5 md:p-6;
    }

    /* Grid responsivo para cards */
    .grid-responsive {
        @apply grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 sm:gap-6;
    }

    /* Esconder em mobile */
    .hide-mobile {
        @apply hidden sm:block;
    }

    .hide-desktop {
        @apply block sm:hidden;
    }

    /* Botões touch-friendly */
    .btn-touch {
        @apply min-h-[44px] min-w-[44px];
    }

    /* Glassmorphism Premium */
    .glass {
        @apply bg-white/5 backdrop-blur-md border border-white/10 shadow-xl;
    }

    .glass-strong {
        @apply bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl;
    }

    .glass-hover {
        @apply transition-all duration-300 hover:bg-white/10 hover:border-white/20 hover:scale-[1.02] active:scale-[0.98];
    }

    /* Gradients */
    .text-gradient {
        @apply bg-clip-text text-transparent bg-gradient-to-r from-primary-400 to-emerald-400;
    }

    .bg-gradient-premium {
        @apply bg-gradient-to-br from-surface to-[#0e0e11];
    }

    /* Animations */
    .animate-float {
        animation: float 6s ease-in-out infinite;
    }

    /* Hide scrollbar but keep functionality */
    .no-scrollbar::-webkit-scrollbar {
        display: none;
    }

    .no-scrollbar {
        -ms-overflow-style: none; /* IE and Edge */
        scrollbar-width: none; /* Firefox */
    }

    @keyframes float {

        0%,
        100% {
            transform: translateY(0);
        }

        50% {
            transform: translateY(-10px);
        }
    }

    /* Toque suave e Feedback */
    .active-scale {
        @apply active:scale-95 transition-transform duration-200;
    }

    /* Scroll Horizontal Suave para Cards */
    .h-scroll {
        @apply flex overflow-x-auto snap-x snap-mandatory no-scrollbar gap-4 px-4;
    }

    .h-scroll-item {
        @apply snap-center shrink-0;
    }
}

/* Custom scrollbar */
::-webkit-scrollbar {
    width: 8px;
    height: 8px;
}

::-webkit-scrollbar-track {
    background: #18181b;
}

::-webkit-scrollbar-thumb {
    background: #3f3f46;
    border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
    background: #52525b;
}

/* Modal responsivo */
.modal-responsive {
    width: 100%;
    max-width: 28rem;
    max-height: 90dvh;
    overflow-y: auto;
    margin: 0 auto;
    scrollbar-width: none;
    /* Firefox */
}

.modal-responsive::-webkit-scrollbar {
    display: none;
    /* Safari and Chrome */
}

@media (min-width: 640px) {
    .modal-responsive {
        width: 95vw;
        max-width: 32rem;
    }
}

@media (min-width: 768px) {
    .modal-responsive {
        max-width: 36rem;
    }
}

/* Animação suave para transições */
.transition-smooth {
    transition: all 300ms ease-in-out;
}

/* Toast Notification Animations */
@keyframes shrink {
    from {
        width: 100%;
    }
    to {
        width: 0%;
    }
}

.animate-shrink {
    animation: shrink linear forwards;
}

@keyframes slide-in-from-right {
    from {
        opacity: 0;
        transform: translateX(100%);
    }
    to {
        opacity: 1;
        transform: translateX(0);
    }
}

.animate-in {
    animation: slide-in-from-right 0.3s ease-out;
}